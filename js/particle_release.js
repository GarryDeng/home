!function (e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
        if (!e.document)throw new Error("jQuery requires a window with a document");
        return t(e)
    } : t(e)
}("undefined" != typeof window ? window : this, function (a, b) {
    function s(e) {
        var t = "length" in e && e.length, r = n.type(e);
        return "function" === r || n.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === r || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
    }

    function x(e, t, r) {
        if (n.isFunction(t))return n.grep(e, function (e, n) {
            return !!t.call(e, n, e) !== r
        });
        if (t.nodeType)return n.grep(e, function (e) {
            return e === t !== r
        });
        if ("string" == typeof t) {
            if (w.test(t))return n.filter(t, e, r);
            t = n.filter(t, e)
        }
        return n.grep(e, function (e) {
            return g.call(t, e) >= 0 !== r
        })
    }

    function D(e, t) {
        while ((e = e[t]) && 1 !== e.nodeType);
        return e
    }

    function G(e) {
        var t = F[e] = {};
        return n.each(e.match(E) || [], function (e, n) {
            t[n] = !0
        }), t
    }

    function I() {
        l.removeEventListener("DOMContentLoaded", I, !1), a.removeEventListener("load", I, !1), n.ready()
    }

    function K() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function () {
                return {}
            }
        }), this.expando = n.expando + K.uid++
    }

    function P(e, t, r) {
        var i;
        if (void 0 === r && 1 === e.nodeType)if (i = "data-" + t.replace(O, "-$1").toLowerCase(), r = e.getAttribute(i), "string" == typeof r) {
            try {
                r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : N.test(r) ? n.parseJSON(r) : r
            } catch (s) {
            }
            M.set(e, t, r)
        } else r = void 0;
        return r
    }

    function Z() {
        return !0
    }

    function $() {
        return !1
    }

    function _() {
        try {
            return l.activeElement
        } catch (e) {
        }
    }

    function ja(e, t) {
        return n.nodeName(e, "table") && n.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
    }

    function ka(e) {
        return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
    }

    function la(e) {
        var t = ga.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e
    }

    function ma(e, t) {
        for (var n = 0, r = e.length; r > n; n++)L.set(e[n], "globalEval", !t || L.get(t[n], "globalEval"))
    }

    function na(e, t) {
        var r, i, s, o, u, a, f, l;
        if (1 === t.nodeType) {
            if (L.hasData(e) && (o = L.access(e), u = L.set(t, o), l = o.events)) {
                delete u.handle, u.events = {};
                for (s in l)for (r = 0, i = l[s].length; i > r; r++)n.event.add(t, s, l[s][r])
            }
            M.hasData(e) && (a = M.access(e), f = n.extend({}, a), M.set(t, f))
        }
    }

    function oa(e, t) {
        var r = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
        return void 0 === t || t && n.nodeName(e, t) ? n.merge([e], r) : r
    }

    function pa(e, t) {
        var n = t.nodeName.toLowerCase();
        "input" === n && T.test(e.type) ? t.checked = e.checked : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
    }

    function sa(e, t) {
        var r, i = n(t.createElement(e)).appendTo(t.body),
            s = a.getDefaultComputedStyle && (r = a.getDefaultComputedStyle(i[0])) ? r.display : n.css(i[0], "display");
        return i.detach(), s
    }

    function ta(e) {
        var t = l, r = ra[e];
        return r || (r = sa(e, t), "none" !== r && r || (qa = (qa || n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = qa[0].contentDocument, t.write(), t.close(), r = sa(e, t), qa.detach()), ra[e] = r), r
    }

    function xa(e, t, r) {
        var i, s, o, u, a = e.style;
        return r = r || wa(e), r && (u = r.getPropertyValue(t) || r[t]), r && ("" !== u || n.contains(e.ownerDocument, e) || (u = n.style(e, t)), va.test(u) && ua.test(t) && (i = a.width, s = a.minWidth, o = a.maxWidth, a.minWidth = a.maxWidth = a.width = u, u = r.width, a.width = i, a.minWidth = s, a.maxWidth = o)), void 0 !== u ? u + "" : u
    }

    function ya(e, t) {
        return {
            get: function () {
                return e() ? void delete this.get : (this.get = t).apply(this, arguments)
            }
        }
    }

    function Fa(e, t) {
        if (t in e)return t;
        var n = t[0].toUpperCase() + t.slice(1), r = t, i = Ea.length;
        while (i--)if (t = Ea[i] + n, t in e)return t;
        return r
    }

    function Ga(e, t, n) {
        var r = Aa.exec(t);
        return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
    }

    function Ha(e, t, r, i, s) {
        for (var o = r === (i ? "border" : "content") ? 4 : "width" === t ? 1 : 0,
                 u = 0; 4 > o; o += 2)"margin" === r && (u += n.css(e, r + R[o], !0, s)), i ? ("content" === r && (u -= n.css(e, "padding" + R[o], !0, s)), "margin" !== r && (u -= n.css(e, "border" + R[o] + "Width", !0, s))) : (u += n.css(e, "padding" + R[o], !0, s), "padding" !== r && (u += n.css(e, "border" + R[o] + "Width", !0, s)));
        return u
    }

    function Ia(e, t, r) {
        var i = !0, s = "width" === t ? e.offsetWidth : e.offsetHeight, o = wa(e),
            u = "border-box" === n.css(e, "boxSizing", !1, o);
        if (0 >= s || null == s) {
            if (s = xa(e, t, o), (0 > s || null == s) && (s = e.style[t]), va.test(s))return s;
            i = u && (k.boxSizingReliable() || s === e.style[t]), s = parseFloat(s) || 0
        }
        return s + Ha(e, t, r || (u ? "border" : "content"), i, o) + "px"
    }

    function Ja(e, t) {
        for (var r, i, s, o = [], u = 0,
                 a = e.length; a > u; u++)i = e[u], i.style && (o[u] = L.get(i, "olddisplay"), r = i.style.display, t ? (o[u] || "none" !== r || (i.style.display = ""), "" === i.style.display && S(i) && (o[u] = L.access(i, "olddisplay", ta(i.nodeName)))) : (s = S(i), "none" === r && s || L.set(i, "olddisplay", s ? r : n.css(i, "display"))));
        for (u = 0; a > u; u++)i = e[u], i.style && (t && "none" !== i.style.display && "" !== i.style.display || (i.style.display = t ? o[u] || "" : "none"));
        return e
    }

    function Ka(e, t, n, r, i) {
        return new Ka.prototype.init(e, t, n, r, i)
    }

    function Sa() {
        return setTimeout(function () {
            La = void 0
        }), La = n.now()
    }

    function Ta(e, t) {
        var n, r = 0, i = {height: e};
        for (t = t ? 1 : 0; 4 > r; r += 2 - t)n = R[r], i["margin" + n] = i["padding" + n] = e;
        return t && (i.opacity = i.width = e), i
    }

    function Ua(e, t, n) {
        for (var r, i = (Ra[t] || []).concat(Ra["*"]), s = 0,
                 o = i.length; o > s; s++)if (r = i[s].call(n, t, e))return r
    }

    function Va(e, t, r) {
        var i, s, o, u, a, f, l, c, h = this, p = {}, d = e.style, v = e.nodeType && S(e), m = L.get(e, "fxshow");
        r.queue || (a = n._queueHooks(e, "fx"), null == a.unqueued && (a.unqueued = 0, f = a.empty.fire, a.empty.fire = function () {
            a.unqueued || f()
        }), a.unqueued++, h.always(function () {
            h.always(function () {
                a.unqueued--, n.queue(e, "fx").length || a.empty.fire()
            })
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (r.overflow = [d.overflow, d.overflowX, d.overflowY], l = n.css(e, "display"), c = "none" === l ? L.get(e, "olddisplay") || ta(e.nodeName) : l, "inline" === c && "none" === n.css(e, "float") && (d.display = "inline-block")), r.overflow && (d.overflow = "hidden", h.always(function () {
            d.overflow = r.overflow[0], d.overflowX = r.overflow[1], d.overflowY = r.overflow[2]
        }));
        for (i in t)if (s = t[i], Na.exec(s)) {
            if (delete t[i], o = o || "toggle" === s, s === (v ? "hide" : "show")) {
                if ("show" !== s || !m || void 0 === m[i])continue;
                v = !0
            }
            p[i] = m && m[i] || n.style(e, i)
        } else l = void 0;
        if (n.isEmptyObject(p)) "inline" === ("none" === l ? ta(e.nodeName) : l) && (d.display = l); else {
            m ? "hidden" in m && (v = m.hidden) : m = L.access(e, "fxshow", {}), o && (m.hidden = !v), v ? n(e).show() : h.done(function () {
                n(e).hide()
            }), h.done(function () {
                var t;
                L.remove(e, "fxshow");
                for (t in p)n.style(e, t, p[t])
            });
            for (i in p)u = Ua(v ? m[i] : 0, i, h), i in m || (m[i] = u.start, v && (u.end = u.start, u.start = "width" === i || "height" === i ? 1 : 0))
        }
    }

    function Wa(e, t) {
        var r, i, s, o, u;
        for (r in e)if (i = n.camelCase(r), s = t[i], o = e[r], n.isArray(o) && (s = o[1], o = e[r] = o[0]), r !== i && (e[i] = o, delete e[r]), u = n.cssHooks[i], u && "expand" in u) {
            o = u.expand(o), delete e[i];
            for (r in o)r in e || (e[r] = o[r], t[r] = s)
        } else t[i] = s
    }

    function Xa(e, t, r) {
        var i, s, o = 0, u = Qa.length, a = n.Deferred().always(function () {
            delete f.elem
        }), f = function () {
            if (s)return !1;
            for (var t = La || Sa(), n = Math.max(0, l.startTime + l.duration - t), r = n / l.duration || 0, i = 1 - r,
                     o = 0, u = l.tweens.length; u > o; o++)l.tweens[o].run(i);
            return a.notifyWith(e, [l, i, n]), 1 > i && u ? n : (a.resolveWith(e, [l]), !1)
        }, l = a.promise({
            elem: e,
            props: n.extend({}, t),
            opts: n.extend(!0, {specialEasing: {}}, r),
            originalProperties: t,
            originalOptions: r,
            startTime: La || Sa(),
            duration: r.duration,
            tweens: [],
            createTween: function (t, r) {
                var i = n.Tween(e, l.opts, t, r, l.opts.specialEasing[t] || l.opts.easing);
                return l.tweens.push(i), i
            },
            stop: function (t) {
                var n = 0, r = t ? l.tweens.length : 0;
                if (s)return this;
                for (s = !0; r > n; n++)l.tweens[n].run(1);
                return t ? a.resolveWith(e, [l, t]) : a.rejectWith(e, [l, t]), this
            }
        }), c = l.props;
        for (Wa(c, l.opts.specialEasing); u > o; o++)if (i = Qa[o].call(l, e, c, l.opts))return i;
        return n.map(c, Ua, l), n.isFunction(l.opts.start) && l.opts.start.call(e, l), n.fx.timer(n.extend(f, {
            elem: e,
            anim: l,
            queue: l.opts.queue
        })), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
    }

    function qb(e) {
        return function (t, r) {
            "string" != typeof t && (r = t, t = "*");
            var i, s = 0, o = t.toLowerCase().match(E) || [];
            if (n.isFunction(r))while (i = o[s++])"+" === i[0] ? (i = i.slice(1) || "*", (e[i] = e[i] || []).unshift(r)) : (e[i] = e[i] || []).push(r)
        }
    }

    function rb(e, t, r, i) {
        function u(l) {
            var h;
            return s[l] = !0, n.each(e[l] || [], function (e, n) {
                var a = n(t, r, i);
                return "string" != typeof a || o || s[a] ? o ? !(h = a) : void 0 : (t.dataTypes.unshift(a), u(a), !1)
            }), h
        }

        var s = {}, o = e === mb;
        return u(t.dataTypes[0]) || !s["*"] && u("*")
    }

    function sb(e, t) {
        var r, i, s = n.ajaxSettings.flatOptions || {};
        for (r in t)void 0 !== t[r] && ((s[r] ? e : i || (i = {}))[r] = t[r]);
        return i && n.extend(!0, e, i), e
    }

    function tb(e, t, n) {
        var r, i, s, o, u = e.contents, a = e.dataTypes;
        while ("*" === a[0])a.shift(), void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
        if (r)for (i in u)if (u[i] && u[i].test(r)) {
            a.unshift(i);
            break
        }
        if (a[0] in n) s = a[0]; else {
            for (i in n) {
                if (!a[0] || e.converters[i + " " + a[0]]) {
                    s = i;
                    break
                }
                o || (o = i)
            }
            s = s || o
        }
        return s ? (s !== a[0] && a.unshift(s), n[s]) : void 0
    }

    function ub(e, t, n, r) {
        var i, s, o, u, a, f = {}, l = e.dataTypes.slice();
        if (l[1])for (o in e.converters)f[o.toLowerCase()] = e.converters[o];
        s = l.shift();
        while (s)if (e.responseFields[s] && (n[e.responseFields[s]] = t), !a && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), a = s, s = l.shift())if ("*" === s) s = a; else if ("*" !== a && a !== s) {
            if (o = f[a + " " + s] || f["* " + s], !o)for (i in f)if (u = i.split(" "), u[1] === s && (o = f[a + " " + u[0]] || f["* " + u[0]])) {
                o === !0 ? o = f[i] : f[i] !== !0 && (s = u[0], l.unshift(u[1]));
                break
            }
            if (o !== !0)if (o && e["throws"]) t = o(t); else try {
                t = o(t)
            } catch (c) {
                return {state: "parsererror", error: o ? c : "No conversion from " + a + " to " + s}
            }
        }
        return {state: "success", data: t}
    }

    function Ab(e, t, r, i) {
        var s;
        if (n.isArray(t)) n.each(t, function (t, n) {
            r || wb.test(e) ? i(e, n) : Ab(e + "[" + ("object" == typeof n ? t : "") + "]", n, r, i)
        }); else if (r || "object" !== n.type(t)) i(e, t); else for (s in t)Ab(e + "[" + s + "]", t[s], r, i)
    }

    function Jb(e) {
        return n.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
    }

    var c = [], d = c.slice, e = c.concat, f = c.push, g = c.indexOf, h = {}, i = h.toString, j = h.hasOwnProperty,
        k = {}, l = a.document, m = "2.1.4", n = function (e, t) {
            return new n.fn.init(e, t)
        }, o = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, p = /^-ms-/, q = /-([\da-z])/gi, r = function (e, t) {
            return t.toUpperCase()
        };
    n.fn = n.prototype = {
        jquery: m, constructor: n, selector: "", length: 0, toArray: function () {
            return d.call(this)
        }, get: function (e) {
            return null != e ? 0 > e ? this[e + this.length] : this[e] : d.call(this)
        }, pushStack: function (e) {
            var t = n.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t
        }, each: function (e, t) {
            return n.each(this, e, t)
        }, map: function (e) {
            return this.pushStack(n.map(this, function (t, n) {
                return e.call(t, n, t)
            }))
        }, slice: function () {
            return this.pushStack(d.apply(this, arguments))
        }, first: function () {
            return this.eq(0)
        }, last: function () {
            return this.eq(-1)
        }, eq: function (e) {
            var t = this.length, n = +e + (0 > e ? t : 0);
            return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
        }, end: function () {
            return this.prevObject || this.constructor(null)
        }, push: f, sort: c.sort, splice: c.splice
    }, n.extend = n.fn.extend = function () {
        var e, t, r, i, s, o, u = arguments[0] || {}, a = 1, f = arguments.length, l = !1;
        for ("boolean" == typeof u && (l = u, u = arguments[a] || {}, a++), "object" == typeof u || n.isFunction(u) || (u = {}), a === f && (u = this, a--); f > a; a++)if (null != (e = arguments[a]))for (t in e)r = u[t], i = e[t], u !== i && (l && i && (n.isPlainObject(i) || (s = n.isArray(i))) ? (s ? (s = !1, o = r && n.isArray(r) ? r : []) : o = r && n.isPlainObject(r) ? r : {}, u[t] = n.extend(l, o, i)) : void 0 !== i && (u[t] = i));
        return u
    }, n.extend({
        expando: "jQuery" + (m + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) {
            throw new Error(e)
        }, noop: function () {
        }, isFunction: function (e) {
            return "function" === n.type(e)
        }, isArray: Array.isArray, isWindow: function (e) {
            return null != e && e === e.window
        }, isNumeric: function (e) {
            return !n.isArray(e) && e - parseFloat(e) + 1 >= 0
        }, isPlainObject: function (e) {
            return "object" !== n.type(e) || e.nodeType || n.isWindow(e) ? !1 : e.constructor && !j.call(e.constructor.prototype, "isPrototypeOf") ? !1 : !0
        }, isEmptyObject: function (e) {
            var t;
            for (t in e)return !1;
            return !0
        }, type: function (e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? h[i.call(e)] || "object" : typeof e
        }, globalEval: function (a) {
            var b, c = eval;
            a = n.trim(a), a && (1 === a.indexOf("use strict") ? (b = l.createElement("script"), b.text = a, l.head.appendChild(b).parentNode.removeChild(b)) : c(a))
        }, camelCase: function (e) {
            return e.replace(p, "ms-").replace(q, r)
        }, nodeName: function (e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        }, each: function (e, t, n) {
            var r, i = 0, o = e.length, u = s(e);
            if (n) {
                if (u) {
                    for (; o > i; i++)if (r = t.apply(e[i], n), r === !1)break
                } else for (i in e)if (r = t.apply(e[i], n), r === !1)break
            } else if (u) {
                for (; o > i; i++)if (r = t.call(e[i], i, e[i]), r === !1)break
            } else for (i in e)if (r = t.call(e[i], i, e[i]), r === !1)break;
            return e
        }, trim: function (e) {
            return null == e ? "" : (e + "").replace(o, "")
        }, makeArray: function (e, t) {
            var r = t || [];
            return null != e && (s(Object(e)) ? n.merge(r, "string" == typeof e ? [e] : e) : f.call(r, e)), r
        }, inArray: function (e, t, n) {
            return null == t ? -1 : g.call(t, e, n)
        }, merge: function (e, t) {
            for (var n = +t.length, r = 0, i = e.length; n > r; r++)e[i++] = t[r];
            return e.length = i, e
        }, grep: function (e, t, n) {
            for (var r, i = [], s = 0, o = e.length, u = !n; o > s; s++)r = !t(e[s], s), r !== u && i.push(e[s]);
            return i
        }, map: function (t, n, r) {
            var i, o = 0, u = t.length, a = s(t), f = [];
            if (a)for (; u > o; o++)i = n(t[o], o, r), null != i && f.push(i); else for (o in t)i = n(t[o], o, r), null != i && f.push(i);
            return e.apply([], f)
        }, guid: 1, proxy: function (e, t) {
            var r, i, s;
            return "string" == typeof t && (r = e[t], t = e, e = r), n.isFunction(e) ? (i = d.call(arguments, 2), s = function () {
                return e.apply(t || this, i.concat(d.call(arguments)))
            }, s.guid = e.guid = e.guid || n.guid++, s) : void 0
        }, now: Date.now, support: k
    }), n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (e, t) {
        h["[object " + t + "]"] = t.toLowerCase()
    });
    var t = function (e) {
        function ot(e, t, r, i) {
            var s, u, f, l, c, d, g, y, S, x;
            if ((t ? t.ownerDocument || t : E) !== p && h(t), t = t || p, r = r || [], l = t.nodeType, "string" != typeof e || !e || 1 !== l && 9 !== l && 11 !== l)return r;
            if (!i && v) {
                if (11 !== l && (s = Z.exec(e)))if (f = s[1]) {
                    if (9 === l) {
                        if (u = t.getElementById(f), !u || !u.parentNode)return r;
                        if (u.id === f)return r.push(u), r
                    } else if (t.ownerDocument && (u = t.ownerDocument.getElementById(f)) && b(t, u) && u.id === f)return r.push(u), r
                } else {
                    if (s[2])return D.apply(r, t.getElementsByTagName(e)), r;
                    if ((f = s[3]) && n.getElementsByClassName)return D.apply(r, t.getElementsByClassName(f)), r
                }
                if (n.qsa && (!m || !m.test(e))) {
                    if (y = g = w, S = t, x = 1 !== l && e, 1 === l && "object" !== t.nodeName.toLowerCase()) {
                        d = o(e), (g = t.getAttribute("id")) ? y = g.replace(tt, "\\$&") : t.setAttribute("id", y), y = "[id='" + y + "'] ", c = d.length;
                        while (c--)d[c] = y + gt(d[c]);
                        S = et.test(e) && vt(t.parentNode) || t, x = d.join(",")
                    }
                    if (x)try {
                        return D.apply(r, S.querySelectorAll(x)), r
                    } catch (T) {
                    } finally {
                        g || t.removeAttribute("id")
                    }
                }
            }
            return a(e.replace(z, "$1"), t, r, i)
        }

        function ut() {
            function t(n, i) {
                return e.push(n + " ") > r.cacheLength && delete t[e.shift()], t[n + " "] = i
            }

            var e = [];
            return t
        }

        function at(e) {
            return e[w] = !0, e
        }

        function ft(e) {
            var t = p.createElement("div");
            try {
                return !!e(t)
            } catch (n) {
                return !1
            } finally {
                t.parentNode && t.parentNode.removeChild(t), t = null
            }
        }

        function lt(e, t) {
            var n = e.split("|"), i = e.length;
            while (i--)r.attrHandle[n[i]] = t
        }

        function ct(e, t) {
            var n = t && e,
                r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || L) - (~e.sourceIndex || L);
            if (r)return r;
            if (n)while (n = n.nextSibling)if (n === t)return -1;
            return e ? 1 : -1
        }

        function ht(e) {
            return function (t) {
                var n = t.nodeName.toLowerCase();
                return "input" === n && t.type === e
            }
        }

        function pt(e) {
            return function (t) {
                var n = t.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && t.type === e
            }
        }

        function dt(e) {
            return at(function (t) {
                return t = +t, at(function (n, r) {
                    var i, s = e([], n.length, t), o = s.length;
                    while (o--)n[i = s[o]] && (n[i] = !(r[i] = n[i]))
                })
            })
        }

        function vt(e) {
            return e && "undefined" != typeof e.getElementsByTagName && e
        }

        function mt() {
        }

        function gt(e) {
            for (var t = 0, n = e.length, r = ""; n > t; t++)r += e[t].value;
            return r
        }

        function yt(e, t, n) {
            var r = t.dir, i = n && "parentNode" === r, s = x++;
            return t.first ? function (t, n, s) {
                while (t = t[r])if (1 === t.nodeType || i)return e(t, n, s)
            } : function (t, n, o) {
                var u, a, f = [S, s];
                if (o) {
                    while (t = t[r])if ((1 === t.nodeType || i) && e(t, n, o))return !0
                } else while (t = t[r])if (1 === t.nodeType || i) {
                    if (a = t[w] || (t[w] = {}), (u = a[r]) && u[0] === S && u[1] === s)return f[2] = u[2];
                    if (a[r] = f, f[2] = e(t, n, o))return !0
                }
            }
        }

        function bt(e) {
            return e.length > 1 ? function (t, n, r) {
                var i = e.length;
                while (i--)if (!e[i](t, n, r))return !1;
                return !0
            } : e[0]
        }

        function wt(e, t, n) {
            for (var r = 0, i = t.length; i > r; r++)ot(e, t[r], n);
            return n
        }

        function Et(e, t, n, r, i) {
            for (var s, o = [], u = 0, a = e.length,
                     f = null != t; a > u; u++)(s = e[u]) && (!n || n(s, r, i)) && (o.push(s), f && t.push(u));
            return o
        }

        function St(e, t, n, r, i, s) {
            return r && !r[w] && (r = St(r)), i && !i[w] && (i = St(i, s)), at(function (s, o, u, a) {
                var f, l, c, h = [], p = [], d = o.length, v = s || wt(t || "*", u.nodeType ? [u] : u, []),
                    m = !e || !s && t ? v : Et(v, h, e, u, a), g = n ? i || (s ? e : d || r) ? [] : o : m;
                if (n && n(m, g, u, a), r) {
                    f = Et(g, p), r(f, [], u, a), l = f.length;
                    while (l--)(c = f[l]) && (g[p[l]] = !(m[p[l]] = c))
                }
                if (s) {
                    if (i || e) {
                        if (i) {
                            f = [], l = g.length;
                            while (l--)(c = g[l]) && f.push(m[l] = c);
                            i(null, g = [], f, a)
                        }
                        l = g.length;
                        while (l--)(c = g[l]) && (f = i ? H(s, c) : h[l]) > -1 && (s[f] = !(o[f] = c))
                    }
                } else g = Et(g === o ? g.splice(d, g.length) : g), i ? i(null, o, g, a) : D.apply(o, g)
            })
        }

        function xt(e) {
            for (var t, n, i, s = e.length, o = r.relative[e[0].type], u = o || r.relative[" "], a = o ? 1 : 0,
                     l = yt(function (e) {
                         return e === t
                     }, u, !0), c = yt(function (e) {
                    return H(t, e) > -1
                }, u, !0), h = [function (e, n, r) {
                    var i = !o && (r || n !== f) || ((t = n).nodeType ? l(e, n, r) : c(e, n, r));
                    return t = null, i
                }]; s > a; a++)if (n = r.relative[e[a].type]) h = [yt(bt(h), n)]; else {
                if (n = r.filter[e[a].type].apply(null, e[a].matches), n[w]) {
                    for (i = ++a; s > i; i++)if (r.relative[e[i].type])break;
                    return St(a > 1 && bt(h), a > 1 && gt(e.slice(0, a - 1).concat({value: " " === e[a - 2].type ? "*" : ""})).replace(z, "$1"), n, i > a && xt(e.slice(a, i)), s > i && xt(e = e.slice(i)), s > i && gt(e))
                }
                h.push(n)
            }
            return bt(h)
        }

        function Tt(e, t) {
            var n = t.length > 0, i = e.length > 0, s = function (s, o, u, a, l) {
                var c, h, d, v = 0, m = "0", g = s && [], y = [], b = f, w = s || i && r.find.TAG("*", l),
                    E = S += null == b ? 1 : Math.random() || .1, x = w.length;
                for (l && (f = o !== p && o); m !== x && null != (c = w[m]); m++) {
                    if (i && c) {
                        h = 0;
                        while (d = e[h++])if (d(c, o, u)) {
                            a.push(c);
                            break
                        }
                        l && (S = E)
                    }
                    n && ((c = !d && c) && v--, s && g.push(c))
                }
                if (v += m, n && m !== v) {
                    h = 0;
                    while (d = t[h++])d(g, y, o, u);
                    if (s) {
                        if (v > 0)while (m--)g[m] || y[m] || (y[m] = M.call(a));
                        y = Et(y)
                    }
                    D.apply(a, y), l && !s && y.length > 0 && v + t.length > 1 && ot.uniqueSort(a)
                }
                return l && (S = E, f = b), g
            };
            return n ? at(s) : s
        }

        var t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w = "sizzle" + 1 * new Date, E = e.document, S = 0,
            x = 0, T = ut(), N = ut(), C = ut(), k = function (e, t) {
                return e === t && (c = !0), 0
            }, L = 1 << 31, A = {}.hasOwnProperty, O = [], M = O.pop, _ = O.push, D = O.push, P = O.slice,
            H = function (e, t) {
                for (var n = 0, r = e.length; r > n; n++)if (e[n] === t)return n;
                return -1
            },
            B = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            j = "[\\x20\\t\\r\\n\\f]", F = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", I = F.replace("w", "w#"),
            q = "\\[" + j + "*(" + F + ")(?:" + j + "*([*^$|!~]?=)" + j + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + I + "))|)" + j + "*\\]",
            R = ":(" + F + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + q + ")*)|.*)\\)|)",
            U = new RegExp(j + "+", "g"), z = new RegExp("^" + j + "+|((?:^|[^\\\\])(?:\\\\.)*)" + j + "+$", "g"),
            W = new RegExp("^" + j + "*," + j + "*"), X = new RegExp("^" + j + "*([>+~]|" + j + ")" + j + "*"),
            V = new RegExp("=" + j + "*([^\\]'\"]*?)" + j + "*\\]", "g"), $ = new RegExp(R),
            J = new RegExp("^" + I + "$"), K = {
                ID: new RegExp("^#(" + F + ")"),
                CLASS: new RegExp("^\\.(" + F + ")"),
                TAG: new RegExp("^(" + F.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + q),
                PSEUDO: new RegExp("^" + R),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + j + "*(even|odd|(([+-]|)(\\d*)n|)" + j + "*(?:([+-]|)" + j + "*(\\d+)|))" + j + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + B + ")$", "i"),
                needsContext: new RegExp("^" + j + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + j + "*((?:-\\d)?\\d*)" + j + "*\\)|)(?=[^-]|$)", "i")
            }, Q = /^(?:input|select|textarea|button)$/i, G = /^h\d$/i, Y = /^[^{]+\{\s*\[native \w/,
            Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, et = /[+~]/, tt = /'|\\/g,
            nt = new RegExp("\\\\([\\da-f]{1,6}" + j + "?|(" + j + ")|.)", "ig"), rt = function (e, t, n) {
                var r = "0x" + t - 65536;
                return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
            }, it = function () {
                h()
            };
        try {
            D.apply(O = P.call(E.childNodes), E.childNodes), O[E.childNodes.length].nodeType
        } catch (st) {
            D = {
                apply: O.length ? function (e, t) {
                    _.apply(e, P.call(t))
                } : function (e, t) {
                    var n = e.length, r = 0;
                    while (e[n++] = t[r++]);
                    e.length = n - 1
                }
            }
        }
        n = ot.support = {}, s = ot.isXML = function (e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return t ? "HTML" !== t.nodeName : !1
        }, h = ot.setDocument = function (e) {
            var t, i, o = e ? e.ownerDocument || e : E;
            return o !== p && 9 === o.nodeType && o.documentElement ? (p = o, d = o.documentElement, i = o.defaultView, i && i !== i.top && (i.addEventListener ? i.addEventListener("unload", it, !1) : i.attachEvent && i.attachEvent("onunload", it)), v = !s(o), n.attributes = ft(function (e) {
                return e.className = "i", !e.getAttribute("className")
            }), n.getElementsByTagName = ft(function (e) {
                return e.appendChild(o.createComment("")), !e.getElementsByTagName("*").length
            }), n.getElementsByClassName = Y.test(o.getElementsByClassName), n.getById = ft(function (e) {
                return d.appendChild(e).id = w, !o.getElementsByName || !o.getElementsByName(w).length
            }), n.getById ? (r.find.ID = function (e, t) {
                if ("undefined" != typeof t.getElementById && v) {
                    var n = t.getElementById(e);
                    return n && n.parentNode ? [n] : []
                }
            }, r.filter.ID = function (e) {
                var t = e.replace(nt, rt);
                return function (e) {
                    return e.getAttribute("id") === t
                }
            }) : (delete r.find.ID, r.filter.ID = function (e) {
                var t = e.replace(nt, rt);
                return function (e) {
                    var n = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                    return n && n.value === t
                }
            }), r.find.TAG = n.getElementsByTagName ? function (e, t) {
                return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0
            } : function (e, t) {
                var n, r = [], i = 0, s = t.getElementsByTagName(e);
                if ("*" === e) {
                    while (n = s[i++])1 === n.nodeType && r.push(n);
                    return r
                }
                return s
            }, r.find.CLASS = n.getElementsByClassName && function (e, t) {
                    return v ? t.getElementsByClassName(e) : void 0
                }, g = [], m = [], (n.qsa = Y.test(o.querySelectorAll)) && (ft(function (e) {
                d.appendChild(e).innerHTML = "<a id='" + w + "'></a><select id='" + w + "-\f]' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && m.push("[*^$]=" + j + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || m.push("\\[" + j + "*(?:value|" + B + ")"), e.querySelectorAll("[id~=" + w + "-]").length || m.push("~="), e.querySelectorAll(":checked").length || m.push(":checked"), e.querySelectorAll("a#" + w + "+*").length || m.push(".#.+[+~]")
            }), ft(function (e) {
                var t = o.createElement("input");
                t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && m.push("name" + j + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || m.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), m.push(",.*:")
            })), (n.matchesSelector = Y.test(y = d.matches || d.webkitMatchesSelector || d.mozMatchesSelector || d.oMatchesSelector || d.msMatchesSelector)) && ft(function (e) {
                n.disconnectedMatch = y.call(e, "div"), y.call(e, "[s!='']:x"), g.push("!=", R)
            }), m = m.length && new RegExp(m.join("|")), g = g.length && new RegExp(g.join("|")), t = Y.test(d.compareDocumentPosition), b = t || Y.test(d.contains) ? function (e, t) {
                var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode;
                return e === r || !!r && 1 === r.nodeType && !!(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))
            } : function (e, t) {
                if (t)while (t = t.parentNode)if (t === e)return !0;
                return !1
            }, k = t ? function (e, t) {
                if (e === t)return c = !0, 0;
                var r = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return r ? r : (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & r || !n.sortDetached && t.compareDocumentPosition(e) === r ? e === o || e.ownerDocument === E && b(E, e) ? -1 : t === o || t.ownerDocument === E && b(E, t) ? 1 : l ? H(l, e) - H(l, t) : 0 : 4 & r ? -1 : 1)
            } : function (e, t) {
                if (e === t)return c = !0, 0;
                var n, r = 0, i = e.parentNode, s = t.parentNode, u = [e], a = [t];
                if (!i || !s)return e === o ? -1 : t === o ? 1 : i ? -1 : s ? 1 : l ? H(l, e) - H(l, t) : 0;
                if (i === s)return ct(e, t);
                n = e;
                while (n = n.parentNode)u.unshift(n);
                n = t;
                while (n = n.parentNode)a.unshift(n);
                while (u[r] === a[r])r++;
                return r ? ct(u[r], a[r]) : u[r] === E ? -1 : a[r] === E ? 1 : 0
            }, o) : p
        }, ot.matches = function (e, t) {
            return ot(e, null, null, t)
        }, ot.matchesSelector = function (e, t) {
            if ((e.ownerDocument || e) !== p && h(e), t = t.replace(V, "='$1']"), !(!n.matchesSelector || !v || g && g.test(t) || m && m.test(t)))try {
                var r = y.call(e, t);
                if (r || n.disconnectedMatch || e.document && 11 !== e.document.nodeType)return r
            } catch (i) {
            }
            return ot(t, p, null, [e]).length > 0
        }, ot.contains = function (e, t) {
            return (e.ownerDocument || e) !== p && h(e), b(e, t)
        }, ot.attr = function (e, t) {
            (e.ownerDocument || e) !== p && h(e);
            var i = r.attrHandle[t.toLowerCase()],
                s = i && A.call(r.attrHandle, t.toLowerCase()) ? i(e, t, !v) : void 0;
            return void 0 !== s ? s : n.attributes || !v ? e.getAttribute(t) : (s = e.getAttributeNode(t)) && s.specified ? s.value : null
        }, ot.error = function (e) {
            throw new Error("Syntax error, unrecognized expression: " + e)
        }, ot.uniqueSort = function (e) {
            var t, r = [], i = 0, s = 0;
            if (c = !n.detectDuplicates, l = !n.sortStable && e.slice(0), e.sort(k), c) {
                while (t = e[s++])t === e[s] && (i = r.push(s));
                while (i--)e.splice(r[i], 1)
            }
            return l = null, e
        }, i = ot.getText = function (e) {
            var t, n = "", r = 0, s = e.nodeType;
            if (s) {
                if (1 === s || 9 === s || 11 === s) {
                    if ("string" == typeof e.textContent)return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling)n += i(e)
                } else if (3 === s || 4 === s)return e.nodeValue
            } else while (t = e[r++])n += i(t);
            return n
        }, r = ot.selectors = {
            cacheLength: 50,
            createPseudo: at,
            match: K,
            attrHandle: {},
            find: {},
            relative: {
                ">": {dir: "parentNode", first: !0},
                " ": {dir: "parentNode"},
                "+": {dir: "previousSibling", first: !0},
                "~": {dir: "previousSibling"}
            },
            preFilter: {
                ATTR: function (e) {
                    return e[1] = e[1].replace(nt, rt), e[3] = (e[3] || e[4] || e[5] || "").replace(nt, rt), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                }, CHILD: function (e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || ot.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && ot.error(e[0]), e
                }, PSEUDO: function (e) {
                    var t, n = !e[6] && e[2];
                    return K.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && $.test(n) && (t = o(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                }
            },
            filter: {
                TAG: function (e) {
                    var t = e.replace(nt, rt).toLowerCase();
                    return "*" === e ? function () {
                        return !0
                    } : function (e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t
                    }
                }, CLASS: function (e) {
                    var t = T[e + " "];
                    return t || (t = new RegExp("(^|" + j + ")" + e + "(" + j + "|$)")) && T(e, function (e) {
                            return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "")
                        })
                }, ATTR: function (e, t, n) {
                    return function (r) {
                        var i = ot.attr(r, e);
                        return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i.replace(U, " ") + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0
                    }
                }, CHILD: function (e, t, n, r, i) {
                    var s = "nth" !== e.slice(0, 3), o = "last" !== e.slice(-4), u = "of-type" === t;
                    return 1 === r && 0 === i ? function (e) {
                        return !!e.parentNode
                    } : function (t, n, a) {
                        var f, l, c, h, p, d, v = s !== o ? "nextSibling" : "previousSibling", m = t.parentNode,
                            g = u && t.nodeName.toLowerCase(), y = !a && !u;
                        if (m) {
                            if (s) {
                                while (v) {
                                    c = t;
                                    while (c = c[v])if (u ? c.nodeName.toLowerCase() === g : 1 === c.nodeType)return !1;
                                    d = v = "only" === e && !d && "nextSibling"
                                }
                                return !0
                            }
                            if (d = [o ? m.firstChild : m.lastChild], o && y) {
                                l = m[w] || (m[w] = {}), f = l[e] || [], p = f[0] === S && f[1], h = f[0] === S && f[2], c = p && m.childNodes[p];
                                while (c = ++p && c && c[v] || (h = p = 0) || d.pop())if (1 === c.nodeType && ++h && c === t) {
                                    l[e] = [S, p, h];
                                    break
                                }
                            } else if (y && (f = (t[w] || (t[w] = {}))[e]) && f[0] === S) h = f[1]; else while (c = ++p && c && c[v] || (h = p = 0) || d.pop())if ((u ? c.nodeName.toLowerCase() === g : 1 === c.nodeType) && ++h && (y && ((c[w] || (c[w] = {}))[e] = [S, h]), c === t))break;
                            return h -= i, h === r || h % r === 0 && h / r >= 0
                        }
                    }
                }, PSEUDO: function (e, t) {
                    var n, i = r.pseudos[e] || r.setFilters[e.toLowerCase()] || ot.error("unsupported pseudo: " + e);
                    return i[w] ? i(t) : i.length > 1 ? (n = [e, e, "", t], r.setFilters.hasOwnProperty(e.toLowerCase()) ? at(function (e, n) {
                        var r, s = i(e, t), o = s.length;
                        while (o--)r = H(e, s[o]), e[r] = !(n[r] = s[o])
                    }) : function (e) {
                        return i(e, 0, n)
                    }) : i
                }
            },
            pseudos: {
                not: at(function (e) {
                    var t = [], n = [], r = u(e.replace(z, "$1"));
                    return r[w] ? at(function (e, t, n, i) {
                        var s, o = r(e, null, i, []), u = e.length;
                        while (u--)(s = o[u]) && (e[u] = !(t[u] = s))
                    }) : function (e, i, s) {
                        return t[0] = e, r(t, null, s, n), t[0] = null, !n.pop()
                    }
                }), has: at(function (e) {
                    return function (t) {
                        return ot(e, t).length > 0
                    }
                }), contains: at(function (e) {
                    return e = e.replace(nt, rt), function (t) {
                        return (t.textContent || t.innerText || i(t)).indexOf(e) > -1
                    }
                }), lang: at(function (e) {
                    return J.test(e || "") || ot.error("unsupported lang: " + e), e = e.replace(nt, rt).toLowerCase(), function (t) {
                        var n;
                        do if (n = v ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang"))return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-"); while ((t = t.parentNode) && 1 === t.nodeType);
                        return !1
                    }
                }), target: function (t) {
                    var n = e.location && e.location.hash;
                    return n && n.slice(1) === t.id
                }, root: function (e) {
                    return e === d
                }, focus: function (e) {
                    return e === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                }, enabled: function (e) {
                    return e.disabled === !1
                }, disabled: function (e) {
                    return e.disabled === !0
                }, checked: function (e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected
                }, selected: function (e) {
                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                }, empty: function (e) {
                    for (e = e.firstChild; e; e = e.nextSibling)if (e.nodeType < 6)return !1;
                    return !0
                }, parent: function (e) {
                    return !r.pseudos.empty(e)
                }, header: function (e) {
                    return G.test(e.nodeName)
                }, input: function (e) {
                    return Q.test(e.nodeName)
                }, button: function (e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t
                }, text: function (e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                }, first: dt(function () {
                    return [0]
                }), last: dt(function (e, t) {
                    return [t - 1]
                }), eq: dt(function (e, t, n) {
                    return [0 > n ? n + t : n]
                }), even: dt(function (e, t) {
                    for (var n = 0; t > n; n += 2)e.push(n);
                    return e
                }), odd: dt(function (e, t) {
                    for (var n = 1; t > n; n += 2)e.push(n);
                    return e
                }), lt: dt(function (e, t, n) {
                    for (var r = 0 > n ? n + t : n; --r >= 0;)e.push(r);
                    return e
                }), gt: dt(function (e, t, n) {
                    for (var r = 0 > n ? n + t : n; ++r < t;)e.push(r);
                    return e
                })
            }
        }, r.pseudos.nth = r.pseudos.eq;
        for (t in{radio: !0, checkbox: !0, file: !0, password: !0, image: !0})r.pseudos[t] = ht(t);
        for (t in{submit: !0, reset: !0})r.pseudos[t] = pt(t);
        return mt.prototype = r.filters = r.pseudos, r.setFilters = new mt, o = ot.tokenize = function (e, t) {
            var n, i, s, o, u, a, f, l = N[e + " "];
            if (l)return t ? 0 : l.slice(0);
            u = e, a = [], f = r.preFilter;
            while (u) {
                (!n || (i = W.exec(u))) && (i && (u = u.slice(i[0].length) || u), a.push(s = [])), n = !1, (i = X.exec(u)) && (n = i.shift(), s.push({
                    value: n,
                    type: i[0].replace(z, " ")
                }), u = u.slice(n.length));
                for (o in r.filter)!(i = K[o].exec(u)) || f[o] && !(i = f[o](i)) || (n = i.shift(), s.push({
                    value: n,
                    type: o,
                    matches: i
                }), u = u.slice(n.length));
                if (!n)break
            }
            return t ? u.length : u ? ot.error(e) : N(e, a).slice(0)
        }, u = ot.compile = function (e, t) {
            var n, r = [], i = [], s = C[e + " "];
            if (!s) {
                t || (t = o(e)), n = t.length;
                while (n--)s = xt(t[n]), s[w] ? r.push(s) : i.push(s);
                s = C(e, Tt(i, r)), s.selector = e
            }
            return s
        }, a = ot.select = function (e, t, i, s) {
            var a, f, l, c, h, p = "function" == typeof e && e, d = !s && o(e = p.selector || e);
            if (i = i || [], 1 === d.length) {
                if (f = d[0] = d[0].slice(0), f.length > 2 && "ID" === (l = f[0]).type && n.getById && 9 === t.nodeType && v && r.relative[f[1].type]) {
                    if (t = (r.find.ID(l.matches[0].replace(nt, rt), t) || [])[0], !t)return i;
                    p && (t = t.parentNode), e = e.slice(f.shift().value.length)
                }
                a = K.needsContext.test(e) ? 0 : f.length;
                while (a--) {
                    if (l = f[a], r.relative[c = l.type])break;
                    if ((h = r.find[c]) && (s = h(l.matches[0].replace(nt, rt), et.test(f[0].type) && vt(t.parentNode) || t))) {
                        if (f.splice(a, 1), e = s.length && gt(f), !e)return D.apply(i, s), i;
                        break
                    }
                }
            }
            return (p || u(e, d))(s, t, !v, i, et.test(e) && vt(t.parentNode) || t), i
        }, n.sortStable = w.split("").sort(k).join("") === w, n.detectDuplicates = !!c, h(), n.sortDetached = ft(function (e) {
            return 1 & e.compareDocumentPosition(p.createElement("div"))
        }), ft(function (e) {
            return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
        }) || lt("type|href|height|width", function (e, t, n) {
            return n ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
        }), n.attributes && ft(function (e) {
            return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
        }) || lt("value", function (e, t, n) {
            return n || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
        }), ft(function (e) {
            return null == e.getAttribute("disabled")
        }) || lt(B, function (e, t, n) {
            var r;
            return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
        }), ot
    }(a);
    n.find = t, n.expr = t.selectors, n.expr[":"] = n.expr.pseudos, n.unique = t.uniqueSort, n.text = t.getText, n.isXMLDoc = t.isXML, n.contains = t.contains;
    var u = n.expr.match.needsContext, v = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, w = /^.[^:#\[\.,]*$/;
    n.filter = function (e, t, r) {
        var i = t[0];
        return r && (e = ":not(" + e + ")"), 1 === t.length && 1 === i.nodeType ? n.find.matchesSelector(i, e) ? [i] : [] : n.find.matches(e, n.grep(t, function (e) {
            return 1 === e.nodeType
        }))
    }, n.fn.extend({
        find: function (e) {
            var t, r = this.length, i = [], s = this;
            if ("string" != typeof e)return this.pushStack(n(e).filter(function () {
                for (t = 0; r > t; t++)if (n.contains(s[t], this))return !0
            }));
            for (t = 0; r > t; t++)n.find(e, s[t], i);
            return i = this.pushStack(r > 1 ? n.unique(i) : i), i.selector = this.selector ? this.selector + " " + e : e, i
        }, filter: function (e) {
            return this.pushStack(x(this, e || [], !1))
        }, not: function (e) {
            return this.pushStack(x(this, e || [], !0))
        }, is: function (e) {
            return !!x(this, "string" == typeof e && u.test(e) ? n(e) : e || [], !1).length
        }
    });
    var y, z = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, A = n.fn.init = function (e, t) {
        var r, i;
        if (!e)return this;
        if ("string" == typeof e) {
            if (r = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : z.exec(e), !r || !r[1] && t)return !t || t.jquery ? (t || y).find(e) : this.constructor(t).find(e);
            if (r[1]) {
                if (t = t instanceof n ? t[0] : t, n.merge(this, n.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : l, !0)), v.test(r[1]) && n.isPlainObject(t))for (r in t)n.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                return this
            }
            return i = l.getElementById(r[2]), i && i.parentNode && (this.length = 1, this[0] = i), this.context = l, this.selector = e, this
        }
        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : n.isFunction(e) ? "undefined" != typeof y.ready ? y.ready(e) : e(n) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), n.makeArray(e, this))
    };
    A.prototype = n.fn, y = n(l);
    var B = /^(?:parents|prev(?:Until|All))/, C = {children: !0, contents: !0, next: !0, prev: !0};
    n.extend({
        dir: function (e, t, r) {
            var i = [], s = void 0 !== r;
            while ((e = e[t]) && 9 !== e.nodeType)if (1 === e.nodeType) {
                if (s && n(e).is(r))break;
                i.push(e)
            }
            return i
        }, sibling: function (e, t) {
            for (var n = []; e; e = e.nextSibling)1 === e.nodeType && e !== t && n.push(e);
            return n
        }
    }), n.fn.extend({
        has: function (e) {
            var t = n(e, this), r = t.length;
            return this.filter(function () {
                for (var e = 0; r > e; e++)if (n.contains(this, t[e]))return !0
            })
        }, closest: function (e, t) {
            for (var r, i = 0, s = this.length, o = [],
                     a = u.test(e) || "string" != typeof e ? n(e, t || this.context) : 0; s > i; i++)for (r = this[i]; r && r !== t; r = r.parentNode)if (r.nodeType < 11 && (a ? a.index(r) > -1 : 1 === r.nodeType && n.find.matchesSelector(r, e))) {
                o.push(r);
                break
            }
            return this.pushStack(o.length > 1 ? n.unique(o) : o)
        }, index: function (e) {
            return e ? "string" == typeof e ? g.call(n(e), this[0]) : g.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        }, add: function (e, t) {
            return this.pushStack(n.unique(n.merge(this.get(), n(e, t))))
        }, addBack: function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    }), n.each({
        parent: function (e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        }, parents: function (e) {
            return n.dir(e, "parentNode")
        }, parentsUntil: function (e, t, r) {
            return n.dir(e, "parentNode", r)
        }, next: function (e) {
            return D(e, "nextSibling")
        }, prev: function (e) {
            return D(e, "previousSibling")
        }, nextAll: function (e) {
            return n.dir(e, "nextSibling")
        }, prevAll: function (e) {
            return n.dir(e, "previousSibling")
        }, nextUntil: function (e, t, r) {
            return n.dir(e, "nextSibling", r)
        }, prevUntil: function (e, t, r) {
            return n.dir(e, "previousSibling", r)
        }, siblings: function (e) {
            return n.sibling((e.parentNode || {}).firstChild, e)
        }, children: function (e) {
            return n.sibling(e.firstChild)
        }, contents: function (e) {
            return e.contentDocument || n.merge([], e.childNodes)
        }
    }, function (e, t) {
        n.fn[e] = function (r, i) {
            var s = n.map(this, t, r);
            return "Until" !== e.slice(-5) && (i = r), i && "string" == typeof i && (s = n.filter(i, s)), this.length > 1 && (C[e] || n.unique(s), B.test(e) && s.reverse()), this.pushStack(s)
        }
    });
    var E = /\S+/g, F = {};
    n.Callbacks = function (e) {
        e = "string" == typeof e ? F[e] || G(e) : n.extend({}, e);
        var t, r, i, s, o, u, a = [], f = !e.once && [], l = function (n) {
            for (t = e.memory && n, r = !0, u = s || 0, s = 0, o = a.length, i = !0; a && o > u; u++)if (a[u].apply(n[0], n[1]) === !1 && e.stopOnFalse) {
                t = !1;
                break
            }
            i = !1, a && (f ? f.length && l(f.shift()) : t ? a = [] : c.disable())
        }, c = {
            add: function () {
                if (a) {
                    var r = a.length;
                    !function u(t) {
                        n.each(t, function (t, r) {
                            var i = n.type(r);
                            "function" === i ? e.unique && c.has(r) || a.push(r) : r && r.length && "string" !== i && u(r)
                        })
                    }(arguments), i ? o = a.length : t && (s = r, l(t))
                }
                return this
            }, remove: function () {
                return a && n.each(arguments, function (e, t) {
                    var r;
                    while ((r = n.inArray(t, a, r)) > -1)a.splice(r, 1), i && (o >= r && o--, u >= r && u--)
                }), this
            }, has: function (e) {
                return e ? n.inArray(e, a) > -1 : !!a && !!a.length
            }, empty: function () {
                return a = [], o = 0, this
            }, disable: function () {
                return a = f = t = void 0, this
            }, disabled: function () {
                return !a
            }, lock: function () {
                return f = void 0, t || c.disable(), this
            }, locked: function () {
                return !f
            }, fireWith: function (e, t) {
                return !a || r && !f || (t = t || [], t = [e, t.slice ? t.slice() : t], i ? f.push(t) : l(t)), this
            }, fire: function () {
                return c.fireWith(this, arguments), this
            }, fired: function () {
                return !!r
            }
        };
        return c
    }, n.extend({
        Deferred: function (e) {
            var t = [["resolve", "done", n.Callbacks("once memory"), "resolved"], ["reject", "fail", n.Callbacks("once memory"), "rejected"], ["notify", "progress", n.Callbacks("memory")]],
                r = "pending", i = {
                    state: function () {
                        return r
                    }, always: function () {
                        return s.done(arguments).fail(arguments), this
                    }, then: function () {
                        var e = arguments;
                        return n.Deferred(function (r) {
                            n.each(t, function (t, o) {
                                var u = n.isFunction(e[t]) && e[t];
                                s[o[1]](function () {
                                    var e = u && u.apply(this, arguments);
                                    e && n.isFunction(e.promise) ? e.promise().done(r.resolve).fail(r.reject).progress(r.notify) : r[o[0] + "With"](this === i ? r.promise() : this, u ? [e] : arguments)
                                })
                            }), e = null
                        }).promise()
                    }, promise: function (e) {
                        return null != e ? n.extend(e, i) : i
                    }
                }, s = {};
            return i.pipe = i.then, n.each(t, function (e, n) {
                var o = n[2], u = n[3];
                i[n[1]] = o.add, u && o.add(function () {
                    r = u
                }, t[1 ^ e][2].disable, t[2][2].lock), s[n[0]] = function () {
                    return s[n[0] + "With"](this === s ? i : this, arguments), this
                }, s[n[0] + "With"] = o.fireWith
            }), i.promise(s), e && e.call(s, s), s
        }, when: function (e) {
            var t = 0, r = d.call(arguments), i = r.length, s = 1 !== i || e && n.isFunction(e.promise) ? i : 0,
                o = 1 === s ? e : n.Deferred(), u = function (e, t, n) {
                    return function (r) {
                        t[e] = this, n[e] = arguments.length > 1 ? d.call(arguments) : r, n === a ? o.notifyWith(t, n) : --s || o.resolveWith(t, n)
                    }
                }, a, f, l;
            if (i > 1)for (a = new Array(i), f = new Array(i), l = new Array(i); i > t; t++)r[t] && n.isFunction(r[t].promise) ? r[t].promise().done(u(t, l, r)).fail(o.reject).progress(u(t, f, a)) : --s;
            return s || o.resolveWith(l, r), o.promise()
        }
    });
    var H;
    n.fn.ready = function (e) {
        return n.ready.promise().done(e), this
    }, n.extend({
        isReady: !1, readyWait: 1, holdReady: function (e) {
            e ? n.readyWait++ : n.ready(!0)
        }, ready: function (e) {
            (e === !0 ? --n.readyWait : n.isReady) || (n.isReady = !0, e !== !0 && --n.readyWait > 0 || (H.resolveWith(l, [n]), n.fn.triggerHandler && (n(l).triggerHandler("ready"), n(l).off("ready"))))
        }
    }), n.ready.promise = function (e) {
        return H || (H = n.Deferred(), "complete" === l.readyState ? setTimeout(n.ready) : (l.addEventListener("DOMContentLoaded", I, !1), a.addEventListener("load", I, !1))), H.promise(e)
    }, n.ready.promise();
    var J = n.access = function (e, t, r, i, s, o, u) {
        var a = 0, f = e.length, l = null == r;
        if ("object" === n.type(r)) {
            s = !0;
            for (a in r)n.access(e, t, a, r[a], !0, o, u)
        } else if (void 0 !== i && (s = !0, n.isFunction(i) || (u = !0), l && (u ? (t.call(e, i), t = null) : (l = t, t = function (e, t, r) {
                return l.call(n(e), r)
            })), t))for (; f > a; a++)t(e[a], r, u ? i : i.call(e[a], a, t(e[a], r)));
        return s ? e : l ? t.call(e) : f ? t(e[0], r) : o
    };
    n.acceptData = function (e) {
        return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
    }, K.uid = 1, K.accepts = n.acceptData, K.prototype = {
        key: function (e) {
            if (!K.accepts(e))return 0;
            var t = {}, r = e[this.expando];
            if (!r) {
                r = K.uid++;
                try {
                    t[this.expando] = {value: r}, Object.defineProperties(e, t)
                } catch (i) {
                    t[this.expando] = r, n.extend(e, t)
                }
            }
            return this.cache[r] || (this.cache[r] = {}), r
        }, set: function (e, t, r) {
            var i, s = this.key(e), o = this.cache[s];
            if ("string" == typeof t) o[t] = r; else if (n.isEmptyObject(o)) n.extend(this.cache[s], t); else for (i in t)o[i] = t[i];
            return o
        }, get: function (e, t) {
            var n = this.cache[this.key(e)];
            return void 0 === t ? n : n[t]
        }, access: function (e, t, r) {
            var i;
            return void 0 === t || t && "string" == typeof t && void 0 === r ? (i = this.get(e, t), void 0 !== i ? i : this.get(e, n.camelCase(t))) : (this.set(e, t, r), void 0 !== r ? r : t)
        }, remove: function (e, t) {
            var r, i, s, o = this.key(e), u = this.cache[o];
            if (void 0 === t) this.cache[o] = {}; else {
                n.isArray(t) ? i = t.concat(t.map(n.camelCase)) : (s = n.camelCase(t), t in u ? i = [t, s] : (i = s, i = i in u ? [i] : i.match(E) || [])), r = i.length;
                while (r--)delete u[i[r]]
            }
        }, hasData: function (e) {
            return !n.isEmptyObject(this.cache[e[this.expando]] || {})
        }, discard: function (e) {
            e[this.expando] && delete this.cache[e[this.expando]]
        }
    };
    var L = new K, M = new K, N = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, O = /([A-Z])/g;
    n.extend({
        hasData: function (e) {
            return M.hasData(e) || L.hasData(e)
        }, data: function (e, t, n) {
            return M.access(e, t, n)
        }, removeData: function (e, t) {
            M.remove(e, t)
        }, _data: function (e, t, n) {
            return L.access(e, t, n)
        }, _removeData: function (e, t) {
            L.remove(e, t)
        }
    }), n.fn.extend({
        data: function (e, t) {
            var r, i, s, o = this[0], u = o && o.attributes;
            if (void 0 === e) {
                if (this.length && (s = M.get(o), 1 === o.nodeType && !L.get(o, "hasDataAttrs"))) {
                    r = u.length;
                    while (r--)u[r] && (i = u[r].name, 0 === i.indexOf("data-") && (i = n.camelCase(i.slice(5)), P(o, i, s[i])));
                    L.set(o, "hasDataAttrs", !0)
                }
                return s
            }
            return "object" == typeof e ? this.each(function () {
                M.set(this, e)
            }) : J(this, function (t) {
                var r, i = n.camelCase(e);
                if (o && void 0 === t) {
                    if (r = M.get(o, e), void 0 !== r)return r;
                    if (r = M.get(o, i), void 0 !== r)return r;
                    if (r = P(o, i, void 0), void 0 !== r)return r
                } else this.each(function () {
                    var n = M.get(this, i);
                    M.set(this, i, t), -1 !== e.indexOf("-") && void 0 !== n && M.set(this, e, t)
                })
            }, null, t, arguments.length > 1, null, !0)
        }, removeData: function (e) {
            return this.each(function () {
                M.remove(this, e)
            })
        }
    }), n.extend({
        queue: function (e, t, r) {
            var i;
            return e ? (t = (t || "fx") + "queue", i = L.get(e, t), r && (!i || n.isArray(r) ? i = L.access(e, t, n.makeArray(r)) : i.push(r)), i || []) : void 0
        }, dequeue: function (e, t) {
            t = t || "fx";
            var r = n.queue(e, t), i = r.length, s = r.shift(), o = n._queueHooks(e, t), u = function () {
                n.dequeue(e, t)
            };
            "inprogress" === s && (s = r.shift(), i--), s && ("fx" === t && r.unshift("inprogress"), delete o.stop, s.call(e, u, o)), !i && o && o.empty.fire()
        }, _queueHooks: function (e, t) {
            var r = t + "queueHooks";
            return L.get(e, r) || L.access(e, r, {
                    empty: n.Callbacks("once memory").add(function () {
                        L.remove(e, [t + "queue", r])
                    })
                })
        }
    }), n.fn.extend({
        queue: function (e, t) {
            var r = 2;
            return "string" != typeof e && (t = e, e = "fx", r--), arguments.length < r ? n.queue(this[0], e) : void 0 === t ? this : this.each(function () {
                var r = n.queue(this, e, t);
                n._queueHooks(this, e), "fx" === e && "inprogress" !== r[0] && n.dequeue(this, e)
            })
        }, dequeue: function (e) {
            return this.each(function () {
                n.dequeue(this, e)
            })
        }, clearQueue: function (e) {
            return this.queue(e || "fx", [])
        }, promise: function (e, t) {
            var r, i = 1, s = n.Deferred(), o = this, u = this.length, a = function () {
                --i || s.resolveWith(o, [o])
            };
            "string" != typeof e && (t = e, e = void 0), e = e || "fx";
            while (u--)r = L.get(o[u], e + "queueHooks"), r && r.empty && (i++, r.empty.add(a));
            return a(), s.promise(t)
        }
    });
    var Q = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, R = ["Top", "Right", "Bottom", "Left"], S = function (e, t) {
        return e = t || e, "none" === n.css(e, "display") || !n.contains(e.ownerDocument, e)
    }, T = /^(?:checkbox|radio)$/i;

    var U = "undefined";
    k.focusinBubbles = "onfocusin" in a;
    var V = /^key/, W = /^(?:mouse|pointer|contextmenu)|click/, X = /^(?:focusinfocus|focusoutblur)$/,
        Y = /^([^.]*)(?:\.(.+)|)$/;
    n.event = {
        global: {},
        add: function (e, t, r, i, s) {
            var o, u, a, f, l, c, h, p, d, v, m, g = L.get(e);
            if (g) {
                r.handler && (o = r, r = o.handler, s = o.selector), r.guid || (r.guid = n.guid++), (f = g.events) || (f = g.events = {}), (u = g.handle) || (u = g.handle = function (t) {
                    return typeof n !== U && n.event.triggered !== t.type ? n.event.dispatch.apply(e, arguments) : void 0
                }), t = (t || "").match(E) || [""], l = t.length;
                while (l--)a = Y.exec(t[l]) || [], d = m = a[1], v = (a[2] || "").split(".").sort(), d && (h = n.event.special[d] || {}, d = (s ? h.delegateType : h.bindType) || d, h = n.event.special[d] || {}, c = n.extend({
                    type: d,
                    origType: m,
                    data: i,
                    handler: r,
                    guid: r.guid,
                    selector: s,
                    needsContext: s && n.expr.match.needsContext.test(s),
                    namespace: v.join(".")
                }, o), (p = f[d]) || (p = f[d] = [], p.delegateCount = 0, h.setup && h.setup.call(e, i, v, u) !== !1 || e.addEventListener && e.addEventListener(d, u, !1)), h.add && (h.add.call(e, c), c.handler.guid || (c.handler.guid = r.guid)), s ? p.splice(p.delegateCount++, 0, c) : p.push(c), n.event.global[d] = !0)
            }
        },
        remove: function (e, t, r, i, s) {
            var o, u, a, f, l, c, h, p, d, v, m, g = L.hasData(e) && L.get(e);
            if (g && (f = g.events)) {
                t = (t || "").match(E) || [""], l = t.length;
                while (l--)if (a = Y.exec(t[l]) || [], d = m = a[1], v = (a[2] || "").split(".").sort(), d) {
                    h = n.event.special[d] || {}, d = (i ? h.delegateType : h.bindType) || d, p = f[d] || [], a = a[2] && new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)"), u = o = p.length;
                    while (o--)c = p[o], !s && m !== c.origType || r && r.guid !== c.guid || a && !a.test(c.namespace) || i && i !== c.selector && ("**" !== i || !c.selector) || (p.splice(o, 1), c.selector && p.delegateCount--, h.remove && h.remove.call(e, c));
                    u && !p.length && (h.teardown && h.teardown.call(e, v, g.handle) !== !1 || n.removeEvent(e, d, g.handle), delete f[d])
                } else for (d in f)n.event.remove(e, d + t[l], r, i, !0);
                n.isEmptyObject(f) && (delete g.handle, L.remove(e, "events"))
            }
        },
        trigger: function (e, t, r, i) {
            var s, o, u, f, c, h, p, d = [r || l], v = j.call(e, "type") ? e.type : e,
                m = j.call(e, "namespace") ? e.namespace.split(".") : [];
            if (o = u = r = r || l, 3 !== r.nodeType && 8 !== r.nodeType && !X.test(v + n.event.triggered) && (v.indexOf(".") >= 0 && (m = v.split("."), v = m.shift(), m.sort()), c = v.indexOf(":") < 0 && "on" + v, e = e[n.expando] ? e : new n.Event(v, "object" == typeof e && e), e.isTrigger = i ? 2 : 3, e.namespace = m.join("."), e.namespace_re = e.namespace ? new RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = r), t = null == t ? [e] : n.makeArray(t, [e]), p = n.event.special[v] || {}, i || !p.trigger || p.trigger.apply(r, t) !== !1)) {
                if (!i && !p.noBubble && !n.isWindow(r)) {
                    for (f = p.delegateType || v, X.test(f + v) || (o = o.parentNode); o; o = o.parentNode)d.push(o), u = o;
                    u === (r.ownerDocument || l) && d.push(u.defaultView || u.parentWindow || a)
                }
                s = 0;
                while ((o = d[s++]) && !e.isPropagationStopped())e.type = s > 1 ? f : p.bindType || v, h = (L.get(o, "events") || {})[e.type] && L.get(o, "handle"), h && h.apply(o, t), h = c && o[c], h && h.apply && n.acceptData(o) && (e.result = h.apply(o, t), e.result === !1 && e.preventDefault());
                return e.type = v, i || e.isDefaultPrevented() || p._default && p._default.apply(d.pop(), t) !== !1 || !n.acceptData(r) || c && n.isFunction(r[v]) && !n.isWindow(r) && (u = r[c], u && (r[c] = null), n.event.triggered = v, r[v](), n.event.triggered = void 0, u && (r[c] = u)), e.result
            }
        },
        dispatch: function (e) {
            e = n.event.fix(e);
            var t, r, i, s, o, u = [], a = d.call(arguments), f = (L.get(this, "events") || {})[e.type] || [],
                l = n.event.special[e.type] || {};
            if (a[0] = e, e.delegateTarget = this, !l.preDispatch || l.preDispatch.call(this, e) !== !1) {
                u = n.event.handlers.call(this, e, f), t = 0;
                while ((s = u[t++]) && !e.isPropagationStopped()) {
                    e.currentTarget = s.elem, r = 0;
                    while ((o = s.handlers[r++]) && !e.isImmediatePropagationStopped())(!e.namespace_re || e.namespace_re.test(o.namespace)) && (e.handleObj = o, e.data = o.data, i = ((n.event.special[o.origType] || {}).handle || o.handler).apply(s.elem, a), void 0 !== i && (e.result = i) === !1 && (e.preventDefault(), e.stopPropagation()))
                }
                return l.postDispatch && l.postDispatch.call(this, e), e.result
            }
        },
        handlers: function (e, t) {
            var r, i, s, o, u = [], a = t.delegateCount, f = e.target;
            if (a && f.nodeType && (!e.button || "click" !== e.type))for (; f !== this; f = f.parentNode || this)if (f.disabled !== !0 || "click" !== e.type) {
                for (i = [], r = 0; a > r; r++)o = t[r], s = o.selector + " ", void 0 === i[s] && (i[s] = o.needsContext ? n(s, this).index(f) >= 0 : n.find(s, this, null, [f]).length), i[s] && i.push(o);
                i.length && u.push({elem: f, handlers: i})
            }
            return a < t.length && u.push({elem: this, handlers: t.slice(a)}), u
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "), filter: function (e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (e, t) {
                var n, r, i, s = t.button;
                return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || l, r = n.documentElement, i = n.body, e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)), e.which || void 0 === s || (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), e
            }
        },
        fix: function (e) {
            if (e[n.expando])return e;
            var t, r, i, s = e.type, o = e, u = this.fixHooks[s];
            u || (this.fixHooks[s] = u = W.test(s) ? this.mouseHooks : V.test(s) ? this.keyHooks : {}), i = u.props ? this.props.concat(u.props) : this.props, e = new n.Event(o), t = i.length;
            while (t--)r = i[t], e[r] = o[r];
            return e.target || (e.target = l), 3 === e.target.nodeType && (e.target = e.target.parentNode), u.filter ? u.filter(e, o) : e
        },
        special: {
            load: {noBubble: !0}, focus: {
                trigger: function () {
                    return this !== _() && this.focus ? (this.focus(), !1) : void 0
                }, delegateType: "focusin"
            }, blur: {
                trigger: function () {
                    return this === _() && this.blur ? (this.blur(), !1) : void 0
                }, delegateType: "focusout"
            }, click: {
                trigger: function () {
                    return "checkbox" === this.type && this.click && n.nodeName(this, "input") ? (this.click(), !1) : void 0
                }, _default: function (e) {
                    return n.nodeName(e.target, "a")
                }
            }, beforeunload: {
                postDispatch: function (e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                }
            }
        },
        simulate: function (e, t, r, i) {
            var s = n.extend(new n.Event, r, {type: e, isSimulated: !0, originalEvent: {}});
            i ? n.event.trigger(s, null, t) : n.event.dispatch.call(t, s), s.isDefaultPrevented() && r.preventDefault()
        }
    }, n.removeEvent = function (e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n, !1)
    }, n.Event = function (e, t) {
        return this instanceof n.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? Z : $) : this.type = e, t && n.extend(this, t), this.timeStamp = e && e.timeStamp || n.now(), void (this[n.expando] = !0)) : new n.Event(e, t)
    }, n.Event.prototype = {
        isDefaultPrevented: $,
        isPropagationStopped: $,
        isImmediatePropagationStopped: $,
        preventDefault: function () {
            var e = this.originalEvent;
            this.isDefaultPrevented = Z, e && e.preventDefault && e.preventDefault()
        },
        stopPropagation: function () {
            var e = this.originalEvent;
            this.isPropagationStopped = Z, e && e.stopPropagation && e.stopPropagation()
        },
        stopImmediatePropagation: function () {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = Z, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), this.stopPropagation()
        }
    }, n.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function (e, t) {
        n.event.special[e] = {
            delegateType: t, bindType: t, handle: function (e) {
                var r, i = this, s = e.relatedTarget, o = e.handleObj;
                return (!s || s !== i && !n.contains(i, s)) && (e.type = o.origType, r = o.handler.apply(this, arguments), e.type = t), r
            }
        }
    }), k.focusinBubbles || n.each({focus: "focusin", blur: "focusout"}, function (e, t) {
        var r = function (e) {
            n.event.simulate(t, e.target, n.event.fix(e), !0)
        };
        n.event.special[t] = {
            setup: function () {
                var n = this.ownerDocument || this, i = L.access(n, t);
                i || n.addEventListener(e, r, !0), L.access(n, t, (i || 0) + 1)
            }, teardown: function () {
                var n = this.ownerDocument || this, i = L.access(n, t) - 1;
                i ? L.access(n, t, i) : (n.removeEventListener(e, r, !0), L.remove(n, t))
            }
        }
    }), n.fn.extend({
        on: function (e, t, r, i, s) {
            var o, u;
            if ("object" == typeof e) {
                "string" != typeof t && (r = r || t, t = void 0);
                for (u in e)this.on(u, t, r, e[u], s);
                return this
            }
            if (null == r && null == i ? (i = t, r = t = void 0) : null == i && ("string" == typeof t ? (i = r, r = void 0) : (i = r, r = t, t = void 0)), i === !1) i = $; else if (!i)return this;
            return 1 === s && (o = i, i = function (e) {
                return n().off(e), o.apply(this, arguments)
            }, i.guid = o.guid || (o.guid = n.guid++)), this.each(function () {
                n.event.add(this, e, i, r, t)
            })
        }, one: function (e, t, n, r) {
            return this.on(e, t, n, r, 1)
        }, off: function (e, t, r) {
            var i, s;
            if (e && e.preventDefault && e.handleObj)return i = e.handleObj, n(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this;
            if ("object" == typeof e) {
                for (s in e)this.off(s, t, e[s]);
                return this
            }
            return (t === !1 || "function" == typeof t) && (r = t, t = void 0), r === !1 && (r = $), this.each(function () {
                n.event.remove(this, e, r, t)
            })
        }, trigger: function (e, t) {
            return this.each(function () {
                n.event.trigger(e, t, this)
            })
        }, triggerHandler: function (e, t) {
            var r = this[0];
            return r ? n.event.trigger(e, t, r, !0) : void 0
        }
    });
    var aa = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, ba = /<([\w:]+)/,
        ca = /<|&#?\w+;/, da = /<(?:script|style|link)/i, ea = /checked\s*(?:[^=]|=\s*.checked.)/i,
        fa = /^$|\/(?:java|ecma)script/i, ga = /^true\/(.*)/, ha = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, ia = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    ia.optgroup = ia.option, ia.tbody = ia.tfoot = ia.colgroup = ia.caption = ia.thead, ia.th = ia.td, n.extend({

        cleanData: function (e) {
            for (var t, r, i, s, o = n.event.special, u = 0; void 0 !== (r = e[u]); u++) {
                if (n.acceptData(r) && (s = r[L.expando], s && (t = L.cache[s]))) {
                    if (t.events)for (i in t.events)o[i] ? n.event.remove(r, i) : n.removeEvent(r, i, t.handle);
                    L.cache[s] && delete L.cache[s]
                }
                delete M.cache[r[M.expando]]
            }
        }
    }), n.fn.extend({
        text: function (e) {
            return J(this, function (e) {
                return void 0 === e ? n.text(this) : this.empty().each(function () {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = e)
                })
            }, null, e, arguments.length)
        }, append: function () {
            return this.domManip(arguments, function (e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = ja(this, e);
                    t.appendChild(e)
                }
            })
        }, prepend: function () {
            return this.domManip(arguments, function (e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = ja(this, e);
                    t.insertBefore(e, t.firstChild)
                }
            })
        }, before: function () {
            return this.domManip(arguments, function (e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            })
        }, after: function () {
            return this.domManip(arguments, function (e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            })
        }, remove: function (e, t) {
            for (var r, i = e ? n.filter(e, this) : this,
                     s = 0; null != (r = i[s]); s++)t || 1 !== r.nodeType || n.cleanData(oa(r)), r.parentNode && (t && n.contains(r.ownerDocument, r) && ma(oa(r, "script")), r.parentNode.removeChild(r));
            return this
        }, empty: function () {
            for (var e,
                     t = 0; null != (e = this[t]); t++)1 === e.nodeType && (n.cleanData(oa(e, !1)), e.textContent = "");
            return this
        }, clone: function (e, t) {
            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function () {
                return n.clone(this, e, t)
            })
        }, html: function (e) {
            return J(this, function (e) {
                var t = this[0] || {}, r = 0, i = this.length;
                if (void 0 === e && 1 === t.nodeType)return t.innerHTML;
                if ("string" == typeof e && !da.test(e) && !ia[(ba.exec(e) || ["", ""])[1].toLowerCase()]) {
                    e = e.replace(aa, "<$1></$2>");
                    try {
                        for (; i > r; r++)t = this[r] || {}, 1 === t.nodeType && (n.cleanData(oa(t, !1)), t.innerHTML = e);
                        t = 0
                    } catch (s) {
                    }
                }
                t && this.empty().append(e)
            }, null, e, arguments.length)
        }, replaceWith: function () {
            var e = arguments[0];
            return this.domManip(arguments, function (t) {
                e = this.parentNode, n.cleanData(oa(this)), e && e.replaceChild(t, this)
            }), e && (e.length || e.nodeType) ? this : this.remove()
        }, detach: function (e) {
            return this.remove(e, !0)
        }, domManip: function (t, r) {
            t = e.apply([], t);
            var i, s, o, u, a, f, l = 0, c = this.length, h = this, p = c - 1, d = t[0], v = n.isFunction(d);
            if (v || c > 1 && "string" == typeof d && !k.checkClone && ea.test(d))return this.each(function (e) {
                var n = h.eq(e);
                v && (t[0] = d.call(this, e, n.html())), n.domManip(t, r)
            });
            if (c && (i = n.buildFragment(t, this[0].ownerDocument, !1, this), s = i.firstChild, 1 === i.childNodes.length && (i = s), s)) {
                for (o = n.map(oa(i, "script"), ka), u = o.length; c > l; l++)a = i, l !== p && (a = n.clone(a, !0, !0), u && n.merge(o, oa(a, "script"))), r.call(this[l], a, l);
                if (u)for (f = o[o.length - 1].ownerDocument, n.map(o, la), l = 0; u > l; l++)a = o[l], fa.test(a.type || "") && !L.access(a, "globalEval") && n.contains(f, a) && (a.src ? n._evalUrl && n._evalUrl(a.src) : n.globalEval(a.textContent.replace(ha, "")))
            }
            return this
        }
    }), n.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function (e, t) {
        n.fn[e] = function (e) {
            for (var r, i = [], s = n(e), o = s.length - 1,
                     u = 0; o >= u; u++)r = u === o ? this : this.clone(!0), n(s[u])[t](r), f.apply(i, r.get());
            return this.pushStack(i)
        }
    });
    var qa, ra = {}, ua = /^margin/, va = new RegExp("^(" + Q + ")(?!px)[a-z%]+$", "i"), wa = function (e) {
        return e.ownerDocument.defaultView.opener ? e.ownerDocument.defaultView.getComputedStyle(e, null) : a.getComputedStyle(e, null)
    };
    n.swap = function (e, t, n, r) {
        var i, s, o = {};
        for (s in t)o[s] = e.style[s], e.style[s] = t[s];
        i = n.apply(e, r || []);
        for (s in t)e.style[s] = o[s];
        return i
    };
    var za = /^(none|table(?!-c[ea]).+)/, Aa = new RegExp("^(" + Q + ")(.*)$", "i"),
        Ba = new RegExp("^([+-])=(" + Q + ")", "i"),
        Ca = {position: "absolute", visibility: "hidden", display: "block"},
        Da = {letterSpacing: "0", fontWeight: "400"}, Ea = ["Webkit", "O", "Moz", "ms"];
    n.extend({
        cssHooks: {
            opacity: {
                get: function (e, t) {
                    if (t) {
                        var n = xa(e, "opacity");
                        return "" === n ? "1" : n
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {"float": "cssFloat"},
        style: function (e, t, r, i) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var s, o, u, a = n.camelCase(t), f = e.style;
                return t = n.cssProps[a] || (n.cssProps[a] = Fa(f, a)), u = n.cssHooks[t] || n.cssHooks[a], void 0 === r ? u && "get" in u && void 0 !== (s = u.get(e, !1, i)) ? s : f[t] : (o = typeof r, "string" === o && (s = Ba.exec(r)) && (r = (s[1] + 1) * s[2] + parseFloat(n.css(e, t)), o = "number"), null != r && r === r && ("number" !== o || n.cssNumber[a] || (r += "px"), k.clearCloneStyle || "" !== r || 0 !== t.indexOf("background") || (f[t] = "inherit"), u && "set" in u && void 0 === (r = u.set(e, r, i)) || (f[t] = r)), void 0)
            }
        },
        css: function (e, t, r, i) {
            var s, o, u, a = n.camelCase(t);
            return t = n.cssProps[a] || (n.cssProps[a] = Fa(e.style, a)), u = n.cssHooks[t] || n.cssHooks[a], u && "get" in u && (s = u.get(e, !0, r)), void 0 === s && (s = xa(e, t, i)), "normal" === s && t in Da && (s = Da[t]), "" === r || r ? (o = parseFloat(s), r === !0 || n.isNumeric(o) ? o || 0 : s) : s
        }
    }), n.each(["height", "width"], function (e, t) {
        n.cssHooks[t] = {
            get: function (e, r, i) {
                return r ? za.test(n.css(e, "display")) && 0 === e.offsetWidth ? n.swap(e, Ca, function () {
                    return Ia(e, t, i)
                }) : Ia(e, t, i) : void 0
            }, set: function (e, r, i) {
                var s = i && wa(e);
                return Ga(e, r, i ? Ha(e, t, i, "border-box" === n.css(e, "boxSizing", !1, s), s) : 0)
            }
        }
    }), n.cssHooks.marginRight = ya(k.reliableMarginRight, function (e, t) {
        return t ? n.swap(e, {display: "inline-block"}, xa, [e, "marginRight"]) : void 0
    }), n.each({margin: "", padding: "", border: "Width"}, function (e, t) {
        n.cssHooks[e + t] = {
            expand: function (n) {
                for (var r = 0, i = {},
                         s = "string" == typeof n ? n.split(" ") : [n]; 4 > r; r++)i[e + R[r] + t] = s[r] || s[r - 2] || s[0];
                return i
            }
        }, ua.test(e) || (n.cssHooks[e + t].set = Ga)
    }), n.fn.extend({
        css: function (e, t) {
            return J(this, function (e, t, r) {
                var i, s, o = {}, u = 0;
                if (n.isArray(t)) {
                    for (i = wa(e), s = t.length; s > u; u++)o[t[u]] = n.css(e, t[u], !1, i);
                    return o
                }
                return void 0 !== r ? n.style(e, t, r) : n.css(e, t)
            }, e, t, arguments.length > 1)
        }, show: function () {
            return Ja(this, !0)
        }, hide: function () {
            return Ja(this)
        }, toggle: function (e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                S(this) ? n(this).show() : n(this).hide()
            })
        }
    }), n.Tween = Ka, Ka.prototype = {
        constructor: Ka, init: function (e, t, r, i, s, o) {
            this.elem = e, this.prop = r, this.easing = s || "swing", this.options = t, this.start = this.now = this.cur(), this.end = i, this.unit = o || (n.cssNumber[r] ? "" : "px")
        }, cur: function () {
            var e = Ka.propHooks[this.prop];
            return e && e.get ? e.get(this) : Ka.propHooks._default.get(this)
        }, run: function (e) {
            var t, r = Ka.propHooks[this.prop];
            return this.options.duration ? this.pos = t = n.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), r && r.set ? r.set(this) : Ka.propHooks._default.set(this), this
        }
    }, Ka.prototype.init.prototype = Ka.prototype, Ka.propHooks = {
        _default: {
            get: function (e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = n.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop]
            }, set: function (e) {
                n.fx.step[e.prop] ? n.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[n.cssProps[e.prop]] || n.cssHooks[e.prop]) ? n.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
            }
        }
    }, Ka.propHooks.scrollTop = Ka.propHooks.scrollLeft = {
        set: function (e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    }, n.easing = {
        linear: function (e) {
            return e
        }, swing: function (e) {
            return .5 - Math.cos(e * Math.PI) / 2
        }
    }, n.fx = Ka.prototype.init, n.fx.step = {};
    var La, Ma, Na = /^(?:toggle|show|hide)$/, Oa = new RegExp("^(?:([+-])=|)(" + Q + ")([a-z%]*)$", "i"),
        Pa = /queueHooks$/, Qa = [Va], Ra = {
            "*": [function (e, t) {
                var r = this.createTween(e, t), i = r.cur(), s = Oa.exec(t), o = s && s[3] || (n.cssNumber[e] ? "" : "px"),
                    u = (n.cssNumber[e] || "px" !== o && +i) && Oa.exec(n.css(r.elem, e)), a = 1, f = 20;
                if (u && u[3] !== o) {
                    o = o || u[3], s = s || [], u = +i || 1;
                    do a = a || ".5", u /= a, n.style(r.elem, e, u + o); while (a !== (a = r.cur() / i) && 1 !== a && --f)
                }
                return s && (u = r.start = +u || +i || 0, r.unit = o, r.end = s[1] ? u + (s[1] + 1) * s[2] : +s[2]), r
            }]
        };
    n.Animation = n.extend(Xa, {
        tweener: function (e, t) {
            n.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
            for (var r, i = 0, s = e.length; s > i; i++)r = e[i], Ra[r] = Ra[r] || [], Ra[r].unshift(t)
        }, prefilter: function (e, t) {
            t ? Qa.unshift(e) : Qa.push(e)
        }
    }), n.speed = function (e, t, r) {
        var i = e && "object" == typeof e ? n.extend({}, e) : {
            complete: r || !r && t || n.isFunction(e) && e,
            duration: e,
            easing: r && t || t && !n.isFunction(t) && t
        };
        return i.duration = n.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in n.fx.speeds ? n.fx.speeds[i.duration] : n.fx.speeds._default, (null == i.queue || i.queue === !0) && (i.queue = "fx"), i.old = i.complete, i.complete = function () {
            n.isFunction(i.old) && i.old.call(this), i.queue && n.dequeue(this, i.queue)
        }, i
    }, n.fn.extend({
        fadeTo: function (e, t, n, r) {
            return this.filter(S).css("opacity", 0).show().end().animate({opacity: t}, e, n, r)
        }, animate: function (e, t, r, i) {
            var s = n.isEmptyObject(e), o = n.speed(t, r, i), u = function () {
                var t = Xa(this, n.extend({}, e), o);
                (s || L.get(this, "finish")) && t.stop(!0)
            };
            return u.finish = u, s || o.queue === !1 ? this.each(u) : this.queue(o.queue, u)
        }, stop: function (e, t, r) {
            var i = function (e) {
                var t = e.stop;
                delete e.stop, t(r)
            };
            return "string" != typeof e && (r = t, t = e, e = void 0), t && e !== !1 && this.queue(e || "fx", []), this.each(function () {
                var t = !0, s = null != e && e + "queueHooks", o = n.timers, u = L.get(this);
                if (s) u[s] && u[s].stop && i(u[s]); else for (s in u)u[s] && u[s].stop && Pa.test(s) && i(u[s]);
                for (s = o.length; s--;)o[s].elem !== this || null != e && o[s].queue !== e || (o[s].anim.stop(r), t = !1, o.splice(s, 1));
                (t || !r) && n.dequeue(this, e)
            })
        }, finish: function (e) {
            return e !== !1 && (e = e || "fx"), this.each(function () {
                var t, r = L.get(this), i = r[e + "queue"], s = r[e + "queueHooks"], o = n.timers, u = i ? i.length : 0;
                for (r.finish = !0, n.queue(this, e, []), s && s.stop && s.stop.call(this, !0), t = o.length; t--;)o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1));
                for (t = 0; u > t; t++)i[t] && i[t].finish && i[t].finish.call(this);
                delete r.finish
            })
        }
    }), n.each(["toggle", "show", "hide"], function (e, t) {
        var r = n.fn[t];
        n.fn[t] = function (e, n, i) {
            return null == e || "boolean" == typeof e ? r.apply(this, arguments) : this.animate(Ta(t, !0), e, n, i)
        }
    }), n.each({
        slideDown: Ta("show"),
        slideUp: Ta("hide"),
        slideToggle: Ta("toggle"),
        fadeIn: {opacity: "show"},
        fadeOut: {opacity: "hide"},
        fadeToggle: {opacity: "toggle"}
    }, function (e, t) {
        n.fn[e] = function (e, n, r) {
            return this.animate(t, e, n, r)
        }
    }), n.timers = [], n.fx.tick = function () {
        var e, t = 0, r = n.timers;
        for (La = n.now(); t < r.length; t++)e = r[t], e() || r[t] !== e || r.splice(t--, 1);
        r.length || n.fx.stop(), La = void 0
    }, n.fx.timer = function (e) {
        n.timers.push(e), e() ? n.fx.start() : n.timers.pop()
    }, n.fx.interval = 13, n.fx.start = function () {
        Ma || (Ma = setInterval(n.fx.tick, n.fx.interval))
    }, n.fx.stop = function () {
        clearInterval(Ma), Ma = null
    }, n.fx.speeds = {slow: 600, fast: 200, _default: 400}, n.fn.delay = function (e, t) {
        return e = n.fx ? n.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function (t, n) {
            var r = setTimeout(t, e);
            n.stop = function () {
                clearTimeout(r)
            }
        })
    };
    var Ya, Za, $a = n.expr.attrHandle;
    n.fn.extend({
        attr: function (e, t) {
            return J(this, n.attr, e, t, arguments.length > 1)
        }, removeAttr: function (e) {
            return this.each(function () {
                n.removeAttr(this, e)
            })
        }
    }), n.extend({
        attr: function (e, t, r) {
            var i, s, o = e.nodeType;
            if (e && 3 !== o && 8 !== o && 2 !== o)return typeof e.getAttribute === U ? n.prop(e, t, r) : (1 === o && n.isXMLDoc(e) || (t = t.toLowerCase(), i = n.attrHooks[t] || (n.expr.match.bool.test(t) ? Za : Ya)), void 0 === r ? i && "get" in i && null !== (s = i.get(e, t)) ? s : (s = n.find.attr(e, t), null == s ? void 0 : s) : null !== r ? i && "set" in i && void 0 !== (s = i.set(e, r, t)) ? s : (e.setAttribute(t, r + ""), r) : void n.removeAttr(e, t))
        }, removeAttr: function (e, t) {
            var r, i, s = 0, o = t && t.match(E);
            if (o && 1 === e.nodeType)while (r = o[s++])i = n.propFix[r] || r, n.expr.match.bool.test(r) && (e[i] = !1), e.removeAttribute(r)
        }, attrHooks: {
            type: {
                set: function (e, t) {
                    if (!k.radioValue && "radio" === t && n.nodeName(e, "input")) {
                        var r = e.value;
                        return e.setAttribute("type", t), r && (e.value = r), t
                    }
                }
            }
        }
    }), Za = {
        set: function (e, t, r) {
            return t === !1 ? n.removeAttr(e, r) : e.setAttribute(r, r), r
        }
    }, n.each(n.expr.match.bool.source.match(/\w+/g), function (e, t) {
        var r = $a[t] || n.find.attr;
        $a[t] = function (e, t, n) {
            var i, s;
            return n || (s = $a[t], $a[t] = i, i = null != r(e, t, n) ? t.toLowerCase() : null, $a[t] = s), i
        }
    });
    var _a = /^(?:input|select|textarea|button)$/i;
    n.fn.extend({
        prop: function (e, t) {
            return J(this, n.prop, e, t, arguments.length > 1)
        }, removeProp: function (e) {
            return this.each(function () {
                delete this[n.propFix[e] || e]
            })
        }
    }), n.extend({
        propFix: {"for": "htmlFor", "class": "className"}, prop: function (e, t, r) {
            var i, s, o, u = e.nodeType;
            if (e && 3 !== u && 8 !== u && 2 !== u)return o = 1 !== u || !n.isXMLDoc(e), o && (t = n.propFix[t] || t, s = n.propHooks[t]), void 0 !== r ? s && "set" in s && void 0 !== (i = s.set(e, r, t)) ? i : e[t] = r : s && "get" in s && null !== (i = s.get(e, t)) ? i : e[t]
        }, propHooks: {
            tabIndex: {
                get: function (e) {
                    return e.hasAttribute("tabindex") || _a.test(e.nodeName) || e.href ? e.tabIndex : -1
                }
            }
        }
    }), k.optSelected || (n.propHooks.selected = {
        get: function (e) {
            var t = e.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex, null
        }
    }), n.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
        n.propFix[this.toLowerCase()] = this
    });
    var ab = /[\t\r\n\f]/g;
    n.fn.extend({
        addClass: function (e) {
            var t, r, i, s, o, u, a = "string" == typeof e && e, f = 0, l = this.length;
            if (n.isFunction(e))return this.each(function (t) {
                n(this).addClass(e.call(this, t, this.className))
            });
            if (a)for (t = (e || "").match(E) || []; l > f; f++)if (r = this[f], i = 1 === r.nodeType && (r.className ? (" " + r.className + " ").replace(ab, " ") : " ")) {
                o = 0;
                while (s = t[o++])i.indexOf(" " + s + " ") < 0 && (i += s + " ");
                u = n.trim(i), r.className !== u && (r.className = u)
            }
            return this
        }, removeClass: function (e) {
            var t, r, i, s, o, u, a = 0 === arguments.length || "string" == typeof e && e, f = 0, l = this.length;
            if (n.isFunction(e))return this.each(function (t) {
                n(this).removeClass(e.call(this, t, this.className))
            });
            if (a)for (t = (e || "").match(E) || []; l > f; f++)if (r = this[f], i = 1 === r.nodeType && (r.className ? (" " + r.className + " ").replace(ab, " ") : "")) {
                o = 0;
                while (s = t[o++])while (i.indexOf(" " + s + " ") >= 0)i = i.replace(" " + s + " ", " ");
                u = e ? n.trim(i) : "", r.className !== u && (r.className = u)
            }
            return this
        },
		toggleClass: function (e, t) {
            var r = typeof e;
            return "boolean" == typeof t && "string" === r ? t ? this.addClass(e) : this.removeClass(e) : this.each(n.isFunction(e) ? function (r) {
                n(this).toggleClass(e.call(this, r, this.className, t), t)
            } : function () {
                if ("string" === r) {
                    var t, i = 0, s = n(this), o = e.match(E) || [];
                    while (t = o[i++])s.hasClass(t) ? s.removeClass(t) : s.addClass(t)
                } else(r === U || "boolean" === r) && (this.className && L.set(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : L.get(this, "__className__") || "")
            })
        }, hasClass: function (e) {
            for (var t = " " + e + " ", n = 0,
                     r = this.length; r > n; n++)if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(ab, " ").indexOf(t) >= 0)return !0;
            return !1
        }
    });
    var bb = /\r/g;
    n.fn.extend({
        val: function (e) {
            var t, r, i, s = this[0];
            if (arguments.length)return i = n.isFunction(e), this.each(function (r) {
                var s;
                1 === this.nodeType && (s = i ? e.call(this, r, n(this).val()) : e, null == s ? s = "" : "number" == typeof s ? s += "" : n.isArray(s) && (s = n.map(s, function (e) {
                        return null == e ? "" : e + ""
                    })), t = n.valHooks[this.type] || n.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, s, "value") || (this.value = s))
            });
            if (s)return t = n.valHooks[s.type] || n.valHooks[s.nodeName.toLowerCase()], t && "get" in t && void 0 !== (r = t.get(s, "value")) ? r : (r = s.value, "string" == typeof r ? r.replace(bb, "") : null == r ? "" : r)
        }
    }),
	n.extend({
        valHooks: {
            option: {
                get: function (e) {
                    var t = n.find.attr(e, "value");
                    return null != t ? t : n.trim(n.text(e))
                }
            }, select: {
                get: function (e) {
                    for (var t, r, i = e.options, s = e.selectedIndex, o = "select-one" === e.type || 0 > s,
                             u = o ? null : [], a = o ? s + 1 : i.length,
                             f = 0 > s ? a : o ? s : 0; a > f; f++)if (r = i[f], !(!r.selected && f !== s || (k.optDisabled ? r.disabled : null !== r.getAttribute("disabled")) || r.parentNode.disabled && n.nodeName(r.parentNode, "optgroup"))) {
                        if (t = n(r).val(), o)return t;
                        u.push(t)
                    }
                    return u
                }, set: function (e, t) {
                    var r, i, s = e.options, o = n.makeArray(t), u = s.length;
                    while (u--)i = s[u], (i.selected = n.inArray(i.value, o) >= 0) && (r = !0);
                    return r || (e.selectedIndex = -1), o
                }
            }
        }
    }), n.each(["radio", "checkbox"], function () {
        n.valHooks[this] = {
            set: function (e, t) {
                return n.isArray(t) ? e.checked = n.inArray(n(e).val(), t) >= 0 : void 0
            }
        }, k.checkOn || (n.valHooks[this].get = function (e) {
            return null === e.getAttribute("value") ? "on" : e.value
        })
    }),
	n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) {
        n.fn[t] = function (e, n) {
            return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
        }
    }), n.fn.extend({
        hover: function (e, t) {
            return this.mouseenter(e).mouseleave(t || e)
        }, bind: function (e, t, n) {
            return this.on(e, null, t, n)
        }, unbind: function (e, t) {
            return this.off(e, null, t)
        }, delegate: function (e, t, n, r) {
            return this.on(t, e, n, r)
        }, undelegate: function (e, t, n) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
        }
    });
    var cb = n.now(), db = /\?/;
    n.parseJSON = function (e) {
        return JSON.parse(e + "")
    }, n.parseXML = function (e) {
        var t, r;
        if (!e || "string" != typeof e)return null;
        try {
            r = new DOMParser, t = r.parseFromString(e, "text/xml")
        } catch (i) {
            t = void 0
        }
        return (!t || t.getElementsByTagName("parsererror").length) && n.error("Invalid XML: " + e), t
    };
    var eb = /#.*$/, fb = /([?&])_=[^&]*/, gb = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        hb = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, ib = /^(?:GET|HEAD)$/, jb = /^\/\//,
        kb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, lb = {}, mb = {}, nb = "*/".concat("*"),
        ob = a.location.href, pb = kb.exec(ob.toLowerCase()) || [];
    n.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ob,
            type: "GET",
            isLocal: hb.test(pb[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": nb,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {xml: /xml/, html: /html/, json: /json/},
            responseFields: {xml: "responseXML", text: "responseText", json: "responseJSON"},
            converters: {"* text": String, "text html": !0, "text json": n.parseJSON, "text xml": n.parseXML},
            flatOptions: {url: !0, context: !0}
        },
        ajaxSetup: function (e, t) {
            return t ? sb(sb(e, n.ajaxSettings), t) : sb(n.ajaxSettings, e)
        },
        ajaxPrefilter: qb(lb),
        ajaxTransport: qb(mb),
        ajax: function (e, t) {
            function T(e, t, o, a) {
                var l, g, y, w, E, x = t;
                2 !== b && (b = 2, u && clearTimeout(u), r = void 0, s = a || "", S.readyState = e > 0 ? 4 : 0, l = e >= 200 && 300 > e || 304 === e, o && (w = tb(c, S, o)), w = ub(c, w, S, l), l ? (c.ifModified && (E = S.getResponseHeader("Last-Modified"), E && (n.lastModified[i] = E), E = S.getResponseHeader("etag"), E && (n.etag[i] = E)), 204 === e || "HEAD" === c.type ? x = "nocontent" : 304 === e ? x = "notmodified" : (x = w.state, g = w.data, y = w.error, l = !y)) : (y = x, (e || !x) && (x = "error", 0 > e && (e = 0))), S.status = e, S.statusText = (t || x) + "", l ? d.resolveWith(h, [g, x, S]) : d.rejectWith(h, [S, x, y]), S.statusCode(m), m = void 0, f && p.trigger(l ? "ajaxSuccess" : "ajaxError", [S, c, l ? g : y]), v.fireWith(h, [S, x]), f && (p.trigger("ajaxComplete", [S, c]), --n.active || n.event.trigger("ajaxStop")))
            }

            "object" == typeof e && (t = e, e = void 0), t = t || {};
            var r, i, s, o, u, a, f, l, c = n.ajaxSetup({}, t), h = c.context || c,
                p = c.context && (h.nodeType || h.jquery) ? n(h) : n.event, d = n.Deferred(),
                v = n.Callbacks("once memory"), m = c.statusCode || {}, g = {}, y = {}, b = 0, w = "canceled", S = {
                    readyState: 0, getResponseHeader: function (e) {
                        var t;
                        if (2 === b) {
                            if (!o) {
                                o = {};
                                while (t = gb.exec(s))o[t[1].toLowerCase()] = t[2]
                            }
                            t = o[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    }, getAllResponseHeaders: function () {
                        return 2 === b ? s : null
                    }, setRequestHeader: function (e, t) {
                        var n = e.toLowerCase();
                        return b || (e = y[n] = y[n] || e, g[e] = t), this
                    }, overrideMimeType: function (e) {
                        return b || (c.mimeType = e), this
                    }, statusCode: function (e) {
                        var t;
                        if (e)if (2 > b)for (t in e)m[t] = [m[t], e[t]]; else S.always(e[S.status]);
                        return this
                    }, abort: function (e) {
                        var t = e || w;
                        return r && r.abort(t), T(0, t), this
                    }
                };
            if (d.promise(S).complete = v.add, S.success = S.done, S.error = S.fail, c.url = ((e || c.url || ob) + "").replace(eb, "").replace(jb, pb[1] + "//"), c.type = t.method || t.type || c.method || c.type, c.dataTypes = n.trim(c.dataType || "*").toLowerCase().match(E) || [""], null == c.crossDomain && (a = kb.exec(c.url.toLowerCase()), c.crossDomain = !(!a || a[1] === pb[1] && a[2] === pb[2] && (a[3] || ("http:" === a[1] ? "80" : "443")) === (pb[3] || ("http:" === pb[1] ? "80" : "443")))), c.data && c.processData && "string" != typeof c.data && (c.data = n.param(c.data, c.traditional)), rb(lb, c, t, S), 2 === b)return S;
            f = n.event && c.global, f && 0 === n.active++ && n.event.trigger("ajaxStart"), c.type = c.type.toUpperCase(), c.hasContent = !ib.test(c.type), i = c.url, c.hasContent || (c.data && (i = c.url += (db.test(i) ? "&" : "?") + c.data, delete c.data), c.cache === !1 && (c.url = fb.test(i) ? i.replace(fb, "$1_=" + cb++) : i + (db.test(i) ? "&" : "?") + "_=" + cb++)), c.ifModified && (n.lastModified[i] && S.setRequestHeader("If-Modified-Since", n.lastModified[i]), n.etag[i] && S.setRequestHeader("If-None-Match", n.etag[i])), (c.data && c.hasContent && c.contentType !== !1 || t.contentType) && S.setRequestHeader("Content-Type", c.contentType), S.setRequestHeader("Accept", c.dataTypes[0] && c.accepts[c.dataTypes[0]] ? c.accepts[c.dataTypes[0]] + ("*" !== c.dataTypes[0] ? ", " + nb + "; q=0.01" : "") : c.accepts["*"]);
            for (l in c.headers)S.setRequestHeader(l, c.headers[l]);
            if (!c.beforeSend || c.beforeSend.call(h, S, c) !== !1 && 2 !== b) {
                w = "abort";
                for (l in{success: 1, error: 1, complete: 1})S[l](c[l]);
                if (r = rb(mb, c, t, S)) {
                    S.readyState = 1, f && p.trigger("ajaxSend", [S, c]), c.async && c.timeout > 0 && (u = setTimeout(function () {
                        S.abort("timeout")
                    }, c.timeout));
                    try {
                        b = 1, r.send(g, T)
                    } catch (x) {
                        if (!(2 > b))throw x;
                        T(-1, x)
                    }
                } else T(-1, "No Transport");
                return S
            }
            return S.abort()
        },
        getJSON: function (e, t, r) {
            return n.get(e, t, r, "json")
        },
        getScript: function (e, t) {
            return n.get(e, void 0, t, "script")
        }
    }), n.each(["get", "post"], function (e, t) {
        n[t] = function (e, r, i, s) {
            return n.isFunction(r) && (s = s || i, i = r, r = void 0), n.ajax({
                url: e,
                type: t,
                dataType: s,
                data: r,
                success: i
            })
        }
    }), n._evalUrl = function (e) {
        return n.ajax({url: e, type: "GET", dataType: "script", async: !1, global: !1, "throws": !0})
    }, n.fn.extend({
        wrapAll: function (e) {
            var t;
            return n.isFunction(e) ? this.each(function (t) {
                n(this).wrapAll(e.call(this, t))
            }) : (this[0] && (t = n(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                var e = this;
                while (e.firstElementChild)e = e.firstElementChild;
                return e
            }).append(this)), this)
        }, wrapInner: function (e) {
            return this.each(n.isFunction(e) ? function (t) {
                n(this).wrapInner(e.call(this, t))
            } : function () {
                var t = n(this), r = t.contents();
                r.length ? r.wrapAll(e) : t.append(e)
            })
        }, wrap: function (e) {
            var t = n.isFunction(e);
            return this.each(function (r) {
                n(this).wrapAll(t ? e.call(this, r) : e)
            })
        }, unwrap: function () {
            return this.parent().each(function () {
                n.nodeName(this, "body") || n(this).replaceWith(this.childNodes)
            }).end()
        }
    }), n.expr.filters.hidden = function (e) {
        return e.offsetWidth <= 0 && e.offsetHeight <= 0
    }, n.expr.filters.visible = function (e) {
        return !n.expr.filters.hidden(e)
    };
    var vb = /%20/g, wb = /\[\]$/, xb = /\r?\n/g, yb = /^(?:submit|button|image|reset|file)$/i,
        zb = /^(?:input|select|textarea|keygen)/i;
    n.param = function (e, t) {
        var r, i = [], s = function (e, t) {
            t = n.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
        };
        if (void 0 === t && (t = n.ajaxSettings && n.ajaxSettings.traditional), n.isArray(e) || e.jquery && !n.isPlainObject(e)) n.each(e, function () {
            s(this.name, this.value)
        }); else for (r in e)Ab(r, e[r], t, s);
        return i.join("&").replace(vb, "+")
    }, n.fn.extend({
        serialize: function () {
            return n.param(this.serializeArray())
        }, serializeArray: function () {
            return this.map(function () {
                var e = n.prop(this, "elements");
                return e ? n.makeArray(e) : this
            }).filter(function () {
                var e = this.type;
                return this.name && !n(this).is(":disabled") && zb.test(this.nodeName) && !yb.test(e) && (this.checked || !T.test(e))
            }).map(function (e, t) {
                var r = n(this).val();
                return null == r ? null : n.isArray(r) ? n.map(r, function (e) {
                    return {name: t.name, value: e.replace(xb, "\r\n")}
                }) : {name: t.name, value: r.replace(xb, "\r\n")}
            }).get()
        }
    }), n.ajaxSettings.xhr = function () {
        try {
            return new XMLHttpRequest
        } catch (e) {
        }
    };
    var Bb = 0, Cb = {}, Db = {0: 200, 1223: 204}, Eb = n.ajaxSettings.xhr();
    a.attachEvent && a.attachEvent("onunload", function () {
        for (var e in Cb)Cb[e]()
    }), k.cors = !!Eb && "withCredentials" in Eb, k.ajax = Eb = !!Eb, n.ajaxTransport(function (e) {
        var t;
        return k.cors || Eb && !e.crossDomain ? {
            send: function (n, r) {
                var i, s = e.xhr(), o = ++Bb;
                if (s.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields)for (i in e.xhrFields)s[i] = e.xhrFields[i];
                e.mimeType && s.overrideMimeType && s.overrideMimeType(e.mimeType), e.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest");
                for (i in n)s.setRequestHeader(i, n[i]);
                t = function (e) {
                    return function () {
                        t && (delete Cb[o], t = s.onload = s.onerror = null, "abort" === e ? s.abort() : "error" === e ? r(s.status, s.statusText) : r(Db[s.status] || s.status, s.statusText, "string" == typeof s.responseText ? {text: s.responseText} : void 0, s.getAllResponseHeaders()))
                    }
                }, s.onload = t(), s.onerror = t("error"), t = Cb[o] = t("abort");
                try {
                } catch (u) {
                    if (t)throw u
                }
            }, abort: function () {
                t && t()
            }
        } : void 0
    }), n.ajaxSetup({
        accepts: {script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
        contents: {script: /(?:java|ecma)script/},
        converters: {
            "text script": function (e) {
                return n.globalEval(e), e
            }
        }
    }), n.ajaxPrefilter("script", function (e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET")
    }), n.ajaxTransport("script", function (e) {
        if (e.crossDomain) {
            var t, r;
            return {
                send: function (i, s) {
                    t = n("<script>").prop({
                        async: !0,
                        charset: e.scriptCharset,
                        src: e.url
                    }).on("load error", r = function (e) {
                        t.remove(), r = null, e && s("error" === e.type ? 404 : 200, e.type)
                    }), l.head.appendChild(t[0])
                }, abort: function () {
                    r && r()
                }
            }
        }
    });
    var Fb = [], Gb = /(=)\?(?=&|$)|\?\?/;
    n.ajaxSetup({
        jsonp: "callback", jsonpCallback: function () {
            var e = Fb.pop() || n.expando + "_" + cb++;
            return this[e] = !0, e
        }
    }), n.ajaxPrefilter("json jsonp", function (e, t, r) {
        var i, s, o,
            u = e.jsonp !== !1 && (Gb.test(e.url) ? "url" : "string" == typeof e.data && !(e.contentType || "").indexOf("application/x-www-form-urlencoded") && Gb.test(e.data) && "data");
        return u || "jsonp" === e.dataTypes[0] ? (i = e.jsonpCallback = n.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, u ? e[u] = e[u].replace(Gb, "$1" + i) : e.jsonp !== !1 && (e.url += (db.test(e.url) ? "&" : "?") + e.jsonp + "=" + i), e.converters["script json"] = function () {
            return o || n.error(i + " was not called"), o[0]
        }, e.dataTypes[0] = "json", s = a[i], a[i] = function () {
            o = arguments
        }, r.always(function () {
            a[i] = s, e[i] && (e.jsonpCallback = t.jsonpCallback, Fb.push(i)), o && n.isFunction(s) && s(o[0]), o = s = void 0
        }), "script") : void 0
    }), n.parseHTML = function (e, t, r) {
        if (!e || "string" != typeof e)return null;
        "boolean" == typeof t && (r = t, t = !1), t = t || l;
        var i = v.exec(e), s = !r && [];
        return i ? [t.createElement(i[1])] : (i = n.buildFragment([e], t, s), s && s.length && n(s).remove(), n.merge([], i.childNodes))
    };
    var Hb = n.fn.load;
    n.fn.load = function (e, t, r) {
        if ("string" != typeof e && Hb)return Hb.apply(this, arguments);
        var i, s, o, u = this, a = e.indexOf(" ");
        return a >= 0 && (i = n.trim(e.slice(a)), e = e.slice(0, a)), n.isFunction(t) ? (r = t, t = void 0) : t && "object" == typeof t && (s = "POST"), u.length > 0 && n.ajax({
            url: e,
            type: s,
            dataType: "html",
            data: t
        }).done(function (e) {
            o = arguments, u.html(i ? n("<div>").append(n.parseHTML(e)).find(i) : e)
        }).complete(r && function (e, t) {
                u.each(r, o || [e.responseText, t, e])
            }), this
    }, n.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) {
        n.fn[t] = function (e) {
            return this.on(t, e)
        }
    }), n.expr.filters.animated = function (e) {
        return n.grep(n.timers, function (t) {
            return e === t.elem
        }).length
    };
    var Ib = a.document.documentElement;
    n.offset = {
        setOffset: function (e, t, r) {
            var i, s, o, u, a, f, l, c = n.css(e, "position"), h = n(e), p = {};
            "static" === c && (e.style.position = "relative"), a = h.offset(), o = n.css(e, "top"), f = n.css(e, "left"), l = ("absolute" === c || "fixed" === c) && (o + f).indexOf("auto") > -1, l ? (i = h.position(), u = i.top, s = i.left) : (u = parseFloat(o) || 0, s = parseFloat(f) || 0), n.isFunction(t) && (t = t.call(e, r, a)), null != t.top && (p.top = t.top - a.top + u), null != t.left && (p.left = t.left - a.left + s), "using" in t ? t.using.call(e, p) : h.css(p)
        }
    }, n.fn.extend({
        offset: function (e) {
            if (arguments.length)return void 0 === e ? this : this.each(function (t) {
                n.offset.setOffset(this, e, t)
            });
            var t, r, i = this[0], s = {top: 0, left: 0}, o = i && i.ownerDocument;
            if (o)return t = o.documentElement, n.contains(t, i) ? (typeof i.getBoundingClientRect !== U && (s = i.getBoundingClientRect()), r = Jb(o), {
                top: s.top + r.pageYOffset - t.clientTop,
                left: s.left + r.pageXOffset - t.clientLeft
            }) : s
        }, position: function () {
            if (this[0]) {
                var e, t, r = this[0], i = {top: 0, left: 0};
                return "fixed" === n.css(r, "position") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), n.nodeName(e[0], "html") || (i = e.offset()), i.top += n.css(e[0], "borderTopWidth", !0), i.left += n.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - i.top - n.css(r, "marginTop", !0),
                    left: t.left - i.left - n.css(r, "marginLeft", !0)
                }
            }
        }, offsetParent: function () {
            return this.map(function () {
                var e = this.offsetParent || Ib;
                while (e && !n.nodeName(e, "html") && "static" === n.css(e, "position"))e = e.offsetParent;
                return e || Ib
            })
        }
    }), n.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function (e, t) {
        var r = "pageYOffset" === t;
        n.fn[e] = function (n) {
            return J(this, function (e, n, i) {
                var s = Jb(e);
                return void 0 === i ? s ? s[t] : e[n] : void (s ? s.scrollTo(r ? a.pageXOffset : i, r ? i : a.pageYOffset) : e[n] = i)
            }, e, n, arguments.length, null)
        }
    }), n.each(["top", "left"], function (e, t) {
        n.cssHooks[t] = ya(k.pixelPosition, function (e, r) {
            return r ? (r = xa(e, t), va.test(r) ? n(e).position()[t] + "px" : r) : void 0
        })
    }), n.each({Height: "height", Width: "width"}, function (e, t) {
        n.each({padding: "inner" + e, content: t, "": "outer" + e}, function (r, i) {
            n.fn[i] = function (i, s) {
                var o = arguments.length && (r || "boolean" != typeof i),
                    u = r || (i === !0 || s === !0 ? "margin" : "border");
                return J(this, function (t, r, i) {
                    var s;
                    return n.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (s = t.documentElement, Math.max(t.body["scroll" + e], s["scroll" + e], t.body["offset" + e], s["offset" + e], s["client" + e])) : void 0 === i ? n.css(t, r, u) : n.style(t, r, i, u)
                }, t, o ? i : void 0, o, null)
            }
        })
    }), n.fn.size = function () {
        return this.length
    }, n.fn.andSelf = n.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function () {
        return n
    });
    var Kb = a.jQuery, Lb = a.$;
    return n.noConflict = function (e) {
        return a.$ === n && (a.$ = Lb), e && a.jQuery === n && (a.jQuery = Kb), n
    }, typeof b === U && (a.jQuery = a.$ = n), n
}),
!function (e) {
    if ("object" == typeof exports) module.exports = e(); else if ("function" == typeof define && define.amd) define("Class", e); else {
        var t;
        "undefined" != typeof window ? t = window : "undefined" != typeof global ? t = global : "undefined" != typeof self && (t = self), t.Class = e()
    }
}(
    function () {
    var e, t, n;
    return function r(e, t, n) {
        function i(o, u) {
            if (!t[o]) {
                if (!e[o]) {
                    var a = typeof require == "function" && require;
                    if (!u && a)return a(o, !0);
                    if (s)return s(o, !0);
                    throw new Error("Cannot find module '" + o + "'")
                }
                var f = t[o] = {exports: {}};
                e[o][0].call(f.exports, function (t) {
                    var n = e[o][1][t];
                    return i(n ? n : t)
                }, f, f.exports, r, e, t, n)
            }
            return t[o].exports
        }

        var s = typeof require == "function" && require;
        for (var o = 0; o < n.length; o++)i(n[o]);
        return i
    }({
        1: [function (e, t, n) {
            var r = e("./baseClass"), i = function (e) {
                var t = undefined;
                e === undefined && (e = {}), e.initialize ? (t = e.initialize, delete e.initialize) : t = function () {
                    Array.prototype.splice.apply(arguments, [0, 0, this]), i.parent.apply(undefined, arguments)
                }, e.Extends !== undefined ? (e.Extends.$$isConstructor = !0, t.prototype = Object.create(e.Extends.prototype), t.$$parentConstructor = e.Extends, delete e.Extends) : (t.prototype = Object.create(r), t.$$parentConstructor = function () {
                }), t.prototype.$$getters = {}, t.prototype.$$setters = {};
                for (var n in e)typeof e[n] == "function" ? (e[n].$$name = n, e[n].$$owner = t.prototype, t.prototype[n] = e[n]) : e[n] && typeof e[n] == "object" && (e[n].get || e[n].set) ? (Object.defineProperty(t.prototype, n, e[n]), e[n].get && (t.prototype.$$getters[n] = e[n].get, e[n].get.$$name = n, e[n].get.$$owner = t.prototype), e[n].set && (t.prototype.$$setters[n] = e[n].set, e[n].set.$$name = n, e[n].set.$$owner = t.prototype)) : t.prototype[n] = e[n];
                t.$$isConstructor = !0;
                for (var n = 1; n < arguments.length; n++)arguments[n].compare(t);
                return t
            };
            i.parent = function (e) {
                var t = i.parent.caller;
                arguments = Array.prototype.slice.apply(arguments, [1]);
                if (t.$$isConstructor)var n = t.$$parentConstructor; else {
                    if (!t.$$name)throw"You cannot call parent here";
                    var r = t.$$name, s = t.$$owner.$$getters[r], o = t.$$owner.$$setters[r];
                    if (arguments.length == 1 && o) {
                        var n = Object.getPrototypeOf(t.$$owner).$$setters[r];
                        if (n === undefined)throw"No setter defined in parent"
                    } else if (arguments.length == 0 && s) {
                        var n = Object.getPrototypeOf(t.$$owner).$$getters[r];
                        if (n === undefined)throw"No getter defined in parent"
                    } else {
                        if (o || s)throw"Incorrect amount of arguments sent to getter or setter";
                        var n = Object.getPrototypeOf(t.$$owner)[r];
                        if (n === undefined)throw"No parent function defined for " + r
                    }
                }
                return n.apply(e, arguments)
            }, t.exports = i
        }, {"./baseClass": 2}], 2: [function (e, t, n) {
            t.exports = {
                parent: function () {
                    if (this.parent.caller.$$isConstructor)var e = this.parent.caller.$$parentConstructor; else {
                        if (!this.parent.caller.$$name)throw"You cannot call parent here";
                        var t = this.parent.caller.$$name, n = this.parent.caller.$$owner.$$getters[t],
                            r = this.parent.caller.$$owner.$$setters[t];
                        if (arguments.length == 1 && r) {
                            var e = Object.getPrototypeOf(this.parent.caller.$$owner).$$setters[t];
                            if (e === undefined)throw"No setter defined in parent"
                        } else if (arguments.length == 0 && n) {
                            var e = Object.getPrototypeOf(this.parent.caller.$$owner).$$getters[t];
                            if (e === undefined)throw"No getter defined in parent"
                        } else {
                            if (r || n)throw"Incorrect amount of arguments sent to getter or setter";
                            var e = Object.getPrototypeOf(this.parent.caller.$$owner)[t];
                            if (e === undefined)throw"No parent function defined for " + t
                        }
                    }
                    return e.apply(this, arguments)
                }
            }
        }, {}]
    }, {}, [1])(1)
}),
function () {
    function e(e, t, n) {
        n = (n || 0) - 1;
        for (var r = e ? e.length : 0; ++n < r;)if (e[n] === t)return n;
        return -1
    }

    function t(t, n) {
        var r = typeof n;
        if (t = t.l, "boolean" == r || null == n)return t[n] ? 0 : -1;
        "number" != r && "string" != r && (r = "object");
        var i = "number" == r ? n : g + n;
        return t = (t = t[r]) && t[i], "object" == r ? t && -1 < e(t, n) ? 0 : -1 : t ? 0 : -1
    }

    function n(e) {
        var t = this.l, n = typeof e;
        if ("boolean" == n || null == e) t[e] = !0; else {
            "number" != n && "string" != n && (n = "object");
            var r = "number" == n ? e : g + e, t = t[n] || (t[n] = {});
            "object" == n ? (t[r] || (t[r] = [])).push(e) : t[r] = !0
        }
    }

    function r(e) {
        return e.charCodeAt(0)
    }

    function i(e, t) {
        for (var n = e.m, r = t.m, i = -1, s = n.length; ++i < s;) {
            var o = n[i], u = r[i];
            if (o !== u) {
                if (o > u || typeof o == "undefined")return 1;
                if (o < u || typeof u == "undefined")return -1
            }
        }
        return e.n - t.n
    }

    function s(e) {
        var t = -1, r = e.length, i = e[0], s = e[r / 2 | 0], o = e[r - 1];
        if (i && typeof i == "object" && s && typeof s == "object" && o && typeof o == "object")return !1;
        for (i = a(), i["false"] = i["null"] = i["true"] = i.undefined = !1, s = a(), s.k = e, s.l = i, s.push = n; ++t < r;)s.push(e[t]);
        return s
    }

    function o(e) {
        return "\\" + V[e]
    }

    function u() {
        return d.pop() || []
    }

    function a() {
        return v.pop() || {
                k: null,
                l: null,
                m: null,
                "false": !1,
                n: 0,
                "null": !1,
                number: null,
                object: null,
                push: null,
                string: null,
                "true": !1,
                "undefined": !1,
                o: null
            }
    }

    function f(e) {
        e.length = 0, d.length < b && d.push(e)
    }

    function l(e) {
        var t = e.l;
        t && l(t), e.k = e.l = e.m = e.object = e.number = e.string = e.o = null, v.length < b && v.push(e)
    }

    function c(e, t, n) {
        t || (t = 0), typeof n == "undefined" && (n = e ? e.length : 0);
        var r = -1;
        n = n - t || 0;
        for (var i = Array(0 > n ? 0 : n); ++r < n;)i[r] = e[t + r];
        return i
    }

    function h(n) {
        function d(e, t, n) {
            if (!e || !X[typeof e])return e;
            t = t && typeof n == "undefined" ? t : tt(t, n, 3);
            for (var r = -1, i = X[typeof e] && jn(e),
                     s = i ? i.length : 0; ++r < s && (n = i[r], !1 !== t(e[n], n, e)););
            return e
        }

        function v(e, t, n) {
            var r;
            if (!e || !X[typeof e])return e;
            t = t && typeof n == "undefined" ? t : tt(t, n, 3);
            for (r in e)if (!1 === t(e[r], r, e))break;
            return e
        }

        function b(e, t, n) {
            var r, i = e, s = i;
            if (!i)return s;
            for (var o = arguments, u = 0,
                     a = typeof n == "number" ? 2 : o.length; ++u < a;)if ((i = o[u]) && X[typeof i])for (var f = -1,
                                                                                                              l = X[typeof i] && jn(i),
                                                                                                              c = l ? l.length : 0; ++f < c;)r = l[f], "undefined" == typeof s[r] && (s[r] = i[r]);
            return s
        }

        function V(e, t, n) {
            var r, i = e, s = i;
            if (!i)return s;
            var o = arguments, u = 0, a = typeof n == "number" ? 2 : o.length;
            if (3 < a && "function" == typeof o[a - 2])var f = tt(o[--a - 1], o[a--], 2); else 2 < a && "function" == typeof o[a - 1] && (f = o[--a]);
            for (; ++u < a;)if ((i = o[u]) && X[typeof i])for (var l = -1, c = X[typeof i] && jn(i),
                                                                   h = c ? c.length : 0; ++l < h;)r = c[l], s[r] = f ? f(s[r], i[r]) : i[r];
            return s
        }

        function J(e) {
            var t, n = [];
            if (!e || !X[typeof e])return n;
            for (t in e)yn.call(e, t) && n.push(t);
            return n
        }

        function K(e) {
            return e && typeof e == "object" && !Bn(e) && yn.call(e, "__wrapped__") ? e : new Q(e)
        }

        function Q(e, t) {
            this.__chain__ = !!t, this.__wrapped__ = e
        }

        function G(e) {
            function t() {
                if (r) {
                    var e = c(r);
                    bn.apply(e, arguments)
                }
                if (this instanceof t) {
                    var s = et(n.prototype), e = n.apply(s, e || arguments);
                    return Et(e) ? e : s
                }
                return n.apply(i, e || arguments)
            }

            var n = e[0], r = e[2], i = e[4];
            return Hn(t, e), t
        }

        function Z(e, t, n, r, i) {
            if (n) {
                var s = n(e);
                if (typeof s != "undefined")return s
            }
            if (!Et(e))return e;
            var o = cn.call(e);
            if (!U[o])return e;
            var a = Dn[o];
            switch (o) {
                case H:
                case B:
                    return new a(+e);
                case F:
                case R:
                    return new a(e);
                case q:
                    return s = a(e.source, N.exec(e)), s.lastIndex = e.lastIndex, s
            }
            if (o = Bn(e), t) {
                var l = !r;
                r || (r = u()), i || (i = u());
                for (var h = r.length; h--;)if (r[h] == e)return i[h];
                s = o ? a(e.length) : {}
            } else s = o ? c(e) : V({}, e);
            return o && (yn.call(e, "index") && (s.index = e.index), yn.call(e, "input") && (s.input = e.input)), t ? (r.push(e), i.push(s), (o ? At : d)(e, function (e, o) {
                s[o] = Z(e, t, n, r, i)
            }), l && (f(r), f(i)), s) : s
        }

        function et(e) {
            return Et(e) ? Tn(e) : {}
        }

        function tt(e, t, n) {
            if (typeof e != "function")return Vt;
            if (typeof t != "undefined" && "prototype" in e) {
                var r = e.__bindData__;
                if (typeof r == "undefined" && (Pn.funcNames && (r = !e.name), r = r || !Pn.funcDecomp, !r)) {
                    var i = mn.call(e);
                    Pn.funcNames || (r = !C.test(i)), r || (r = O.test(i), Hn(e, r))
                }
                if (!1 === r || !0 !== r && 1 & r[1])return e;
                switch (n) {
                    case 1:
                        return function (n) {
                            return e.call(t, n)
                        };
                    case 2:
                        return function (n, r) {
                            return e.call(t, n, r)
                        };
                    case 3:
                        return function (n, r, i) {
                            return e.call(t, n, r, i)
                        };
                    case 4:
                        return function (n, r, i, s) {
                            return e.call(t, n, r, i, s)
                        }
                }
                return Wt(e, t)
            }
            return e
        }

        function nt(e) {
            function t() {
                var e = a ? o : this;
                if (i) {
                    var d = c(i);
                    bn.apply(d, arguments)
                }
                return (s || l) && (d || (d = c(arguments)), s && bn.apply(d, s), l && d.length < u) ? (r |= 16, nt([n, h ? r : -4 & r, d, null, o, u])) : (d || (d = arguments), f && (n = e[p]), this instanceof t ? (e = et(n.prototype), d = n.apply(e, d), Et(d) ? d : e) : n.apply(e, d))
            }

            var n = e[0], r = e[1], i = e[2], s = e[3], o = e[4], u = e[5], a = 1 & r, f = 2 & r, l = 4 & r, h = 8 & r,
                p = n;
            return Hn(t, e), t
        }

        function rt(n, r) {
            var i = -1, o = ht(), u = n ? n.length : 0, a = u >= y && o === e, f = [];
            if (a) {
                var c = s(r);
                c ? (o = t, r = c) : a = !1
            }
            for (; ++i < u;)c = n[i], 0 > o(r, c) && f.push(c);
            return a && l(r), f
        }

        function it(e, t, n, r) {
            r = (r || 0) - 1;
            for (var i = e ? e.length : 0, s = []; ++r < i;) {
                var o = e[r];
                if (o && typeof o == "object" && typeof o.length == "number" && (Bn(o) || mt(o))) {
                    t || (o = it(o, t, n));
                    var u = -1, a = o.length, f = s.length;
                    for (s.length += a; ++u < a;)s[f++] = o[u]
                } else n || s.push(o)
            }
            return s
        }

        function st(e, t, n, r, i, s) {
            if (n) {
                var o = n(e, t);
                if (typeof o != "undefined")return !!o
            }
            if (e === t)return 0 !== e || 1 / e == 1 / t;
            if (e === e && !(e && X[typeof e] || t && X[typeof t]))return !1;
            if (null == e || null == t)return e === t;
            var a = cn.call(e), l = cn.call(t);
            if (a == D && (a = I), l == D && (l = I), a != l)return !1;
            switch (a) {
                case H:
                case B:
                    return +e == +t;
                case F:
                    return e != +e ? t != +t : 0 == e ? 1 / e == 1 / t : e == +t;
                case q:
                case R:
                    return e == on(t)
            }
            if (l = a == P, !l) {
                var c = yn.call(e, "__wrapped__"), h = yn.call(t, "__wrapped__");
                if (c || h)return st(c ? e.__wrapped__ : e, h ? t.__wrapped__ : t, n, r, i, s);
                if (a != I)return !1;
                if (a = e.constructor, c = t.constructor, a != c && !(wt(a) && a instanceof a && wt(c) && c instanceof c) && "constructor" in e && "constructor" in t)return !1
            }
            for (a = !i, i || (i = u()), s || (s = u()), c = i.length; c--;)if (i[c] == e)return s[c] == t;
            var p = 0, o = !0;
            if (i.push(e), s.push(t), l) {
                if (c = e.length, p = t.length, (o = p == c) || r)for (; p--;)if (l = c, h = t[p], r)for (; l-- && !(o = st(e[l], h, n, r, i, s));); else if (!(o = st(e[p], h, n, r, i, s)))break
            } else v(t, function (t, u, a) {
                return yn.call(a, u) ? (p++, o = yn.call(e, u) && st(e[u], t, n, r, i, s)) : void 0
            }), o && !r && v(e, function (e, t, n) {
                return yn.call(n, t) ? o = -1 < --p : void 0
            });
            return i.pop(), s.pop(), a && (f(i), f(s)), o
        }

        function ot(e, t, n, r, i) {
            (Bn(t) ? At : d)(t, function (t, s) {
                var o, u, a = t, f = e[s];
                if (t && ((u = Bn(t)) || Un(t))) {
                    for (a = r.length; a--;)if (o = r[a] == t) {
                        f = i[a];
                        break
                    }
                    if (!o) {
                        var l;
                        n && (a = n(f, t), l = typeof a != "undefined") && (f = a), l || (f = u ? Bn(f) ? f : [] : Un(f) ? f : {}), r.push(t), i.push(f), l || ot(f, t, n, r, i)
                    }
                } else n && (a = n(f, t), typeof a == "undefined" && (a = t)), typeof a != "undefined" && (f = a);
                e[s] = f
            })
        }

        function ut(e, t) {
            return e + vn(_n() * (t - e + 1))
        }

        function at(n, r, i) {
            var o = -1, a = ht(), c = n ? n.length : 0, h = [], p = !r && c >= y && a === e, d = i || p ? u() : h;
            for (p && (d = s(d), a = t); ++o < c;) {
                var v = n[o], m = i ? i(v, o, n) : v;
                (r ? !o || d[d.length - 1] !== m : 0 > a(d, m)) && ((i || p) && d.push(m), h.push(v))
            }
            return p ? (f(d.k), l(d)) : i && f(d), h
        }

        function ft(e) {
            return function (t, n, r) {
                var i = {};
                n = K.createCallback(n, r, 3), r = -1;
                var s = t ? t.length : 0;
                if (typeof s == "number")for (; ++r < s;) {
                    var o = t[r];
                    e(i, o, n(o, r, t), t)
                } else d(t, function (t, r, s) {
                    e(i, t, n(t, r, s), s)
                });
                return i
            }
        }

        function lt(e, t, n, r, i, s) {
            var o = 1 & t, u = 4 & t, a = 16 & t, f = 32 & t;
            if (!(2 & t || wt(e)))throw new un;
            a && !n.length && (t &= -17, a = n = !1), f && !r.length && (t &= -33, f = r = !1);
            var l = e && e.__bindData__;
            return l && !0 !== l ? (l = c(l), l[2] && (l[2] = c(l[2])), l[3] && (l[3] = c(l[3])), !o || 1 & l[1] || (l[4] = i), !o && 1 & l[1] && (t |= 8), !u || 4 & l[1] || (l[5] = s), a && bn.apply(l[2] || (l[2] = []), n), f && Sn.apply(l[3] || (l[3] = []), r), l[1] |= t, lt.apply(null, l)) : (1 == t || 17 === t ? G : nt)([e, t, n, r, i, s])
        }

        function ct(e) {
            return Fn[e]
        }

        function ht() {
            var t = (t = K.indexOf) === Ft ? e : t;
            return t
        }

        function pt(e) {
            return typeof e == "function" && hn.test(e)
        }

        function dt(e) {
            var t, n;
            return e && cn.call(e) == I && (t = e.constructor, !wt(t) || t instanceof t) ? (v(e, function (e, t) {
                n = t
            }), typeof n == "undefined" || yn.call(e, n)) : !1
        }

        function vt(e) {
            return In[e]
        }

        function mt(e) {
            return e && typeof e == "object" && typeof e.length == "number" && cn.call(e) == D || !1
        }

        function gt(e, t, n) {
            var r = jn(e), i = r.length;
            for (t = tt(t, n, 3); i-- && (n = r[i], !1 !== t(e[n], n, e)););
            return e
        }

        function yt(e) {
            var t = [];
            return v(e, function (e, n) {
                wt(e) && t.push(n)
            }), t.sort()
        }

        function bt(e) {
            for (var t = -1, n = jn(e), r = n.length, i = {}; ++t < r;) {
                var s = n[t];
                i[e[s]] = s
            }
            return i
        }

        function wt(e) {
            return typeof e == "function"
        }

        function Et(e) {
            return !!e && !!X[typeof e]
        }

        function St(e) {
            return typeof e == "number" || e && typeof e == "object" && cn.call(e) == F || !1
        }

        function xt(e) {
            return typeof e == "string" || e && typeof e == "object" && cn.call(e) == R || !1
        }

        function Tt(e) {
            for (var t = -1, n = jn(e), r = n.length, i = Gt(r); ++t < r;)i[t] = e[n[t]];
            return i
        }

        function Nt(e, t, n) {
            var r = -1, i = ht(), s = e ? e.length : 0, o = !1;
            return n = (0 > n ? An(0, s + n) : n) || 0, Bn(e) ? o = -1 < i(e, t, n) : typeof s == "number" ? o = -1 < (xt(e) ? e.indexOf(t, n) : i(e, t, n)) : d(e, function (e) {
                return ++r < n ? void 0 : !(o = e === t)
            }), o
        }

        function Ct(e, t, n) {
            var r = !0;
            t = K.createCallback(t, n, 3), n = -1;
            var i = e ? e.length : 0;
            if (typeof i == "number")for (; ++n < i && (r = !!t(e[n], n, e));); else d(e, function (e, n, i) {
                return r = !!t(e, n, i)
            });
            return r
        }

        function kt(e, t, n) {
            var r = [];
            t = K.createCallback(t, n, 3), n = -1;
            var i = e ? e.length : 0;
            if (typeof i == "number")for (; ++n < i;) {
                var s = e[n];
                t(s, n, e) && r.push(s)
            } else d(e, function (e, n, i) {
                t(e, n, i) && r.push(e)
            });
            return r
        }

        function Lt(e, t, n) {
            t = K.createCallback(t, n, 3), n = -1;
            var r = e ? e.length : 0;
            if (typeof r != "number") {
                var i;
                return d(e, function (e, n, r) {
                    return t(e, n, r) ? (i = e, !1) : void 0
                }), i
            }
            for (; ++n < r;) {
                var s = e[n];
                if (t(s, n, e))return s
            }
        }

        function At(e, t, n) {
            var r = -1, i = e ? e.length : 0;
            if (t = t && typeof n == "undefined" ? t : tt(t, n, 3), typeof i == "number")for (; ++r < i && !1 !== t(e[r], r, e);); else d(e, t);
            return e
        }

        function Ot(e, t, n) {
            var r = e ? e.length : 0;
            if (t = t && typeof n == "undefined" ? t : tt(t, n, 3), typeof r == "number")for (; r-- && !1 !== t(e[r], r, e);); else {
                var i = jn(e), r = i.length;
                d(e, function (e, n, s) {
                    return n = i ? i[--r] : --r, t(s[n], n, s)
                })
            }
            return e
        }

        function Mt(e, t, n) {
            var r = -1, i = e ? e.length : 0;
            if (t = K.createCallback(t, n, 3), typeof i == "number")for (var s = Gt(i); ++r < i;)s[r] = t(e[r], r, e); else s = [], d(e, function (e, n, i) {
                s[++r] = t(e, n, i)
            });
            return s
        }

        function _t(e, t, n) {
            var i = -1 / 0, s = i;
            if (typeof t != "function" && n && n[t] === e && (t = null), null == t && Bn(e)) {
                n = -1;
                for (var o = e.length; ++n < o;) {
                    var u = e[n];
                    u > s && (s = u)
                }
            } else t = null == t && xt(e) ? r : K.createCallback(t, n, 3), At(e, function (e, n, r) {
                n = t(e, n, r), n > i && (i = n, s = e)
            });
            return s
        }

        function Dt(e, t, n, r) {
            if (!e)return n;
            var i = 3 > arguments.length;
            t = K.createCallback(t, r, 4);
            var s = -1, o = e.length;
            if (typeof o == "number")for (i && (n = e[++s]); ++s < o;)n = t(n, e[s], s, e); else d(e, function (e, r, s) {
                n = i ? (i = !1, e) : t(n, e, r, s)
            });
            return n
        }

        function Pt(e, t, n, r) {
            var i = 3 > arguments.length;
            return t = K.createCallback(t, r, 4), Ot(e, function (e, r, s) {
                n = i ? (i = !1, e) : t(n, e, r, s)
            }), n
        }

        function Ht(e) {
            var t = -1, n = e ? e.length : 0, r = Gt(typeof n == "number" ? n : 0);
            return At(e, function (e) {
                var n = ut(0, ++t);
                r[t] = r[n], r[n] = e
            }), r
        }

        function Bt(e, t, n) {
            var r;
            t = K.createCallback(t, n, 3), n = -1;
            var i = e ? e.length : 0;
            if (typeof i == "number")for (; ++n < i && !(r = t(e[n], n, e));); else d(e, function (e, n, i) {
                return !(r = t(e, n, i))
            });
            return !!r
        }

        function jt(e, t, n) {
            var r = 0, i = e ? e.length : 0;
            if (typeof t != "number" && null != t) {
                var s = -1;
                for (t = K.createCallback(t, n, 3); ++s < i && t(e[s], s, e);)r++
            } else if (r = t, null == r || n)return e ? e[0] : p;
            return c(e, 0, On(An(0, r), i))
        }

        function Ft(t, n, r) {
            if (typeof r == "number") {
                var i = t ? t.length : 0;
                r = 0 > r ? An(0, i + r) : r || 0
            } else if (r)return r = qt(t, n), t[r] === n ? r : -1;
            return e(t, n, r)
        }

        function It(e, t, n) {
            if (typeof t != "number" && null != t) {
                var r = 0, i = -1, s = e ? e.length : 0;
                for (t = K.createCallback(t, n, 3); ++i < s && t(e[i], i, e);)r++
            } else r = null == t || n ? 1 : An(0, t);
            return c(e, r)
        }

        function qt(e, t, n, r) {
            var i = 0, s = e ? e.length : i;
            for (n = n ? K.createCallback(n, r, 1) : Vt, t = n(t); i < s;)r = i + s >>> 1, n(e[r]) < t ? i = r + 1 : s = r;
            return i
        }

        function Rt(e, t, n, r) {
            return typeof t != "boolean" && null != t && (r = n, n = typeof t != "function" && r && r[t] === e ? null : t, t = !1), null != n && (n = K.createCallback(n, r, 3)), at(e, t, n)
        }

        function Ut() {
            for (var e = 1 < arguments.length ? arguments : arguments[0], t = -1, n = e ? _t(Vn(e, "length")) : 0,
                     r = Gt(0 > n ? 0 : n); ++t < n;)r[t] = Vn(e, t);
            return r
        }

        function zt(e, t) {
            var n = -1, r = e ? e.length : 0, i = {};
            for (t || !r || Bn(e[0]) || (t = []); ++n < r;) {
                var s = e[n];
                t ? i[s] = t[n] : s && (i[s[0]] = s[1])
            }
            return i
        }

        function Wt(e, t) {
            return 2 < arguments.length ? lt(e, 17, c(arguments, 2), null, t) : lt(e, 1, null, null, t)
        }

        function Xt(e, t, n) {
            function r() {
                l && dn(l), o = l = c = p, (v || d !== t) && (h = $n(), u = e.apply(f, s), l || o || (s = f = null))
            }

            function i() {
                var n = t - ($n() - a);
                0 < n ? l = wn(i, n) : (o && dn(o), n = c, o = l = c = p, n && (h = $n(), u = e.apply(f, s), l || o || (s = f = null)))
            }

            var s, o, u, a, f, l, c, h = 0, d = !1, v = !0;
            if (!wt(e))throw new un;
            if (t = An(0, t) || 0, !0 === n)var m = !0,
                v = !1; else Et(n) && (m = n.leading, d = "maxWait" in n && (An(t, n.maxWait) || 0), v = "trailing" in n ? n.trailing : v);
            return function () {
                if (s = arguments, a = $n(), f = this, c = v && (l || !m), !1 === d)var n = m && !l; else {
                    o || m || (h = a);
                    var p = d - (a - h), g = 0 >= p;
                    g ? (o && (o = dn(o)), h = a, u = e.apply(f, s)) : o || (o = wn(r, p))
                }
                return g && l ? l = dn(l) : l || t === d || (l = wn(i, t)), n && (g = !0, u = e.apply(f, s)), !g || l || o || (s = f = null), u
            }
        }

        function Vt(e) {
            return e
        }

        function $t(e, t, n) {
            var r = !0, i = t && yt(t);
            t && (n || i.length) || (null == n && (n = t), s = Q, t = e, e = K, i = yt(t)), !1 === n ? r = !1 : Et(n) && "chain" in n && (r = n.chain);
            var s = e, o = wt(s);
            At(i, function (n) {
                var i = e[n] = t[n];
                o && (s.prototype[n] = function () {
                    var t = this.__chain__, n = this.__wrapped__, o = [n];
                    if (bn.apply(o, arguments), o = i.apply(e, o), r || t) {
                        if (n === o && Et(o))return this;
                        o = new s(o), o.__chain__ = t
                    }
                    return o
                })
            })
        }

        function Jt() {
        }

        function Kt(e) {
            return function (t) {
                return t[e]
            }
        }

        function Qt() {
            return this.__wrapped__
        }

        n = n ? Y.defaults($.Object(), n, Y.pick($, _)) : $;
        var Gt = n.Array, Yt = n.Boolean, Zt = n.Date, en = n.Function, tn = n.Math, nn = n.Number, rn = n.Object,
            sn = n.RegExp, on = n.String, un = n.TypeError, an = [], fn = rn.prototype, ln = n._, cn = fn.toString,
            hn = sn("^" + on(cn).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$"),
            pn = tn.ceil, dn = n.clearTimeout, vn = tn.floor, mn = en.prototype.toString,
            gn = pt(gn = rn.getPrototypeOf) && gn, yn = fn.hasOwnProperty, bn = an.push, wn = n.setTimeout,
            En = an.splice, Sn = an.unshift, xn = function () {
                try {
                    var e = {}, t = pt(t = rn.defineProperty) && t, n = t(e, e, e) && t
                } catch (r) {
                }
                return n
            }(), Tn = pt(Tn = rn.create) && Tn, Nn = pt(Nn = Gt.isArray) && Nn, Cn = n.isFinite, kn = n.isNaN,
            Ln = pt(Ln = rn.keys) && Ln, An = tn.max, On = tn.min, Mn = n.parseInt, _n = tn.random, Dn = {};
        Dn[P] = Gt, Dn[H] = Yt, Dn[B] = Zt, Dn[j] = en, Dn[I] = rn, Dn[F] = nn, Dn[q] = sn, Dn[R] = on, Q.prototype = K.prototype;
        var Pn = K.support = {};
        Pn.funcDecomp = !pt(n.a) && O.test(h), Pn.funcNames = typeof en.name == "string", K.templateSettings = {
            escape: /<%-([\s\S]+?)%>/g,
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: k,
            variable: "",
            imports: {_: K}
        }, Tn || (et = function () {
            function e() {
            }

            return function (t) {
                if (Et(t)) {
                    e.prototype = t;
                    var r = new e;
                    e.prototype = null
                }
                return r || n.Object()
            }
        }());
        var Hn = xn ? function (e, t) {
                W.value = t, xn(e, "__bindData__", W)
            } : Jt, Bn = Nn || function (e) {
                    return e && typeof e == "object" && typeof e.length == "number" && cn.call(e) == P || !1
                }, jn = Ln ? function (e) {
                return Et(e) ? Ln(e) : []
            } : J, Fn = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;"}, In = bt(Fn),
            qn = sn("(" + jn(In).join("|") + ")", "g"), Rn = sn("[" + jn(Fn).join("") + "]", "g"),
            Un = gn ? function (e) {
                if (!e || cn.call(e) != I)return !1;
                var t = e.valueOf, n = pt(t) && (n = gn(t)) && gn(n);
                return n ? e == n || gn(e) == n : dt(e)
            } : dt, zn = ft(function (e, t, n) {
                yn.call(e, n) ? e[n]++ : e[n] = 1
            }), Wn = ft(function (e, t, n) {
                (yn.call(e, n) ? e[n] : e[n] = []).push(t)
            }), Xn = ft(function (e, t, n) {
                e[n] = t
            }), Vn = Mt, $n = pt($n = Zt.now) && $n || function () {
                    return (new Zt).getTime()
                }, Jn = 8 == Mn(w + "08") ? Mn : function (e, t) {
                return Mn(xt(e) ? e.replace(L, "") : e, t || 0)
            };
        return K.after = function (e, t) {
            if (!wt(t))throw new un;
            return function () {
                return 1 > --e ? t.apply(this, arguments) : void 0
            }
        }, K.assign = V, K.at = function (e) {
            for (var t = arguments, n = -1, r = it(t, !0, !1, 1), t = t[2] && t[2][t[1]] === e ? 1 : r.length,
                     i = Gt(t); ++n < t;)i[n] = e[r[n]];
            return i
        }, K.bind = Wt, K.bindAll = function (e) {
            for (var t = 1 < arguments.length ? it(arguments, !0, !1, 1) : yt(e), n = -1, r = t.length; ++n < r;) {
                var i = t[n];
                e[i] = lt(e[i], 1, null, null, e)
            }
            return e
        }, K.bindKey = function (e, t) {
            return 2 < arguments.length ? lt(t, 19, c(arguments, 2), null, e) : lt(t, 3, null, null, e)
        }, K.chain = function (e) {
            return e = new Q(e), e.__chain__ = !0, e
        }, K.compact = function (e) {
            for (var t = -1, n = e ? e.length : 0, r = []; ++t < n;) {
                var i = e[t];
                i && r.push(i)
            }
            return r
        }, K.compose = function () {
            for (var e = arguments, t = e.length; t--;)if (!wt(e[t]))throw new un;
            return function () {
                for (var t = arguments, n = e.length; n--;)t = [e[n].apply(this, t)];
                return t[0]
            }
        }, K.constant = function (e) {
            return function () {
                return e
            }
        }, K.countBy = zn, K.create = function (e, t) {
            var n = et(e);
            return t ? V(n, t) : n
        }, K.createCallback = function (e, t, n) {
            var r = typeof e;
            if (null == e || "function" == r)return tt(e, t, n);
            if ("object" != r)return Kt(e);
            var i = jn(e), s = i[0], o = e[s];
            return 1 != i.length || o !== o || Et(o) ? function (t) {
                for (var n = i.length, r = !1; n-- && (r = st(t[i[n]], e[i[n]], null, !0)););
                return r
            } : function (e) {
                return e = e[s], o === e && (0 !== o || 1 / o == 1 / e)
            }
        }, K.curry = function (e, t) {
            return t = typeof t == "number" ? t : +t || e.length, lt(e, 4, null, null, null, t)
        }, K.debounce = Xt, K.defaults = b, K.defer = function (e) {
            if (!wt(e))throw new un;
            var t = c(arguments, 1);
            return wn(function () {
                e.apply(p, t)
            }, 1)
        }, K.delay = function (e, t) {
            if (!wt(e))throw new un;
            var n = c(arguments, 2);
            return wn(function () {
                e.apply(p, n)
            }, t)
        }, K.difference = function (e) {
            return rt(e, it(arguments, !0, !0, 1))
        }, K.filter = kt, K.flatten = function (e, t, n, r) {
            return typeof t != "boolean" && null != t && (r = n, n = typeof t != "function" && r && r[t] === e ? null : t, t = !1), null != n && (e = Mt(e, n, r)), it(e, t)
        }, K.forEach = At, K.forEachRight = Ot, K.forIn = v, K.forInRight = function (e, t, n) {
            var r = [];
            v(e, function (e, t) {
                r.push(t, e)
            });
            var i = r.length;
            for (t = tt(t, n, 3); i-- && !1 !== t(r[i--], r[i], e););
            return e
        }, K.forOwn = d, K.forOwnRight = gt, K.functions = yt, K.groupBy = Wn, K.indexBy = Xn, K.initial = function (e, t, n) {
            var r = 0, i = e ? e.length : 0;
            if (typeof t != "number" && null != t) {
                var s = i;
                for (t = K.createCallback(t, n, 3); s-- && t(e[s], s, e);)r++
            } else r = null == t || n ? 1 : t || r;
            return c(e, 0, On(An(0, i - r), i))
        }, K.intersection = function () {
            for (var n = [], r = -1, i = arguments.length, o = u(), a = ht(), c = a === e, h = u(); ++r < i;) {
                var p = arguments[r];
                (Bn(p) || mt(p)) && (n.push(p), o.push(c && p.length >= y && s(r ? n[r] : h)))
            }
            var c = n[0], d = -1, v = c ? c.length : 0, m = [];
            e:for (; ++d < v;) {
                var g = o[0], p = c[d];
                if (0 > (g ? t(g, p) : a(h, p))) {
                    for (r = i, (g || h).push(p); --r;)if (g = o[r], 0 > (g ? t(g, p) : a(n[r], p)))continue e;
                    m.push(p)
                }
            }
            for (; i--;)(g = o[i]) && l(g);
            return f(o), f(h), m
        }, K.invert = bt, K.invoke = function (e, t) {
            var n = c(arguments, 2), r = -1, i = typeof t == "function", s = e ? e.length : 0,
                o = Gt(typeof s == "number" ? s : 0);
            return At(e, function (e) {
                o[++r] = (i ? t : e[t]).apply(e, n)
            }), o
        }, K.keys = jn, K.map = Mt, K.mapValues = function (e, t, n) {
            var r = {};
            return t = K.createCallback(t, n, 3), d(e, function (e, n, i) {
                r[n] = t(e, n, i)
            }), r
        }, K.max = _t, K.memoize = function (e, t) {
            function n() {
                var r = n.cache, i = t ? t.apply(this, arguments) : g + arguments[0];
                return yn.call(r, i) ? r[i] : r[i] = e.apply(this, arguments)
            }

            if (!wt(e))throw new un;
            return n.cache = {}, n
        }, K.merge = function (e) {
            var t = arguments, n = 2;
            if (!Et(e))return e;
            if ("number" != typeof t[2] && (n = t.length), 3 < n && "function" == typeof t[n - 2])var r = tt(t[--n - 1], t[n--], 2); else 2 < n && "function" == typeof t[n - 1] && (r = t[--n]);
            for (var t = c(arguments, 1, n), i = -1, s = u(), o = u(); ++i < n;)ot(e, t[i], r, s, o);
            return f(s), f(o), e
        }, K.min = function (e, t, n) {
            var i = 1 / 0, s = i;
            if (typeof t != "function" && n && n[t] === e && (t = null), null == t && Bn(e)) {
                n = -1;
                for (var o = e.length; ++n < o;) {
                    var u = e[n];
                    u < s && (s = u)
                }
            } else t = null == t && xt(e) ? r : K.createCallback(t, n, 3), At(e, function (e, n, r) {
                n = t(e, n, r), n < i && (i = n, s = e)
            });
            return s
        }, K.omit = function (e, t, n) {
            var r = {};
            if (typeof t != "function") {
                var i = [];
                v(e, function (e, t) {
                    i.push(t)
                });
                for (var i = rt(i, it(arguments, !0, !1, 1)), s = -1, o = i.length; ++s < o;) {
                    var u = i[s];
                    r[u] = e[u]
                }
            } else t = K.createCallback(t, n, 3), v(e, function (e, n, i) {
                t(e, n, i) || (r[n] = e)
            });
            return r
        }, K.once = function (e) {
            var t, n;
            if (!wt(e))throw new un;
            return function () {
                return t ? n : (t = !0, n = e.apply(this, arguments), e = null, n)
            }
        }, K.pairs = function (e) {
            for (var t = -1, n = jn(e), r = n.length, i = Gt(r); ++t < r;) {
                var s = n[t];
                i[t] = [s, e[s]]
            }
            return i
        }, K.partial = function (e) {
            return lt(e, 16, c(arguments, 1))
        }, K.partialRight = function (e) {
            return lt(e, 32, null, c(arguments, 1))
        }, K.pick = function (e, t, n) {
            var r = {};
            if (typeof t != "function")for (var i = -1, s = it(arguments, !0, !1, 1),
                                                o = Et(e) ? s.length : 0; ++i < o;) {
                var u = s[i];
                u in e && (r[u] = e[u])
            } else t = K.createCallback(t, n, 3), v(e, function (e, n, i) {
                t(e, n, i) && (r[n] = e)
            });
            return r
        }, K.pluck = Vn, K.property = Kt, K.pull = function (e) {
            for (var t = arguments, n = 0, r = t.length, i = e ? e.length : 0; ++n < r;)for (var s = -1,
                                                                                                 o = t[n]; ++s < i;)e[s] === o && (En.call(e, s--, 1), i--);
            return e
        }, K.range = function (e, t, n) {
            e = +e || 0, n = typeof n == "number" ? n : +n || 1, null == t && (t = e, e = 0);
            var r = -1;
            t = An(0, pn((t - e) / (n || 1)));
            for (var i = Gt(t); ++r < t;)i[r] = e, e += n;
            return i
        }, K.reject = function (e, t, n) {
            return t = K.createCallback(t, n, 3), kt(e, function (e, n, r) {
                return !t(e, n, r)
            })
        }, K.remove = function (e, t, n) {
            var r = -1, i = e ? e.length : 0, s = [];
            for (t = K.createCallback(t, n, 3); ++r < i;)n = e[r], t(n, r, e) && (s.push(n), En.call(e, r--, 1), i--);
            return s
        }, K.rest = It, K.shuffle = Ht, K.sortBy = function (e, t, n) {
            var r = -1, s = Bn(t), o = e ? e.length : 0, c = Gt(typeof o == "number" ? o : 0);
            for (s || (t = K.createCallback(t, n, 3)), At(e, function (e, n, i) {
                var o = c[++r] = a();
                s ? o.m = Mt(t, function (t) {
                    return e[t]
                }) : (o.m = u())[0] = t(e, n, i), o.n = r, o.o = e
            }), o = c.length, c.sort(i); o--;)e = c[o], c[o] = e.o, s || f(e.m), l(e);
            return c
        }, K.tap = function (e, t) {
            return t(e), e
        }, K.throttle = function (e, t, n) {
            var r = !0, i = !0;
            if (!wt(e))throw new un;
            return !1 === n ? r = !1 : Et(n) && (r = "leading" in n ? n.leading : r, i = "trailing" in n ? n.trailing : i), z.leading = r, z.maxWait = t, z.trailing = i, Xt(e, t, z)
        }, K.times = function (e, t, n) {
            e = -1 < (e = +e) ? e : 0;
            var r = -1, i = Gt(e);
            for (t = tt(t, n, 1); ++r < e;)i[r] = t(r);
            return i
        }, K.toArray = function (e) {
            return e && typeof e.length == "number" ? c(e) : Tt(e)
        }, K.transform = function (e, t, n, r) {
            var i = Bn(e);
            if (null == n)if (i) n = []; else {
                var s = e && e.constructor;
                n = et(s && s.prototype)
            }
            return t && (t = K.createCallback(t, r, 4), (i ? At : d)(e, function (e, r, i) {
                return t(n, e, r, i)
            })), n
        }, K.union = function () {
            return at(it(arguments, !0, !0))
        }, K.uniq = Rt, K.values = Tt, K.where = kt, K.without = function (e) {
            return rt(e, c(arguments, 1))
        }, K.wrap = function (e, t) {
            return lt(t, 16, [e])
        }, K.xor = function () {
            for (var e = -1, t = arguments.length; ++e < t;) {
                var n = arguments[e];
                if (Bn(n) || mt(n))var r = r ? at(rt(r, n).concat(rt(n, r))) : n
            }
            return r || []
        }, K.zip = Ut, K.zipObject = zt, K.collect = Mt, K.drop = It, K.each = At, K.eachRight = Ot, K.extend = V, K.methods = yt, K.object = zt, K.select = kt, K.tail = It, K.unique = Rt, K.unzip = Ut, $t(K), K.clone = function (e, t, n, r) {
            return typeof t != "boolean" && null != t && (r = n, n = t, t = !1), Z(e, t, typeof n == "function" && tt(n, r, 1))
        }, K.cloneDeep = function (e, t, n) {
            return Z(e, !0, typeof t == "function" && tt(t, n, 1))
        }, K.contains = Nt, K.escape = function (e) {
            return null == e ? "" : on(e).replace(Rn, ct)
        }, K.every = Ct, K.find = Lt, K.findIndex = function (e, t, n) {
            var r = -1, i = e ? e.length : 0;
            for (t = K.createCallback(t, n, 3); ++r < i;)if (t(e[r], r, e))return r;
            return -1
        }, K.findKey = function (e, t, n) {
            var r;
            return t = K.createCallback(t, n, 3), d(e, function (e, n, i) {
                return t(e, n, i) ? (r = n, !1) : void 0
            }), r
        }, K.findLast = function (e, t, n) {
            var r;
            return t = K.createCallback(t, n, 3), Ot(e, function (e, n, i) {
                return t(e, n, i) ? (r = e, !1) : void 0
            }), r
        }, K.findLastIndex = function (e, t, n) {
            var r = e ? e.length : 0;
            for (t = K.createCallback(t, n, 3); r--;)if (t(e[r], r, e))return r;
            return -1
        }, K.findLastKey = function (e, t, n) {
            var r;
            return t = K.createCallback(t, n, 3), gt(e, function (e, n, i) {
                return t(e, n, i) ? (r = n, !1) : void 0
            }), r
        }, K.has = function (e, t) {
            return e ? yn.call(e, t) : !1
        }, K.identity = Vt, K.indexOf = Ft, K.isArguments = mt, K.isArray = Bn, K.isBoolean = function (e) {
            return !0 === e || !1 === e || e && typeof e == "object" && cn.call(e) == H || !1
        }, K.isDate = function (e) {
            return e && typeof e == "object" && cn.call(e) == B || !1
        }, K.isElement = function (e) {
            return e && 1 === e.nodeType || !1
        },K.isEmpty = function (e) {
            var t = !0;
            if (!e)return t;
            var n = cn.call(e), r = e.length;
            return n == P || n == R || n == D || n == I && typeof r == "number" && wt(e.splice) ? !r : (d(e, function () {
                return t = !1
            }), t)
        },K.isEqual = function (e, t, n, r) {
            return st(e, t, typeof n == "function" && tt(n, r, 2))
        },K.isFinite = function (e) {
            return Cn(e) && !kn(parseFloat(e))
        },K.isFunction = wt,K.isNaN = function (e) {
            return St(e) && e != +e
        },K.isNull = function (e) {
            return null === e
        },K.isNumber = St,K.isObject = Et,K.isPlainObject = Un,K.isRegExp = function (e) {
            return e && typeof e == "object" && cn.call(e) == q || !1
        },K.isString = xt,K.isUndefined = function (e) {
            return typeof e == "undefined"
        },K.lastIndexOf = function (e, t, n) {
            var r = e ? e.length : 0;
            for (typeof n == "number" && (r = (0 > n ? An(0, r + n) : On(n, r - 1)) + 1); r--;)if (e[r] === t)return r;
            return -1
        },K.mixin = $t,K.noConflict = function () {
            return n._ = ln, this
        },K.noop = Jt,K.now = $n,K.parseInt = Jn,K.random = function (e, t, n) {
            var r = null == e, i = null == t;
            return null == n && (typeof e == "boolean" && i ? (n = e, e = 1) : i || typeof t != "boolean" || (n = t, i = !0)), r && i && (t = 1), e = +e || 0, i ? (t = e, e = 0) : t = +t || 0, n || e % 1 || t % 1 ? (n = _n(), On(e + n * (t - e + parseFloat("1e-" + ((n + "").length - 1))), t)) : ut(e, t)
        },K.reduce = Dt,K.reduceRight = Pt,K.result = function (e, t) {
            if (e) {
                var n = e[t];
                return wt(n) ? e[t]() : n
            }
        },K.runInContext = h,K.size = function (e) {
            var t = e ? e.length : 0;
            return typeof t == "number" ? t : jn(e).length
        },K.some = Bt,K.sortedIndex = qt,K.template = function (e, t, n) {
            var r = K.templateSettings;
            e = on(e || ""), n = b({}, n, r);
            var i, s = b({}, n.imports, r.imports), r = jn(s), s = Tt(s), u = 0, a = n.interpolate || A, f = "__p+='",
                a = sn((n.escape || A).source + "|" + a.source + "|" + (a === k ? T : A).source + "|" + (n.evaluate || A).source + "|$", "g");
            e.replace(a, function (t, n, r, s, a, l) {
                return r || (r = s), f += e.slice(u, l).replace(M, o), n && (f += "'+__e(" + n + ")+'"), a && (i = !0, f += "';" + a + ";\n__p+='"), r && (f += "'+((__t=(" + r + "))==null?'':__t)+'"), u = l + t.length, t
            }), f += "';", a = n = n.variable, a || (n = "obj", f = "with(" + n + "){" + f + "}"), f = (i ? f.replace(E, "") : f).replace(S, "$1").replace(x, "$1;"), f = "function(" + n + "){" + (a ? "" : n + "||(" + n + "={});") + "var __t,__p='',__e=_.escape" + (i ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : ";") + f + "return __p}";
            try {
                var l = en(r, "return " + f).apply(p, s)
            } catch (c) {
                throw c.source = f, c
            }
            return t ? l(t) : (l.source = f, l)
        },K.unescape = function (e) {
            return null == e ? "" : on(e).replace(qn, vt)
        },K.uniqueId = function (e) {
            var t = ++m;
            return on(null == e ? "" : e) + t
        },K.all = Ct,K.any = Bt,K.detect = Lt,K.findWhere = Lt,K.foldl = Dt,K.foldr = Pt,K.include = Nt,K.inject = Dt,$t(function () {
            var e = {};
            return d(K, function (t, n) {
                K.prototype[n] || (e[n] = t)
            }), e
        }(), !1),K.first = jt,K.last = function (e, t, n) {
            var r = 0, i = e ? e.length : 0;
            if (typeof t != "number" && null != t) {
                var s = i;
                for (t = K.createCallback(t, n, 3); s-- && t(e[s], s, e);)r++
            } else if (r = t, null == r || n)return e ? e[i - 1] : p;
            return c(e, An(0, i - r))
        },K.sample = function (e, t, n) {
            return e && typeof e.length != "number" && (e = Tt(e)), null == t || n ? e ? e[ut(0, e.length - 1)] : p : (e = Ht(e), e.length = On(An(0, t), e.length), e)
        },K.take = jt,K.head = jt,d(K, function (e, t) {
            var n = "sample" !== t;
            K.prototype[t] || (K.prototype[t] = function (t, r) {
                var i = this.__chain__, s = e(this.__wrapped__, t, r);
                return i || null != t && (!r || n && typeof t == "function") ? new Q(s, i) : s
            })
        }),K.VERSION = "2.4.1",K.prototype.chain = function () {
            return this.__chain__ = !0, this
        },K.prototype.toString = function () {
            return on(this.__wrapped__)
        },K.prototype.value = Qt,K.prototype.valueOf = Qt,At(["join", "pop", "shift"], function (e) {
            var t = an[e];
            K.prototype[e] = function () {
                var e = this.__chain__, n = t.apply(this.__wrapped__, arguments);
                return e ? new Q(n, e) : n
            }
        }),At(["push", "reverse", "sort", "unshift"], function (e) {
            var t = an[e];
            K.prototype[e] = function () {
                return t.apply(this.__wrapped__, arguments), this
            }
        }),At(["concat", "slice", "splice"], function (e) {
            var t = an[e];
            K.prototype[e] = function () {
                return new Q(t.apply(this.__wrapped__, arguments), this.__chain__)
            }
        }),K
    }

    var p, d = [], v = [], m = 0, g = +(new Date) + "", y = 75, b = 40,
        w = " 	\f ﻿\n\r\u2028\u2029 ᠎             　", E = /\b__p\+='';/g, S = /\b(__p\+=)''\+/g,
        x = /(__e\(.*?\)|\b__t\))\+'';/g, T = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, N = /\w*$/,
        C = /^\s*function[ \n\r\t]+\w/, k = /<%=([\s\S]+?)%>/g, L = RegExp("^[" + w + "]*0+(?=.$)"), A = /($^)/,
        O = /\bthis\b/, M = /['\n\r\t\u2028\u2029\\]/g,
        _ = "Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),
        D = "[object Arguments]", P = "[object Array]", H = "[object Boolean]", B = "[object Date]",
        j = "[object Function]", F = "[object Number]", I = "[object Object]", q = "[object RegExp]",
        R = "[object String]", U = {};
    U[j] = !1, U[D] = U[P] = U[H] = U[B] = U[F] = U[I] = U[q] = U[R] = !0;
    var z = {leading: !1, maxWait: 0, trailing: !1}, W = {configurable: !1, enumerable: !1, value: null, writable: !1},
        X = {"boolean": !1, "function": !0, object: !0, number: !1, string: !1, "undefined": !1},
        V = {"\\": "\\", "'": "'", "\n": "n", "\r": "r", "	": "t", "\u2028": "u2028", "\u2029": "u2029"},
        $ = X[typeof window] && window || this, J = X[typeof exports] && exports && !exports.nodeType && exports,
        K = X[typeof module] && module && !module.nodeType && module, Q = K && K.exports === J && J,
        G = X[typeof global] && global;
    !G || G.global !== G && G.window !== G || ($ = G);
    var Y = h();
    typeof define == "function" && typeof define.amd == "object" && define.amd ? ($._ = Y, define("underscore", [], function () {
        return Y
    })) : J && K ? Q ? (K.exports = Y)._ = Y : J._ = Y : $._ = Y
}.call(this),
(window._gsQueue || (window._gsQueue = [])).push(function () {
    "use strict";
    window._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function (e, t) {
        var n, r, i, s, o = function () {
            e.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = o.prototype.setRatio
        }, u = {}, a = o.prototype = new e("css");
        a.constructor = o, o.version = "1.11.8", o.API = 2, o.defaultTransformPerspective = 0, o.defaultSkewType = "compensated", a = "px", o.suffixMap = {
            top: a,
            right: a,
            bottom: a,
            left: a,
            width: a,
            height: a,
            fontSize: a,
            padding: a,
            margin: a,
            perspective: a,
            lineHeight: ""
        };
        var f, l, c, h, p, d, v = /(?:\d|\-\d|\.\d|\-\.\d)+/g,
            m = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
            g = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi, y = /[^\d\-\.]/g, b = /(?:\d|\-|\+|=|#|\.)*/g,
            w = /opacity *= *([^)]*)/, E = /opacity:([^;]*)/, S = /alpha\(opacity *=.+?\)/i, x = /^(rgb|hsl)/,
            T = /([A-Z])/g, N = /-([a-z])/gi, C = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi, k = function (e, t) {
                return t.toUpperCase()
            }, L = /(?:Left|Right|Width)/i, A = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
            O = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i, M = /,(?=[^\)]*(?:\(|$))/gi, _ = Math.PI / 180,
            D = 180 / Math.PI, P = {}, H = document, B = H.createElement("div"), j = H.createElement("img"),
            F = o._internals = {_specialProps: u}, I = navigator.userAgent, q = function () {
                var e, t = I.indexOf("Android"), n = H.createElement("div");
                return c = -1 !== I.indexOf("Safari") && -1 === I.indexOf("Chrome") && (-1 === t || Number(I.substr(t + 8, 1)) > 3), p = c && 6 > Number(I.substr(I.indexOf("Version/") + 8, 1)), h = -1 !== I.indexOf("Firefox"), /MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(I) && (d = parseFloat(RegExp.$1)), n.innerHTML = "<a style='top:1px;opacity:.55;'>a</a>", e = n.getElementsByTagName("a")[0], e ? /^0.55/.test(e.style.opacity) : !1
            }(), R = function (e) {
                return w.test("string" == typeof e ? e : (e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
            }, U = function (e) {
                window.console && 0
            }, z = "", W = "", X = function (e, t) {
                t = t || B;
                var n, r, i = t.style;
                if (void 0 !== i[e])return e;
                for (e = e.charAt(0).toUpperCase() + e.substr(1), n = ["O", "Moz", "ms", "Ms", "Webkit"], r = 5; --r > -1 && void 0 === i[n[r] + e];);
                return r >= 0 ? (W = 3 === r ? "ms" : n[r], z = "-" + W.toLowerCase() + "-", W + e) : null
            }, V = H.defaultView ? H.defaultView.getComputedStyle : function () {
            }, $ = o.getStyle = function (e, t, n, r, i) {
                var s;
                return q || "opacity" !== t ? (!r && e.style[t] ? s = e.style[t] : (n = n || V(e, null)) ? s = n[t] || n.getPropertyValue(t) || n.getPropertyValue(t.replace(T, "-$1").toLowerCase()) : e.currentStyle && (s = e.currentStyle[t]), null == i || s && "none" !== s && "auto" !== s && "auto auto" !== s ? s : i) : R(e)
            }, J = F.convertToPixels = function (e, n, r, i, s) {
                if ("px" === i || !i)return r;
                if ("auto" === i || !r)return 0;
                var u, a, f, l = L.test(n), c = e, h = B.style, p = 0 > r;
                if (p && (r = -r), "%" === i && -1 !== n.indexOf("border")) u = r / 100 * (l ? e.clientWidth : e.clientHeight); else {
                    if (h.cssText = "border:0 solid red;position:" + $(e, "position") + ";line-height:0;", "%" !== i && c.appendChild) h[l ? "borderLeftWidth" : "borderTopWidth"] = r + i; else {
                        if (c = e.parentNode || H.body, a = c._gsCache, f = t.ticker.frame, a && l && a.time === f)return a.width * r / 100;
                        h[l ? "width" : "height"] = r + i
                    }
                    c.appendChild(B), u = parseFloat(B[l ? "offsetWidth" : "offsetHeight"]), c.removeChild(B), l && "%" === i && o.cacheWidths !== !1 && (a = c._gsCache = c._gsCache || {}, a.time = f, a.width = 100 * (u / r)), 0 !== u || s || (u = J(e, n, r, i, !0))
                }
                return p ? -u : u
            }, K = F.calculateOffset = function (e, t, n) {
                if ("absolute" !== $(e, "position", n))return 0;
                var r = "left" === t ? "Left" : "Top", i = $(e, "margin" + r, n);
                return e["offset" + r] - (J(e, t, parseFloat(i), i.replace(b, "")) || 0)
            }, Q = function (e, t) {
                var n, r, i = {};
                if (t = t || V(e, null))if (n = t.length)for (; --n > -1;)i[t[n].replace(N, k)] = t.getPropertyValue(t[n]); else for (n in t)i[n] = t[n]; else if (t = e.currentStyle || e.style)for (n in t)"string" == typeof n && void 0 === i[n] && (i[n.replace(N, k)] = t[n]);
                return q || (i.opacity = R(e)), r = Tt(e, t, !1), i.rotation = r.rotation, i.skewX = r.skewX, i.scaleX = r.scaleX, i.scaleY = r.scaleY, i.x = r.x, i.y = r.y, St && (i.z = r.z, i.rotationX = r.rotationX, i.rotationY = r.rotationY, i.scaleZ = r.scaleZ), i.filters && delete i.filters, i
            }, G = function (e, t, n, r, i) {
                var s, o, u, a = {}, f = e.style;
                for (o in n)"cssText" !== o && "length" !== o && isNaN(o) && (t[o] !== (s = n[o]) || i && i[o]) && -1 === o.indexOf("Origin") && ("number" == typeof s || "string" == typeof s) && (a[o] = "auto" !== s || "left" !== o && "top" !== o ? "" !== s && "auto" !== s && "none" !== s || "string" != typeof t[o] || "" === t[o].replace(y, "") ? s : 0 : K(e, o), void 0 !== f[o] && (u = new ct(f, o, f[o], u)));
                if (r)for (o in r)"className" !== o && (a[o] = r[o]);
                return {difs: a, firstMPT: u}
            }, Y = {width: ["Left", "Right"], height: ["Top", "Bottom"]},
            Z = ["marginLeft", "marginRight", "marginTop", "marginBottom"], et = function (e, t, n) {
                var r = parseFloat("width" === t ? e.offsetWidth : e.offsetHeight), i = Y[t], s = i.length;
                for (n = n || V(e, null); --s > -1;)r -= parseFloat($(e, "padding" + i[s], n, !0)) || 0, r -= parseFloat($(e, "border" + i[s] + "Width", n, !0)) || 0;
                return r
            }, tt = function (e, t) {
                (null == e || "" === e || "auto" === e || "auto auto" === e) && (e = "0 0");
                var n = e.split(" "), r = -1 !== e.indexOf("left") ? "0%" : -1 !== e.indexOf("right") ? "100%" : n[0],
                    i = -1 !== e.indexOf("top") ? "0%" : -1 !== e.indexOf("bottom") ? "100%" : n[1];
                return null == i ? i = "0" : "center" === i && (i = "50%"), ("center" === r || isNaN(parseFloat(r)) && -1 === (r + "").indexOf("=")) && (r = "50%"), t && (t.oxp = -1 !== r.indexOf("%"), t.oyp = -1 !== i.indexOf("%"), t.oxr = "=" === r.charAt(1), t.oyr = "=" === i.charAt(1), t.ox = parseFloat(r.replace(y, "")), t.oy = parseFloat(i.replace(y, ""))), r + " " + i + (n.length > 2 ? " " + n[2] : "")
            }, nt = function (e, t) {
                return "string" == typeof e && "=" === e.charAt(1) ? parseInt(e.charAt(0) + "1", 10) * parseFloat(e.substr(2)) : parseFloat(e) - parseFloat(t)
            }, rt = function (e, t) {
                return null == e ? t : "string" == typeof e && "=" === e.charAt(1) ? parseInt(e.charAt(0) + "1", 10) * Number(e.substr(2)) + t : parseFloat(e)
            }, it = function (e, t, n, r) {
                var i, s, o, u, a = 1e-6;
                return null == e ? u = t : "number" == typeof e ? u = e : (i = 360, s = e.split("_"), o = Number(s[0].replace(y, "")) * (-1 === e.indexOf("rad") ? 1 : D) - ("=" === e.charAt(1) ? 0 : t), s.length && (r && (r[n] = t + o), -1 !== e.indexOf("short") && (o %= i, o !== o % (i / 2) && (o = 0 > o ? o + i : o - i)), -1 !== e.indexOf("_cw") && 0 > o ? o = (o + 9999999999 * i) % i - (0 | o / i) * i : -1 !== e.indexOf("ccw") && o > 0 && (o = (o - 9999999999 * i) % i - (0 | o / i) * i)), u = t + o), a > u && u > -a && (u = 0), u
            }, st = {
                aqua: [0, 255, 255],
                lime: [0, 255, 0],
                silver: [192, 192, 192],
                black: [0, 0, 0],
                maroon: [128, 0, 0],
                teal: [0, 128, 128],
                blue: [0, 0, 255],
                navy: [0, 0, 128],
                white: [255, 255, 255],
                fuchsia: [255, 0, 255],
                olive: [128, 128, 0],
                yellow: [255, 255, 0],
                orange: [255, 165, 0],
                gray: [128, 128, 128],
                purple: [128, 0, 128],
                green: [0, 128, 0],
                red: [255, 0, 0],
                pink: [255, 192, 203],
                cyan: [0, 255, 255],
                transparent: [255, 255, 255, 0]
            }, ot = function (e, t, n) {
                return e = 0 > e ? e + 1 : e > 1 ? e - 1 : e, 0 | 255 * (1 > 6 * e ? t + 6 * (n - t) * e : .5 > e ? n : 2 > 3 * e ? t + 6 * (n - t) * (2 / 3 - e) : t) + .5
            }, ut = function (e) {
                var t, n, r, i, s, o;
                return e && "" !== e ? "number" == typeof e ? [e >> 16, 255 & e >> 8, 255 & e] : ("," === e.charAt(e.length - 1) && (e = e.substr(0, e.length - 1)), st[e] ? st[e] : "#" === e.charAt(0) ? (4 === e.length && (t = e.charAt(1), n = e.charAt(2), r = e.charAt(3), e = "#" + t + t + n + n + r + r), e = parseInt(e.substr(1), 16), [e >> 16, 255 & e >> 8, 255 & e]) : "hsl" === e.substr(0, 3) ? (e = e.match(v), i = Number(e[0]) % 360 / 360, s = Number(e[1]) / 100, o = Number(e[2]) / 100, n = .5 >= o ? o * (s + 1) : o + s - o * s, t = 2 * o - n, e.length > 3 && (e[3] = Number(e[3])), e[0] = ot(i + 1 / 3, t, n), e[1] = ot(i, t, n), e[2] = ot(i - 1 / 3, t, n), e) : (e = e.match(v) || st.transparent, e[0] = Number(e[0]), e[1] = Number(e[1]), e[2] = Number(e[2]), e.length > 3 && (e[3] = Number(e[3])), e)) : st.black
            }, at = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
        for (a in st)at += "|" + a + "\\b";
        at = RegExp(at + ")", "gi");
        var ft = function (e, t, n, r) {
            if (null == e)return function (e) {
                return e
            };
            var i, s = t ? (e.match(at) || [""])[0] : "", o = e.split(s).join("").match(g) || [],
                u = e.substr(0, e.indexOf(o[0])), a = ")" === e.charAt(e.length - 1) ? ")" : "",
                f = -1 !== e.indexOf(" ") ? " " : ",", l = o.length, c = l > 0 ? o[0].replace(v, "") : "";
            return l ? i = t ? function (e) {
                var t, h, p, d;
                if ("number" == typeof e) e += c; else if (r && M.test(e)) {
                    for (d = e.replace(M, "|").split("|"), p = 0; d.length > p; p++)d[p] = i(d[p]);
                    return d.join(",")
                }
                if (t = (e.match(at) || [s])[0], h = e.split(t).join("").match(g) || [], p = h.length, l > p--)for (; l > ++p;)h[p] = n ? h[0 | (p - 1) / 2] : o[p];
                return u + h.join(f) + f + t + a + (-1 !== e.indexOf("inset") ? " inset" : "")
            } : function (e) {
                var t, s, h;
                if ("number" == typeof e) e += c; else if (r && M.test(e)) {
                    for (s = e.replace(M, "|").split("|"), h = 0; s.length > h; h++)s[h] = i(s[h]);
                    return s.join(",")
                }
                if (t = e.match(g) || [], h = t.length, l > h--)for (; l > ++h;)t[h] = n ? t[0 | (h - 1) / 2] : o[h];
                return u + t.join(f) + a
            } : function (e) {
                return e
            }
        }, lt = function (e) {
            return e = e.split(","), function (t, n, r, i, s, o, u) {
                var a, f = (n + "").split(" ");
                for (u = {}, a = 0; 4 > a; a++)u[e[a]] = f[a] = f[a] || f[(a - 1) / 2 >> 0];
                return i.parse(t, u, s, o)
            }
        }, ct = (F._setPluginRatio = function (e) {
            this.plugin.setRatio(e);
            for (var t, n, r, i, s = this.data, o = s.proxy, u = s.firstMPT,
                     a = 1e-6; u;)t = o[u.v], u.r ? t = Math.round(t) : a > t && t > -a && (t = 0), u.t[u.p] = t, u = u._next;
            if (s.autoRotate && (s.autoRotate.rotation = o.rotation), 1 === e)for (u = s.firstMPT; u;) {
                if (n = u.t, n.type) {
                    if (1 === n.type) {
                        for (i = n.xs0 + n.s + n.xs1, r = 1; n.l > r; r++)i += n["xn" + r] + n["xs" + (r + 1)];
                        n.e = i
                    }
                } else n.e = n.s + n.xs0;
                u = u._next
            }
        }, function (e, t, n, r, i) {
            this.t = e, this.p = t, this.v = n, this.r = i, r && (r._prev = this, this._next = r)
        }), ht = (F._parseToProxy = function (e, t, n, r, i, s) {
            var o, u, a, f, l, c = r, h = {}, p = {}, d = n._transform, v = P;
            for (n._transform = null, P = t, r = l = n.parse(e, t, r, i), P = v, s && (n._transform = d, c && (c._prev = null, c._prev && (c._prev._next = null))); r && r !== c;) {
                if (1 >= r.type && (u = r.p, p[u] = r.s + r.c, h[u] = r.s, s || (f = new ct(r, "s", u, f, r.r), r.c = 0), 1 === r.type))for (o = r.l; --o > 0;)a = "xn" + o, u = r.p + "_" + a, p[u] = r.data[a], h[u] = r[a], s || (f = new ct(r, a, u, f, r.rxp[a]));
                r = r._next
            }
            return {proxy: h, end: p, firstMPT: f, pt: l}
        }, F.CSSPropTween = function (e, t, r, i, o, u, a, f, l, c, h) {
            this.t = e, this.p = t, this.s = r, this.c = i, this.n = a || t, e instanceof ht || s.push(this.n), this.r = f, this.type = u || 0, l && (this.pr = l, n = !0), this.b = void 0 === c ? r : c, this.e = void 0 === h ? r + i : h, o && (this._next = o, o._prev = this)
        }), pt = o.parseComplex = function (e, t, n, r, i, s, o, u, a, l) {
            n = n || s || "", o = new ht(e, t, 0, 0, o, l ? 2 : 1, null, !1, u, n, r), r += "";
            var c, h, p, d, g, y, b, w, E, S, T, N, C = n.split(", ").join(",").split(" "),
                k = r.split(", ").join(",").split(" "), L = C.length, A = f !== !1;
            for ((-1 !== r.indexOf(",") || -1 !== n.indexOf(",")) && (C = C.join(" ").replace(M, ", ").split(" "), k = k.join(" ").replace(M, ", ").split(" "), L = C.length), L !== k.length && (C = (s || "").split(" "), L = C.length), o.plugin = a, o.setRatio = l, c = 0; L > c; c++)if (d = C[c], g = k[c], w = parseFloat(d), w || 0 === w) o.appendXtra("", w, nt(g, w), g.replace(m, ""), A && -1 !== g.indexOf("px"), !0); else if (i && ("#" === d.charAt(0) || st[d] || x.test(d))) N = "," === g.charAt(g.length - 1) ? ")," : ")", d = ut(d), g = ut(g), E = d.length + g.length > 6, E && !q && 0 === g[3] ? (o["xs" + o.l] += o.l ? " transparent" : "transparent", o.e = o.e.split(k[c]).join("transparent")) : (q || (E = !1), o.appendXtra(E ? "rgba(" : "rgb(", d[0], g[0] - d[0], ",", !0, !0).appendXtra("", d[1], g[1] - d[1], ",", !0).appendXtra("", d[2], g[2] - d[2], E ? "," : N, !0), E && (d = 4 > d.length ? 1 : d[3], o.appendXtra("", d, (4 > g.length ? 1 : g[3]) - d, N, !1))); else if (y = d.match(v)) {
                if (b = g.match(m), !b || b.length !== y.length)return o;
                for (p = 0, h = 0; y.length > h; h++)T = y[h], S = d.indexOf(T, p), o.appendXtra(d.substr(p, S - p), Number(T), nt(b[h], T), "", A && "px" === d.substr(S + T.length, 2), 0 === h), p = S + T.length;
                o["xs" + o.l] += d.substr(p)
            } else o["xs" + o.l] += o.l ? " " + d : d;
            if (-1 !== r.indexOf("=") && o.data) {
                for (N = o.xs0 + o.data.s, c = 1; o.l > c; c++)N += o["xs" + c] + o.data["xn" + c];
                o.e = N + o["xs" + c]
            }
            return o.l || (o.type = -1, o.xs0 = o.e), o.xfirst || o
        }, dt = 9;
        for (a = ht.prototype, a.l = a.pr = 0; --dt > 0;)a["xn" + dt] = 0, a["xs" + dt] = "";
        a.xs0 = "", a._next = a._prev = a.xfirst = a.data = a.plugin = a.setRatio = a.rxp = null, a.appendXtra = function (e, t, n, r, i, s) {
            var o = this, u = o.l;
            return o["xs" + u] += s && u ? " " + e : e || "", n || 0 === u || o.plugin ? (o.l++, o.type = o.setRatio ? 2 : 1, o["xs" + o.l] = r || "", u > 0 ? (o.data["xn" + u] = t + n, o.rxp["xn" + u] = i, o["xn" + u] = t, o.plugin || (o.xfirst = new ht(o, "xn" + u, t, n, o.xfirst || o, 0, o.n, i, o.pr), o.xfirst.xs0 = 0), o) : (o.data = {s: t + n}, o.rxp = {}, o.s = t, o.c = n, o.r = i, o)) : (o["xs" + u] += t + (r || ""), o)
        };
        var vt = function (e, t) {
            t = t || {}, this.p = t.prefix ? X(e) || e : e, u[e] = u[this.p] = this, this.format = t.formatter || ft(t.defaultValue, t.color, t.collapsible, t.multi), t.parser && (this.parse = t.parser), this.clrs = t.color, this.multi = t.multi, this.keyword = t.keyword, this.dflt = t.defaultValue, this.pr = t.priority || 0
        }, mt = F._registerComplexSpecialProp = function (e, t, n) {
            "object" != typeof t && (t = {parser: n});
            var r, i, s = e.split(","), o = t.defaultValue;
            for (n = n || [o], r = 0; s.length > r; r++)t.prefix = 0 === r && t.prefix, t.defaultValue = n[r] || o, i = new vt(s[r], t)
        }, gt = function (e) {
            if (!u[e]) {
                var t = e.charAt(0).toUpperCase() + e.substr(1) + "Plugin";
                mt(e, {
                    parser: function (e, n, r, i, s, o, a) {
                        var f = (window.GreenSockGlobals || window).com.greensock.plugins[t];
                        return f ? (f._cssRegister(), u[r].parse(e, n, r, i, s, o, a)) : (U("Error: " + t + " js file not loaded."), s)
                    }
                })
            }
        };
        a = vt.prototype, a.parseComplex = function (e, t, n, r, i, s) {
            var o, u, a, f, l, c, h = this.keyword;
            if (this.multi && (M.test(n) || M.test(t) ? (u = t.replace(M, "|").split("|"), a = n.replace(M, "|").split("|")) : h && (u = [t], a = [n])), a) {
                for (f = a.length > u.length ? a.length : u.length, o = 0; f > o; o++)t = u[o] = u[o] || this.dflt, n = a[o] = a[o] || this.dflt, h && (l = t.indexOf(h), c = n.indexOf(h), l !== c && (n = -1 === c ? a : u, n[o] += " " + h));
                t = u.join(", "), n = a.join(", ")
            }
            return pt(e, this.p, t, n, this.clrs, this.dflt, r, this.pr, i, s)
        }, a.parse = function (e, t, n, r, s, o) {
            return this.parseComplex(e.style, this.format($(e, this.p, i, !1, this.dflt)), this.format(t), s, o)
        }, o.registerSpecialProp = function (e, t, n) {
            mt(e, {
                parser: function (e, r, i, s, o, u) {
                    var a = new ht(e, i, 0, 0, o, 2, i, !1, n);
                    return a.plugin = u, a.setRatio = t(e, r, s._tween, i), a
                }, priority: n
            })
        };
        var yt = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective".split(","),
            bt = X("transform"), wt = z + "transform", Et = X("transformOrigin"), St = null !== X("perspective"),
            xt = F.Transform = function () {
                this.skewY = 0
            }, Tt = F.getTransform = function (e, t, n, r) {
                if (e._gsTransform && n && !r)return e._gsTransform;
                var i, s, u, a, f, l, c, h, p, d, v, m, g, y = n ? e._gsTransform || new xt : new xt, b = 0 > y.scaleX,
                    w = 2e-5, E = 1e5, S = 179.99, x = S * _,
                    T = St ? parseFloat($(e, Et, t, !1, "0 0 0").split(" ")[2]) || y.zOrigin || 0 : 0;
                for (bt ? i = $(e, wt, t, !0) : e.currentStyle && (i = e.currentStyle.filter.match(A), i = i && 4 === i.length ? [i[0].substr(4), Number(i[2].substr(4)), Number(i[1].substr(4)), i[3].substr(4), y.x || 0, y.y || 0].join(",") : ""), s = (i || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [], u = s.length; --u > -1;)a = Number(s[u]), s[u] = (f = a - (a |= 0)) ? (0 | f * E + (0 > f ? -0.5 : .5)) / E + a : a;
                if (16 === s.length) {
                    var N = s[8], C = s[9], k = s[10], L = s[12], O = s[13], M = s[14];
                    if (y.zOrigin && (M = -y.zOrigin, L = N * M - s[12], O = C * M - s[13], M = k * M + y.zOrigin - s[14]), !n || r || null == y.rotationX) {
                        var P, H, B, j, F, I, q, R = s[0], U = s[1], z = s[2], W = s[3], X = s[4], V = s[5], J = s[6],
                            K = s[7], Q = s[11], G = Math.atan2(J, k), Y = -x > G || G > x;
                        y.rotationX = G * D, G && (j = Math.cos(-G), F = Math.sin(-G), P = X * j + N * F, H = V * j + C * F, B = J * j + k * F, N = X * -F + N * j, C = V * -F + C * j, k = J * -F + k * j, Q = K * -F + Q * j, X = P, V = H, J = B), G = Math.atan2(N, R), y.rotationY = G * D, G && (I = -x > G || G > x, j = Math.cos(-G), F = Math.sin(-G), P = R * j - N * F, H = U * j - C * F, B = z * j - k * F, C = U * F + C * j, k = z * F + k * j, Q = W * F + Q * j, R = P, U = H, z = B), G = Math.atan2(U, V), y.rotation = G * D, G && (q = -x > G || G > x, j = Math.cos(-G), F = Math.sin(-G), R = R * j + X * F, H = U * j + V * F, V = U * -F + V * j, J = z * -F + J * j, U = H), q && Y ? y.rotation = y.rotationX = 0 : q && I ? y.rotation = y.rotationY = 0 : I && Y && (y.rotationY = y.rotationX = 0), y.scaleX = (0 | Math.sqrt(R * R + U * U) * E + .5) / E, y.scaleY = (0 | Math.sqrt(V * V + C * C) * E + .5) / E, y.scaleZ = (0 | Math.sqrt(J * J + k * k) * E + .5) / E, y.skewX = 0, y.perspective = Q ? 1 / (0 > Q ? -Q : Q) : 0, y.x = L, y.y = O, y.z = M
                    }
                } else if (!(St && !r && s.length && y.x === s[4] && y.y === s[5] && (y.rotationX || y.rotationY) || void 0 !== y.x && "none" === $(e, "display", t))) {
                    var Z = s.length >= 6, et = Z ? s[0] : 1, tt = s[1] || 0, nt = s[2] || 0, rt = Z ? s[3] : 1;
                    y.x = s[4] || 0, y.y = s[5] || 0, l = Math.sqrt(et * et + tt * tt), c = Math.sqrt(rt * rt + nt * nt), h = et || tt ? Math.atan2(tt, et) * D : y.rotation || 0, p = nt || rt ? Math.atan2(nt, rt) * D + h : y.skewX || 0, d = l - Math.abs(y.scaleX || 0), v = c - Math.abs(y.scaleY || 0), Math.abs(p) > 90 && 270 > Math.abs(p) && (b ? (l *= -1, p += 0 >= h ? 180 : -180, h += 0 >= h ? 180 : -180) : (c *= -1, p += 0 >= p ? 180 : -180)), m = (h - y.rotation) % 180, g = (p - y.skewX) % 180, (void 0 === y.skewX || d > w || -w > d || v > w || -w > v || m > -S && S > m && !1 | m * E || g > -S && S > g && !1 | g * E) && (y.scaleX = l, y.scaleY = c, y.rotation = h, y.skewX = p), St && (y.rotationX = y.rotationY = y.z = 0, y.perspective = parseFloat(o.defaultTransformPerspective) || 0, y.scaleZ = 1)
                }
                y.zOrigin = T;
                for (u in y)w > y[u] && y[u] > -w && (y[u] = 0);
                return n && (e._gsTransform = y), y
            }, Nt = function (e) {
                var t, n, r = this.data, i = -r.rotation * _, s = i + r.skewX * _, o = 1e5,
                    u = (0 | Math.cos(i) * r.scaleX * o) / o, a = (0 | Math.sin(i) * r.scaleX * o) / o,
                    f = (0 | Math.sin(s) * -r.scaleY * o) / o, l = (0 | Math.cos(s) * r.scaleY * o) / o, c = this.t.style,
                    h = this.t.currentStyle;
                if (h) {
                    n = a, a = -f, f = -n, t = h.filter, c.filter = "";
                    var p, v, m = this.t.offsetWidth, g = this.t.offsetHeight, y = "absolute" !== h.position,
                        E = "progid:DXImageTransform.Microsoft.Matrix(M11=" + u + ", M12=" + a + ", M21=" + f + ", M22=" + l,
                        S = r.x, x = r.y;
                    if (null != r.ox && (p = (r.oxp ? .01 * m * r.ox : r.ox) - m / 2, v = (r.oyp ? .01 * g * r.oy : r.oy) - g / 2, S += p - (p * u + v * a), x += v - (p * f + v * l)), y ? (p = m / 2, v = g / 2, E += ", Dx=" + (p - (p * u + v * a) + S) + ", Dy=" + (v - (p * f + v * l) + x) + ")") : E += ", sizingMethod='auto expand')", c.filter = -1 !== t.indexOf("DXImageTransform.Microsoft.Matrix(") ? t.replace(O, E) : E + " " + t, (0 === e || 1 === e) && 1 === u && 0 === a && 0 === f && 1 === l && (y && -1 === E.indexOf("Dx=0, Dy=0") || w.test(t) && 100 !== parseFloat(RegExp.$1) || -1 === t.indexOf(t.indexOf("Alpha")) && c.removeAttribute("filter")), !y) {
                        var T, N, C, k = 8 > d ? 1 : -1;
                        for (p = r.ieOffsetX || 0, v = r.ieOffsetY || 0, r.ieOffsetX = Math.round((m - ((0 > u ? -u : u) * m + (0 > a ? -a : a) * g)) / 2 + S), r.ieOffsetY = Math.round((g - ((0 > l ? -l : l) * g + (0 > f ? -f : f) * m)) / 2 + x), dt = 0; 4 > dt; dt++)N = Z[dt], T = h[N], n = -1 !== T.indexOf("px") ? parseFloat(T) : J(this.t, N, parseFloat(T), T.replace(b, "")) || 0, C = n !== r[N] ? 2 > dt ? -r.ieOffsetX : -r.ieOffsetY : 2 > dt ? p - r.ieOffsetX : v - r.ieOffsetY, c[N] = (r[N] = Math.round(n - C * (0 === dt || 2 === dt ? 1 : k))) + "px"
                    }
                }
            }, Ct = F.set3DTransformRatio = function () {
                var e, t, n, r, i, s, o, u, a, f, l, c, p, d, v, m, g, y, b, w, E, S, x, T = this.data, N = this.t.style,
                    C = T.rotation * _, k = T.scaleX, L = T.scaleY, A = T.scaleZ, O = T.perspective;
                if (h) {
                    var M = 1e-4;
                    M > k && k > -M && (k = A = 2e-5), M > L && L > -M && (L = A = 2e-5), !O || T.z || T.rotationX || T.rotationY || (O = 0)
                }
                if (C || T.skewX) y = Math.cos(C), b = Math.sin(C), e = y, i = b, T.skewX && (C -= T.skewX * _, y = Math.cos(C), b = Math.sin(C), "simple" === T.skewType && (w = Math.tan(T.skewX * _), w = Math.sqrt(1 + w * w), y *= w, b *= w)), t = -b, s = y; else {
                    if (!(T.rotationY || T.rotationX || 1 !== A || O))return N[bt] = "translate3d(" + T.x + "px," + T.y + "px," + T.z + "px)" + (1 !== k || 1 !== L ? " scale(" + k + "," + L + ")" : ""), void 0;
                    e = s = 1, t = i = 0
                }
                l = 1, n = r = o = u = a = f = c = p = d = 0, v = O ? -1 / O : 0, m = T.zOrigin, g = 1e5, C = T.rotationY * _, C && (y = Math.cos(C), b = Math.sin(C), a = l * -b, p = v * -b, n = e * b, o = i * b, l *= y, v *= y, e *= y, i *= y), C = T.rotationX * _, C && (y = Math.cos(C), b = Math.sin(C), w = t * y + n * b, E = s * y + o * b, S = f * y + l * b, x = d * y + v * b, n = t * -b + n * y, o = s * -b + o * y, l = f * -b + l * y, v = d * -b + v * y, t = w, s = E, f = S, d = x), 1 !== A && (n *= A, o *= A, l *= A, v *= A), 1 !== L && (t *= L, s *= L, f *= L, d *= L), 1 !== k && (e *= k, i *= k, a *= k, p *= k), m && (c -= m, r = n * c, u = o * c, c = l * c + m), r = (w = (r += T.x) - (r |= 0)) ? (0 | w * g + (0 > w ? -0.5 : .5)) / g + r : r, u = (w = (u += T.y) - (u |= 0)) ? (0 | w * g + (0 > w ? -0.5 : .5)) / g + u : u, c = (w = (c += T.z) - (c |= 0)) ? (0 | w * g + (0 > w ? -0.5 : .5)) / g + c : c, N[bt] = "matrix3d(" + [(0 | e * g) / g, (0 | i * g) / g, (0 | a * g) / g, (0 | p * g) / g, (0 | t * g) / g, (0 | s * g) / g, (0 | f * g) / g, (0 | d * g) / g, (0 | n * g) / g, (0 | o * g) / g, (0 | l * g) / g, (0 | v * g) / g, r, u, c, O ? 1 + -c / O : 1].join(",") + ")"
            }, kt = F.set2DTransformRatio = function (e) {
                var t, n, r, i, s, o = this.data, u = this.t, a = u.style;
                return o.rotationX || o.rotationY || o.z || o.force3D ? (this.setRatio = Ct, Ct.call(this, e), void 0) : (o.rotation || o.skewX ? (t = o.rotation * _, n = t - o.skewX * _, r = 1e5, i = o.scaleX * r, s = o.scaleY * r, a[bt] = "matrix(" + (0 | Math.cos(t) * i) / r + "," + (0 | Math.sin(t) * i) / r + "," + (0 | Math.sin(n) * -s) / r + "," + (0 | Math.cos(n) * s) / r + "," + o.x + "," + o.y + ")") : a[bt] = "matrix(" + o.scaleX + ",0,0," + o.scaleY + "," + o.x + "," + o.y + ")", void 0)
            };
        mt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType", {
            parser: function (e, t, n, r, s, u, a) {
                if (r._transform)return s;
                var f, l, c, h, p, d, v, m = r._transform = Tt(e, i, !0, a.parseTransform), g = e.style, y = 1e-6,
                    b = yt.length, w = a, E = {};
                if ("string" == typeof w.transform && bt) c = g.cssText, g[bt] = w.transform, g.display = "block", f = Tt(e, null, !1), g.cssText = c; else if ("object" == typeof w) {
                    if (f = {
                            scaleX: rt(null != w.scaleX ? w.scaleX : w.scale, m.scaleX),
                            scaleY: rt(null != w.scaleY ? w.scaleY : w.scale, m.scaleY),
                            scaleZ: rt(w.scaleZ, m.scaleZ),
                            x: rt(w.x, m.x),
                            y: rt(w.y, m.y),
                            z: rt(w.z, m.z),
                            perspective: rt(w.transformPerspective, m.perspective)
                        }, v = w.directionalRotation, null != v)if ("object" == typeof v)for (c in v)w[c] = v[c]; else w.rotation = v;
                    f.rotation = it("rotation" in w ? w.rotation : "shortRotation" in w ? w.shortRotation + "_short" : "rotationZ" in w ? w.rotationZ : m.rotation, m.rotation, "rotation", E), St && (f.rotationX = it("rotationX" in w ? w.rotationX : "shortRotationX" in w ? w.shortRotationX + "_short" : m.rotationX || 0, m.rotationX, "rotationX", E), f.rotationY = it("rotationY" in w ? w.rotationY : "shortRotationY" in w ? w.shortRotationY + "_short" : m.rotationY || 0, m.rotationY, "rotationY", E)), f.skewX = null == w.skewX ? m.skewX : it(w.skewX, m.skewX), f.skewY = null == w.skewY ? m.skewY : it(w.skewY, m.skewY), (l = f.skewY - m.skewY) && (f.skewX += l, f.rotation += l)
                }
                for (St && null != w.force3D && (m.force3D = w.force3D, d = !0), m.skewType = w.skewType || m.skewType || o.defaultSkewType, p = m.force3D || m.z || m.rotationX || m.rotationY || f.z || f.rotationX || f.rotationY || f.perspective, p || null == w.scale || (f.scaleZ = 1); --b > -1;)n = yt[b], h = f[n] - m[n], (h > y || -y > h || null != P[n]) && (d = !0, s = new ht(m, n, m[n], h, s), n in E && (s.e = E[n]), s.xs0 = 0, s.plugin = u, r._overwriteProps.push(s.n));
                return h = w.transformOrigin, (h || St && p && m.zOrigin) && (bt ? (d = !0, n = Et, h = (h || $(e, n, i, !1, "50% 50%")) + "", s = new ht(g, n, 0, 0, s, -1, "transformOrigin"), s.b = g[n], s.plugin = u, St ? (c = m.zOrigin, h = h.split(" "), m.zOrigin = (h.length > 2 && (0 === c || "0px" !== h[2]) ? parseFloat(h[2]) : c) || 0, s.xs0 = s.e = g[n] = h[0] + " " + (h[1] || "50%") + " 0px", s = new ht(m, "zOrigin", 0, 0, s, -1, s.n), s.b = c, s.xs0 = s.e = m.zOrigin) : s.xs0 = s.e = g[n] = h) : tt(h + "", m)), d && (r._transformType = p || 3 === this._transformType ? 3 : 2), s
            }, prefix: !0
        }), mt("boxShadow", {
            defaultValue: "0px 0px 0px 0px #999",
            prefix: !0,
            color: !0,
            multi: !0,
            keyword: "inset"
        }), mt("borderRadius", {
            defaultValue: "0px", parser: function (e, t, n, s, o) {
                t = this.format(t);
                var u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S,
                    x = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                    T = e.style;
                for (v = parseFloat(e.offsetWidth), m = parseFloat(e.offsetHeight), u = t.split(" "), a = 0; x.length > a; a++)this.p.indexOf("border") && (x[a] = X(x[a])), c = l = $(e, x[a], i, !1, "0px"), -1 !== c.indexOf(" ") && (l = c.split(" "), c = l[0], l = l[1]), h = f = u[a], p = parseFloat(c), y = c.substr((p + "").length), b = "=" === h.charAt(1), b ? (d = parseInt(h.charAt(0) + "1", 10), h = h.substr(2), d *= parseFloat(h), g = h.substr((d + "").length - (0 > d ? 1 : 0)) || "") : (d = parseFloat(h), g = h.substr((d + "").length)), "" === g && (g = r[n] || y), g !== y && (w = J(e, "borderLeft", p, y), E = J(e, "borderTop", p, y), "%" === g ? (c = 100 * (w / v) + "%", l = 100 * (E / m) + "%") : "em" === g ? (S = J(e, "borderLeft", 1, "em"), c = w / S + "em", l = E / S + "em") : (c = w + "px", l = E + "px"), b && (h = parseFloat(c) + d + g, f = parseFloat(l) + d + g)), o = pt(T, x[a], c + " " + l, h + " " + f, !1, "0px", o);
                return o
            }, prefix: !0, formatter: ft("0px 0px 0px 0px", !1, !0)
        }), mt("backgroundPosition", {
            defaultValue: "0 0", parser: function (e, t, n, r, s, o) {
                var u, a, f, l, c, h, p = "background-position", v = i || V(e, null),
                    m = this.format((v ? d ? v.getPropertyValue(p + "-x") + " " + v.getPropertyValue(p + "-y") : v.getPropertyValue(p) : e.currentStyle.backgroundPositionX + " " + e.currentStyle.backgroundPositionY) || "0 0"),
                    g = this.format(t);
                if (-1 !== m.indexOf("%") != (-1 !== g.indexOf("%")) && (h = $(e, "backgroundImage").replace(C, ""), h && "none" !== h)) {
                    for (u = m.split(" "), a = g.split(" "), j.setAttribute("src", h), f = 2; --f > -1;)m = u[f], l = -1 !== m.indexOf("%"), l !== (-1 !== a[f].indexOf("%")) && (c = 0 === f ? e.offsetWidth - j.width : e.offsetHeight - j.height, u[f] = l ? parseFloat(m) / 100 * c + "px" : 100 * (parseFloat(m) / c) + "%");
                    m = u.join(" ")
                }
                return this.parseComplex(e.style, m, g, s, o)
            }, formatter: tt
        }), mt("backgroundSize", {defaultValue: "0 0", formatter: tt}), mt("perspective", {
            defaultValue: "0px",
            prefix: !0
        }), mt("perspectiveOrigin", {
            defaultValue: "50% 50%",
            prefix: !0
        }), mt("transformStyle", {prefix: !0}), mt("backfaceVisibility", {prefix: !0}), mt("userSelect", {prefix: !0}), mt("margin", {parser: lt("marginTop,marginRight,marginBottom,marginLeft")}), mt("padding", {parser: lt("paddingTop,paddingRight,paddingBottom,paddingLeft")}), mt("clip", {
            defaultValue: "rect(0px,0px,0px,0px)",
            parser: function (e, t, n, r, s, o) {
                var u, a, f;
                return 9 > d ? (a = e.currentStyle, f = 8 > d ? " " : ",", u = "rect(" + a.clipTop + f + a.clipRight + f + a.clipBottom + f + a.clipLeft + ")", t = this.format(t).split(",").join(f)) : (u = this.format($(e, this.p, i, !1, this.dflt)), t = this.format(t)), this.parseComplex(e.style, u, t, s, o)
            }
        }), mt("textShadow", {
            defaultValue: "0px 0px 0px #999",
            color: !0,
            multi: !0
        }), mt("autoRound,strictUnits", {
            parser: function (e, t, n, r, i) {
                return i
            }
        }), mt("border", {
            defaultValue: "0px solid #dd3a20", parser: function (e, t, n, r, s, o) {
                return this.parseComplex(e.style, this.format($(e, "borderTopWidth", i, !1, "0px") + " " + $(e, "borderTopStyle", i, !1, "solid") + " " + $(e, "borderTopColor", i, !1, "#dd3a20")), this.format(t), s, o)
            }, color: !0, formatter: function (e) {
                var t = e.split(" ");
                return t[0] + " " + (t[1] || "solid") + " " + (e.match(at) || ["#dd3a20"])[0]
            }
        }), mt("borderWidth", {parser: lt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}), mt("float,cssFloat,styleFloat", {
            parser: function (e, t, n, r, i) {
                var s = e.style, o = "cssFloat" in s ? "cssFloat" : "styleFloat";
                return new ht(s, o, 0, 0, i, -1, n, !1, 0, s[o], t)
            }
        });
        var Lt = function (e) {
            var t, n = this.t, r = n.filter || $(this.data, "filter"), i = 0 | this.s + this.c * e;
            100 === i && (-1 === r.indexOf("atrix(") && -1 === r.indexOf("radient(") && -1 === r.indexOf("oader(") ? (n.removeAttribute("filter"), t = !$(this.data, "filter")) : (n.filter = r.replace(S, ""), t = !0)), t || (this.xn1 && (n.filter = r = r || "alpha(opacity=" + i + ")"), -1 === r.indexOf("opacity") ? 0 === i && this.xn1 || (n.filter = r + " alpha(opacity=" + i + ")") : n.filter = r.replace(w, "opacity=" + i))
        };
        mt("opacity,alpha,autoAlpha", {
            defaultValue: "1", parser: function (e, t, n, r, s, o) {
                var u = parseFloat($(e, "opacity", i, !1, "1")), a = e.style, f = "autoAlpha" === n;
                return "string" == typeof t && "=" === t.charAt(1) && (t = ("-" === t.charAt(0) ? -1 : 1) * parseFloat(t.substr(2)) + u), f && 1 === u && "hidden" === $(e, "visibility", i) && 0 !== t && (u = 0), q ? s = new ht(a, "opacity", u, t - u, s) : (s = new ht(a, "opacity", 100 * u, 100 * (t - u), s), s.xn1 = f ? 1 : 0, a.zoom = 1, s.type = 2, s.b = "alpha(opacity=" + s.s + ")", s.e = "alpha(opacity=" + (s.s + s.c) + ")", s.data = e, s.plugin = o, s.setRatio = Lt), f && (s = new ht(a, "visibility", 0, 0, s, -1, null, !1, 0, 0 !== u ? "inherit" : "hidden", 0 === t ? "hidden" : "inherit"), s.xs0 = "inherit", r._overwriteProps.push(s.n), r._overwriteProps.push(n)), s
            }
        });
        var At = function (e, t) {
            t && (e.removeProperty ? ("ms" === t.substr(0, 2) && (t = "M" + t.substr(1)), e.removeProperty(t.replace(T, "-$1").toLowerCase())) : e.removeAttribute(t))
        }, Ot = function (e) {
            if (this.t._gsClassPT = this, 1 === e || 0 === e) {
                this.t.className = 0 === e ? this.b : this.e;
                for (var t = this.data, n = this.t.style; t;)t.v ? n[t.p] = t.v : At(n, t.p), t = t._next;
                1 === e && this.t._gsClassPT === this && (this.t._gsClassPT = null)
            } else this.t.className !== this.e && (this.t.className = this.e)
        };
        mt("className", {
            parser: function (e, t, r, s, o, u, a) {
                var f, l, c, h, p, d = e.className, v = e.style.cssText;
                if (o = s._classNamePT = new ht(e, r, 0, 0, o, 2), o.setRatio = Ot, o.pr = -11, n = !0, o.b = d, l = Q(e, i), c = e._gsClassPT) {
                    for (h = {}, p = c.data; p;)h[p.p] = 1, p = p._next;
                    c.setRatio(1)
                }
                return e._gsClassPT = o, o.e = "=" !== t.charAt(1) ? t : d.replace(RegExp("\\s*\\b" + t.substr(2) + "\\b"), "") + ("+" === t.charAt(0) ? " " + t.substr(2) : ""), s._tween._duration && (e.className = o.e, f = G(e, l, Q(e), a, h), e.className = d, o.data = f.firstMPT, e.style.cssText = v, o = o.xfirst = s.parse(e, f.difs, o, u)), o
            }
        });
        var Mt = function (e) {
            if ((1 === e || 0 === e) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                var t, n, r, i, s = this.t.style, o = u.transform.parse;
                if ("all" === this.e) s.cssText = "", i = !0; else for (t = this.e.split(","), r = t.length; --r > -1;)n = t[r], u[n] && (u[n].parse === o ? i = !0 : n = "transformOrigin" === n ? Et : u[n].p), At(s, n);
                i && (At(s, bt), this.t._gsTransform && delete this.t._gsTransform)
            }
        };
        for (mt("clearProps", {
            parser: function (e, t, r, i, s) {
                return s = new ht(e, r, 0, 0, s, 2), s.setRatio = Mt, s.e = t, s.pr = -10, s.data = i._tween, n = !0, s
            }
        }), a = "bezier,throwProps,physicsProps,physics2D".split(","), dt = a.length; dt--;)gt(a[dt]);
        a = o.prototype, a._firstPT = null, a._onInitTween = function (e, t, u) {
            if (!e.nodeType)return !1;
            this._target = e, this._tween = u, this._vars = t, f = t.autoRound, n = !1, r = t.suffixMap || o.suffixMap, i = V(e, ""), s = this._overwriteProps;
            var a, h, d, v, m, g, y, b, w, S = e.style;
            if (l && "" === S.zIndex && (a = $(e, "zIndex", i), ("auto" === a || "" === a) && (S.zIndex = 0)), "string" == typeof t && (v = S.cssText, a = Q(e, i), S.cssText = v + ";" + t, a = G(e, a, Q(e)).difs, !q && E.test(t) && (a.opacity = parseFloat(RegExp.$1)), t = a, S.cssText = v), this._firstPT = h = this.parse(e, t, null), this._transformType) {
                for (w = 3 === this._transformType, bt ? c && (l = !0, "" === S.zIndex && (y = $(e, "zIndex", i), ("auto" === y || "" === y) && (S.zIndex = 0)), p && (S.WebkitBackfaceVisibility = this._vars.WebkitBackfaceVisibility || (w ? "visible" : "hidden"))) : S.zoom = 1, d = h; d && d._next;)d = d._next;
                b = new ht(e, "transform", 0, 0, null, 2), this._linkCSSP(b, null, d), b.setRatio = w && St ? Ct : bt ? kt : Nt, b.data = this._transform || Tt(e, i, !0), s.pop()
            }
            if (n) {
                for (; h;) {
                    for (g = h._next, d = v; d && d.pr > h.pr;)d = d._next;
                    (h._prev = d ? d._prev : m) ? h._prev._next = h : v = h, (h._next = d) ? d._prev = h : m = h, h = g
                }
                this._firstPT = v
            }
            return !0
        }, a.parse = function (e, t, n, s) {
            var o, a, l, c, h, p, d, v, m, g, y = e.style;
            for (o in t)p = t[o], a = u[o], a ? n = a.parse(e, p, o, this, n, s, t) : (h = $(e, o, i) + "", m = "string" == typeof p, "color" === o || "fill" === o || "stroke" === o || -1 !== o.indexOf("Color") || m && x.test(p) ? (m || (p = ut(p), p = (p.length > 3 ? "rgba(" : "rgb(") + p.join(",") + ")"), n = pt(y, o, h, p, !0, "transparent", n, 0, s)) : !m || -1 === p.indexOf(" ") && -1 === p.indexOf(",") ? (l = parseFloat(h), d = l || 0 === l ? h.substr((l + "").length) : "", ("" === h || "auto" === h) && ("width" === o || "height" === o ? (l = et(e, o, i), d = "px") : "left" === o || "top" === o ? (l = K(e, o, i), d = "px") : (l = "opacity" !== o ? 0 : 1, d = "")), g = m && "=" === p.charAt(1), g ? (c = parseInt(p.charAt(0) + "1", 10), p = p.substr(2), c *= parseFloat(p), v = p.replace(b, "")) : (c = parseFloat(p), v = m ? p.substr((c + "").length) || "" : ""), "" === v && (v = o in r ? r[o] : d), p = c || 0 === c ? (g ? c + l : c) + v : t[o], d !== v && "" !== v && (c || 0 === c) && l && (l = J(e, o, l, d), "%" === v ? (l /= J(e, o, 100, "%") / 100, t.strictUnits !== !0 && (h = l + "%")) : "em" === v ? l /= J(e, o, 1, "em") : "px" !== v && (c = J(e, o, c, v), v = "px"), g && (c || 0 === c) && (p = c + l + v)), g && (c += l), !l && 0 !== l || !c && 0 !== c ? void 0 !== y[o] && (p || "NaN" != p + "" && null != p) ? (n = new ht(y, o, c || l || 0, 0, n, -1, o, !1, 0, h, p), n.xs0 = "none" !== p || "display" !== o && -1 === o.indexOf("Style") ? p : h) : U("invalid " + o + " tween value: " + t[o]) : (n = new ht(y, o, l, c - l, n, 0, o, f !== !1 && ("px" === v || "zIndex" === o), 0, h, p), n.xs0 = v)) : n = pt(y, o, h, p, !0, null, n, 0, s)), s && n && !n.plugin && (n.plugin = s);
            return n
        }, a.setRatio = function (e) {
            var t, n, r, i = this._firstPT, s = 1e-6;
            if (1 !== e || this._tween._time !== this._tween._duration && 0 !== this._tween._time)if (e || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -0.000001)for (; i;) {
                if (t = i.c * e + i.s, i.r ? t = Math.round(t) : s > t && t > -s && (t = 0), i.type)if (1 === i.type)if (r = i.l, 2 === r) i.t[i.p] = i.xs0 + t + i.xs1 + i.xn1 + i.xs2; else if (3 === r) i.t[i.p] = i.xs0 + t + i.xs1 + i.xn1 + i.xs2 + i.xn2 + i.xs3; else if (4 === r) i.t[i.p] = i.xs0 + t + i.xs1 + i.xn1 + i.xs2 + i.xn2 + i.xs3 + i.xn3 + i.xs4; else if (5 === r) i.t[i.p] = i.xs0 + t + i.xs1 + i.xn1 + i.xs2 + i.xn2 + i.xs3 + i.xn3 + i.xs4 + i.xn4 + i.xs5; else {
                    for (n = i.xs0 + t + i.xs1, r = 1; i.l > r; r++)n += i["xn" + r] + i["xs" + (r + 1)];
                    i.t[i.p] = n
                } else-1 === i.type ? i.t[i.p] = i.xs0 : i.setRatio && i.setRatio(e); else i.t[i.p] = t + i.xs0;
                i = i._next
            } else for (; i;)2 !== i.type ? i.t[i.p] = i.b : i.setRatio(e), i = i._next; else for (; i;)2 !== i.type ? i.t[i.p] = i.e : i.setRatio(e), i = i._next
        }, a._enableTransforms = function (e) {
            this._transformType = e || 3 === this._transformType ? 3 : 2, this._transform = this._transform || Tt(this._target, i, !0)
        }, a._linkCSSP = function (e, t, n, r) {
            return e && (t && (t._prev = e), e._next && (e._next._prev = e._prev), e._prev ? e._prev._next = e._next : this._firstPT === e && (this._firstPT = e._next, r = !0), n ? n._next = e : r || null !== this._firstPT || (this._firstPT = e), e._next = t, e._prev = n), e
        }, a._kill = function (t) {
            var n, r, i, s = t;
            if (t.autoAlpha || t.alpha) {
                s = {};
                for (r in t)s[r] = t[r];
                s.opacity = 1, s.autoAlpha && (s.visibility = 1)
            }
            return t.className && (n = this._classNamePT) && (i = n.xfirst, i && i._prev ? this._linkCSSP(i._prev, n._next, i._prev._prev) : i === this._firstPT && (this._firstPT = n._next), n._next && this._linkCSSP(n._next, n._next._next, i._prev), this._classNamePT = null), e.prototype._kill.call(this, s)
        };
        var _t = function (e, t, n) {
            var r, i, s, o;
            if (e.slice)for (i = e.length; --i > -1;)_t(e[i], t, n); else for (r = e.childNodes, i = r.length; --i > -1;)s = r[i], o = s.type, s.style && (t.push(Q(s)), n && n.push(s)), 1 !== o && 9 !== o && 11 !== o || !s.childNodes.length || _t(s, t, n)
        };
        return o.cascadeTo = function (e, n, r) {
            var i, s, o, u = t.to(e, n, r), a = [u], f = [], l = [], c = [], h = t._internals.reservedProps;
            for (e = u._targets || u.target, _t(e, f, c), u.render(n, !0), _t(e, l), u.render(0, !0), u._enabled(!0), i = c.length; --i > -1;)if (s = G(c[i], f[i], l[i]), s.firstMPT) {
                s = s.difs;
                for (o in r)h[o] && (s[o] = r[o]);
                a.push(t.to(c[i], n, s))
            }
            return a
        }, e.activate([o]), o
    }, !0)
}),
window._gsDefine && window._gsQueue.pop()(),
define("CSSPlugin", function () {
}),
(window._gsQueue || (window._gsQueue = [])).push(function () {
    "use strict";
    window._gsDefine("easing.Back", ["easing.Ease"], function (e) {
        var t, n, r, i = window.GreenSockGlobals || window, s = i.com.greensock, o = 2 * Math.PI, u = Math.PI / 2,
            a = s._class, f = function (t, n) {
                var r = a("easing." + t, function () {
                }, !0), i = r.prototype = new e;
                return i.constructor = r, i.getRatio = n, r
            }, l = e.register || function () {
                }, c = function (e, t, n, r) {
                var i = a("easing." + e, {easeOut: new t, easeIn: new n, easeInOut: new r}, !0);
                return l(i, e), i
            }, h = function (e, t, n) {
                this.t = e, this.v = t, n && (this.next = n, n.prev = this, this.c = n.v - t, this.gap = n.t - e)
            }, p = function (t, n) {
                var r = a("easing." + t, function (e) {
                    this._p1 = e || 0 === e ? e : 1.70158, this._p2 = 1.525 * this._p1
                }, !0), i = r.prototype = new e;
                return i.constructor = r, i.getRatio = n, i.config = function (e) {
                    return new r(e)
                }, r
            }, d = c("Back", p("BackOut", function (e) {
                return (e -= 1) * e * ((this._p1 + 1) * e + this._p1) + 1
            }), p("BackIn", function (e) {
                return e * e * ((this._p1 + 1) * e - this._p1)
            }), p("BackInOut", function (e) {
                return 1 > (e *= 2) ? .5 * e * e * ((this._p2 + 1) * e - this._p2) : .5 * ((e -= 2) * e * ((this._p2 + 1) * e + this._p2) + 2)
            })), v = a("easing.SlowMo", function (e, t, n) {
                t = t || 0 === t ? t : .7, null == e ? e = .7 : e > 1 && (e = 1), this._p = 1 !== e ? t : 0, this._p1 = (1 - e) / 2, this._p2 = e, this._p3 = this._p1 + this._p2, this._calcEnd = n === !0
            }, !0), m = v.prototype = new e;
        return m.constructor = v, m.getRatio = function (e) {
            var t = e + (.5 - e) * this._p;
            return this._p1 > e ? this._calcEnd ? 1 - (e = 1 - e / this._p1) * e : t - (e = 1 - e / this._p1) * e * e * e * t : e > this._p3 ? this._calcEnd ? 1 - (e = (e - this._p3) / this._p1) * e : t + (e - t) * (e = (e - this._p3) / this._p1) * e * e * e : this._calcEnd ? 1 : t
        }, v.ease = new v(.7, .7), m.config = v.config = function (e, t, n) {
            return new v(e, t, n)
        }, t = a("easing.SteppedEase", function (e) {
            e = e || 1, this._p1 = 1 / e, this._p2 = e + 1
        }, !0), m = t.prototype = new e, m.constructor = t, m.getRatio = function (e) {
            return 0 > e ? e = 0 : e >= 1 && (e = .999999999), (this._p2 * e >> 0) * this._p1
        }, m.config = t.config = function (e) {
            return new t(e)
        }, n = a("easing.RoughEase", function (t) {
            t = t || {};
            for (var n, r, i, s, o, u, a = t.taper || "none", f = [], l = 0, c = 0 | (t.points || 20), p = c,
                     d = t.randomize !== !1, v = t.clamp === !0, m = t.template instanceof e ? t.template : null,
                     g = "number" == typeof t.strength ? .4 * t.strength : .4; --p > -1;)n = d ? Math.random() : 1 / c * p, r = m ? m.getRatio(n) : n, "none" === a ? i = g : "out" === a ? (s = 1 - n, i = s * s * g) : "in" === a ? i = n * n * g : .5 > n ? (s = 2 * n, i = .5 * s * s * g) : (s = 2 * (1 - n), i = .5 * s * s * g), d ? r += Math.random() * i - .5 * i : p % 2 ? r += .5 * i : r -= .5 * i, v && (r > 1 ? r = 1 : 0 > r && (r = 0)), f[l++] = {
                x: n,
                y: r
            };
            for (f.sort(function (e, t) {
                return e.x - t.x
            }), u = new h(1, 1, null), p = c; --p > -1;)o = f[p], u = new h(o.x, o.y, u);
            this._prev = new h(0, 0, 0 !== u.t ? u : u.next)
        }, !0), m = n.prototype = new e, m.constructor = n, m.getRatio = function (e) {
            var t = this._prev;
            if (e > t.t) {
                for (; t.next && e >= t.t;)t = t.next;
                t = t.prev
            } else for (; t.prev && t.t >= e;)t = t.prev;
            return this._prev = t, t.v + (e - t.t) / t.gap * t.c
        }, m.config = function (e) {
            return new n(e)
        }, n.ease = new n, c("Bounce", f("BounceOut", function (e) {
            return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
        }), f("BounceIn", function (e) {
            return 1 / 2.75 > (e = 1 - e) ? 1 - 7.5625 * e * e : 2 / 2.75 > e ? 1 - (7.5625 * (e -= 1.5 / 2.75) * e + .75) : 2.5 / 2.75 > e ? 1 - (7.5625 * (e -= 2.25 / 2.75) * e + .9375) : 1 - (7.5625 * (e -= 2.625 / 2.75) * e + .984375)
        }), f("BounceInOut", function (e) {
            var t = .5 > e;
            return e = t ? 1 - 2 * e : 2 * e - 1, e = 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375, t ? .5 * (1 - e) : .5 * e + .5
        })), c("Circ", f("CircOut", function (e) {
            return Math.sqrt(1 - (e -= 1) * e)
        }), f("CircIn", function (e) {
            return -(Math.sqrt(1 - e * e) - 1)
        }), f("CircInOut", function (e) {
            return 1 > (e *= 2) ? -0.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
        })), r = function (t, n, r) {
            var i = a("easing." + t, function (e, t) {
                this._p1 = e || 1, this._p2 = t || r, this._p3 = this._p2 / o * (Math.asin(1 / this._p1) || 0)
            }, !0), s = i.prototype = new e;
            return s.constructor = i, s.getRatio = n, s.config = function (e, t) {
                return new i(e, t)
            }, i
        }, c("Elastic", r("ElasticOut", function (e) {
            return this._p1 * Math.pow(2, -10 * e) * Math.sin((e - this._p3) * o / this._p2) + 1
        }, .3), r("ElasticIn", function (e) {
            return -(this._p1 * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - this._p3) * o / this._p2))
        }, .3), r("ElasticInOut", function (e) {
            return 1 > (e *= 2) ? -0.5 * this._p1 * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - this._p3) * o / this._p2) : .5 * this._p1 * Math.pow(2, -10 * (e -= 1)) * Math.sin((e - this._p3) * o / this._p2) + 1
        }, .45)), c("Expo", f("ExpoOut", function (e) {
            return 1 - Math.pow(2, -10 * e)
        }), f("ExpoIn", function (e) {
            return Math.pow(2, 10 * (e - 1)) - .001
        }), f("ExpoInOut", function (e) {
            return 1 > (e *= 2) ? .5 * Math.pow(2, 10 * (e - 1)) : .5 * (2 - Math.pow(2, -10 * (e - 1)))
        })), c("Sine", f("SineOut", function (e) {
            return Math.sin(e * u)
        }), f("SineIn", function (e) {
            return -Math.cos(e * u) + 1
        }), f("SineInOut", function (e) {
            return -0.5 * (Math.cos(Math.PI * e) - 1)
        })), a("easing.EaseLookup", {
            find: function (t) {
                return e.map[t]
            }
        }, !0), l(i.SlowMo, "SlowMo", "ease,"), l(n, "RoughEase", "ease,"), l(t, "SteppedEase", "ease,"), d
    }, !0)
}),
window._gsDefine && window._gsQueue.pop()(),
define("Ease", function () {
}),
(window._gsQueue || (window._gsQueue = [])).push(function () {
    "use strict";
    var e = document.documentElement, t = window, n = function (n, r) {
        var i = "x" === r ? "Width" : "Height", s = "scroll" + i, o = "client" + i, u = document.body;
        return n === t || n === e || n === u ? Math.max(e[s], u[s]) - (t["inner" + i] || Math.max(e[o], u[o])) : n[s] - n["offset" + i]
    }, r = window._gsDefine.plugin({
        propName: "scrollTo", API: 2, version: "1.7.3", init: function (e, r, i) {
            return this._wdw = e === t, this._target = e, this._tween = i, "object" != typeof r && (r = {y: r}), this._autoKill = r.autoKill !== !1, this.x = this.xPrev = this.getX(), this.y = this.yPrev = this.getY(), null != r.x ? (this._addTween(this, "x", this.x, "max" === r.x ? n(e, "x") : r.x, "scrollTo_x", !0), this._overwriteProps.push("scrollTo_x")) : this.skipX = !0, null != r.y ? (this._addTween(this, "y", this.y, "max" === r.y ? n(e, "y") : r.y, "scrollTo_y", !0), this._overwriteProps.push("scrollTo_y")) : this.skipY = !0, !0
        }, set: function (e) {
            this._super.setRatio.call(this, e);
            var r = this._wdw || !this.skipX ? this.getX() : this.xPrev,
                i = this._wdw || !this.skipY ? this.getY() : this.yPrev, s = i - this.yPrev, o = r - this.xPrev;
            this._autoKill && (!this.skipX && (o > 7 || -7 > o) && n(this._target, "x") > r && (this.skipX = !0), !this.skipY && (s > 7 || -7 > s) && n(this._target, "y") > i && (this.skipY = !0), this.skipX && this.skipY && this._tween.kill()), this._wdw ? t.scrollTo(this.skipX ? r : this.x, this.skipY ? i : this.y) : (this.skipY || (this._target.scrollTop = this.y), this.skipX || (this._target.scrollLeft = this.x)), this.xPrev = this.x, this.yPrev = this.y
        }
    }), i = r.prototype;
    r.max = n, i.getX = function () {
        return this._wdw ? null != t.pageXOffset ? t.pageXOffset : null != e.scrollLeft ? e.scrollLeft : document.body.scrollLeft : this._target.scrollLeft
    }, i.getY = function () {
        return this._wdw ? null != t.pageYOffset ? t.pageYOffset : null != e.scrollTop ? e.scrollTop : document.body.scrollTop : this._target.scrollTop
    }, i._kill = function (e) {
        return e.scrollTo_x && (this.skipX = !0), e.scrollTo_y && (this.skipY = !0), this._super._kill.call(this, e)
    }
}),
window._gsDefine && window._gsQueue.pop()(),
define("ScrollToPlugin", function () {
}),
    function (e) {
    "use strict";
    var t = e.GreenSockGlobals || e;
    if (!t.TweenLite) {
        var n, r, i, s, o, u = function (e) {
            var n, r = e.split("."), i = t;
            for (n = 0; r.length > n; n++)i[r[n]] = i = i[r[n]] || {};
            return i
        }, a = u("com.greensock"), f = 1e-10, l = [].slice, c = function () {
        }, h = function () {
            var e = Object.prototype.toString, t = e.call([]);
            return function (n) {
                return null != n && (n instanceof Array || "object" == typeof n && !!n.push && e.call(n) === t)
            }
        }(), p = {}, d = function (n, r, i, s) {
            this.sc = p[n] ? p[n].sc : [], p[n] = this, this.gsClass = null, this.func = i;
            var o = [];
            this.check = function (a) {
                for (var f, l, c, h, v = r.length,
                         m = v; --v > -1;)(f = p[r[v]] || new d(r[v], [])).gsClass ? (o[v] = f.gsClass, m--) : a && f.sc.push(this);
                if (0 === m && i)for (l = ("com.greensock." + n).split("."), c = l.pop(), h = u(l.join("."))[c] = this.gsClass = i.apply(i, o), s && (t[c] = h, "function" == typeof define && define.amd ? define((e.GreenSockAMDPath ? e.GreenSockAMDPath + "/" : "") + n.split(".").join("/"), [], function () {
                    return h
                }) : "undefined" != typeof module && module.exports && (module.exports = h)), v = 0; this.sc.length > v; v++)this.sc[v].check()
            }, this.check(!0)
        }, v = e._gsDefine = function (e, t, n, r) {
            return new d(e, t, n, r)
        }, m = a._class = function (e, t, n) {
            return t = t || function () {
                }, v(e, [], function () {
                return t
            }, n), t
        };
        v.globals = t;
        var g = [0, 0, 1, 1], y = [], b = m("easing.Ease", function (e, t, n, r) {
            this._func = e, this._type = n || 0, this._power = r || 0, this._params = t ? g.concat(t) : g
        }, !0), w = b.map = {}, E = b.register = function (e, t, n, r) {
            for (var i, s, o, u, f = t.split(","), l = f.length,
                     c = (n || "easeIn,easeOut,easeInOut").split(","); --l > -1;)for (s = f[l], i = r ? m("easing." + s, null, !0) : a.easing[s] || {}, o = c.length; --o > -1;)u = c[o], w[s + "." + u] = w[u + s] = i[u] = e.getRatio ? e : e[u] || new e
        };
        for (i = b.prototype, i._calcEnd = !1, i.getRatio = function (e) {
            if (this._func)return this._params[0] = e, this._func.apply(null, this._params);
            var t = this._type, n = this._power, r = 1 === t ? 1 - e : 2 === t ? e : .5 > e ? 2 * e : 2 * (1 - e);
            return 1 === n ? r *= r : 2 === n ? r *= r * r : 3 === n ? r *= r * r * r : 4 === n && (r *= r * r * r * r), 1 === t ? 1 - r : 2 === t ? r : .5 > e ? r / 2 : 1 - r / 2
        }, n = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"], r = n.length; --r > -1;)i = n[r] + ",Power" + r, E(new b(null, null, 1, r), i, "easeOut", !0), E(new b(null, null, 2, r), i, "easeIn" + (0 === r ? ",easeNone" : "")), E(new b(null, null, 3, r), i, "easeInOut");
        w.linear = a.easing.Linear.easeIn, w.swing = a.easing.Quad.easeInOut;
        var S = m("events.EventDispatcher", function (e) {
            this._listeners = {}, this._eventTarget = e || this
        });
        i = S.prototype, i.addEventListener = function (e, t, n, r, i) {
            i = i || 0;
            var u, a, f = this._listeners[e], l = 0;
            for (null == f && (this._listeners[e] = f = []), a = f.length; --a > -1;)u = f[a], u.c === t && u.s === n ? f.splice(a, 1) : 0 === l && i > u.pr && (l = a + 1);
            f.splice(l, 0, {c: t, s: n, up: r, pr: i}), this !== s || o || s.wake()
        }, i.removeEventListener = function (e, t) {
            var n, r = this._listeners[e];
            if (r)for (n = r.length; --n > -1;)if (r[n].c === t)return r.splice(n, 1), void 0
        }, i.dispatchEvent = function (e) {
            var t, n, r, i = this._listeners[e];
            if (i)for (t = i.length, n = this._eventTarget; --t > -1;)r = i[t], r.up ? r.c.call(r.s || n, {
                type: e,
                target: n
            }) : r.c.call(r.s || n)
        };
        var x = e.requestAnimationFrame, T = e.cancelAnimationFrame, N = Date.now || function () {
                return (new Date).getTime()
            }, C = N();
        for (n = ["ms", "moz", "webkit", "o"], r = n.length; --r > -1 && !x;)x = e[n[r] + "RequestAnimationFrame"], T = e[n[r] + "CancelAnimationFrame"] || e[n[r] + "CancelRequestAnimationFrame"];
        m("Ticker", function (e, t) {
            var n, r, i, u, a, f = this, l = N(), h = t !== !1 && x, p = function (e) {
                C = N(), f.time = (C - l) / 1e3;
                var t, s = f.time - a;
                (!n || s > 0 || e === !0) && (f.frame++, a += s + (s >= u ? .004 : u - s), t = !0), e !== !0 && (i = r(p)), t && f.dispatchEvent("tick")
            };
            S.call(f), f.time = f.frame = 0, f.tick = function () {
                p(!0)
            }, f.sleep = function () {
                null != i && (h && T ? T(i) : clearTimeout(i), r = c, i = null, f === s && (o = !1))
            }, f.wake = function () {
                null !== i && f.sleep(), r = 0 === n ? c : h && x ? x : function (e) {
                    return setTimeout(e, 0 | 1e3 * (a - f.time) + 1)
                }, f === s && (o = !0), p(2)
            }, f.fps = function (e) {
                return arguments.length ? (n = e, u = 1 / (n || 60), a = this.time + u, f.wake(), void 0) : n
            }, f.useRAF = function (e) {
                return arguments.length ? (f.sleep(), h = e, f.fps(n), void 0) : h
            }, f.fps(e), setTimeout(function () {
                h && (!i || 5 > f.frame) && f.useRAF(!1)
            }, 1500)
        }), i = a.Ticker.prototype = new a.events.EventDispatcher, i.constructor = a.Ticker;
        var k = m("core.Animation", function (e, t) {
            if (this.vars = t = t || {}, this._duration = this._totalDuration = e || 0, this._delay = Number(t.delay) || 0, this._timeScale = 1, this._active = t.immediateRender === !0, this.data = t.data, this._reversed = t.reversed === !0, q) {
                o || s.wake();
                var n = this.vars.useFrames ? I : q;
                n.add(this, n._time), this.vars.paused && this.paused(!0)
            }
        });
        s = k.ticker = new a.Ticker, i = k.prototype, i._dirty = i._gc = i._initted = i._paused = !1, i._totalTime = i._time = 0, i._rawPrevTime = -1, i._next = i._last = i._onUpdate = i._timeline = i.timeline = null, i._paused = !1;
        var L = function () {
            o && N() - C > 2e3 && s.wake(), setTimeout(L, 2e3)
        };
        L(), i.play = function (e, t) {
            return null != e && this.seek(e, t), this.reversed(!1).paused(!1)
        }, i.pause = function (e, t) {
            return null != e && this.seek(e, t), this.paused(!0)
        }, i.resume = function (e, t) {
            return null != e && this.seek(e, t), this.paused(!1)
        }, i.seek = function (e, t) {
            return this.totalTime(Number(e), t !== !1)
        }, i.restart = function (e, t) {
            return this.reversed(!1).paused(!1).totalTime(e ? -this._delay : 0, t !== !1, !0)
        }, i.reverse = function (e, t) {
            return null != e && this.seek(e || this.totalDuration(), t), this.reversed(!0).paused(!1)
        }, i.render = function () {
        }, i.invalidate = function () {
            return this
        }, i.isActive = function () {
            var e, t = this._timeline, n = this._startTime;
            return !t || !this._gc && !this._paused && t.isActive() && (e = t.rawTime()) >= n && n + this.totalDuration() / this._timeScale > e
        }, i._enabled = function (e, t) {
            return o || s.wake(), this._gc = !e, this._active = this.isActive(), t !== !0 && (e && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !e && this.timeline && this._timeline._remove(this, !0)), !1
        }, i._kill = function () {
            return this._enabled(!1, !1)
        }, i.kill = function (e, t) {
            return this._kill(e, t), this
        }, i._uncache = function (e) {
            for (var t = e ? this : this.timeline; t;)t._dirty = !0, t = t.timeline;
            return this
        }, i._swapSelfInParams = function (e) {
            for (var t = e.length, n = e.concat(); --t > -1;)"{self}" === e[t] && (n[t] = this);
            return n
        }, i.eventCallback = function (e, t, n, r) {
            if ("on" === (e || "").substr(0, 2)) {
                var i = this.vars;
                if (1 === arguments.length)return i[e];
                null == t ? delete i[e] : (i[e] = t, i[e + "Params"] = h(n) && -1 !== n.join("").indexOf("{self}") ? this._swapSelfInParams(n) : n, i[e + "Scope"] = r), "onUpdate" === e && (this._onUpdate = t)
            }
            return this
        }, i.delay = function (e) {
            return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + e - this._delay), this._delay = e, this) : this._delay
        }, i.duration = function (e) {
            return arguments.length ? (this._duration = this._totalDuration = e, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== e && this.totalTime(this._totalTime * (e / this._duration), !0), this) : (this._dirty = !1, this._duration)
        }, i.totalDuration = function (e) {
            return this._dirty = !1, arguments.length ? this.duration(e) : this._totalDuration
        }, i.time = function (e, t) {
            return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(e > this._duration ? this._duration : e, t)) : this._time
        }, i.totalTime = function (e, t, n) {
            if (o || s.wake(), !arguments.length)return this._totalTime;
            if (this._timeline) {
                if (0 > e && !n && (e += this.totalDuration()), this._timeline.smoothChildTiming) {
                    this._dirty && this.totalDuration();
                    var r = this._totalDuration, i = this._timeline;
                    if (e > r && !n && (e = r), this._startTime = (this._paused ? this._pauseTime : i._time) - (this._reversed ? r - e : e) / this._timeScale, i._dirty || this._uncache(!1), i._timeline)for (; i._timeline;)i._timeline._time !== (i._startTime + i._totalTime) / i._timeScale && i.totalTime(i._totalTime, !0), i = i._timeline
                }
                this._gc && this._enabled(!0, !1), (this._totalTime !== e || 0 === this._duration) && this.render(e, t, !1)
            }
            return this
        }, i.progress = i.totalProgress = function (e, t) {
            return arguments.length ? this.totalTime(this.duration() * e, t) : this._time / this.duration()
        }, i.startTime = function (e) {
            return arguments.length ? (e !== this._startTime && (this._startTime = e, this.timeline && this.timeline._sortChildren && this.timeline.add(this, e - this._delay)), this) : this._startTime
        }, i.timeScale = function (e) {
            if (!arguments.length)return this._timeScale;
            if (e = e || f, this._timeline && this._timeline.smoothChildTiming) {
                var t = this._pauseTime, n = t || 0 === t ? t : this._timeline.totalTime();
                this._startTime = n - (n - this._startTime) * this._timeScale / e
            }
            return this._timeScale = e, this._uncache(!1)
        }, i.reversed = function (e) {
            return arguments.length ? (e != this._reversed && (this._reversed = e, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed
        }, i.paused = function (e) {
            if (!arguments.length)return this._paused;
            if (e != this._paused && this._timeline) {
                o || e || s.wake();
                var t = this._timeline, n = t.rawTime(), r = n - this._pauseTime;
                !e && t.smoothChildTiming && (this._startTime += r, this._uncache(!1)), this._pauseTime = e ? n : null, this._paused = e, this._active = this.isActive(), !e && 0 !== r && this._initted && this.duration() && this.render(t.smoothChildTiming ? this._totalTime : (n - this._startTime) / this._timeScale, !0, !0)
            }
            return this._gc && !e && this._enabled(!0, !1), this
        };
        var A = m("core.SimpleTimeline", function (e) {
            k.call(this, 0, e), this.autoRemoveChildren = this.smoothChildTiming = !0
        });
        i = A.prototype = new k, i.constructor = A, i.kill()._gc = !1, i._first = i._last = null, i._sortChildren = !1, i.add = i.insert = function (e, t) {
            var n, r;
            if (e._startTime = Number(t || 0) + e._delay, e._paused && this !== e._timeline && (e._pauseTime = e._startTime + (this.rawTime() - e._startTime) / e._timeScale), e.timeline && e.timeline._remove(e, !0), e.timeline = e._timeline = this, e._gc && e._enabled(!0, !0), n = this._last, this._sortChildren)for (r = e._startTime; n && n._startTime > r;)n = n._prev;
            return n ? (e._next = n._next, n._next = e) : (e._next = this._first, this._first = e), e._next ? e._next._prev = e : this._last = e, e._prev = n, this._timeline && this._uncache(!0), this
        }, i._remove = function (e, t) {
            return e.timeline === this && (t || e._enabled(!1, !0), e.timeline = null, e._prev ? e._prev._next = e._next : this._first === e && (this._first = e._next), e._next ? e._next._prev = e._prev : this._last === e && (this._last = e._prev), this._timeline && this._uncache(!0)), this
        }, i.render = function (e, t, n) {
            var r, i = this._first;
            for (this._totalTime = this._time = this._rawPrevTime = e; i;)r = i._next, (i._active || e >= i._startTime && !i._paused) && (i._reversed ? i.render((i._dirty ? i.totalDuration() : i._totalDuration) - (e - i._startTime) * i._timeScale, t, n) : i.render((e - i._startTime) * i._timeScale, t, n)), i = r
        }, i.rawTime = function () {
            return o || s.wake(), this._totalTime
        };
        var O = m("TweenLite", function (t, n, r) {
            if (k.call(this, n, r), this.render = O.prototype.render, null == t)throw"Cannot tween a null target.";
            this.target = t = "string" != typeof t ? t : O.selector(t) || t;
            var i, s, o,
                u = t.jquery || t.length && t !== e && t[0] && (t[0] === e || t[0].nodeType && t[0].style && !t.nodeType),
                a = this.vars.overwrite;
            if (this._overwrite = a = null == a ? F[O.defaultOverwrite] : "number" == typeof a ? a >> 0 : F[a], (u || t instanceof Array || t.push && h(t)) && "number" != typeof t[0])for (this._targets = o = l.call(t, 0), this._propLookup = [], this._siblings = [], i = 0; o.length > i; i++)s = o[i], s ? "string" != typeof s ? s.length && s !== e && s[0] && (s[0] === e || s[0].nodeType && s[0].style && !s.nodeType) ? (o.splice(i--, 1), this._targets = o = o.concat(l.call(s, 0))) : (this._siblings[i] = R(s, this, !1), 1 === a && this._siblings[i].length > 1 && U(s, this, null, 1, this._siblings[i])) : (s = o[i--] = O.selector(s), "string" == typeof s && o.splice(i + 1, 1)) : o.splice(i--, 1); else this._propLookup = {}, this._siblings = R(t, this, !1), 1 === a && this._siblings.length > 1 && U(t, this, null, 1, this._siblings);
            (this.vars.immediateRender || 0 === n && 0 === this._delay && this.vars.immediateRender !== !1) && this.render(-this._delay, !1, !0)
        }, !0), M = function (t) {
            return t.length && t !== e && t[0] && (t[0] === e || t[0].nodeType && t[0].style && !t.nodeType)
        }, _ = function (e, t) {
            var n, r = {};
            for (n in e)j[n] || n in t && "x" !== n && "y" !== n && "width" !== n && "height" !== n && "className" !== n && "border" !== n || !(!P[n] || P[n] && P[n]._autoCSS) || (r[n] = e[n], delete e[n]);
            e.css = r
        };
        i = O.prototype = new k, i.constructor = O, i.kill()._gc = !1, i.ratio = 0, i._firstPT = i._targets = i._overwrittenProps = i._startAt = null, i._notifyPluginsOfEnabled = !1, O.version = "1.11.8", O.defaultEase = i._ease = new b(null, null, 1, 1), O.defaultOverwrite = "auto", O.ticker = s, O.autoSleep = !0, O.selector = e.$ || e.jQuery || function (t) {
                return e.$ ? (O.selector = e.$, e.$(t)) : e.document ? e.document.getElementById("#" === t.charAt(0) ? t.substr(1) : t) : t
            };
        var D = O._internals = {isArray: h, isSelector: M}, P = O._plugins = {}, H = O._tweenLookup = {}, B = 0,
            j = D.reservedProps = {
                ease: 1,
                delay: 1,
                overwrite: 1,
                onComplete: 1,
                onCompleteParams: 1,
                onCompleteScope: 1,
                useFrames: 1,
                runBackwards: 1,
                startAt: 1,
                onUpdate: 1,
                onUpdateParams: 1,
                onUpdateScope: 1,
                onStart: 1,
                onStartParams: 1,
                onStartScope: 1,
                onReverseComplete: 1,
                onReverseCompleteParams: 1,
                onReverseCompleteScope: 1,
                onRepeat: 1,
                onRepeatParams: 1,
                onRepeatScope: 1,
                easeParams: 1,
                yoyo: 1,
                immediateRender: 1,
                repeat: 1,
                repeatDelay: 1,
                data: 1,
                paused: 1,
                reversed: 1,
                autoCSS: 1
            }, F = {none: 0, all: 1, auto: 2, concurrent: 3, allOnStart: 4, preexisting: 5, "true": 1, "false": 0},
            I = k._rootFramesTimeline = new A, q = k._rootTimeline = new A;
        q._startTime = s.time, I._startTime = s.frame, q._active = I._active = !0, k._updateRoot = function () {
            if (q.render((s.time - q._startTime) * q._timeScale, !1, !1), I.render((s.frame - I._startTime) * I._timeScale, !1, !1), !(s.frame % 120)) {
                var e, t, n;
                for (n in H) {
                    for (t = H[n].tweens, e = t.length; --e > -1;)t[e]._gc && t.splice(e, 1);
                    0 === t.length && delete H[n]
                }
                if (n = q._first, (!n || n._paused) && O.autoSleep && !I._first && 1 === s._listeners.tick.length) {
                    for (; n && n._paused;)n = n._next;
                    n || s.sleep()
                }
            }
        }, s.addEventListener("tick", k._updateRoot);
        var R = function (e, t, n) {
            var r, i, s = e._gsTweenID;
            if (H[s || (e._gsTweenID = s = "t" + B++)] || (H[s] = {
                    target: e,
                    tweens: []
                }), t && (r = H[s].tweens, r[i = r.length] = t, n))for (; --i > -1;)r[i] === t && r.splice(i, 1);
            return H[s].tweens
        }, U = function (e, t, n, r, i) {
            var s, o, u, a;
            if (1 === r || r >= 4) {
                for (a = i.length, s = 0; a > s; s++)if ((u = i[s]) !== t) u._gc || u._enabled(!1, !1) && (o = !0); else if (5 === r)break;
                return o
            }
            var l, c = t._startTime + f, h = [], p = 0, d = 0 === t._duration;
            for (s = i.length; --s > -1;)(u = i[s]) === t || u._gc || u._paused || (u._timeline !== t._timeline ? (l = l || z(t, 0, d), 0 === z(u, l, d) && (h[p++] = u)) : c >= u._startTime && u._startTime + u.totalDuration() / u._timeScale > c && ((d || !u._initted) && 2e-10 >= c - u._startTime || (h[p++] = u)));
            for (s = p; --s > -1;)u = h[s], 2 === r && u._kill(n, e) && (o = !0), (2 !== r || !u._firstPT && u._initted) && u._enabled(!1, !1) && (o = !0);
            return o
        }, z = function (e, t, n) {
            for (var r = e._timeline, i = r._timeScale, s = e._startTime; r._timeline;) {
                if (s += r._startTime, i *= r._timeScale, r._paused)return -100;
                r = r._timeline
            }
            return s /= i, s > t ? s - t : n && s === t || !e._initted && 2 * f > s - t ? f : (s += e.totalDuration() / e._timeScale / i) > t + f ? 0 : s - t - f
        };
        i._init = function () {
            var e, t, n, r, i = this.vars, s = this._overwrittenProps, o = this._duration, u = i.immediateRender,
                a = i.ease;
            if (i.startAt) {
                if (this._startAt && this._startAt.render(-1, !0), i.startAt.overwrite = 0, i.startAt.immediateRender = !0, this._startAt = O.to(this.target, 0, i.startAt), u)if (this._time > 0) this._startAt = null; else if (0 !== o)return
            } else if (i.runBackwards && 0 !== o)if (this._startAt) this._startAt.render(-1, !0), this._startAt = null; else {
                n = {};
                for (r in i)j[r] && "autoCSS" !== r || (n[r] = i[r]);
                if (n.overwrite = 0, n.data = "isFromStart", this._startAt = O.to(this.target, 0, n), i.immediateRender) {
                    if (0 === this._time)return
                } else this._startAt.render(-1, !0)
            }
            if (this._ease = a ? a instanceof b ? i.easeParams instanceof Array ? a.config.apply(a, i.easeParams) : a : "function" == typeof a ? new b(a, i.easeParams) : w[a] || O.defaultEase : O.defaultEase, this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)for (e = this._targets.length; --e > -1;)this._initProps(this._targets[e], this._propLookup[e] = {}, this._siblings[e], s ? s[e] : null) && (t = !0); else t = this._initProps(this.target, this._propLookup, this._siblings, s);
            if (t && O._onPluginEvent("_onInitAllProps", this), s && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), i.runBackwards)for (n = this._firstPT; n;)n.s += n.c, n.c = -n.c, n = n._next;
            this._onUpdate = i.onUpdate, this._initted = !0
        }, i._initProps = function (t, n, r, i) {
            var s, o, u, a, f, l;
            if (null == t)return !1;
            this.vars.css || t.style && t !== e && t.nodeType && P.css && this.vars.autoCSS !== !1 && _(this.vars, t);
            for (s in this.vars) {
                if (l = this.vars[s], j[s]) l && (l instanceof Array || l.push && h(l)) && -1 !== l.join("").indexOf("{self}") && (this.vars[s] = l = this._swapSelfInParams(l, this)); else if (P[s] && (a = new P[s])._onInitTween(t, this.vars[s], this)) {
                    for (this._firstPT = f = {
                        _next: this._firstPT,
                        t: a,
                        p: "setRatio",
                        s: 0,
                        c: 1,
                        f: !0,
                        n: s,
                        pg: !0,
                        pr: a._priority
                    }, o = a._overwriteProps.length; --o > -1;)n[a._overwriteProps[o]] = this._firstPT;
                    (a._priority || a._onInitAllProps) && (u = !0), (a._onDisable || a._onEnable) && (this._notifyPluginsOfEnabled = !0)
                } else this._firstPT = n[s] = f = {
                    _next: this._firstPT,
                    t: t,
                    p: s,
                    f: "function" == typeof t[s],
                    n: s,
                    pg: !1,
                    pr: 0
                }, f.s = f.f ? t[s.indexOf("set") || "function" != typeof t["get" + s.substr(3)] ? s : "get" + s.substr(3)]() : parseFloat(t[s]), f.c = "string" == typeof l && "=" === l.charAt(1) ? parseInt(l.charAt(0) + "1", 10) * Number(l.substr(2)) : Number(l) - f.s || 0;
                f && f._next && (f._next._prev = f)
            }
            return i && this._kill(i, t) ? this._initProps(t, n, r, i) : this._overwrite > 1 && this._firstPT && r.length > 1 && U(t, this, n, this._overwrite, r) ? (this._kill(n, t), this._initProps(t, n, r, i)) : u
        }, i.render = function (e, t, n) {
            var r, i, s, o, u = this._time, a = this._duration;
            if (e >= a) this._totalTime = this._time = a, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (r = !0, i = "onComplete"), 0 === a && (o = this._rawPrevTime, this._startTime === this._timeline._duration && (e = 0), (0 === e || 0 > o || o === f) && o !== e && (n = !0, o > f && (i = "onReverseComplete")), this._rawPrevTime = o = !t || e || this._rawPrevTime === e ? e : f); else if (1e-7 > e) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== u || 0 === a && this._rawPrevTime > 0 && this._rawPrevTime !== f) && (i = "onReverseComplete", r = this._reversed), 0 > e ? (this._active = !1, 0 === a && (this._rawPrevTime >= 0 && (n = !0), this._rawPrevTime = o = !t || e || this._rawPrevTime === e ? e : f)) : this._initted || (n = !0); else if (this._totalTime = this._time = e, this._easeType) {
                var l = e / a, c = this._easeType, h = this._easePower;
                (1 === c || 3 === c && l >= .5) && (l = 1 - l), 3 === c && (l *= 2), 1 === h ? l *= l : 2 === h ? l *= l * l : 3 === h ? l *= l * l * l : 4 === h && (l *= l * l * l * l), this.ratio = 1 === c ? 1 - l : 2 === c ? l : .5 > e / a ? l / 2 : 1 - l / 2
            } else this.ratio = this._ease.getRatio(e / a);
            if (this._time !== u || n) {
                if (!this._initted) {
                    if (this._init(), !this._initted || this._gc)return;
                    this._time && !r ? this.ratio = this._ease.getRatio(this._time / a) : r && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                }
                for (this._active || !this._paused && this._time !== u && e >= 0 && (this._active = !0), 0 === u && (this._startAt && (e >= 0 ? this._startAt.render(e, t, n) : i || (i = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === a) && (t || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || y))), s = this._firstPT; s;)s.f ? s.t[s.p](s.c * this.ratio + s.s) : s.t[s.p] = s.c * this.ratio + s.s, s = s._next;
                this._onUpdate && (0 > e && this._startAt && this._startTime && this._startAt.render(e, t, n), t || (this._time !== u || r) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || y)), i && (this._gc || (0 > e && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(e, t, n), r && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !t && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || y), 0 === a && this._rawPrevTime === f && o !== f && (this._rawPrevTime = 0)))
            }
        }, i._kill = function (e, t) {
            if ("all" === e && (e = null), null != e || null != t && t !== this.target) {
                t = "string" != typeof t ? t || this._targets || this.target : O.selector(t) || t;
                var n, r, i, s, o, u, a, f;
                if ((h(t) || M(t)) && "number" != typeof t[0])for (n = t.length; --n > -1;)this._kill(e, t[n]) && (u = !0); else {
                    if (this._targets) {
                        for (n = this._targets.length; --n > -1;)if (t === this._targets[n]) {
                            o = this._propLookup[n] || {}, this._overwrittenProps = this._overwrittenProps || [], r = this._overwrittenProps[n] = e ? this._overwrittenProps[n] || {} : "all";
                            break
                        }
                    } else {
                        if (t !== this.target)return !1;
                        o = this._propLookup, r = this._overwrittenProps = e ? this._overwrittenProps || {} : "all"
                    }
                    if (o) {
                        a = e || o, f = e !== r && "all" !== r && e !== o && ("object" != typeof e || !e._tempKill);
                        for (i in a)(s = o[i]) && (s.pg && s.t._kill(a) && (u = !0), s.pg && 0 !== s.t._overwriteProps.length || (s._prev ? s._prev._next = s._next : s === this._firstPT && (this._firstPT = s._next), s._next && (s._next._prev = s._prev), s._next = s._prev = null), delete o[i]), f && (r[i] = 1);
                        !this._firstPT && this._initted && this._enabled(!1, !1)
                    }
                }
                return u
            }
            return this._enabled(!1, !1)
        }, i.invalidate = function () {
            return this._notifyPluginsOfEnabled && O._onPluginEvent("_onDisable", this), this._firstPT = null, this._overwrittenProps = null, this._onUpdate = null, this._startAt = null, this._initted = this._active = this._notifyPluginsOfEnabled = !1, this._propLookup = this._targets ? {} : [], this
        }, i._enabled = function (e, t) {
            if (o || s.wake(), e && this._gc) {
                var n, r = this._targets;
                if (r)for (n = r.length; --n > -1;)this._siblings[n] = R(r[n], this, !0); else this._siblings = R(this.target, this, !0)
            }
            return k.prototype._enabled.call(this, e, t), this._notifyPluginsOfEnabled && this._firstPT ? O._onPluginEvent(e ? "_onEnable" : "_onDisable", this) : !1
        }, O.to = function (e, t, n) {
            return new O(e, t, n)
        }, O.from = function (e, t, n) {
            return n.runBackwards = !0, n.immediateRender = 0 != n.immediateRender, new O(e, t, n)
        }, O.fromTo = function (e, t, n, r) {
            return r.startAt = n, r.immediateRender = 0 != r.immediateRender && 0 != n.immediateRender, new O(e, t, r)
        }, O.delayedCall = function (e, t, n, r, i) {
            return new O(t, 0, {
                delay: e,
                onComplete: t,
                onCompleteParams: n,
                onCompleteScope: r,
                onReverseComplete: t,
                onReverseCompleteParams: n,
                onReverseCompleteScope: r,
                immediateRender: !1,
                useFrames: i,
                overwrite: 0
            })
        }, O.set = function (e, t) {
            return new O(e, 0, t)
        }, O.getTweensOf = function (e, t) {
            if (null == e)return [];
            e = "string" != typeof e ? e : O.selector(e) || e;
            var n, r, i, s;
            if ((h(e) || M(e)) && "number" != typeof e[0]) {
                for (n = e.length, r = []; --n > -1;)r = r.concat(O.getTweensOf(e[n], t));
                for (n = r.length; --n > -1;)for (s = r[n], i = n; --i > -1;)s === r[i] && r.splice(n, 1)
            } else for (r = R(e).concat(), n = r.length; --n > -1;)(r[n]._gc || t && !r[n].isActive()) && r.splice(n, 1);
            return r
        }, O.killTweensOf = O.killDelayedCallsTo = function (e, t, n) {
            "object" == typeof t && (n = t, t = !1);
            for (var r = O.getTweensOf(e, t), i = r.length; --i > -1;)r[i]._kill(n, e)
        };
        var W = m("plugins.TweenPlugin", function (e, t) {
            this._overwriteProps = (e || "").split(","), this._propName = this._overwriteProps[0], this._priority = t || 0, this._super = W.prototype
        }, !0);
        if (i = W.prototype, W.version = "1.10.1", W.API = 2, i._firstPT = null, i._addTween = function (e, t, n, r, i, s) {
                var o, u;
                return null != r && (o = "number" == typeof r || "=" !== r.charAt(1) ? Number(r) - n : parseInt(r.charAt(0) + "1", 10) * Number(r.substr(2))) ? (this._firstPT = u = {
                    _next: this._firstPT,
                    t: e,
                    p: t,
                    s: n,
                    c: o,
                    f: "function" == typeof e[t],
                    n: i || t,
                    r: s
                }, u._next && (u._next._prev = u), u) : void 0
            }, i.setRatio = function (e) {
                for (var t, n = this._firstPT,
                         r = 1e-6; n;)t = n.c * e + n.s, n.r ? t = Math.round(t) : r > t && t > -r && (t = 0), n.f ? n.t[n.p](t) : n.t[n.p] = t, n = n._next
            }, i._kill = function (e) {
                var t, n = this._overwriteProps, r = this._firstPT;
                if (null != e[this._propName]) this._overwriteProps = []; else for (t = n.length; --t > -1;)null != e[n[t]] && n.splice(t, 1);
                for (; r;)null != e[r.n] && (r._next && (r._next._prev = r._prev), r._prev ? (r._prev._next = r._next, r._prev = null) : this._firstPT === r && (this._firstPT = r._next)), r = r._next;
                return !1
            }, i._roundProps = function (e, t) {
                for (var n = this._firstPT; n;)(e[this._propName] || null != n.n && e[n.n.split(this._propName + "_").join("")]) && (n.r = t), n = n._next
            }, O._onPluginEvent = function (e, t) {
                var n, r, i, s, o, u = t._firstPT;
                if ("_onInitAllProps" === e) {
                    for (; u;) {
                        for (o = u._next, r = i; r && r.pr > u.pr;)r = r._next;
                        (u._prev = r ? r._prev : s) ? u._prev._next = u : i = u, (u._next = r) ? r._prev = u : s = u, u = o
                    }
                    u = t._firstPT = i
                }
                for (; u;)u.pg && "function" == typeof u.t[e] && u.t[e]() && (n = !0), u = u._next;
                return n
            }, W.activate = function (e) {
                for (var t = e.length; --t > -1;)e[t].API === W.API && (P[(new e[t])._propName] = e[t]);
                return !0
            }, v.plugin = function (e) {
                if (!(e && e.propName && e.init && e.API))throw"illegal plugin definition.";
                var t, n = e.propName, r = e.priority || 0, i = e.overwriteProps, s = {
                    init: "_onInitTween",
                    set: "setRatio",
                    kill: "_kill",
                    round: "_roundProps",
                    initAll: "_onInitAllProps"
                }, o = m("plugins." + n.charAt(0).toUpperCase() + n.substr(1) + "Plugin", function () {
                    W.call(this, n, r), this._overwriteProps = i || []
                }, e.global === !0), u = o.prototype = new W(n);
                u.constructor = o, o.API = e.API;
                for (t in s)"function" == typeof e[t] && (u[s[t]] = e[t]);
                return o.version = e.version, W.activate([o]), o
            }, n = e._gsQueue) {
            for (r = 0; n.length > r; r++)n[r]();
            for (i in p)p[i].func || e.console.log("GSAP encountered missing dependency: com.greensock." + i)
        }
        o = !1
    }
}(window),
define("TweenLite", ["CSSPlugin", "Ease", "ScrollToPlugin"], function (e) {
    return function () {
        var t, n;
        return t || e.TweenLite
    }
}(this)),
(window._gsQueue || (window._gsQueue = [])).push(function () {
    "use strict";
    window._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function (e, t, n) {
        var r = function (e) {
                t.call(this, e), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                var n, r, i = this.vars;
                for (r in i)n = i[r], o(n) && -1 !== n.join("").indexOf("{self}") && (i[r] = this._swapSelfInParams(n));
                o(i.tweens) && this.add(i.tweens, 0, i.align, i.stagger)
            }, i = 1e-10, s = n._internals.isSelector, o = n._internals.isArray, u = [], a = window._gsDefine.globals,
            f = function (e) {
                var t, n = {};
                for (t in e)n[t] = e[t];
                return n
            }, l = function (e, t, n, r) {
                e._timeline.pause(e._startTime), t && t.apply(r || e._timeline, n || u)
            }, c = u.slice, h = r.prototype = new t;
        return r.version = "1.11.8", h.constructor = r, h.kill()._gc = !1, h.to = function (e, t, r, i) {
            var s = r.repeat && a.TweenMax || n;
            return t ? this.add(new s(e, t, r), i) : this.set(e, r, i)
        }, h.from = function (e, t, r, i) {
            return this.add((r.repeat && a.TweenMax || n).from(e, t, r), i)
        }, h.fromTo = function (e, t, r, i, s) {
            var o = i.repeat && a.TweenMax || n;
            return t ? this.add(o.fromTo(e, t, r, i), s) : this.set(e, i, s)
        }, h.staggerTo = function (e, t, i, o, u, a, l, h) {
            var p, d = new r({
                onComplete: a,
                onCompleteParams: l,
                onCompleteScope: h,
                smoothChildTiming: this.smoothChildTiming
            });
            for ("string" == typeof e && (e = n.selector(e) || e), s(e) && (e = c.call(e, 0)), o = o || 0, p = 0; e.length > p; p++)i.startAt && (i.startAt = f(i.startAt)), d.to(e[p], t, f(i), p * o);
            return this.add(d, u)
        }, h.staggerFrom = function (e, t, n, r, i, s, o, u) {
            return n.immediateRender = 0 != n.immediateRender, n.runBackwards = !0, this.staggerTo(e, t, n, r, i, s, o, u)
        }, h.staggerFromTo = function (e, t, n, r, i, s, o, u, a) {
            return r.startAt = n, r.immediateRender = 0 != r.immediateRender && 0 != n.immediateRender, this.staggerTo(e, t, r, i, s, o, u, a)
        }, h.call = function (e, t, r, i) {
            return this.add(n.delayedCall(0, e, t, r), i)
        }, h.set = function (e, t, r) {
            return r = this._parseTimeOrLabel(r, 0, !0), null == t.immediateRender && (t.immediateRender = r === this._time && !this._paused), this.add(new n(e, 0, t), r)
        }, r.exportRoot = function (e, t) {
            e = e || {}, null == e.smoothChildTiming && (e.smoothChildTiming = !0);
            var i, s, o = new r(e), u = o._timeline;
            for (null == t && (t = !0), u._remove(o, !0), o._startTime = 0, o._rawPrevTime = o._time = o._totalTime = u._time, i = u._first; i;)s = i._next, t && i instanceof n && i.target === i.vars.onComplete || o.add(i, i._startTime - i._delay), i = s;
            return u.add(o, 0), o
        }, h.add = function (i, s, u, a) {
            var f, l, c, h, p, d;
            if ("number" != typeof s && (s = this._parseTimeOrLabel(s, 0, !0, i)), !(i instanceof e)) {
                if (i instanceof Array || i && i.push && o(i)) {
                    for (u = u || "normal", a = a || 0, f = s, l = i.length, c = 0; l > c; c++)o(h = i[c]) && (h = new r({tweens: h})), this.add(h, f), "string" != typeof h && "function" != typeof h && ("sequence" === u ? f = h._startTime + h.totalDuration() / h._timeScale : "start" === u && (h._startTime -= h.delay())), f += a;
                    return this._uncache(!0)
                }
                if ("string" == typeof i)return this.addLabel(i, s);
                if ("function" != typeof i)throw"Cannot add " + i + " into the timeline; it is not a tween, timeline, function, or string.";
                i = n.delayedCall(0, i)
            }
            if (t.prototype.add.call(this, i, s), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())for (p = this, d = p.rawTime() > i._startTime; p._timeline;)d && p._timeline.smoothChildTiming ? p.totalTime(p._totalTime, !0) : p._gc && p._enabled(!0, !1), p = p._timeline;
            return this
        }, h.remove = function (t) {
            if (t instanceof e)return this._remove(t, !1);
            if (t instanceof Array || t && t.push && o(t)) {
                for (var n = t.length; --n > -1;)this.remove(t[n]);
                return this
            }
            return "string" == typeof t ? this.removeLabel(t) : this.kill(null, t)
        }, h._remove = function (e, n) {
            t.prototype._remove.call(this, e, n);
            var r = this._last;
            return r ? this._time > r._startTime + r._totalDuration / r._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
        }, h.append = function (e, t) {
            return this.add(e, this._parseTimeOrLabel(null, t, !0, e))
        }, h.insert = h.insertMultiple = function (e, t, n, r) {
            return this.add(e, t || 0, n, r)
        }, h.appendMultiple = function (e, t, n, r) {
            return this.add(e, this._parseTimeOrLabel(null, t, !0, e), n, r)
        }, h.addLabel = function (e, t) {
            return this._labels[e] = this._parseTimeOrLabel(t), this
        }, h.addPause = function (e, t, n, r) {
            return this.call(l, ["{self}", t, n, r], this, e)
        }, h.removeLabel = function (e) {
            return delete this._labels[e], this
        }, h.getLabelTime = function (e) {
            return null != this._labels[e] ? this._labels[e] : -1
        }, h._parseTimeOrLabel = function (t, n, r, i) {
            var s;
            if (i instanceof e && i.timeline === this) this.remove(i); else if (i && (i instanceof Array || i.push && o(i)))for (s = i.length; --s > -1;)i[s] instanceof e && i[s].timeline === this && this.remove(i[s]);
            if ("string" == typeof n)return this._parseTimeOrLabel(n, r && "number" == typeof t && null == this._labels[n] ? t - this.duration() : 0, r);
            if (n = n || 0, "string" != typeof t || !isNaN(t) && null == this._labels[t]) null == t && (t = this.duration()); else {
                if (s = t.indexOf("="), -1 === s)return null == this._labels[t] ? r ? this._labels[t] = this.duration() + n : n : this._labels[t] + n;
                n = parseInt(t.charAt(s - 1) + "1", 10) * Number(t.substr(s + 1)), t = s > 1 ? this._parseTimeOrLabel(t.substr(0, s - 1), 0, r) : this.duration()
            }
            return Number(t) + n
        }, h.seek = function (e, t) {
            return this.totalTime("number" == typeof e ? e : this._parseTimeOrLabel(e), t !== !1)
        }, h.stop = function () {
            return this.paused(!0)
        }, h.gotoAndPlay = function (e, t) {
            return this.play(e, t)
        }, h.gotoAndStop = function (e, t) {
            return this.pause(e, t)
        }, h.render = function (e, t, n) {
            this._gc && this._enabled(!0, !1);
            var r, s, o, a, f, l = this._dirty ? this.totalDuration() : this._totalDuration, c = this._time,
                h = this._startTime, p = this._timeScale, d = this._paused;
            if (e >= l ? (this._totalTime = this._time = l, this._reversed || this._hasPausedChild() || (s = !0, a = "onComplete", 0 === this._duration && (0 === e || 0 > this._rawPrevTime || this._rawPrevTime === i) && this._rawPrevTime !== e && this._first && (f = !0, this._rawPrevTime > i && (a = "onReverseComplete"))), this._rawPrevTime = this._duration || !t || e || this._rawPrevTime === e ? e : i, e = l + 1e-4) : 1e-7 > e ? (this._totalTime = this._time = 0, (0 !== c || 0 === this._duration && this._rawPrevTime !== i && (this._rawPrevTime > 0 || 0 > e && this._rawPrevTime >= 0)) && (a = "onReverseComplete", s = this._reversed), 0 > e ? (this._active = !1, 0 === this._duration && this._rawPrevTime >= 0 && this._first && (f = !0), this._rawPrevTime = e) : (this._rawPrevTime = this._duration || !t || e || this._rawPrevTime === e ? e : i, e = 0, this._initted || (f = !0))) : this._totalTime = this._time = this._rawPrevTime = e, this._time !== c && this._first || n || f) {
                if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== c && e > 0 && (this._active = !0), 0 === c && this.vars.onStart && 0 !== this._time && (t || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || u)), this._time >= c)for (r = this._first; r && (o = r._next, !this._paused || d);)(r._active || r._startTime <= this._time && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (e - r._startTime) * r._timeScale, t, n) : r.render((e - r._startTime) * r._timeScale, t, n)), r = o; else for (r = this._last; r && (o = r._prev, !this._paused || d);)(r._active || c >= r._startTime && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (e - r._startTime) * r._timeScale, t, n) : r.render((e - r._startTime) * r._timeScale, t, n)), r = o;
                this._onUpdate && (t || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || u)), a && (this._gc || (h === this._startTime || p !== this._timeScale) && (0 === this._time || l >= this.totalDuration()) && (s && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !t && this.vars[a] && this.vars[a].apply(this.vars[a + "Scope"] || this, this.vars[a + "Params"] || u)))
            }
        }, h._hasPausedChild = function () {
            for (var e = this._first; e;) {
                if (e._paused || e instanceof r && e._hasPausedChild())return !0;
                e = e._next
            }
            return !1
        }, h.getChildren = function (e, t, r, i) {
            i = i || -9999999999;
            for (var s = [], o = this._first,
                     u = 0; o;)i > o._startTime || (o instanceof n ? t !== !1 && (s[u++] = o) : (r !== !1 && (s[u++] = o), e !== !1 && (s = s.concat(o.getChildren(!0, t, r)), u = s.length))), o = o._next;
            return s
        }, h.getTweensOf = function (e, t) {
            for (var r = n.getTweensOf(e), i = r.length, s = [],
                     o = 0; --i > -1;)(r[i].timeline === this || t && this._contains(r[i])) && (s[o++] = r[i]);
            return s
        }, h._contains = function (e) {
            for (var t = e.timeline; t;) {
                if (t === this)return !0;
                t = t.timeline
            }
            return !1
        }, h.shiftChildren = function (e, t, n) {
            n = n || 0;
            for (var r, i = this._first, s = this._labels; i;)i._startTime >= n && (i._startTime += e), i = i._next;
            if (t)for (r in s)s[r] >= n && (s[r] += e);
            return this._uncache(!0)
        }, h._kill = function (e, t) {
            if (!e && !t)return this._enabled(!1, !1);
            for (var n = t ? this.getTweensOf(t) : this.getChildren(!0, !0, !1), r = n.length,
                     i = !1; --r > -1;)n[r]._kill(e, t) && (i = !0);
            return i
        }, h.clear = function (e) {
            var t = this.getChildren(!1, !0, !0), n = t.length;
            for (this._time = this._totalTime = 0; --n > -1;)t[n]._enabled(!1, !1);
            return e !== !1 && (this._labels = {}), this._uncache(!0)
        }, h.invalidate = function () {
            for (var e = this._first; e;)e.invalidate(), e = e._next;
            return this
        }, h._enabled = function (e, n) {
            if (e === this._gc)for (var r = this._first; r;)r._enabled(e, !0), r = r._next;
            return t.prototype._enabled.call(this, e, n)
        }, h.duration = function (e) {
            return arguments.length ? (0 !== this.duration() && 0 !== e && this.timeScale(this._duration / e), this) : (this._dirty && this.totalDuration(), this._duration)
        }, h.totalDuration = function (e) {
            if (!arguments.length) {
                if (this._dirty) {
                    for (var t, n, r = 0, i = this._last,
                             s = 999999999999; i;)t = i._prev, i._dirty && i.totalDuration(), i._startTime > s && this._sortChildren && !i._paused ? this.add(i, i._startTime - i._delay) : s = i._startTime, 0 > i._startTime && !i._paused && (r -= i._startTime, this._timeline.smoothChildTiming && (this._startTime += i._startTime / this._timeScale), this.shiftChildren(-i._startTime, !1, -9999999999), s = 0), n = i._startTime + i._totalDuration / i._timeScale, n > r && (r = n), i = t;
                    this._duration = this._totalDuration = r, this._dirty = !1
                }
                return this._totalDuration
            }
            return 0 !== this.totalDuration() && 0 !== e && this.timeScale(this._totalDuration / e), this
        }, h.usesFrames = function () {
            for (var t = this._timeline; t._timeline;)t = t._timeline;
            return t === e._rootFramesTimeline
        }, h.rawTime = function () {
            return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
        }, r
    }, !0)
}),
window._gsDefine && window._gsQueue.pop()(),
define("TimelineLite", ["TweenLite"], function (e) {
    return function () {
        var t, n;
        return t || e.TimelineLite
    }
}(this)), function (e) {
    function t(e, t, n, r, i) {
        this._listener = t, this._isOnce = n, this.context = r, this._signal = e, this._priority = i || 0
    }

    function n(e, t) {
        if (typeof e != "function")throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", t))
    }

    function r() {
        this._bindings = [], this._prevParams = null;
        var e = this;
        this.dispatch = function () {
            r.prototype.dispatch.apply(e, arguments)
        }
    }

    t.prototype = {
        active: !0, params: null, execute: function (e) {
            var t;
            return this.active && this._listener && (e = this.params ? this.params.concat(e) : e, t = this._listener.apply(this.context, e), this._isOnce && this.detach()), t
        }, detach: function () {
            return this.isBound() ? this._signal.remove(this._listener, this.context) : null
        }, isBound: function () {
            return !!this._signal && !!this._listener
        }, isOnce: function () {
            return this._isOnce
        }, getListener: function () {
            return this._listener
        }, getSignal: function () {
            return this._signal
        }, _destroy: function () {
            delete this._signal, delete this._listener, delete this.context
        }, toString: function () {
            return "[SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
        }
    }, r.prototype = {
        VERSION: "1.0.0",
        memorize: !1,
        _shouldPropagate: !0,
        active: !0,
        _registerListener: function (e, n, r, i) {
            var s = this._indexOfListener(e, r);
            if (s !== -1) {
                if (e = this._bindings[s], e.isOnce() !== n)throw Error("You cannot add" + (n ? "" : "Once") + "() then add" + (n ? "Once" : "") + "() the same listener without removing the relationship first.")
            } else e = new t(this, e, n, r, i), this._addBinding(e);
            return this.memorize && this._prevParams && e.execute(this._prevParams), e
        },
        _addBinding: function (e) {
            var t = this._bindings.length;
            do--t; while (this._bindings[t] && e._priority <= this._bindings[t]._priority);
            this._bindings.splice(t + 1, 0, e)
        },
        _indexOfListener: function (e, t) {
            for (var n = this._bindings.length,
                     r; n--;)if (r = this._bindings[n], r._listener === e && r.context === t)return n;
            return -1
        },
        has: function (e, t) {
            return this._indexOfListener(e, t) !== -1
        },
        add: function (e, t, r) {
            return n(e, "add"), this._registerListener(e, !1, t, r)
        },
        addOnce: function (e, t, r) {
            return n(e, "addOnce"), this._registerListener(e, !0, t, r)
        },
        remove: function (e, t) {
            n(e, "remove");
            var r = this._indexOfListener(e, t);
            return r !== -1 && (this._bindings[r]._destroy(), this._bindings.splice(r, 1)), e
        },
        removeAll: function () {
            for (var e = this._bindings.length; e--;)this._bindings[e]._destroy();
            this._bindings.length = 0
        },
        getNumListeners: function () {
            return this._bindings.length
        },
        halt: function () {
            this._shouldPropagate = !1
        },
        dispatch: function (e) {
            if (this.active) {
                var t = Array.prototype.slice.call(arguments), n = this._bindings.length, r;
                this.memorize && (this._prevParams = t);
                if (n) {
                    r = this._bindings.slice(), this._shouldPropagate = !0;
                    do n--; while (r[n] && this._shouldPropagate && r[n].execute(t) !== !1)
                }
            }
        },
        forget: function () {
            this._prevParams = null
        },
        dispose: function () {
            this.removeAll(), delete this._bindings, delete this._prevParams
        },
        toString: function () {
            return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
        }
    };
    var i = r;
    i.Signal = r, typeof define == "function" && define.amd ? define("Signal", [], function () {
        return i
    }) : typeof module != "undefined" && module.exports ? module.exports = i : e.signals = i
}(this),
define("ui/FadeIn", ["Class", "jquery", "TweenLite", "TimelineLite", "Global"], function (e, t, n, r, i) {
    var s = new e({
        selector: null, initialize: function () {
            var e = this;
            for (var r = 0; r < arguments.length; r++)r == 0 ? this.selector = arguments[r] : this.selector = this.selector.add(arguments[r]), arguments[r].css({opacity: "0"}), n.set(arguments[r], {y: 100});
            t(e.selector).each(function () {
                t(this).each(function (e) {
                    var r = t(this).offset().top + t(this).outerHeight() / 5 - 100,
                        i = t(window).scrollTop() + t(window).height();
                    i > r && n.to(t(this), 1, {y: 0, opacity: 1, clearProps: "transform,opacity"})
                })
            });
            var i = function () {
                var r = null, i = 0;
                t(e.selector).each(function (e) {
                    if (t(this).css("opacity") == 0) {
                        var s = t(this).offset().top + t(this).outerHeight() / 10,
                            o = t(window).scrollTop() + t(window).height();
                        s != r ? (i = 0, r = s) : i++, o > s && (n.to(t(this), 1, {
                            delay: .1 * i,
                            opacity: 1,
                            clearProps: "opacity"
                        }), n.to(t(this), 1, {delay: .1 * i, y: 0, clearProps: "transform", ease: Expo.easeOut}))
                    }
                })
            };
            t(window).off("scroll", _.debounce(i, 50)), t(window).on("scroll", _.debounce(i, 50))
        }
    });
    return s
}),
define("Global", ["Class", "jquery", "underscore", "TweenLite", "TimelineLite", "Signal", "ui/FadeIn"], function (e, t, n, r, i, s, o) {
    var u = new e({
        breakPoints: {mobile: 0, tabletPortrait: 768, tabletLandscape: 992, desktop: 1280},
        currentWidthType: 1280,
        width: 1280,
        spinOpts: {lines: 12, length: 10, width: 6, radius: 13},
        pathArray: null,
        firstLevelLocation: null,
        secondLevelLocation: null,
        windowHeight: null,
        newHash: null,
        videoPlaying: !1,
        videoFinished: !1,
        videoInFullScreen: !1,
        onVideoInactive: null,
        coverAnimating: !1,
        menuOpen: !1,
        videoID: "8sdLAHzZVMc",
        now: 0,
        assetsPath: "",
        assetsAutoGeneratedPath: "",
        phpUploadPath: "assetsDropboxSymLink/",
        assetsAutoGeneratedSubPath: "autoAssets/",
        textureNotFound: "",
        particleDBSavePath: "",
        particleDBLoadPath: "",
        aspectRatio: 2,
        mouseStrength: 1,
        FloatArraysSupported: !1,
        isLoading: !1,
        loadingStartedSignal: null,
        loadingFinishedSignal: null,
        noBeforeUnload: null,
        renderText: "&#22905;&#20687;\n\n&#19968;&#26463;&#38451;&#20809;&#65292;\n\n&#37027;&#20040;\n\n&#23481;&#26131;&#25429;&#25417;&#65292;\n\n"
            + "&#21364;&#21448;&#37027;&#20040;\n\n&#36965;&#19981;&#21487;&#21450;&#65292;\n\n"
            + "&#20182;&#26085;&#65292;\n\n"
            + "&#25105;&#23558;\n\n&#36896;&#20986;&#19968;&#33368;&#39134;&#33337;&#65292;\n\n"
            + "&#21738;&#24597;&#26159;\n\n&#39134;&#34558;&#25169;&#28779;&#65292;\n\n"
            +"&#20063;&#35201;&#24863;&#21463;\n\n&#21040;&#20320;&#30340;&#28201;&#28909;&#12290;"
            ,
        isMobile: !1,
        onResponsiveImgsSrcSet: null,
        onResize: null,
        initialize: function () {
            this.onResponsiveImgsSrcSet = new s, this.onResize = new s, this.onVideoInactive = new s, this.onVideoFullScreenChange = new s, this.onNavItemClicked = new s, this.navOpened = new s, this.navClosed = new s, this.loadingStartedSignal = new s, this.loadingFinishedSignal = new s, this.isIOS8 = this.checkIOS8(), this.renderText = frontpage_quote || this.renderText, function () {
                var e = 0, t = ["ms", "moz", "webkit", "o"];
                for (var n = 0; n < t.length && !window.requestAnimationFrame; ++n)window.requestAnimationFrame = window[t[n] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[n] + "CancelAnimationFrame"] || window[t[n] + "CancelRequestAnimationFrame"];
                window.requestAnimationFrame || (window.requestAnimationFrame = function (t, n) {
                    var r = (new Date).getTime(), i = Math.max(0, 16 - (r - e)), s = window.setTimeout(function () {
                        t(r + i)
                    }, i);
                    return e = r + i, s
                }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function (e) {
                    clearTimeout(e)
                })
            }(), console.clear || (console.clear = function () {
            }), console.trace || (console.trace = function () {
            }), console.group || (console.group = function () {
            }), console.groupCollapsed || (console.groupCollapsed = function () {
            }), console.groupEnd || (console.groupEnd = function () {
            }), console.timeStamp || (console.timeStamp = function () {
            }), console.profile || (console.profile = function () {
            }), console.profileEnd || (console.profileEnd = function () {
            }), console.count || (console.count = function () {
            }), jQuery.fn.center = function (e) {
                return e = e ? this.parent() : window, this.css({
                    position: "fixed",
                    top: (t(e).height() - this.outerHeight()) / 2 + t(e).scrollTop() + "px",
                    left: (t(e).width() - this.outerWidth()) / 2 + t(e).scrollLeft() + "px"
                }), this
            }, this.introTextResized = new s, this.introTextAnimatedIn = new s, this.pathArray = window.location.pathname.split("/"), this.firstLevelLocation = this.pathArray[1], this.secondLevelLocation = this.pathArray[2], this.windowHeight = t(window).height(), this.getWidthType(), t(window).on("beforeunload", function (e) {
                this.noBeforeUnload == null ? r.to(t("body"), .5, {
                    opacity: 0,
                    ease: Linear.easeNone,
                    onComplete: function () {
                        t(window).scrollTop(0)
                    }
                }) : this.noBeforeUnload = null
            }.bind(this)), this.initResponsiveImages(), this.widthRespond = this.widthRespond.bind(this), n.delay(this.widthRespond, 100, "logged later"), t(window).on("resize", this.widthRespond), this.initGifReplace()
        },
        getWidthType: function () {
            var e = this, n = window.innerWidth;
            this.width = t(window).width(), this.height = t(window).height();
            var r;
            return t.each(this.breakPoints, function (e) {
                if (parseInt(this, 10) > n)return !1;
                r = e
            }), e.currentWidthType = r, e.currentWidthType === "desktop" || e.currentWidthType === "tabletLandscape" ? this.isMobile = !1 : this.isMobile = !0, r
        },
        animateHeaderTitle: function (e, n) {
            e = e || 0;
            var r = t(".work-title .inner-holder").width(), s = new i({paused: !0, delay: e});
            s.fromTo(t(".work-title-slash"), .8, {opacity: 0, visibility: "visible", left: -10}, {
                opacity: 1,
                left: 0,
                visibility: "visible",
                ease: Expo.easeOut
            }), s.set(t(".work-title"), {visibility: "visible"}), s.fromTo(t(".work-title .inner-holder"), .8, {
                left: -r,
                visibility: "visible"
            }, {
                left: 0,
                visibility: "visible",
                ease: Expo.easeOut
            }, "-=0.4"), s.fromTo(t(".nav-back-arrow"), .8, {width: 0}, {
                width: 28,
                ease: Expo.easeInOut
            }, "-=0.6"), s.fromTo(t(".nav-back-arrow .icon-arrow-right"), .5, {left: 25, opacity: 0}, {
                left: 0,
                opacity: 1,
                ease: Expo.easeOut
            }, "-=0.4"), n ? s.reverse(0) : s.play()
        },
        onGifClick: function (e) {
            var n = t(e.target);
            n.removeClass("responsive"), n.attr("src", n.data("src-gif"))
        },
        initGifReplace: function () {
            var e = this.imgRespond.bind(this);
            t("body").on("click", "img.gif-replace", this.onGifClick);
            var n = t("main"), r = new Date;
            n.scroll(function () {
                var i = new Date;
                if (i - r > 2e3) {
                    r = i;
                    var s = n.height(), o = !1;
                    t("img.gif-replace:not(.responsive)").each(function () {
                        var e = t(this), n = e.offset().top;
                        if (n < -s || n > s) e.addClass("responsive"), o = !0
                    }), o && e()
                }
            })
        },
        imgRespond: function () {
            var e = this, r = n.keys(this.breakPoints), i = e.currentWidthType, s = r.length;
            t("img.responsive").each(function () {
                var e = t(this);
                if (i !== "mobile" && e.hasClass("gif-replace")) e.removeClass("responsive"), n = e.data("src-gif"); else {
                    var n;
                    for (var o = 0; o < s; o += 1) {
                        var u = r[o];
                        u === i && (n = e.data("src" + i.charAt(0).toUpperCase() + i.slice(1).toLowerCase()))
                    }
                }
                for (var a = 0; a < s; a += 1)e.removeClass("responsive-" + r[a]);
                e.addClass("responsive-" + i), e.attr("src", n)
            }), this.onResponsiveImgsSrcSet.dispatch()
        },
        initResponsiveImages: function () {
            t("img.responsive").each(function () {
                typeof t(this).data("src-mobile") == "undefined" && t(this).data("src-mobile", t(this).attr("src"))
            }), this.onResponsiveImgsSrcSet.dispatch()
        },
        widthRespond: function () {
            0, this.getWidthType(), this.windowHeight = this.height, this.imgRespond(), this.onResize.dispatch(this.width, this.height), t(document).trigger("widthRespond")
        },
        setSize: function (e, t) {
            this.width = e === undefined ? window.innerWidth : e, this.height = t === undefined ? window.innerHeight : t, this.widthHalf = this.width * .5, this.heightHalf = this.height * .5, this.aspectRatio = this.width / this.height
        },
        checkIOS8: function () {
            var e = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
            return e && parseInt(e[1], 10) >= 8
        }
    });
    return u.instance = new u, u.instance
});
var THREE = THREE || {REVISION: "60"};
self.console = self.console || {
        info: function () {
        }, log: function () {
        }, debug: function () {
        }, warn: function () {
        }, error: function () {
        }
    }, String.prototype.trim = String.prototype.trim || function () {
        return this.replace(/^\s+|\s+$/g, "")
    }, THREE.extend = function (e, t) {
    if (Object.keys) {
        var n = Object.keys(t);
        for (var r = 0, i = n.length; r < i; r++) {
            var s = n[r];
            Object.defineProperty(e, s, Object.getOwnPropertyDescriptor(t, s))
        }
    } else {
        var o = {}.hasOwnProperty;
        for (var s in t)o.call(t, s) && (e[s] = t[s])
    }
    return e
}, function () {
    var e = 0, t = ["ms", "moz", "webkit", "o"];
    for (var n = 0; n < t.length && !self.requestAnimationFrame; ++n)self.requestAnimationFrame = self[t[n] + "RequestAnimationFrame"], self.cancelAnimationFrame = self[t[n] + "CancelAnimationFrame"] || self[t[n] + "CancelRequestAnimationFrame"];
    self.requestAnimationFrame === undefined && self.setTimeout !== undefined && (self.requestAnimationFrame = function (t) {
        var n = Date.now(), r = Math.max(0, 16 - (n - e)), i = self.setTimeout(function () {
            t(n + r)
        }, r);
        return e = n + r, i
    }), self.cancelAnimationFrame === undefined && self.clearTimeout !== undefined && (self.cancelAnimationFrame = function (e) {
        self.clearTimeout(e)
    })
}(),
THREE.CullFaceNone = 0,
THREE.CullFaceBack = 1,
THREE.CullFaceFront = 2, THREE.CullFaceFrontBack = 3, THREE.FrontFaceDirectionCW = 0, THREE.FrontFaceDirectionCCW = 1, THREE.BasicShadowMap = 0, THREE.PCFShadowMap = 1, THREE.PCFSoftShadowMap = 2,
THREE.FrontSide = 0, THREE.BackSide = 1, THREE.DoubleSide = 2, THREE.NoShading = 0, THREE.FlatShading = 1, THREE.SmoothShading = 2, THREE.NoColors = 0, THREE.FaceColors = 1, THREE.VertexColors = 2,
THREE.NoBlending = 0, THREE.NormalBlending = 1, THREE.AdditiveBlending = 2, THREE.SubtractiveBlending = 3, THREE.MultiplyBlending = 4, THREE.CustomBlending = 5, THREE.AddEquation = 100, THREE.SubtractEquation = 101,
THREE.ReverseSubtractEquation = 102, THREE.ZeroFactor = 200, THREE.OneFactor = 201, THREE.SrcColorFactor = 202, THREE.OneMinusSrcColorFactor = 203, THREE.SrcAlphaFactor = 204, THREE.OneMinusSrcAlphaFactor = 205,
THREE.DstAlphaFactor = 206, THREE.OneMinusDstAlphaFactor = 207, THREE.DstColorFactor = 208, THREE.OneMinusDstColorFactor = 209, THREE.SrcAlphaSaturateFactor = 210, THREE.MultiplyOperation = 0, THREE.MixOperation = 1,
THREE.AddOperation = 2,
THREE.UVMapping = function () {
},
THREE.CubeReflectionMapping = function () {
},
THREE.CubeRefractionMapping = function () {
},
THREE.SphericalReflectionMapping = function () {
},
THREE.SphericalRefractionMapping = function () {
},
THREE.RepeatWrapping = 1e3,
THREE.ClampToEdgeWrapping = 1001,
THREE.MirroredRepeatWrapping = 1002,
THREE.NearestFilter = 1003,
 THREE.NearestMipMapNearestFilter = 1004,
 THREE.NearestMipMapLinearFilter = 1005,
 THREE.LinearFilter = 1006,
 THREE.LinearMipMapNearestFilter = 1007,
 THREE.LinearMipMapLinearFilter = 1008,
 THREE.UnsignedByteType = 1009,
 THREE.ByteType = 1010,
 THREE.ShortType = 1011,
 THREE.UnsignedShortType = 1012,
 THREE.IntType = 1013,
 THREE.UnsignedIntType = 1014,
 THREE.FloatType = 1015, THREE.UnsignedShort4444Type = 1016, THREE.UnsignedShort5551Type = 1017, THREE.UnsignedShort565Type = 1018, THREE.AlphaFormat = 1019, THREE.RGBFormat = 1020, THREE.RGBAFormat = 1021, THREE.LuminanceFormat = 1022, THREE.LuminanceAlphaFormat = 1023, THREE.RGB_S3TC_DXT1_Format = 2001, THREE.RGBA_S3TC_DXT1_Format = 2002, THREE.RGBA_S3TC_DXT3_Format = 2003, THREE.RGBA_S3TC_DXT5_Format = 2004, THREE.Color = function (e) {
    return e !== undefined && this.set(e), this
},
THREE.Color.prototype = {
    constructor: THREE.Color,
    r: 225, g: 225, b: 225,
    set: function (e) {
        return e instanceof THREE.Color ? this.copy(e) : typeof e == "number" ? this.setHex(e) : typeof e == "string" && this.setStyle(e), this
    },
    setHex: function (e) {

    },
    setRGB: function (e, t, n) {
        return this.r = e, this.g = t, this.b = n, this
    },
    clone: function () {
        return (new THREE.Color).setRGB(this.r, this.g, this.b)
    }
},

THREE.Quaternion = function (e, t, n, r) {
    this._x = e || 0, this._y = t || 0, this._z = n || 0, this._w = r !== undefined ? r : 1
},
THREE.Quaternion.prototype = {
    constructor: THREE.Quaternion,
    _x: 0,
    _y: 0,
    _z: 0,
    _w: 0,
    _euler: undefined,
    _updateEuler: function (e) {
        this._euler !== undefined && this._euler.setFromQuaternion(this, undefined, !1)
    },
    get x() {
        return this._x
    },
    set x(e) {
        this._x = e, this._updateEuler()
    },
    get y() {
        return this._y
    },
    set y(e) {
        this._y = e, this._updateEuler()
    },
    get z() {
        return this._z
    },
    set z(e) {
        this._z = e, this._updateEuler()
    },
    get w() {
        return this._w
    },
    set w(e) {
        this._w = e, this._updateEuler()
    },
    set: function (e, t, n, r) {
        return this._x = e, this._y = t, this._z = n, this._w = r, this._updateEuler(), this
    },
    copy: function (e) {
        return this._x = e._x, this._y = e._y, this._z = e._z, this._w = e._w, this._updateEuler(), this
    },
    setFromEuler: function (e, t) {
        if (e instanceof THREE.Euler == 0)throw new Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");
        var n = Math.cos(e._x / 2), r = Math.cos(e._y / 2), i = Math.cos(e._z / 2), s = Math.sin(e._x / 2),
            o = Math.sin(e._y / 2), u = Math.sin(e._z / 2);
        return e.order === "XYZ" ? (this._x = s * r * i + n * o * u, this._y = n * o * i - s * r * u, this._z = n * r * u + s * o * i, this._w = n * r * i - s * o * u) : e.order === "YXZ" ? (this._x = s * r * i + n * o * u, this._y = n * o * i - s * r * u, this._z = n * r * u - s * o * i, this._w = n * r * i + s * o * u) : e.order === "ZXY" ? (this._x = s * r * i - n * o * u, this._y = n * o * i + s * r * u, this._z = n * r * u + s * o * i, this._w = n * r * i - s * o * u) : e.order === "ZYX" ? (this._x = s * r * i - n * o * u, this._y = n * o * i + s * r * u, this._z = n * r * u - s * o * i, this._w = n * r * i + s * o * u) : e.order === "YZX" ? (this._x = s * r * i + n * o * u, this._y = n * o * i + s * r * u, this._z = n * r * u - s * o * i, this._w = n * r * i - s * o * u) : e.order === "XZY" && (this._x = s * r * i - n * o * u, this._y = n * o * i - s * r * u, this._z = n * r * u + s * o * i, this._w = n * r * i + s * o * u), t !== !1 && this._updateEuler(), this
    },
    setFromAxisAngle: function (e, t) {
        var n = t / 2, r = Math.sin(n);
        return this._x = e.x * r, this._y = e.y * r, this._z = e.z * r, this._w = Math.cos(n), this._updateEuler(), this
    },
    setFromRotationMatrix: function (e) {
        var t = e.elements, n = t[0], r = t[4], i = t[8], s = t[1], o = t[5], u = t[9], a = t[2], f = t[6], l = t[10],
            c = n + o + l, h;
        return c > 0 ? (h = .5 / Math.sqrt(c + 1), this._w = .25 / h, this._x = (f - u) * h, this._y = (i - a) * h, this._z = (s - r) * h) : n > o && n > l ? (h = 2 * Math.sqrt(1 + n - o - l), this._w = (f - u) / h, this._x = .25 * h, this._y = (r + s) / h, this._z = (i + a) / h) : o > l ? (h = 2 * Math.sqrt(1 + o - n - l), this._w = (i - a) / h, this._x = (r + s) / h, this._y = .25 * h, this._z = (u + f) / h) : (h = 2 * Math.sqrt(1 + l - n - o), this._w = (s - r) / h, this._x = (i + a) / h, this._y = (u + f) / h, this._z = .25 * h), this._updateEuler(), this
    },
    inverse: function () {
        return this.conjugate().normalize(), this
    },
    conjugate: function () {
        return this._x *= -1, this._y *= -1, this._z *= -1, this._updateEuler(), this
    },
    lengthSq: function () {
        return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
    },
    length: function () {
        return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
    },
    normalize: function () {
        var e = this.length();
        return e === 0 ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this
    },
    multiply: function (e, t) {
        return t !== undefined ? (0, this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
    },
    multiplyQuaternions: function (e, t) {
        var n = e._x, r = e._y, i = e._z, s = e._w, o = t._x, u = t._y, a = t._z, f = t._w;
        return this._x = n * f + s * o + r * a - i * u, this._y = r * f + s * u + i * o - n * a, this._z = i * f + s * a + n * u - r * o, this._w = s * f - n * o - r * u - i * a, this._updateEuler(), this
    },
    multiplyVector3: function (e) {
        return 0, e.applyQuaternion(this)
    },
    slerp: function (e, t) {
        var n = this._x, r = this._y, i = this._z, s = this._w, o = s * e._w + n * e._x + r * e._y + i * e._z;
        o < 0 ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, o = -o) : this.copy(e);
        if (o >= 1)return this._w = s, this._x = n, this._y = r, this._z = i, this;
        var u = Math.acos(o), a = Math.sqrt(1 - o * o);
        if (Math.abs(a) < .001)return this._w = .5 * (s + this._w), this._x = .5 * (n + this._x), this._y = .5 * (r + this._y), this._z = .5 * (i + this._z), this;
        var f = Math.sin((1 - t) * u) / a, l = Math.sin(t * u) / a;
        return this._w = s * f + this._w * l, this._x = n * f + this._x * l, this._y = r * f + this._y * l, this._z = i * f + this._z * l, this._updateEuler(), this
    },
    equals: function (e) {
        return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
    },
    fromArray: function (e) {
        return this._x = e[0], this._y = e[1], this._z = e[2], this._w = e[3], this._updateEuler(), this
    },
    toArray: function () {
        return [this._x, this._y, this._z, this._w]
    },
    clone: function () {
        return new THREE.Quaternion(this._x, this._y, this._z, this._w)
    }
},
THREE.Quaternion.slerp = function (e, t, n, r) {
    return n.copy(e).slerp(t, r)
}, THREE.Vector2 = function (e, t) {
    this.x = e || 0, this.y = t || 0
}, THREE.Vector2.prototype = {
    constructor: THREE.Vector2, set: function (e, t) {
        return this.x = e, this.y = t, this
    }, setX: function (e) {
        return this.x = e, this
    }, setY: function (e) {
        return this.y = e, this
    }, setComponent: function (e, t) {
        switch (e) {
            case 0:
                this.x = t;
                break;
            case 1:
                this.y = t;
                break;
            default:
                throw new Error("index is out of range: " + e)
        }
    }, getComponent: function (e) {
        switch (e) {
            case 0:
                return this.x;
            case 1:
                return this.y;
            default:
                throw new Error("index is out of range: " + e)
        }
    }, copy: function (e) {
        return this.x = e.x, this.y = e.y, this
    }, add: function (e, t) {
        return t !== undefined ? (0, this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this)
    }, addVectors: function (e, t) {
        return this.x = e.x + t.x, this.y = e.y + t.y, this
    }, addScalar: function (e) {
        return this.x += e, this.y += e, this
    }, sub: function (e, t) {
        return t !== undefined ? (0, this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this)
    }, subVectors: function (e, t) {
        return this.x = e.x - t.x, this.y = e.y - t.y, this
    }, multiplyScalar: function (e) {
        return this.x *= e, this.y *= e, this
    }, divideScalar: function (e) {
        if (e !== 0) {
            var t = 1 / e;
            this.x *= t, this.y *= t
        } else this.x = 0, this.y = 0;
        return this
    }, min: function (e) {
        return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this
    }, max: function (e) {
        return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this
    }, clamp: function (e, t) {
        return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this
    }, negate: function () {
        return this.multiplyScalar(-1)
    }, dot: function (e) {
        return this.x * e.x + this.y * e.y
    }, lengthSq: function () {
        return this.x * this.x + this.y * this.y
    }, length: function () {
        return Math.sqrt(this.x * this.x + this.y * this.y)
    }, normalize: function () {
        return this.divideScalar(this.length())
    }, distanceTo: function (e) {
        return Math.sqrt(this.distanceToSquared(e))
    }, distanceToSquared: function (e) {
        var t = this.x - e.x, n = this.y - e.y;
        return t * t + n * n
    }, setLength: function (e) {
        var t = this.length();
        return t !== 0 && e !== t && this.multiplyScalar(e / t), this
    }, lerp: function (e, t) {
        return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
    }, equals: function (e) {
        return e.x === this.x && e.y === this.y
    }, fromArray: function (e) {
        return this.x = e[0], this.y = e[1], this
    }, toArray: function () {
        return [this.x, this.y]
    }, clone: function () {
        return new THREE.Vector2(this.x, this.y)
    }
}, THREE.Vector3 = function (e, t, n) {
    this.x = e || 0, this.y = t || 0, this.z = n || 0
}, THREE.Vector3.prototype = {
    constructor: THREE.Vector3, set: function (e, t, n) {
        return this.x = e, this.y = t, this.z = n, this
    }, setX: function (e) {
        return this.x = e, this
    }, setY: function (e) {
        return this.y = e, this
    }, setZ: function (e) {
        return this.z = e, this
    }, setComponent: function (e, t) {
        switch (e) {
            case 0:
                this.x = t;
                break;
            case 1:
                this.y = t;
                break;
            case 2:
                this.z = t;
                break;
            default:
                throw new Error("index is out of range: " + e)
        }
    }, getComponent: function (e) {
        switch (e) {
            case 0:
                return this.x;
            case 1:
                return this.y;
            case 2:
                return this.z;
            default:
                throw new Error("index is out of range: " + e)
        }
    }, copy: function (e) {
        return this.x = e.x, this.y = e.y, this.z = e.z, this
    }, add: function (e, t) {
        return t !== undefined ? (0, this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
    }, addScalar: function (e) {
        return this.x += e, this.y += e, this.z += e, this
    }, addVectors: function (e, t) {
        return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
    }, sub: function (e, t) {
        return t !== undefined ? (0, this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
    }, subVectors: function (e, t) {
        return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
    }, multiply: function (e, t) {
        return t !== undefined ? (0, this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
    }, multiplyScalar: function (e) {
        return this.x *= e, this.y *= e, this.z *= e, this
    }, multiplyVectors: function (e, t) {
        return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
    }, applyMatrix3: function (e) {
        var t = this.x, n = this.y, r = this.z, i = e.elements;
        return this.x = i[0] * t + i[3] * n + i[6] * r, this.y = i[1] * t + i[4] * n + i[7] * r, this.z = i[2] * t + i[5] * n + i[8] * r, this
    }, applyMatrix4: function (e) {
        var t = this.x, n = this.y, r = this.z, i = e.elements;
        return this.x = i[0] * t + i[4] * n + i[8] * r + i[12], this.y = i[1] * t + i[5] * n + i[9] * r + i[13], this.z = i[2] * t + i[6] * n + i[10] * r + i[14], this
    }, applyProjection: function (e) {
        var t = this.x, n = this.y, r = this.z, i = e.elements, s = 1 / (i[3] * t + i[7] * n + i[11] * r + i[15]);
        return this.x = (i[0] * t + i[4] * n + i[8] * r + i[12]) * s, this.y = (i[1] * t + i[5] * n + i[9] * r + i[13]) * s, this.z = (i[2] * t + i[6] * n + i[10] * r + i[14]) * s, this
    }, applyQuaternion: function (e) {
        var t = this.x, n = this.y, r = this.z, i = e.x, s = e.y, o = e.z, u = e.w, a = u * t + s * r - o * n,
            f = u * n + o * t - i * r, l = u * r + i * n - s * t, c = -i * t - s * n - o * r;
        return this.x = a * u + c * -i + f * -o - l * -s, this.y = f * u + c * -s + l * -i - a * -o, this.z = l * u + c * -o + a * -s - f * -i, this
    }, transformDirection: function (e) {
        var t = this.x, n = this.y, r = this.z, i = e.elements;
        return this.x = i[0] * t + i[4] * n + i[8] * r, this.y = i[1] * t + i[5] * n + i[9] * r, this.z = i[2] * t + i[6] * n + i[10] * r, this.normalize(), this
    }, divide: function (e) {
        return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
    }, divideScalar: function (e) {
        if (e !== 0) {
            var t = 1 / e;
            this.x *= t, this.y *= t, this.z *= t
        } else this.x = 0, this.y = 0, this.z = 0;
        return this
    }, min: function (e) {
        return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this
    }, max: function (e) {
        return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this
    }, clamp: function (e, t) {
        return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this
    }, negate: function () {
        return this.multiplyScalar(-1)
    }, dot: function (e) {
        return this.x * e.x + this.y * e.y + this.z * e.z
    }, lengthSq: function () {
        return this.x * this.x + this.y * this.y + this.z * this.z
    }, length: function () {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
    }, lengthManhattan: function () {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
    }, normalize: function () {
        return this.divideScalar(this.length())
    }, setLength: function (e) {
        var t = this.length();
        return t !== 0 && e !== t && this.multiplyScalar(e / t), this
    }, lerp: function (e, t) {
        return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
    }, cross: function (e, t) {
        if (t !== undefined)return 0, this.crossVectors(e, t);
        var n = this.x, r = this.y, i = this.z;
        return this.x = r * e.z - i * e.y, this.y = i * e.x - n * e.z, this.z = n * e.y - r * e.x, this
    }, crossVectors: function (e, t) {
        var n = e.x, r = e.y, i = e.z, s = t.x, o = t.y, u = t.z;
        return this.x = r * u - i * o, this.y = i * s - n * u, this.z = n * o - r * s, this
    }, angleTo: function (e) {
        var t = this.dot(e) / (this.length() * e.length());
        return Math.acos(THREE.Math.clamp(t, -1, 1))
    }, distanceTo: function (e) {
        return Math.sqrt(this.distanceToSquared(e))
    }, distanceToSquared: function (e) {
        var t = this.x - e.x, n = this.y - e.y, r = this.z - e.z;
        return t * t + n * n + r * r
    }, setEulerFromRotationMatrix: function (e, t) {
        0
    }, setEulerFromQuaternion: function (e, t) {
        0
    }, getPositionFromMatrix: function (e) {
        return this.x = e.elements[12], this.y = e.elements[13], this.z = e.elements[14], this
    }, getScaleFromMatrix: function (e) {
        var t = this.set(e.elements[0], e.elements[1], e.elements[2]).length(),
            n = this.set(e.elements[4], e.elements[5], e.elements[6]).length(),
            r = this.set(e.elements[8], e.elements[9], e.elements[10]).length();
        return this.x = t, this.y = n, this.z = r, this
    }, getColumnFromMatrix: function (e, t) {
        var n = e * 4, r = t.elements;
        return this.x = r[n], this.y = r[n + 1], this.z = r[n + 2], this
    }, equals: function (e) {
        return e.x === this.x && e.y === this.y && e.z === this.z
    }, fromArray: function (e) {
        return this.x = e[0], this.y = e[1], this.z = e[2], this
    }, toArray: function () {
        return [this.x, this.y, this.z]
    }, clone: function () {
        return new THREE.Vector3(this.x, this.y, this.z)
    }
}, THREE.extend(THREE.Vector3.prototype, {
    applyEuler: function () {
        var e = new THREE.Quaternion;
        return function (t) {
            return t instanceof THREE.Euler == 0 && 0, this.applyQuaternion(e.setFromEuler(t)), this
        }
    }(), applyAxisAngle: function () {
        var e = new THREE.Quaternion;
        return function (t, n) {
            return this.applyQuaternion(e.setFromAxisAngle(t, n)), this
        }
    }(), projectOnVector: function () {
        var e = new THREE.Vector3;
        return function (t) {
            e.copy(t).normalize();
            var n = this.dot(e);
            return this.copy(e).multiplyScalar(n)
        }
    }(), projectOnPlane: function () {
        var e = new THREE.Vector3;
        return function (t) {
            return e.copy(this).projectOnVector(t), this.sub(e)
        }
    }(), reflect: function () {
        var e = new THREE.Vector3;
        return function (t) {
            return e.copy(this).projectOnVector(t).multiplyScalar(2), this.subVectors(e, this)
        }
    }()
}), THREE.Vector4 = function (e, t, n, r) {
    this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = r !== undefined ? r : 1
}, THREE.Vector4.prototype = {
    constructor: THREE.Vector4, set: function (e, t, n, r) {
        return this.x = e, this.y = t, this.z = n, this.w = r, this
    }, setX: function (e) {
        return this.x = e, this
    }, setY: function (e) {
        return this.y = e, this
    }, setZ: function (e) {
        return this.z = e, this
    }, setW: function (e) {
        return this.w = e, this
    }, setComponent: function (e, t) {
        switch (e) {
            case 0:
                this.x = t;
                break;
            case 1:
                this.y = t;
                break;
            case 2:
                this.z = t;
                break;
            case 3:
                this.w = t;
                break;
            default:
                throw new Error("index is out of range: " + e)
        }
    }, getComponent: function (e) {
        switch (e) {
            case 0:
                return this.x;
            case 1:
                return this.y;
            case 2:
                return this.z;
            case 3:
                return this.w;
            default:
                throw new Error("index is out of range: " + e)
        }
    }, copy: function (e) {
        return this.x = e.x, this.y = e.y, this.z = e.z, this.w = e.w !== undefined ? e.w : 1, this
    }, add: function (e, t) {
        return t !== undefined ? (0, this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this)
    }, addScalar: function (e) {
        return this.x += e, this.y += e, this.z += e, this.w += e, this
    }, addVectors: function (e, t) {
        return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this
    }, sub: function (e, t) {
        return t !== undefined ? (0, this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this)
    }, subVectors: function (e, t) {
        return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this
    }, multiplyScalar: function (e) {
        return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
    }, applyMatrix4: function (e) {
        var t = this.x, n = this.y, r = this.z, i = this.w, s = e.elements;
        return this.x = s[0] * t + s[4] * n + s[8] * r + s[12] * i, this.y = s[1] * t + s[5] * n + s[9] * r + s[13] * i, this.z = s[2] * t + s[6] * n + s[10] * r + s[14] * i, this.w = s[3] * t + s[7] * n + s[11] * r + s[15] * i, this
    }, divideScalar: function (e) {
        if (e !== 0) {
            var t = 1 / e;
            this.x *= t, this.y *= t, this.z *= t, this.w *= t
        } else this.x = 0, this.y = 0, this.z = 0, this.w = 1;
        return this
    }, setAxisAngleFromQuaternion: function (e) {
        this.w = 2 * Math.acos(e.w);
        var t = Math.sqrt(1 - e.w * e.w);
        return t < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this
    }, setAxisAngleFromRotationMatrix: function (e) {
        var t, n, r, i, s = .01, o = .1, u = e.elements, a = u[0], f = u[4], l = u[8], c = u[1], h = u[5], p = u[9],
            d = u[2], v = u[6], m = u[10];
        if (Math.abs(f - c) < s && Math.abs(l - d) < s && Math.abs(p - v) < s) {
            if (Math.abs(f + c) < o && Math.abs(l + d) < o && Math.abs(p + v) < o && Math.abs(a + h + m - 3) < o)return this.set(1, 0, 0, 0), this;
            t = Math.PI;
            var g = (a + 1) / 2, y = (h + 1) / 2, b = (m + 1) / 2, w = (f + c) / 4, E = (l + d) / 4, S = (p + v) / 4;
            return g > y && g > b ? g < s ? (n = 0, r = .707106781, i = .707106781) : (n = Math.sqrt(g), r = w / n, i = E / n) : y > b ? y < s ? (n = .707106781, r = 0, i = .707106781) : (r = Math.sqrt(y), n = w / r, i = S / r) : b < s ? (n = .707106781, r = .707106781, i = 0) : (i = Math.sqrt(b), n = E / i, r = S / i), this.set(n, r, i, t), this
        }
        var x = Math.sqrt((v - p) * (v - p) + (l - d) * (l - d) + (c - f) * (c - f));
        return Math.abs(x) < .001 && (x = 1), this.x = (v - p) / x, this.y = (l - d) / x, this.z = (c - f) / x, this.w = Math.acos((a + h + m - 1) / 2), this
    }, min: function (e) {
        return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this.w > e.w && (this.w = e.w), this
    }, max: function (e) {
        return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this.w < e.w && (this.w = e.w), this
    }, clamp: function (e, t) {
        return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this.w < e.w ? this.w = e.w : this.w > t.w && (this.w = t.w), this
    }, negate: function () {
        return this.multiplyScalar(-1)
    }, dot: function (e) {
        return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
    }, lengthSq: function () {
        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
    }, length: function () {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
    }, lengthManhattan: function () {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
    }, normalize: function () {
        return this.divideScalar(this.length())
    }, setLength: function (e) {
        var t = this.length();
        return t !== 0 && e !== t && this.multiplyScalar(e / t), this
    }, lerp: function (e, t) {
        return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this
    }, equals: function (e) {
        return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
    }, fromArray: function (e) {
        return this.x = e[0], this.y = e[1], this.z = e[2], this.w = e[3], this
    }, toArray: function () {
        return [this.x, this.y, this.z, this.w]
    }, clone: function () {
        return new THREE.Vector4(this.x, this.y, this.z, this.w)
    }
}, THREE.Euler = function (e, t, n, r) {
    this._x = e || 0, this._y = t || 0, this._z = n || 0, this._order = r || THREE.Euler.DefaultOrder
}, THREE.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], THREE.Euler.DefaultOrder = "XYZ", THREE.Euler.prototype = {
    constructor: THREE.Euler,
    _x: 0,
    _y: 0,
    _z: 0,
    _order: THREE.Euler.DefaultOrder,
    _quaternion: undefined,
    _updateQuaternion: function () {
        this._quaternion !== undefined && this._quaternion.setFromEuler(this, !1)
    },
    get x() {
        return this._x
    },
    set x(e) {
        this._x = e, this._updateQuaternion()
    },
    get y() {
        return this._y
    },
    set y(e) {
        this._y = e, this._updateQuaternion()
    },
    get z() {
        return this._z
    },
    set z(e) {
        this._z = e, this._updateQuaternion()
    },
    get order() {
        return this._order
    },
    set order(e) {
        this._order = e, this._updateQuaternion()
    },
    set: function (e, t, n, r) {
        return this._x = e, this._y = t, this._z = n, this._order = r || this._order, this._updateQuaternion(), this
    },
    copy: function (e) {
        return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this._updateQuaternion(), this
    },
    setFromRotationMatrix: function (e, t) {
        function n(e) {
            return Math.min(Math.max(e, -1), 1)
        }

        var r = e.elements, i = r[0], s = r[4], o = r[8], u = r[1], a = r[5], f = r[9], l = r[2], c = r[6], h = r[10];
        return t = t || this._order, t === "XYZ" ? (this._y = Math.asin(n(o)), Math.abs(o) < .99999 ? (this._x = Math.atan2(-f, h), this._z = Math.atan2(-s, i)) : (this._x = Math.atan2(c, a), this._z = 0)) : t === "YXZ" ? (this._x = Math.asin(-n(f)), Math.abs(f) < .99999 ? (this._y = Math.atan2(o, h), this._z = Math.atan2(u, a)) : (this._y = Math.atan2(-l, i), this._z = 0)) : t === "ZXY" ? (this._x = Math.asin(n(c)), Math.abs(c) < .99999 ? (this._y = Math.atan2(-l, h), this._z = Math.atan2(-s, a)) : (this._y = 0, this._z = Math.atan2(u, i))) : t === "ZYX" ? (this._y = Math.asin(-n(l)), Math.abs(l) < .99999 ? (this._x = Math.atan2(c, h), this._z = Math.atan2(u, i)) : (this._x = 0, this._z = Math.atan2(-s, a))) : t === "YZX" ? (this._z = Math.asin(n(u)), Math.abs(u) < .99999 ? (this._x = Math.atan2(-f, a), this._y = Math.atan2(-l, i)) : (this._x = 0, this._y = Math.atan2(o, h))) : t === "XZY" ? (this._z = Math.asin(-n(s)), Math.abs(s) < .99999 ? (this._x = Math.atan2(c, a), this._y = Math.atan2(o, i)) : (this._x = Math.atan2(-f, h), this._y = 0)) : 0, this._order = t, this._updateQuaternion(), this
    },
    setFromQuaternion: function (e, t, n) {
        function r(e) {
            return Math.min(Math.max(e, -1), 1)
        }

        var i = e.x * e.x, s = e.y * e.y, o = e.z * e.z, u = e.w * e.w;
        return t = t || this._order, t === "XYZ" ? (this._x = Math.atan2(2 * (e.x * e.w - e.y * e.z), u - i - s + o), this._y = Math.asin(r(2 * (e.x * e.z + e.y * e.w))), this._z = Math.atan2(2 * (e.z * e.w - e.x * e.y), u + i - s - o)) : t === "YXZ" ? (this._x = Math.asin(r(2 * (e.x * e.w - e.y * e.z))), this._y = Math.atan2(2 * (e.x * e.z + e.y * e.w), u - i - s + o), this._z = Math.atan2(2 * (e.x * e.y + e.z * e.w), u - i + s - o)) : t === "ZXY" ? (this._x = Math.asin(r(2 * (e.x * e.w + e.y * e.z))), this._y = Math.atan2(2 * (e.y * e.w - e.z * e.x), u - i - s + o), this._z = Math.atan2(2 * (e.z * e.w - e.x * e.y), u - i + s - o)) : t === "ZYX" ? (this._x = Math.atan2(2 * (e.x * e.w + e.z * e.y), u - i - s + o), this._y = Math.asin(r(2 * (e.y * e.w - e.x * e.z))), this._z = Math.atan2(2 * (e.x * e.y + e.z * e.w), u + i - s - o)) : t === "YZX" ? (this._x = Math.atan2(2 * (e.x * e.w - e.z * e.y), u - i + s - o), this._y = Math.atan2(2 * (e.y * e.w - e.x * e.z), u + i - s - o), this._z = Math.asin(r(2 * (e.x * e.y + e.z * e.w)))) : t === "XZY" ? (this._x = Math.atan2(2 * (e.x * e.w + e.y * e.z), u - i + s - o), this._y = Math.atan2(2 * (e.x * e.z + e.y * e.w), u + i - s - o), this._z = Math.asin(r(2 * (e.z * e.w - e.x * e.y)))) : 0, this._order = t, n !== !1 && this._updateQuaternion(), this
    },
    reorder: function () {
        var e = new THREE.Quaternion;
        return function (t) {
            e.setFromEuler(this), this.setFromQuaternion(e, t)
        }
    }(),
    fromArray: function (e) {
        return this._x = e[0], this._y = e[1], this._z = e[2], e[3] !== undefined && (this._order = e[3]), this._updateQuaternion(), this
    },
    toArray: function () {
        return [this._x, this._y, this._z, this._order]
    },
    equals: function (e) {
        return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
    },
    clone: function () {
        return new THREE.Euler(this._x, this._y, this._z, this._order)
    }
}, THREE.Line3 = function (e, t) {
    this.start = e !== undefined ? e : new THREE.Vector3, this.end = t !== undefined ? t : new THREE.Vector3
}, THREE.Line3.prototype = {
    constructor: THREE.Line3, set: function (e, t) {
        return this.start.copy(e), this.end.copy(t), this
    }, copy: function (e) {
        return this.start.copy(e.start), this.end.copy(e.end), this
    }, center: function (e) {
        var t = e || new THREE.Vector3;
        return t.addVectors(this.start, this.end).multiplyScalar(.5)
    }, delta: function (e) {
        var t = e || new THREE.Vector3;
        return t.subVectors(this.end, this.start)
    }, distanceSq: function () {
        return this.start.distanceToSquared(this.end)
    }, distance: function () {
        return this.start.distanceTo(this.end)
    }, at: function (e, t) {
        var n = t || new THREE.Vector3;
        return this.delta(n).multiplyScalar(e).add(this.start)
    }, closestPointToPointParameter: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3;
        return function (n, r) {
            e.subVectors(n, this.start), t.subVectors(this.end, this.start);
            var i = t.dot(t), s = t.dot(e), o = s / i;
            return r && (o = THREE.Math.clamp(o, 0, 1)), o
        }
    }(), closestPointToPoint: function (e, t, n) {
        var r = this.closestPointToPointParameter(e, t), i = n || new THREE.Vector3;
        return this.delta(i).multiplyScalar(r).add(this.start)
    }, applyMatrix4: function (e) {
        return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this
    }, equals: function (e) {
        return e.start.equals(this.start) && e.end.equals(this.end)
    }, clone: function () {
        return (new THREE.Line3).copy(this)
    }
}, THREE.Box2 = function (e, t) {
    this.min = e !== undefined ? e : new THREE.Vector2(Infinity, Infinity), this.max = t !== undefined ? t : new THREE.Vector2(-Infinity, -Infinity)
}, THREE.Box2.prototype = {
    constructor: THREE.Box2, set: function (e, t) {
        return this.min.copy(e), this.max.copy(t), this
    }, setFromPoints: function (e) {
        if (e.length > 0) {
            var t = e[0];
            this.min.copy(t), this.max.copy(t);
            for (var n = 1,
                     r = e.length; n < r; n++)t = e[n], t.x < this.min.x ? this.min.x = t.x : t.x > this.max.x && (this.max.x = t.x), t.y < this.min.y ? this.min.y = t.y : t.y > this.max.y && (this.max.y = t.y)
        } else this.makeEmpty();
        return this
    }, setFromCenterAndSize: function () {
        var e = new THREE.Vector2;
        return function (t, n) {
            var r = e.copy(n).multiplyScalar(.5);
            return this.min.copy(t).sub(r), this.max.copy(t).add(r), this
        }
    }(), copy: function (e) {
        return this.min.copy(e.min), this.max.copy(e.max), this
    }, makeEmpty: function () {
        return this.min.x = this.min.y = Infinity, this.max.x = this.max.y = -Infinity, this
    }, empty: function () {
        return this.max.x < this.min.x || this.max.y < this.min.y
    }, center: function (e) {
        var t = e || new THREE.Vector2;
        return t.addVectors(this.min, this.max).multiplyScalar(.5)
    }, size: function (e) {
        var t = e || new THREE.Vector2;
        return t.subVectors(this.max, this.min)
    }, expandByPoint: function (e) {
        return this.min.min(e), this.max.max(e), this
    }, expandByVector: function (e) {
        return this.min.sub(e), this.max.add(e), this
    }, expandByScalar: function (e) {
        return this.min.addScalar(-e), this.max.addScalar(e), this
    }, containsPoint: function (e) {
        return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y ? !1 : !0
    }, containsBox: function (e) {
        return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y ? !0 : !1
    }, getParameter: function (e) {
        return new THREE.Vector2((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
    }, isIntersectionBox: function (e) {
        return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y ? !1 : !0
    }, clampPoint: function (e, t) {
        var n = t || new THREE.Vector2;
        return n.copy(e).clamp(this.min, this.max)
    }, distanceToPoint: function () {
        var e = new THREE.Vector2;
        return function (t) {
            var n = e.copy(t).clamp(this.min, this.max);
            return n.sub(t).length()
        }
    }(), intersect: function (e) {
        return this.min.max(e.min), this.max.min(e.max), this
    }, union: function (e) {
        return this.min.min(e.min), this.max.max(e.max), this
    }, translate: function (e) {
        return this.min.add(e), this.max.add(e), this
    }, equals: function (e) {
        return e.min.equals(this.min) && e.max.equals(this.max)
    }, clone: function () {
        return (new THREE.Box2).copy(this)
    }
}, THREE.Box3 = function (e, t) {
    this.min = e !== undefined ? e : new THREE.Vector3(Infinity, Infinity, Infinity), this.max = t !== undefined ? t : new THREE.Vector3(-Infinity, -Infinity, -Infinity)
}, THREE.Box3.prototype = {
    constructor: THREE.Box3, set: function (e, t) {
        return this.min.copy(e), this.max.copy(t), this
    }, addPoint: function (e) {
        e.x < this.min.x ? this.min.x = e.x : e.x > this.max.x && (this.max.x = e.x), e.y < this.min.y ? this.min.y = e.y : e.y > this.max.y && (this.max.y = e.y), e.z < this.min.z ? this.min.z = e.z : e.z > this.max.z && (this.max.z = e.z)
    }, setFromPoints: function (e) {
        if (e.length > 0) {
            var t = e[0];
            this.min.copy(t), this.max.copy(t);
            for (var n = 1, r = e.length; n < r; n++)this.addPoint(e[n])
        } else this.makeEmpty();
        return this
    }, setFromCenterAndSize: function () {
        var e = new THREE.Vector3;
        return function (t, n) {
            var r = e.copy(n).multiplyScalar(.5);
            return this.min.copy(t).sub(r), this.max.copy(t).add(r), this
        }
    }(), setFromObject: function () {
        var e = new THREE.Vector3;
        return function (t) {
            var n = this;
            return t.updateMatrixWorld(!0), this.makeEmpty(), t.traverse(function (t) {
                if (t.geometry !== undefined && t.geometry.vertices !== undefined) {
                    var r = t.geometry.vertices;
                    for (var i = 0,
                             s = r.length; i < s; i++)e.copy(r[i]), e.applyMatrix4(t.matrixWorld), n.expandByPoint(e)
                }
            }), this
        }
    }(), copy: function (e) {
        return this.min.copy(e.min), this.max.copy(e.max), this
    }, makeEmpty: function () {
        return this.min.x = this.min.y = this.min.z = Infinity, this.max.x = this.max.y = this.max.z = -Infinity, this
    }, empty: function () {
        return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
    }, center: function (e) {
        var t = e || new THREE.Vector3;
        return t.addVectors(this.min, this.max).multiplyScalar(.5)
    }, size: function (e) {
        var t = e || new THREE.Vector3;
        return t.subVectors(this.max, this.min)
    }, expandByPoint: function (e) {
        return this.min.min(e), this.max.max(e), this
    }, expandByVector: function (e) {
        return this.min.sub(e), this.max.add(e), this
    }, expandByScalar: function (e) {
        return this.min.addScalar(-e), this.max.addScalar(e), this
    }, containsPoint: function (e) {
        return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z ? !1 : !0
    }, containsBox: function (e) {
        return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z ? !0 : !1
    }, getParameter: function (e) {
        return new THREE.Vector3((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
    }, isIntersectionBox: function (e) {
        return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z ? !1 : !0
    }, clampPoint: function (e, t) {
        var n = t || new THREE.Vector3;
        return n.copy(e).clamp(this.min, this.max)
    }, distanceToPoint: function () {
        var e = new THREE.Vector3;
        return function (t) {
            var n = e.copy(t).clamp(this.min, this.max);
            return n.sub(t).length()
        }
    }(), getBoundingSphere: function () {
        var e = new THREE.Vector3;
        return function (t) {
            var n = t || new THREE.Sphere;
            return n.center = this.center(), n.radius = this.size(e).length() * .5, n
        }
    }(), intersect: function (e) {
        return this.min.max(e.min), this.max.min(e.max), this
    }, union: function (e) {
        return this.min.min(e.min), this.max.max(e.max), this
    }, applyMatrix4: function () {
        var e = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3];
        return function (t) {
            return e[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t), e[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t), e[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t), e[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t), e[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t), e[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t), e[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t), e[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t), this.makeEmpty(), this.setFromPoints(e), this
        }
    }(), translate: function (e) {
        return this.min.add(e), this.max.add(e), this
    }, equals: function (e) {
        return e.min.equals(this.min) && e.max.equals(this.max)
    }, clone: function () {
        return (new THREE.Box3).copy(this)
    }
},THREE.Matrix3 = function (e, t, n, r, i, s, o, u, a) {
    this.elements = new Float32Array(9), this.set(e !== undefined ? e : 1, t || 0, n || 0, r || 0, i !== undefined ? i : 1, s || 0, o || 0, u || 0, a !== undefined ? a : 1)
},THREE.Matrix3.prototype = {
    constructor: THREE.Matrix3, set: function (e, t, n, r, i, s, o, u, a) {
        var f = this.elements;
        return f[0] = e, f[3] = t, f[6] = n, f[1] = r, f[4] = i, f[7] = s, f[2] = o, f[5] = u, f[8] = a, this
    }, identity: function () {
        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
    }, copy: function (e) {
        var t = e.elements;
        return this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]), this
    }, multiplyVector3: function (e) {
        return 0, e.applyMatrix3(this)
    }, multiplyVector3Array: function () {
        var e = new THREE.Vector3;
        return function (t) {
            for (var n = 0,
                     r = t.length; n < r; n += 3)e.x = t[n], e.y = t[n + 1], e.z = t[n + 2], e.applyMatrix3(this), t[n] = e.x, t[n + 1] = e.y, t[n + 2] = e.z;
            return t
        }
    }(), multiplyScalar: function (e) {
        var t = this.elements;
        return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this
    }, determinant: function () {
        var e = this.elements, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7], f = e[8];
        return t * s * f - t * o * a - n * i * f + n * o * u + r * i * a - r * s * u
    }, getInverse: function (e, t) {
        var n = e.elements, r = this.elements;
        r[0] = n[10] * n[5] - n[6] * n[9], r[1] = -n[10] * n[1] + n[2] * n[9], r[2] = n[6] * n[1] - n[2] * n[5], r[3] = -n[10] * n[4] + n[6] * n[8], r[4] = n[10] * n[0] - n[2] * n[8], r[5] = -n[6] * n[0] + n[2] * n[4], r[6] = n[9] * n[4] - n[5] * n[8], r[7] = -n[9] * n[0] + n[1] * n[8], r[8] = n[5] * n[0] - n[1] * n[4];
        var i = n[0] * r[0] + n[1] * r[3] + n[2] * r[6];
        if (i === 0) {
            var s = "Matrix3.getInverse(): can't invert matrix, determinant is 0";
            if (t || !1)throw new Error(s);
            return 0, this.identity(), this
        }
        return this.multiplyScalar(1 / i), this
    }, transpose: function () {
        var e, t = this.elements;
        return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this
    }, getNormalMatrix: function (e) {
        return this.getInverse(e).transpose(), this
    }, transposeIntoArray: function (e) {
        var t = this.elements;
        return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this
    }, clone: function () {
        var e = this.elements;
        return new THREE.Matrix3(e[0], e[3], e[6], e[1], e[4], e[7], e[2], e[5], e[8])
    }
},THREE.Matrix4 = function (e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v) {
    this.elements = new Float32Array(16);
    var m = this.elements;
    m[0] = e !== undefined ? e : 1, m[4] = t || 0, m[8] = n || 0, m[12] = r || 0, m[1] = i || 0, m[5] = s !== undefined ? s : 1, m[9] = o || 0, m[13] = u || 0, m[2] = a || 0, m[6] = f || 0, m[10] = l !== undefined ? l : 1, m[14] = c || 0, m[3] = h || 0, m[7] = p || 0, m[11] = d || 0, m[15] = v !== undefined ? v : 1
},THREE.Matrix4.prototype = {
    constructor: THREE.Matrix4,
    set: function (e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v) {
        var m = this.elements;
        return m[0] = e, m[4] = t, m[8] = n, m[12] = r, m[1] = i, m[5] = s, m[9] = o, m[13] = u, m[2] = a, m[6] = f, m[10] = l, m[14] = c, m[3] = h, m[7] = p, m[11] = d, m[15] = v, this
    },
    identity: function () {
        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
    },
    copy: function (e) {
        return this.elements.set(e.elements), this
    },
    extractPosition: function (e) {
        return 0, this.copyPosition(e)
    },
    copyPosition: function (e) {
        var t = this.elements, n = e.elements;
        return t[12] = n[12], t[13] = n[13], t[14] = n[14], this
    },
    extractRotation: function () {
        var e = new THREE.Vector3;
        return function (t) {
            var n = this.elements, r = t.elements, i = 1 / e.set(r[0], r[1], r[2]).length(),
                s = 1 / e.set(r[4], r[5], r[6]).length(), o = 1 / e.set(r[8], r[9], r[10]).length();
            return n[0] = r[0] * i, n[1] = r[1] * i, n[2] = r[2] * i, n[4] = r[4] * s, n[5] = r[5] * s, n[6] = r[6] * s, n[8] = r[8] * o, n[9] = r[9] * o, n[10] = r[10] * o, this
        }
    }(),
    makeRotationFromEuler: function (e) {
        e instanceof THREE.Euler == 0 && 0;
        var t = this.elements, n = e.x, r = e.y, i = e.z, s = Math.cos(n), o = Math.sin(n), u = Math.cos(r),
            a = Math.sin(r), f = Math.cos(i), l = Math.sin(i);
        if (e.order === "XYZ") {
            var c = s * f, h = s * l, p = o * f, d = o * l;
            t[0] = u * f, t[4] = -u * l, t[8] = a, t[1] = h + p * a, t[5] = c - d * a, t[9] = -o * u, t[2] = d - c * a, t[6] = p + h * a, t[10] = s * u
        } else if (e.order === "YXZ") {
            var v = u * f, m = u * l, g = a * f, y = a * l;
            t[0] = v + y * o, t[4] = g * o - m, t[8] = s * a, t[1] = s * l, t[5] = s * f, t[9] = -o, t[2] = m * o - g, t[6] = y + v * o, t[10] = s * u
        } else if (e.order === "ZXY") {
            var v = u * f, m = u * l, g = a * f, y = a * l;
            t[0] = v - y * o, t[4] = -s * l, t[8] = g + m * o, t[1] = m + g * o, t[5] = s * f, t[9] = y - v * o, t[2] = -s * a, t[6] = o, t[10] = s * u
        } else if (e.order === "ZYX") {
            var c = s * f, h = s * l, p = o * f, d = o * l;
            t[0] = u * f, t[4] = p * a - h, t[8] = c * a + d, t[1] = u * l, t[5] = d * a + c, t[9] = h * a - p, t[2] = -a, t[6] = o * u, t[10] = s * u
        } else if (e.order === "YZX") {
            var b = s * u, w = s * a, E = o * u, S = o * a;
            t[0] = u * f, t[4] = S - b * l, t[8] = E * l + w, t[1] = l, t[5] = s * f, t[9] = -o * f, t[2] = -a * f, t[6] = w * l + E, t[10] = b - S * l
        } else if (e.order === "XZY") {
            var b = s * u, w = s * a, E = o * u, S = o * a;
            t[0] = u * f, t[4] = -l, t[8] = a * f, t[1] = b * l + S, t[5] = s * f, t[9] = w * l - E, t[2] = E * l - w, t[6] = o * f, t[10] = S * l + b
        }
        return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
    },
    setRotationFromQuaternion: function (e) {
        return 0, this.makeRotationFromQuaternion(e)
    },
    makeRotationFromQuaternion: function (e) {
        var t = this.elements, n = e.x, r = e.y, i = e.z, s = e.w, o = n + n, u = r + r, a = i + i, f = n * o,
            l = n * u, c = n * a, h = r * u, p = r * a, d = i * a, v = s * o, m = s * u, g = s * a;
        return t[0] = 1 - (h + d), t[4] = l - g, t[8] = c + m, t[1] = l + g, t[5] = 1 - (f + d), t[9] = p - v, t[2] = c - m, t[6] = p + v, t[10] = 1 - (f + h), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
    },
    lookAt: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3, n = new THREE.Vector3;
        return function (r, i, s) {
            var o = this.elements;
            return n.subVectors(r, i).normalize(), n.length() === 0 && (n.z = 1), e.crossVectors(s, n).normalize(), e.length() === 0 && (n.x += 1e-4, e.crossVectors(s, n).normalize()), t.crossVectors(n, e), o[0] = e.x, o[4] = t.x, o[8] = n.x, o[1] = e.y, o[5] = t.y, o[9] = n.y, o[2] = e.z, o[6] = t.z, o[10] = n.z, this
        }
    }(),
    multiply: function (e, t) {
        return t !== undefined ? (0, this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
    },
    multiplyMatrices: function (e, t) {
        var n = e.elements, r = t.elements, i = this.elements, s = n[0], o = n[4], u = n[8], a = n[12], f = n[1],
            l = n[5], c = n[9], h = n[13], p = n[2], d = n[6], v = n[10], m = n[14], g = n[3], y = n[7], b = n[11],
            w = n[15], E = r[0], S = r[4], x = r[8], T = r[12], N = r[1], C = r[5], k = r[9], L = r[13], A = r[2],
            O = r[6], M = r[10], _ = r[14], D = r[3], P = r[7], H = r[11], B = r[15];
        return i[0] = s * E + o * N + u * A + a * D, i[4] = s * S + o * C + u * O + a * P, i[8] = s * x + o * k + u * M + a * H, i[12] = s * T + o * L + u * _ + a * B, i[1] = f * E + l * N + c * A + h * D, i[5] = f * S + l * C + c * O + h * P, i[9] = f * x + l * k + c * M + h * H, i[13] = f * T + l * L + c * _ + h * B, i[2] = p * E + d * N + v * A + m * D, i[6] = p * S + d * C + v * O + m * P, i[10] = p * x + d * k + v * M + m * H, i[14] = p * T + d * L + v * _ + m * B, i[3] = g * E + y * N + b * A + w * D, i[7] = g * S + y * C + b * O + w * P, i[11] = g * x + y * k + b * M + w * H, i[15] = g * T + y * L + b * _ + w * B, this
    },
    multiplyToArray: function (e, t, n) {
        var r = this.elements;
        return this.multiplyMatrices(e, t), n[0] = r[0], n[1] = r[1], n[2] = r[2], n[3] = r[3], n[4] = r[4], n[5] = r[5], n[6] = r[6], n[7] = r[7], n[8] = r[8], n[9] = r[9], n[10] = r[10], n[11] = r[11], n[12] = r[12], n[13] = r[13], n[14] = r[14], n[15] = r[15], this
    },
    multiplyScalar: function (e) {
        var t = this.elements;
        return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
    },
    multiplyVector3: function (e) {
        return 0, e.applyProjection(this)
    },
    multiplyVector4: function (e) {
        return 0, e.applyMatrix4(this)
    },
    multiplyVector3Array: function () {
        var e = new THREE.Vector3;
        return function (t) {
            for (var n = 0,
                     r = t.length; n < r; n += 3)e.x = t[n], e.y = t[n + 1], e.z = t[n + 2], e.applyProjection(this), t[n] = e.x, t[n + 1] = e.y, t[n + 2] = e.z;
            return t
        }
    }(),
    rotateAxis: function (e) {
        0, e.transformDirection(this)
    },
    crossVector: function (e) {
        return 0, e.applyMatrix4(this)
    },
    determinant: function () {
        var e = this.elements, t = e[0], n = e[4], r = e[8], i = e[12], s = e[1], o = e[5], u = e[9], a = e[13],
            f = e[2], l = e[6], c = e[10], h = e[14], p = e[3], d = e[7], v = e[11], m = e[15];
        return p * (+i * u * l - r * a * l - i * o * c + n * a * c + r * o * h - n * u * h) + d * (+t * u * h - t * a * c + i * s * c - r * s * h + r * a * f - i * u * f) + v * (+t * a * l - t * o * h - i * s * l + n * s * h + i * o * f - n * a * f) + m * (-r * o * f - t * u * l + t * o * c + r * s * l - n * s * c + n * u * f)
    },
    transpose: function () {
        var e = this.elements, t;
        return t = e[1], e[1] = e[4], e[4] = t, t = e[2], e[2] = e[8], e[8] = t, t = e[6], e[6] = e[9], e[9] = t, t = e[3], e[3] = e[12], e[12] = t, t = e[7], e[7] = e[13], e[13] = t, t = e[11], e[11] = e[14], e[14] = t, this
    },
    flattenToArray: function (e) {
        var t = this.elements;
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e
    },
    flattenToArrayOffset: function (e, t) {
        var n = this.elements;
        return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
    },
    getPosition: function () {
        var e = new THREE.Vector3;
        return function () {
            0;
            var t = this.elements;
            return e.set(t[12], t[13], t[14])
        }
    }(),
    setPosition: function (e) {
        var t = this.elements;
        return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
    },
    getInverse: function (e, t) {
        var n = this.elements, r = e.elements, i = r[0], s = r[4], o = r[8], u = r[12], a = r[1], f = r[5], l = r[9],
            c = r[13], h = r[2], p = r[6], d = r[10], v = r[14], m = r[3], g = r[7], y = r[11], b = r[15];
        n[0] = l * v * g - c * d * g + c * p * y - f * v * y - l * p * b + f * d * b, n[4] = u * d * g - o * v * g - u * p * y + s * v * y + o * p * b - s * d * b, n[8] = o * c * g - u * l * g + u * f * y - s * c * y - o * f * b + s * l * b, n[12] = u * l * p - o * c * p - u * f * d + s * c * d + o * f * v - s * l * v, n[1] = c * d * m - l * v * m - c * h * y + a * v * y + l * h * b - a * d * b, n[5] = o * v * m - u * d * m + u * h * y - i * v * y - o * h * b + i * d * b, n[9] = u * l * m - o * c * m - u * a * y + i * c * y + o * a * b - i * l * b, n[13] = o * c * h - u * l * h + u * a * d - i * c * d - o * a * v + i * l * v, n[2] = f * v * m - c * p * m + c * h * g - a * v * g - f * h * b + a * p * b, n[6] = u * p * m - s * v * m - u * h * g + i * v * g + s * h * b - i * p * b, n[10] = s * c * m - u * f * m + u * a * g - i * c * g - s * a * b + i * f * b, n[14] = u * f * h - s * c * h - u * a * p + i * c * p + s * a * v - i * f * v, n[3] = l * p * m - f * d * m - l * h * g + a * d * g + f * h * y - a * p * y, n[7] = s * d * m - o * p * m + o * h * g - i * d * g - s * h * y + i * p * y, n[11] = o * f * m - s * l * m - o * a * g + i * l * g + s * a * y - i * f * y, n[15] = s * l * h - o * f * h + o * a * p - i * l * p - s * a * d + i * f * d;
        var w = i * n[0] + a * n[4] + h * n[8] + m * n[12];
        if (w == 0) {
            var E = "Matrix4.getInverse(): can't invert matrix, determinant is 0";
            if (t || !1)throw new Error(E);
            return 0, this.identity(), this
        }
        return this.multiplyScalar(1 / w), this
    },
    translate: function (e) {
        0
    },
    rotateX: function (e) {
        0
    },
    rotateY: function (e) {
        0
    },
    rotateZ: function (e) {
        0
    },
    rotateByAxis: function (e, t) {
        0
    },
    scale: function (e) {
        var t = this.elements, n = e.x, r = e.y, i = e.z;
        return t[0] *= n, t[4] *= r, t[8] *= i, t[1] *= n, t[5] *= r, t[9] *= i, t[2] *= n, t[6] *= r, t[10] *= i, t[3] *= n, t[7] *= r, t[11] *= i, this
    },
    getMaxScaleOnAxis: function () {
        var e = this.elements, t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2], n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
            r = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
        return Math.sqrt(Math.max(t, Math.max(n, r)))
    },
    makeTranslation: function (e, t, n) {
        return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
    },
    makeRotationX: function (e) {
        var t = Math.cos(e), n = Math.sin(e);
        return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this
    },
    makeRotationY: function (e) {
        var t = Math.cos(e), n = Math.sin(e);
        return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this
    },
    makeRotationZ: function (e) {
        var t = Math.cos(e), n = Math.sin(e);
        return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
    },
    makeRotationAxis: function (e, t) {
        var n = Math.cos(t), r = Math.sin(t), i = 1 - n, s = e.x, o = e.y, u = e.z, a = i * s, f = i * o;
        return this.set(a * s + n, a * o - r * u, a * u + r * o, 0, a * o + r * u, f * o + n, f * u - r * s, 0, a * u - r * o, f * u + r * s, i * u * u + n, 0, 0, 0, 0, 1), this
    },
    makeScale: function (e, t, n) {
        return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
    },
    compose: function (e, t, n) {
        return this.makeRotationFromQuaternion(t), this.scale(n), this.setPosition(e), this
    },
    decompose: function () {
        var e = new THREE.Vector3, t = new THREE.Matrix4;
        return function (n, r, i) {
            var s = this.elements, o = e.set(s[0], s[1], s[2]).length(), u = e.set(s[4], s[5], s[6]).length(),
                a = e.set(s[8], s[9], s[10]).length();
            n.x = s[12], n.y = s[13], n.z = s[14], t.elements.set(this.elements);
            var f = 1 / o, l = 1 / u, c = 1 / a;
            return t.elements[0] *= f, t.elements[1] *= f, t.elements[2] *= f, t.elements[4] *= l, t.elements[5] *= l, t.elements[6] *= l, t.elements[8] *= c, t.elements[9] *= c, t.elements[10] *= c, r.setFromRotationMatrix(t), i.x = o, i.y = u, i.z = a, this
        }
    }(),
    makeFrustum: function (e, t, n, r, i, s) {
        var o = this.elements, u = 2 * i / (t - e), a = 2 * i / (r - n), f = (t + e) / (t - e), l = (r + n) / (r - n),
            c = -(s + i) / (s - i), h = -2 * s * i / (s - i);
        return o[0] = u, o[4] = 0, o[8] = f, o[12] = 0, o[1] = 0, o[5] = a, o[9] = l, o[13] = 0, o[2] = 0, o[6] = 0, o[10] = c, o[14] = h, o[3] = 0, o[7] = 0, o[11] = -1, o[15] = 0, this
    },
    makePerspective: function (e, t, n, r) {
        var i = n * Math.tan(THREE.Math.degToRad(e * .5)), s = -i, o = s * t, u = i * t;
        return this.makeFrustum(o, u, s, i, n, r)
    },
    makeOrthographic: function (e, t, n, r, i, s) {
        var o = this.elements, u = t - e, a = n - r, f = s - i, l = (t + e) / u, c = (n + r) / a, h = (s + i) / f;
        return o[0] = 2 / u, o[4] = 0, o[8] = 0, o[12] = -l, o[1] = 0, o[5] = 2 / a, o[9] = 0, o[13] = -c, o[2] = 0, o[6] = 0, o[10] = -2 / f, o[14] = -h, o[3] = 0, o[7] = 0, o[11] = 0, o[15] = 1, this
    },
    fromArray: function (e) {
        return this.elements.set(e), this
    },
    toArray: function () {
        var e = this.elements;
        return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
    },
    clone: function () {
        var e = this.elements;
        return new THREE.Matrix4(e[0], e[4], e[8], e[12], e[1], e[5], e[9], e[13], e[2], e[6], e[10], e[14], e[3], e[7], e[11], e[15])
    }
},THREE.Ray = function (e, t) {
    this.origin = e !== undefined ? e : new THREE.Vector3, this.direction = t !== undefined ? t : new THREE.Vector3
},THREE.Ray.prototype = {
    constructor: THREE.Ray, set: function (e, t) {
        return this.origin.copy(e), this.direction.copy(t), this
    }, copy: function (e) {
        return this.origin.copy(e.origin), this.direction.copy(e.direction), this
    }, at: function (e, t) {
        var n = t || new THREE.Vector3;
        return n.copy(this.direction).multiplyScalar(e).add(this.origin)
    }, recast: function () {
        var e = new THREE.Vector3;
        return function (t) {
            return this.origin.copy(this.at(t, e)), this
        }
    }(), closestPointToPoint: function (e, t) {
        var n = t || new THREE.Vector3;
        n.subVectors(e, this.origin);
        var r = n.dot(this.direction);
        return r < 0 ? n.copy(this.origin) : n.copy(this.direction).multiplyScalar(r).add(this.origin)
    }, distanceToPoint: function () {
        var e = new THREE.Vector3;
        return function (t) {
            var n = e.subVectors(t, this.origin).dot(this.direction);
            return n < 0 ? this.origin.distanceTo(t) : (e.copy(this.direction).multiplyScalar(n).add(this.origin), e.distanceTo(t))
        }
    }(), distanceSqToSegment: function (e, t, n, r) {
        var i = e.clone().add(t).multiplyScalar(.5), s = t.clone().sub(e).normalize(), o = e.distanceTo(t) * .5,
            u = this.origin.clone().sub(i), a = -this.direction.dot(s), f = u.dot(this.direction), l = -u.dot(s),
            c = u.lengthSq(), h = Math.abs(1 - a * a), p, d, v, m;
        if (h >= 0) {
            p = a * l - f, d = a * f - l, m = o * h;
            if (p >= 0)if (d >= -m)if (d <= m) {
                var g = 1 / h;
                p *= g, d *= g, v = p * (p + a * d + 2 * f) + d * (a * p + d + 2 * l) + c
            } else d = o, p = Math.max(0, -(a * d + f)), v = -p * p + d * (d + 2 * l) + c; else d = -o, p = Math.max(0, -(a * d + f)), v = -p * p + d * (d + 2 * l) + c; else d <= -m ? (p = Math.max(0, -(-a * o + f)), d = p > 0 ? -o : Math.min(Math.max(-o, -l), o), v = -p * p + d * (d + 2 * l) + c) : d <= m ? (p = 0, d = Math.min(Math.max(-o, -l), o), v = d * (d + 2 * l) + c) : (p = Math.max(0, -(a * o + f)), d = p > 0 ? o : Math.min(Math.max(-o, -l), o), v = -p * p + d * (d + 2 * l) + c)
        } else d = a > 0 ? -o : o, p = Math.max(0, -(a * d + f)), v = -p * p + d * (d + 2 * l) + c;
        return n && n.copy(this.direction.clone().multiplyScalar(p).add(this.origin)), r && r.copy(s.clone().multiplyScalar(d).add(i)), v
    }, isIntersectionSphere: function (e) {
        return this.distanceToPoint(e.center) <= e.radius
    }, isIntersectionPlane: function (e) {
        var t = e.distanceToPoint(this.origin);
        if (t === 0)return !0;
        var n = e.normal.dot(this.direction);
        return n * t < 0 ? !0 : !1
    }, distanceToPlane: function (e) {
        var t = e.normal.dot(this.direction);
        if (t == 0)return e.distanceToPoint(this.origin) == 0 ? 0 : null;
        var n = -(this.origin.dot(e.normal) + e.constant) / t;
        return n >= 0 ? n : null
    }, intersectPlane: function (e, t) {
        var n = this.distanceToPlane(e);
        return n === null ? null : this.at(n, t)
    }, isIntersectionBox: function () {
        var e = new THREE.Vector3;
        return function (t) {
            return this.intersectBox(t, e) !== null
        }
    }(), intersectBox: function (e, t) {
        var n, r, i, s, o, u, a = 1 / this.direction.x, f = 1 / this.direction.y, l = 1 / this.direction.z,
            c = this.origin;
        a >= 0 ? (n = (e.min.x - c.x) * a, r = (e.max.x - c.x) * a) : (n = (e.max.x - c.x) * a, r = (e.min.x - c.x) * a), f >= 0 ? (i = (e.min.y - c.y) * f, s = (e.max.y - c.y) * f) : (i = (e.max.y - c.y) * f, s = (e.min.y - c.y) * f);
        if (n > s || i > r)return null;
        if (i > n || n !== n) n = i;
        if (s < r || r !== r) r = s;
        l >= 0 ? (o = (e.min.z - c.z) * l, u = (e.max.z - c.z) * l) : (o = (e.max.z - c.z) * l, u = (e.min.z - c.z) * l);
        if (n > u || o > r)return null;
        if (o > n || n !== n) n = o;
        if (u < r || r !== r) r = u;
        return r < 0 ? null : this.at(n >= 0 ? n : r, t)
    }, intersectTriangle: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3, n = new THREE.Vector3, r = new THREE.Vector3;
        return function (i, s, o, u, a) {
            t.subVectors(s, i), n.subVectors(o, i), r.crossVectors(t, n);
            var f = this.direction.dot(r), l;
            if (f > 0) {
                if (u)return null;
                l = 1
            } else {
                if (!(f < 0))return null;
                l = -1, f = -f
            }
            e.subVectors(this.origin, i);
            var c = l * this.direction.dot(n.crossVectors(e, n));
            if (c < 0)return null;
            var h = l * this.direction.dot(t.cross(e));
            if (h < 0)return null;
            if (c + h > f)return null;
            var p = -l * e.dot(r);
            return p < 0 ? null : this.at(p / f, a)
        }
    }(), applyMatrix4: function (e) {
        return this.direction.add(this.origin).applyMatrix4(e), this.origin.applyMatrix4(e), this.direction.sub(this.origin), this.direction.normalize(), this
    }, equals: function (e) {
        return e.origin.equals(this.origin) && e.direction.equals(this.direction)
    }, clone: function () {
        return (new THREE.Ray).copy(this)
    }
},THREE.Sphere = function (e, t) {
    this.center = e !== undefined ? e : new THREE.Vector3, this.radius = t !== undefined ? t : 0
},THREE.Sphere.prototype = {
    constructor: THREE.Sphere, set: function (e, t) {
        return this.center.copy(e), this.radius = t, this
    }, setFromPoints: function () {
        var e = new THREE.Box3;
        return function (t, n) {
            var r = this.center;
            n !== undefined ? r.copy(n) : e.setFromPoints(t).center(r);
            var i = 0;
            for (var s = 0, o = t.length; s < o; s++)i = Math.max(i, r.distanceToSquared(t[s]));
            return this.radius = Math.sqrt(i), this
        }
    }(), copy: function (e) {
        return this.center.copy(e.center), this.radius = e.radius, this
    }, empty: function () {
        return this.radius <= 0
    }, containsPoint: function (e) {
        return e.distanceToSquared(this.center) <= this.radius * this.radius
    }, distanceToPoint: function (e) {
        return e.distanceTo(this.center) - this.radius
    }, intersectsSphere: function (e) {
        var t = this.radius + e.radius;
        return e.center.distanceToSquared(this.center) <= t * t
    }, clampPoint: function (e, t) {
        var n = this.center.distanceToSquared(e), r = t || new THREE.Vector3;
        return r.copy(e), n > this.radius * this.radius && (r.sub(this.center).normalize(), r.multiplyScalar(this.radius).add(this.center)), r
    }, getBoundingBox: function (e) {
        var t = e || new THREE.Box3;
        return t.set(this.center, this.center), t.expandByScalar(this.radius), t
    }, applyMatrix4: function (e) {
        return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this
    }, translate: function (e) {
        return this.center.add(e), this
    }, equals: function (e) {
        return e.center.equals(this.center) && e.radius === this.radius
    }, clone: function () {
        return (new THREE.Sphere).copy(this)
    }
},THREE.Frustum = function (e, t, n, r, i, s) {
    this.planes = [e !== undefined ? e : new THREE.Plane, t !== undefined ? t : new THREE.Plane, n !== undefined ? n : new THREE.Plane, r !== undefined ? r : new THREE.Plane, i !== undefined ? i : new THREE.Plane, s !== undefined ? s : new THREE.Plane]
},THREE.Frustum.prototype = {
    constructor: THREE.Frustum, set: function (e, t, n, r, i, s) {
        var o = this.planes;
        return o[0].copy(e), o[1].copy(t), o[2].copy(n), o[3].copy(r), o[4].copy(i), o[5].copy(s), this
    }, copy: function (e) {
        var t = this.planes;
        for (var n = 0; n < 6; n++)t[n].copy(e.planes[n]);
        return this
    }, setFromMatrix: function (e) {
        var t = this.planes, n = e.elements, r = n[0], i = n[1], s = n[2], o = n[3], u = n[4], a = n[5], f = n[6],
            l = n[7], c = n[8], h = n[9], p = n[10], d = n[11], v = n[12], m = n[13], g = n[14], y = n[15];
        return t[0].setComponents(o - r, l - u, d - c, y - v).normalize(), t[1].setComponents(o + r, l + u, d + c, y + v).normalize(), t[2].setComponents(o + i, l + a, d + h, y + m).normalize(), t[3].setComponents(o - i, l - a, d - h, y - m).normalize(), t[4].setComponents(o - s, l - f, d - p, y - g).normalize(), t[5].setComponents(o + s, l + f, d + p, y + g).normalize(), this
    }, intersectsObject: function () {
        var e = new THREE.Sphere;
        return function (t) {
            var n = t.geometry;
            return n.boundingSphere === null && n.computeBoundingSphere(), e.copy(n.boundingSphere), e.applyMatrix4(t.matrixWorld), this.intersectsSphere(e)
        }
    }(), intersectsSphere: function (e) {
        var t = this.planes, n = e.center, r = -e.radius;
        for (var i = 0; i < 6; i++) {
            var s = t[i].distanceToPoint(n);
            if (s < r)return !1
        }
        return !0
    }, intersectsBox: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3;
        return function (n) {
            var r = this.planes;
            for (var i = 0; i < 6; i++) {
                var s = r[i];
                e.x = s.normal.x > 0 ? n.min.x : n.max.x, t.x = s.normal.x > 0 ? n.max.x : n.min.x, e.y = s.normal.y > 0 ? n.min.y : n.max.y, t.y = s.normal.y > 0 ? n.max.y : n.min.y, e.z = s.normal.z > 0 ? n.min.z : n.max.z, t.z = s.normal.z > 0 ? n.max.z : n.min.z;
                var o = s.distanceToPoint(e), u = s.distanceToPoint(t);
                if (o < 0 && u < 0)return !1
            }
            return !0
        }
    }(), containsPoint: function (e) {
        var t = this.planes;
        for (var n = 0; n < 6; n++)if (t[n].distanceToPoint(e) < 0)return !1;
        return !0
    }, clone: function () {
        return (new THREE.Frustum).copy(this)
    }
},THREE.Plane = function (e, t) {
    this.normal = e !== undefined ? e : new THREE.Vector3(1, 0, 0), this.constant = t !== undefined ? t : 0
},THREE.Plane.prototype = {
    constructor: THREE.Plane, set: function (e, t) {
        return this.normal.copy(e), this.constant = t, this
    }, setComponents: function (e, t, n, r) {
        return this.normal.set(e, t, n), this.constant = r, this
    }, setFromNormalAndCoplanarPoint: function (e, t) {
        return this.normal.copy(e), this.constant = -t.dot(this.normal), this
    }, setFromCoplanarPoints: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3;
        return function (n, r, i) {
            var s = e.subVectors(i, r).cross(t.subVectors(n, r)).normalize();
            return this.setFromNormalAndCoplanarPoint(s, n), this
        }
    }(), copy: function (e) {
        return this.normal.copy(e.normal), this.constant = e.constant, this
    }, normalize: function () {
        var e = 1 / this.normal.length();
        return this.normal.multiplyScalar(e), this.constant *= e, this
    }, negate: function () {
        return this.constant *= -1, this.normal.negate(), this
    }, distanceToPoint: function (e) {
        return this.normal.dot(e) + this.constant
    }, distanceToSphere: function (e) {
        return this.distanceToPoint(e.center) - e.radius
    }, projectPoint: function (e, t) {
        return this.orthoPoint(e, t).sub(e).negate()
    }, orthoPoint: function (e, t) {
        var n = this.distanceToPoint(e), r = t || new THREE.Vector3;
        return r.copy(this.normal).multiplyScalar(n)
    }, isIntersectionLine: function (e) {
        var t = this.distanceToPoint(e.start), n = this.distanceToPoint(e.end);
        return t < 0 && n > 0 || n < 0 && t > 0
    }, intersectLine: function () {
        var e = new THREE.Vector3;
        return function (t, n) {
            var r = n || new THREE.Vector3, i = t.delta(e), s = this.normal.dot(i);
            if (s == 0)return this.distanceToPoint(t.start) == 0 ? r.copy(t.start) : undefined;
            var o = -(t.start.dot(this.normal) + this.constant) / s;
            return o < 0 || o > 1 ? undefined : r.copy(i).multiplyScalar(o).add(t.start)
        }
    }(), coplanarPoint: function (e) {
        var t = e || new THREE.Vector3;
        return t.copy(this.normal).multiplyScalar(-this.constant)
    }, applyMatrix4: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3;
        return function (n, r) {
            r = r || (new THREE.Matrix3).getNormalMatrix(n);
            var i = e.copy(this.normal).applyMatrix3(r), s = this.coplanarPoint(t);
            return s.applyMatrix4(n), this.setFromNormalAndCoplanarPoint(i, s), this
        }
    }(), translate: function (e) {
        return this.constant = this.constant - e.dot(this.normal), this
    }, equals: function (e) {
        return e.normal.equals(this.normal) && e.constant == this.constant
    }, clone: function () {
        return (new THREE.Plane).copy(this)
    }
},
THREE.Math = {
    PI2: Math.PI * 2, generateUUID: function () {
        var e = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), t = new Array(36), n = 0, r;
        return function () {
            for (var i = 0; i < 36; i++)i == 8 || i == 13 || i == 18 || i == 23 ? t[i] = "-" : i == 14 ? t[i] = "4" : (n <= 2 && (n = 33554432 + Math.random() * 16777216 | 0), r = n & 15, n >>= 4, t[i] = e[i == 19 ? r & 3 | 8 : r]);
            return t.join("")
        }
    }(), clamp: function (e, t, n) {
        return e < t ? t : e > n ? n : e
    }, clampBottom: function (e, t) {
        return e < t ? t : e
    }, mapLinear: function (e, t, n, r, i) {
        return r + (e - t) * (i - r) / (n - t)
    }, smoothstep: function (e, t, n) {
        return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t), e * e * (3 - 2 * e))
    }, smootherstep: function (e, t, n) {
        return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t), e * e * e * (e * (e * 6 - 15) + 10))
    }, random16: function () {
        return (65280 * Math.random() + 255 * Math.random()) / 65535
    }, randInt: function (e, t) {
        return e + Math.floor(Math.random() * (t - e + 1))
    }, randFloat: function (e, t) {
        return e + Math.random() * (t - e)
    }, randFloatSpread: function (e) {
        return e * (.5 - Math.random())
    }, sign: function (e) {
        return e < 0 ? -1 : e > 0 ? 1 : 0
    }, degToRad: function () {
        var e = Math.PI / 180;
        return function (t) {
            return t * e
        }
    }(), radToDeg: function () {
        var e = 180 / Math.PI;
        return function (t) {
            return t * e
        }
    }()
},
THREE.Triangle = function (e, t, n) {
    this.a = e !== undefined ? e : new THREE.Vector3, this.b = t !== undefined ? t : new THREE.Vector3, this.c = n !== undefined ? n : new THREE.Vector3
},THREE.Triangle.barycoordFromPoint = function () {
    var e = new THREE.Vector3, t = new THREE.Vector3, n = new THREE.Vector3;
    return function (r, i, s, o, u) {
        e.subVectors(o, i), t.subVectors(s, i), n.subVectors(r, i);
        var a = e.dot(e), f = e.dot(t), l = e.dot(n), c = t.dot(t), h = t.dot(n), p = a * c - f * f,
            d = u || new THREE.Vector3;
        if (p == 0)return d.set(-2, -1, -1);
        var v = 1 / p, m = (c * l - f * h) * v, g = (a * h - f * l) * v;
        return d.set(1 - m - g, g, m)
    }
}(),THREE.Triangle.containsPoint = function () {
    var e = new THREE.Vector3;
    return function (t, n, r, i) {
        var s = THREE.Triangle.barycoordFromPoint(t, n, r, i, e);
        return s.x >= 0 && s.y >= 0 && s.x + s.y <= 1
    }
}(),THREE.Vertex = function (e) {
    return 0, e
},THREE.UV = function (e, t) {
    return 0, new THREE.Vector2(e, t)
},THREE.Clock = function (e) {
    this.autoStart = e !== undefined ? e : !0, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
},THREE.Clock.prototype = {
    constructor: THREE.Clock, start: function () {
        this.startTime = self.performance !== undefined && self.performance.now !== undefined ? self.performance.now() : Date.now(), this.oldTime = this.startTime, this.running = !0
    }, stop: function () {
        this.getElapsedTime(), this.running = !1
    }, getElapsedTime: function () {
        return this.getDelta(), this.elapsedTime
    }, getDelta: function () {
        var e = 0;
        this.autoStart && !this.running && this.start();
        if (this.running) {
            var t = self.performance !== undefined && self.performance.now !== undefined ? self.performance.now() : Date.now();
            e = .001 * (t - this.oldTime), this.oldTime = t, this.elapsedTime += e
        }
        return e
    }
},THREE.EventDispatcher = function () {
},THREE.EventDispatcher.prototype = {
    constructor: THREE.EventDispatcher, apply: function (e) {
        e.addEventListener = THREE.EventDispatcher.prototype.addEventListener, e.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener, e.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener, e.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent
    }, addEventListener: function (e, t) {
        this._listeners === undefined && (this._listeners = {});
        var n = this._listeners;
        n[e] === undefined && (n[e] = []), n[e].indexOf(t) === -1 && n[e].push(t)
    }, hasEventListener: function (e, t) {
        if (this._listeners === undefined)return !1;
        var n = this._listeners;
        return n[e] !== undefined && n[e].indexOf(t) !== -1 ? !0 : !1
    }, removeEventListener: function (e, t) {
        if (this._listeners === undefined)return;
        var n = this._listeners, r = n[e].indexOf(t);
        r !== -1 && n[e].splice(r, 1)
    }, dispatchEvent: function (e) {
        if (this._listeners === undefined)return;
        var t = this._listeners, n = t[e.type];
        if (n !== undefined) {
            e.target = this;
            for (var r = 0, i = n.length; r < i; r++)n[r].call(this, e)
        }
    }
},
THREE.Object3D = function () {
    this.id = THREE.Object3DIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", this.parent = undefined, this.children = [], this.up = new THREE.Vector3(0, 1, 0), this.position = new THREE.Vector3, this.rotation = new THREE.Euler, this.quaternion = new THREE.Quaternion, this.scale = new THREE.Vector3(1, 1, 1), this.rotation._quaternion = this.quaternion, this.quaternion._euler = this.rotation, this.renderDepth = null, this.rotationAutoUpdate = !0, this.matrix = new THREE.Matrix4, this.matrixWorld = new THREE.Matrix4, this.matrixAutoUpdate = !0, this.matrixWorldNeedsUpdate = !0, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.userData = {}
},THREE.Object3D.prototype = {
    constructor: THREE.Object3D, get eulerOrder() {
        return 0, this.rotation.order
    }, set eulerOrder(e) {
        0, this.rotation.order = e
    }, get useQuaternion() {
        0
    }, set useQuaternion(e) {
        0
    }, applyMatrix: function () {
        var e = new THREE.Matrix4;
        return function (t) {
            this.matrix.multiplyMatrices(t, this.matrix), this.position.getPositionFromMatrix(this.matrix), this.scale.getScaleFromMatrix(this.matrix), e.extractRotation(this.matrix), this.quaternion.setFromRotationMatrix(e)
        }
    }(), setRotationFromAxisAngle: function (e, t) {
        this.quaternion.setFromAxisAngle(e, t)
    }, setRotationFromEuler: function (e) {
        this.quaternion.setFromEuler(e, !0)
    }, setRotationFromMatrix: function (e) {
        this.quaternion.setFromRotationMatrix(e)
    }, setRotationFromQuaternion: function (e) {
        this.quaternion.copy(e)
    }, rotateOnAxis: function () {
        var e = new THREE.Quaternion;
        return function (t, n) {
            return e.setFromAxisAngle(t, n), this.quaternion.multiply(e), this
        }
    }(), rotateX: function () {
        var e = new THREE.Vector3(1, 0, 0);
        return function (t) {
            return this.rotateOnAxis(e, t)
        }
    }(), rotateY: function () {
        var e = new THREE.Vector3(0, 1, 0);
        return function (t) {
            return this.rotateOnAxis(e, t)
        }
    }(), rotateZ: function () {
        var e = new THREE.Vector3(0, 0, 1);
        return function (t) {
            return this.rotateOnAxis(e, t)
        }
    }(), translateOnAxis: function () {
        var e = new THREE.Vector3;
        return function (t, n) {
            return e.copy(t), e.applyQuaternion(this.quaternion), this.position.add(e.multiplyScalar(n)), this
        }
    }(), translate: function (e, t) {
        return 0, this.translateOnAxis(t, e)
    }, translateX: function () {
        var e = new THREE.Vector3(1, 0, 0);
        return function (t) {
            return this.translateOnAxis(e, t)
        }
    }(), translateY: function () {
        var e = new THREE.Vector3(0, 1, 0);
        return function (t) {
            return this.translateOnAxis(e, t)
        }
    }(), translateZ: function () {
        var e = new THREE.Vector3(0, 0, 1);
        return function (t) {
            return this.translateOnAxis(e, t)
        }
    }(), localToWorld: function (e) {
        return e.applyMatrix4(this.matrixWorld)
    }, worldToLocal: function () {
        var e = new THREE.Matrix4;
        return function (t) {
            return t.applyMatrix4(e.getInverse(this.matrixWorld))
        }
    }(), lookAt: function () {
        var e = new THREE.Matrix4;
        return function (t) {
            e.lookAt(t, this.position, this.up), this.quaternion.setFromRotationMatrix(e)
        }
    }(), add: function (e) {
        if (e === this) {
            0;
            return
        }
        if (e instanceof THREE.Object3D) {
            e.parent !== undefined && e.parent.remove(e), e.parent = this, e.dispatchEvent({type: "added"}), this.children.push(e);
            var t = this;
            while (t.parent !== undefined)t = t.parent;
            t !== undefined && t instanceof THREE.Scene && t.__addObject(e)
        }
    }, remove: function (e) {
        var t = this.children.indexOf(e);
        if (t !== -1) {
            e.parent = undefined, e.dispatchEvent({type: "removed"}), this.children.splice(t, 1);
            var n = this;
            while (n.parent !== undefined)n = n.parent;
            n !== undefined && n instanceof THREE.Scene && n.__removeObject(e)
        }
    }, traverse: function (e) {
        e(this);
        for (var t = 0, n = this.children.length; t < n; t++)this.children[t].traverse(e)
    }, getObjectById: function (e, t) {
        for (var n = 0, r = this.children.length; n < r; n++) {
            var i = this.children[n];
            if (i.id === e)return i;
            if (t === !0) {
                i = i.getObjectById(e, t);
                if (i !== undefined)return i
            }
        }
        return undefined
    }, getObjectByName: function (e, t) {
        for (var n = 0, r = this.children.length; n < r; n++) {
            var i = this.children[n];
            if (i.name === e)return i;
            if (t === !0) {
                i = i.getObjectByName(e, t);
                if (i !== undefined)return i
            }
        }
        return undefined
    }, getChildByName: function (e, t) {
        return 0, this.getObjectByName(e, t)
    }, getDescendants: function (e) {
        e === undefined && (e = []), Array.prototype.push.apply(e, this.children);
        for (var t = 0, n = this.children.length; t < n; t++)this.children[t].getDescendants(e);
        return e
    }, updateMatrix: function () {
        this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
    }, updateMatrixWorld: function (e) {
        this.matrixAutoUpdate === !0 && this.updateMatrix();
        if (this.matrixWorldNeedsUpdate === !0 || e === !0) this.parent === undefined ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0;
        for (var t = 0, n = this.children.length; t < n; t++)this.children[t].updateMatrixWorld(e)
    }, clone: function (e, t) {
        e === undefined && (e = new THREE.Object3D), t === undefined && (t = !0), e.name = this.name, e.up.copy(this.up), e.position.copy(this.position), e.quaternion.copy(this.quaternion), e.scale.copy(this.scale), e.renderDepth = this.renderDepth, e.rotationAutoUpdate = this.rotationAutoUpdate, e.matrix.copy(this.matrix), e.matrixWorld.copy(this.matrixWorld), e.matrixAutoUpdate = this.matrixAutoUpdate, e.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate, e.visible = this.visible, e.castShadow = this.castShadow, e.receiveShadow = this.receiveShadow, e.frustumCulled = this.frustumCulled, e.userData = JSON.parse(JSON.stringify(this.userData));
        if (t === !0)for (var n = 0; n < this.children.length; n++) {
            var r = this.children[n];
            e.add(r.clone())
        }
        return e
    }
},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount = 0,THREE.Projector = function () {
    function q() {
        if (t === r) {
            var e = new THREE.RenderableObject;
            return n.push(e), r++, t++, e
        }
        return n[t++]
    }

    function R() {
        if (s === u) {
            var e = new THREE.RenderableVertex;
            return o.push(e), u++, s++, e
        }
        return o[s++]
    }

    function U() {
        if (f === c) {
            var e = new THREE.RenderableFace3;
            return l.push(e), c++, f++, e
        }
        return l[f++]
    }

    function z() {
        if (p === v) {
            var e = new THREE.RenderableLine;
            return d.push(e), v++, p++, e
        }
        return d[p++]
    }

    function W() {
        if (g === b) {
            var e = new THREE.RenderableParticle;
            return y.push(e), b++, g++, e
        }
        return y[g++]
    }

    function X(e, t) {
        return e.z !== t.z ? t.z - e.z : e.id !== t.id ? e.id - t.id : 0
    }

    function V(e, t) {
        var n = 0, r = 1, i = e.z + e.w, s = t.z + t.w, o = -e.z + e.w, u = -t.z + t.w;
        return i >= 0 && s >= 0 && o >= 0 && u >= 0 ? !0 : i < 0 && s < 0 || o < 0 && u < 0 ? !1 : (i < 0 ? n = Math.max(n, i / (i - s)) : s < 0 && (r = Math.min(r, i / (i - s))), o < 0 ? n = Math.max(n, o / (o - u)) : u < 0 && (r = Math.min(r, o / (o - u))), r < n ? !1 : (e.lerp(t, n), t.lerp(e, 1 - r), !0))
    }

    var e, t, n = [], r = 0, i, s, o = [], u = 0, a, f, l = [], c = 0, h, p, d = [], v = 0, m, g, y = [], b = 0,
        w = {objects: [], sprites: [], lights: [], elements: []}, E = new THREE.Vector3, S = new THREE.Vector4,
        x = new THREE.Box3(new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, 1, 1)), T = new THREE.Box3,
        N = new Array(3), C = new Array(4), k = new THREE.Matrix4, L = new THREE.Matrix4, A, O = new THREE.Matrix4,
        M = new THREE.Matrix3, _ = new THREE.Matrix3, D = new THREE.Vector3, P = new THREE.Frustum,
        H = new THREE.Vector4, B = new THREE.Vector4;
    this.projectVector = function (e, t) {
        return t.matrixWorldInverse.getInverse(t.matrixWorld), L.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), e.applyProjection(L)
    }, this.unprojectVector = function (e, t) {
        return t.projectionMatrixInverse.getInverse(t.projectionMatrix), L.multiplyMatrices(t.matrixWorld, t.projectionMatrixInverse), e.applyProjection(L)
    }, this.pickingRay = function (e, t) {
        e.z = -1;
        var n = new THREE.Vector3(e.x, e.y, 1);
        return this.unprojectVector(e, t), this.unprojectVector(n, t), n.sub(e).normalize(), new THREE.Raycaster(e, n)
    };
    var j = function (t) {
        return e = q(), e.id = t.id, e.object = t, t.renderDepth !== null ? e.z = t.renderDepth : (E.getPositionFromMatrix(t.matrixWorld), E.applyProjection(L), e.z = E.z), e
    }, F = function (e) {
        if (e.visible === !1)return;
        e instanceof THREE.Light ? w.lights.push(e) : e instanceof THREE.Mesh || e instanceof THREE.Line ? (e.frustumCulled === !1 || P.intersectsObject(e) === !0) && w.objects.push(j(e)) : (e instanceof THREE.Sprite || e instanceof THREE.Particle) && w.sprites.push(j(e));
        for (var t = 0, n = e.children.length; t < n; t++)F(e.children[t])
    }, I = function (e, n) {
        t = 0, w.objects.length = 0, w.sprites.length = 0, w.lights.length = 0, F(e), n === !0 && w.objects.sort(X)
    };
    this.projectScene = function (e, t, n, r) {
        var u = !1, l, c, d, v, y, b, E, C, j, F, q, $, J, K, Q, G, Y, Z, et, tt, nt, rt, it, st, ot, ut;
        f = 0, p = 0, g = 0, w.elements.length = 0, e.autoUpdate === !0 && e.updateMatrixWorld(), t.parent === undefined && t.updateMatrixWorld(), k.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)), L.multiplyMatrices(t.projectionMatrix, k), _.getNormalMatrix(k), P.setFromMatrix(L), I(e, n);
        for (l = 0, c = w.objects.length; l < c; l++) {
            J = w.objects[l].object, A = J.matrixWorld, s = 0;
            if (J instanceof THREE.Mesh) {
                K = J.geometry, Q = K.vertices, G = K.faces, et = K.faceVertexUvs, M.getNormalMatrix(A), ot = J.material instanceof THREE.MeshFaceMaterial, ut = ot === !0 ? J.material : null;
                for (d = 0, v = Q.length; d < v; d++) {
                    i = R(), i.positionWorld.copy(Q[d]).applyMatrix4(A), i.positionScreen.copy(i.positionWorld).applyMatrix4(L);
                    var at = 1 / i.positionScreen.w;
                    i.positionScreen.x *= at, i.positionScreen.y *= at, i.positionScreen.z *= at, i.visible = !(i.positionScreen.x < -1 || i.positionScreen.x > 1 || i.positionScreen.y < -1 || i.positionScreen.y > 1 || i.positionScreen.z < -1 || i.positionScreen.z > 1)
                }
                for (y = 0, b = G.length; y < b; y++) {
                    Y = G[y];
                    var ft = ot === !0 ? ut.materials[Y.materialIndex] : J.material;
                    if (ft === undefined)continue;
                    var lt = ft.side;
                    nt = o[Y.a], rt = o[Y.b], it = o[Y.c], N[0] = nt.positionScreen, N[1] = rt.positionScreen, N[2] = it.positionScreen;
                    if (nt.visible !== !0 && rt.visible !== !0 && it.visible !== !0 && !x.isIntersectionBox(T.setFromPoints(N)))continue;
                    u = (it.positionScreen.x - nt.positionScreen.x) * (rt.positionScreen.y - nt.positionScreen.y) - (it.positionScreen.y - nt.positionScreen.y) * (rt.positionScreen.x - nt.positionScreen.x) < 0;
                    if (lt !== THREE.DoubleSide && u !== (lt === THREE.FrontSide))continue;
                    a = U(), a.id = J.id, a.v1.copy(nt), a.v2.copy(rt), a.v3.copy(it), a.normalModel.copy(Y.normal), u === !1 && (lt === THREE.BackSide || lt === THREE.DoubleSide) && a.normalModel.negate(), a.normalModel.applyMatrix3(M).normalize(), a.normalModelView.copy(a.normalModel).applyMatrix3(_), a.centroidModel.copy(Y.centroid).applyMatrix4(A), Z = Y.vertexNormals;
                    for (E = 0, C = Math.min(Z.length, 3); E < C; E++) {
                        var ct = a.vertexNormalsModel[E];
                        ct.copy(Z[E]), u === !1 && (lt === THREE.BackSide || lt === THREE.DoubleSide) && ct.negate(), ct.applyMatrix3(M).normalize();
                        var ht = a.vertexNormalsModelView[E];
                        ht.copy(ct).applyMatrix3(_)
                    }
                    a.vertexNormalsLength = Z.length;
                    for (j = 0, F = Math.min(et.length, 3); j < F; j++) {
                        tt = et[j][y];
                        if (tt === undefined)continue;
                        for (q = 0, $ = tt.length; q < $; q++)a.uvs[j][q] = tt[q]
                    }
                    a.color = Y.color, a.material = ft, D.copy(a.centroidModel).applyProjection(L), a.z = D.z, w.elements.push(a)
                }
            } else if (J instanceof THREE.Line) {
                O.multiplyMatrices(L, A), Q = J.geometry.vertices, nt = R(), nt.positionScreen.copy(Q[0]).applyMatrix4(O);
                var pt = J.type === THREE.LinePieces ? 2 : 1;
                for (d = 1, v = Q.length; d < v; d++) {
                    nt = R(), nt.positionScreen.copy(Q[d]).applyMatrix4(O);
                    if ((d + 1) % pt > 0)continue;
                    rt = o[s - 2], H.copy(nt.positionScreen), B.copy(rt.positionScreen), V(H, B) === !0 && (H.multiplyScalar(1 / H.w), B.multiplyScalar(1 / B.w), h = z(), h.id = J.id, h.v1.positionScreen.copy(H), h.v2.positionScreen.copy(B), h.z = Math.max(H.z, B.z), h.material = J.material, J.material.vertexColors === THREE.VertexColors && (h.vertexColors[0].copy(J.geometry.colors[d]), h.vertexColors[1].copy(J.geometry.colors[d - 1])), w.elements.push(h))
                }
            }
        }
        for (l = 0, c = w.sprites.length; l < c; l++) {
            J = w.sprites[l].object, A = J.matrixWorld;
            if (J instanceof THREE.Particle) {
                S.set(A.elements[12], A.elements[13], A.elements[14], 1), S.applyMatrix4(L);
                var at = 1 / S.w;
                S.z *= at, S.z > 0 && S.z < 1 && (m = W(), m.id = J.id, m.x = S.x * at, m.y = S.y * at, m.z = S.z, m.object = J, m.rotation = J.rotation.z, m.scale.x = J.scale.x * Math.abs(m.x - (S.x + t.projectionMatrix.elements[0]) / (S.w + t.projectionMatrix.elements[12])), m.scale.y = J.scale.y * Math.abs(m.y - (S.y + t.projectionMatrix.elements[5]) / (S.w + t.projectionMatrix.elements[13])), m.material = J.material, w.elements.push(m))
            }
        }
        return r === !0 && w.elements.sort(X), w
    }
},THREE.Face3 = function (e, t, n, r, i, s) {
    this.a = e, this.b = t, this.c = n, this.normal = r instanceof THREE.Vector3 ? r : new THREE.Vector3, this.vertexNormals = r instanceof Array ? r : [], this.color = i instanceof THREE.Color ? i : new THREE.Color, this.vertexColors = i instanceof Array ? i : [], this.vertexTangents = [], this.materialIndex = s !== undefined ? s : 0, this.centroid = new THREE.Vector3
},THREE.Face3.prototype = {
    constructor: THREE.Face3, clone: function () {
        var e = new THREE.Face3(this.a, this.b, this.c);
        e.normal.copy(this.normal), e.color.copy(this.color), e.centroid.copy(this.centroid), e.materialIndex = this.materialIndex;
        var t, n;
        for (t = 0, n = this.vertexNormals.length; t < n; t++)e.vertexNormals[t] = this.vertexNormals[t].clone();
        for (t = 0, n = this.vertexColors.length; t < n; t++)e.vertexColors[t] = this.vertexColors[t].clone();
        for (t = 0, n = this.vertexTangents.length; t < n; t++)e.vertexTangents[t] = this.vertexTangents[t].clone();
        return e
    }
},THREE.Face4 = function (e, t, n, r, i, s, o) {
    return new THREE.Face3(e, t, n, i, s, o)
},THREE.Geometry = function () {
    this.id = THREE.GeometryIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", this.vertices = [], this.colors = [], this.normals = [], this.faces = [], this.faceVertexUvs = [[]], this.morphTargets = [], this.morphColors = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.hasTangents = !1, this.dynamic = !0, this.verticesNeedUpdate = !1, this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.tangentsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.buffersNeedUpdate = !1
},THREE.Geometry.prototype = {
    constructor: THREE.Geometry, applyMatrix: function (e) {
        var t = (new THREE.Matrix3).getNormalMatrix(e);
        for (var n = 0, r = this.vertices.length; n < r; n++) {
            var i = this.vertices[n];
            i.applyMatrix4(e)
        }
        for (var n = 0, r = this.faces.length; n < r; n++) {
            var s = this.faces[n];
            s.normal.applyMatrix3(t).normalize();
            for (var o = 0, u = s.vertexNormals.length; o < u; o++)s.vertexNormals[o].applyMatrix3(t).normalize();
            s.centroid.applyMatrix4(e)
        }
        this.boundingBox instanceof THREE.Box3 && this.computeBoundingBox(), this.boundingSphere instanceof THREE.Sphere && this.computeBoundingSphere()
    }, computeCentroids: function () {
        var e, t, n;
        for (e = 0, t = this.faces.length; e < t; e++)n = this.faces[e], n.centroid.set(0, 0, 0), n.centroid.add(this.vertices[n.a]), n.centroid.add(this.vertices[n.b]), n.centroid.add(this.vertices[n.c]), n.centroid.divideScalar(3)
    }, computeFaceNormals: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3;
        for (var n = 0, r = this.faces.length; n < r; n++) {
            var i = this.faces[n], s = this.vertices[i.a], o = this.vertices[i.b], u = this.vertices[i.c];
            e.subVectors(u, o), t.subVectors(s, o), e.cross(t), e.normalize(), i.normal.copy(e)
        }
    }, computeVertexNormals: function (e) {
        var t, n, r, i, s, o;
        if (this.__tmpVertices === undefined) {
            this.__tmpVertices = new Array(this.vertices.length), o = this.__tmpVertices;
            for (t = 0, n = this.vertices.length; t < n; t++)o[t] = new THREE.Vector3;
            for (r = 0, i = this.faces.length; r < i; r++)s = this.faces[r], s.vertexNormals = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3]
        } else {
            o = this.__tmpVertices;
            for (t = 0, n = this.vertices.length; t < n; t++)o[t].set(0, 0, 0)
        }
        if (e) {
            var u, a, f, l, c = new THREE.Vector3, h = new THREE.Vector3, p = new THREE.Vector3, d = new THREE.Vector3,
                v = new THREE.Vector3;
            for (r = 0, i = this.faces.length; r < i; r++)s = this.faces[r], u = this.vertices[s.a], a = this.vertices[s.b], f = this.vertices[s.c], c.subVectors(f, a), h.subVectors(u, a), c.cross(h), o[s.a].add(c), o[s.b].add(c), o[s.c].add(c)
        } else for (r = 0, i = this.faces.length; r < i; r++)s = this.faces[r], o[s.a].add(s.normal), o[s.b].add(s.normal), o[s.c].add(s.normal);
        for (t = 0, n = this.vertices.length; t < n; t++)o[t].normalize();
        for (r = 0, i = this.faces.length; r < i; r++)s = this.faces[r], s.vertexNormals[0].copy(o[s.a]), s.vertexNormals[1].copy(o[s.b]), s.vertexNormals[2].copy(o[s.c])
    }, computeMorphNormals: function () {
        var e, t, n, r, i;
        for (n = 0, r = this.faces.length; n < r; n++) {
            i = this.faces[n], i.__originalFaceNormal ? i.__originalFaceNormal.copy(i.normal) : i.__originalFaceNormal = i.normal.clone(), i.__originalVertexNormals || (i.__originalVertexNormals = []);
            for (e = 0, t = i.vertexNormals.length; e < t; e++)i.__originalVertexNormals[e] ? i.__originalVertexNormals[e].copy(i.vertexNormals[e]) : i.__originalVertexNormals[e] = i.vertexNormals[e].clone()
        }
        var s = new THREE.Geometry;
        s.faces = this.faces;
        for (e = 0, t = this.morphTargets.length; e < t; e++) {
            if (!this.morphNormals[e]) {
                this.morphNormals[e] = {}, this.morphNormals[e].faceNormals = [], this.morphNormals[e].vertexNormals = [];
                var o = this.morphNormals[e].faceNormals, u = this.morphNormals[e].vertexNormals, a, f;
                for (n = 0, r = this.faces.length; n < r; n++)i = this.faces[n], a = new THREE.Vector3, f = {
                    a: new THREE.Vector3,
                    b: new THREE.Vector3,
                    c: new THREE.Vector3
                }, o.push(a), u.push(f)
            }
            var l = this.morphNormals[e];
            s.vertices = this.morphTargets[e].vertices, s.computeFaceNormals(), s.computeVertexNormals();
            var a, f;
            for (n = 0, r = this.faces.length; n < r; n++)i = this.faces[n], a = l.faceNormals[n], f = l.vertexNormals[n], a.copy(i.normal), f.a.copy(i.vertexNormals[0]), f.b.copy(i.vertexNormals[1]), f.c.copy(i.vertexNormals[2])
        }
        for (n = 0, r = this.faces.length; n < r; n++)i = this.faces[n], i.normal = i.__originalFaceNormal, i.vertexNormals = i.__originalVertexNormals
    }, computeTangents: function () {
        function B(e, t, n, r, i, s, o) {
            f = e.vertices[t], l = e.vertices[n], c = e.vertices[r], h = a[i], p = a[s], d = a[o], v = l.x - f.x, m = c.x - f.x, g = l.y - f.y, y = c.y - f.y, b = l.z - f.z, w = c.z - f.z, E = p.x - h.x, S = d.x - h.x, x = p.y - h.y, T = d.y - h.y, N = 1 / (E * T - S * x), O.set((T * v - x * m) * N, (T * g - x * y) * N, (T * b - x * w) * N), M.set((E * m - S * v) * N, (E * y - S * g) * N, (E * w - S * b) * N), L[t].add(O), L[n].add(O), L[r].add(O), A[t].add(M), A[n].add(M), A[r].add(M)
        }

        var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L = [], A = [],
            O = new THREE.Vector3, M = new THREE.Vector3, _ = new THREE.Vector3, D = new THREE.Vector3,
            P = new THREE.Vector3, H;
        for (n = 0, r = this.vertices.length; n < r; n++)L[n] = new THREE.Vector3, A[n] = new THREE.Vector3;
        for (e = 0, t = this.faces.length; e < t; e++)u = this.faces[e], a = this.faceVertexUvs[0][e], B(this, u.a, u.b, u.c, 0, 1, 2);
        var j = ["a", "b", "c", "d"];
        for (e = 0, t = this.faces.length; e < t; e++) {
            u = this.faces[e];
            for (i = 0; i < Math.min(u.vertexNormals.length, 3); i++)P.copy(u.vertexNormals[i]), o = u[j[i]], C = L[o], _.copy(C), _.sub(P.multiplyScalar(P.dot(C))).normalize(), D.crossVectors(u.vertexNormals[i], C), k = D.dot(A[o]), H = k < 0 ? -1 : 1, u.vertexTangents[i] = new THREE.Vector4(_.x, _.y, _.z, H)
        }
        this.hasTangents = !0
    }, computeLineDistances: function () {
        var e = 0, t = this.vertices;
        for (var n = 0, r = t.length; n < r; n++)n > 0 && (e += t[n].distanceTo(t[n - 1])), this.lineDistances[n] = e
    }, computeBoundingBox: function () {
        this.boundingBox === null && (this.boundingBox = new THREE.Box3), this.boundingBox.setFromPoints(this.vertices)
    }, computeBoundingSphere: function () {
        this.boundingSphere === null && (this.boundingSphere = new THREE.Sphere), this.boundingSphere.setFromPoints(this.vertices)
    }, mergeVertices: function () {
        var e = {}, t = [], n = [], r, i, s = 4, o = Math.pow(10, s), u, a, f, l, c, h, p, d;
        this.__tmpVertices = undefined;
        for (u = 0, a = this.vertices.length; u < a; u++)r = this.vertices[u], i = Math.round(r.x * o) + "_" + Math.round(r.y * o) + "_" + Math.round(r.z * o), e[i] === undefined ? (e[i] = u, t.push(this.vertices[u]), n[u] = t.length - 1) : n[u] = n[e[i]];
        var v = [];
        for (u = 0, a = this.faces.length; u < a; u++) {
            f = this.faces[u], f.a = n[f.a], f.b = n[f.b], f.c = n[f.c], l = [f.a, f.b, f.c];
            var m = -1;
            for (var g = 0; g < 3; g++)if (l[g] == l[(g + 1) % 3]) {
                m = g, v.push(u);
                break
            }
        }
        for (u = v.length - 1; u >= 0; u--) {
            this.faces.splice(u, 1);
            for (h = 0, p = this.faceVertexUvs.length; h < p; h++)this.faceVertexUvs[h].splice(u, 1)
        }
        var y = this.vertices.length - t.length;
        return this.vertices = t, y
    }, clone: function () {
        var e = new THREE.Geometry, t = this.vertices;
        for (var n = 0, r = t.length; n < r; n++)e.vertices.push(t[n].clone());
        var i = this.faces;
        for (var n = 0, r = i.length; n < r; n++)e.faces.push(i[n].clone());
        var s = this.faceVertexUvs[0];
        for (var n = 0, r = s.length; n < r; n++) {
            var o = s[n], u = [];
            for (var a = 0, f = o.length; a < f; a++)u.push(new THREE.Vector2(o[a].x, o[a].y));
            e.faceVertexUvs[0].push(u)
        }
        return e
    }, dispose: function () {
        this.dispatchEvent({type: "dispose"})
    }
},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount = 0,THREE.BufferGeometry = function () {
    this.id = THREE.GeometryIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", this.attributes = {}, this.dynamic = !0, this.offsets = [], this.boundingBox = null, this.boundingSphere = null, this.hasTangents = !1, this.morphTargets = []
},THREE.BufferGeometry.prototype = {
    constructor: THREE.BufferGeometry, applyMatrix: function (e) {
        var t, n;
        this.attributes.position && (t = this.attributes.position.array), this.attributes.normal && (n = this.attributes.normal.array), t !== undefined && (e.multiplyVector3Array(t), this.verticesNeedUpdate = !0);
        if (n !== undefined) {
            var r = (new THREE.Matrix3).getNormalMatrix(e);
            r.multiplyVector3Array(n), this.normalizeNormals(), this.normalsNeedUpdate = !0
        }
    }, computeBoundingBox: function () {
        this.boundingBox === null && (this.boundingBox = new THREE.Box3);
        var e = this.attributes.position.array;
        if (e) {
            var t = this.boundingBox, n, r, i;
            e.length >= 3 && (t.min.x = t.max.x = e[0], t.min.y = t.max.y = e[1], t.min.z = t.max.z = e[2]);
            for (var s = 3,
                     o = e.length; s < o; s += 3)n = e[s], r = e[s + 1], i = e[s + 2], n < t.min.x ? t.min.x = n : n > t.max.x && (t.max.x = n), r < t.min.y ? t.min.y = r : r > t.max.y && (t.max.y = r), i < t.min.z ? t.min.z = i : i > t.max.z && (t.max.z = i)
        }
        if (e === undefined || e.length === 0) this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)
    }, computeBoundingSphere: function () {
        var e = new THREE.Box3, t = new THREE.Vector3;
        return function () {
            this.boundingSphere === null && (this.boundingSphere = new THREE.Sphere);
            var n = this.attributes.position.array;
            if (n) {
                var r = this.boundingSphere.center;
                for (var i = 0, s = n.length; i < s; i += 3)t.set(n[i], n[i + 1], n[i + 2]), e.addPoint(t);
                e.center(r);
                var o = 0;
                for (var i = 0,
                         s = n.length; i < s; i += 3)t.set(n[i], n[i + 1], n[i + 2]), o = Math.max(o, r.distanceToSquared(t));
                this.boundingSphere.radius = Math.sqrt(o)
            }
        }
    }(), computeVertexNormals: function () {
        if (this.attributes.position) {
            var e, t, n, r, i = this.attributes.position.array.length;
            if (this.attributes.normal === undefined) this.attributes.normal = {
                itemSize: 3,
                array: new Float32Array(i)
            }; else for (e = 0, t = this.attributes.normal.array.length; e < t; e++)this.attributes.normal.array[e] = 0;
            var s = this.attributes.position.array, o = this.attributes.normal.array, u, a, f, l, c, h,
                p = new THREE.Vector3, d = new THREE.Vector3, v = new THREE.Vector3, m = new THREE.Vector3,
                g = new THREE.Vector3;
            if (this.attributes.index) {
                var y = this.attributes.index.array, b = this.offsets;
                for (n = 0, r = b.length; n < r; ++n) {
                    var w = b[n].start, E = b[n].count, S = b[n].index;
                    for (e = w, t = w + E; e < t; e += 3)u = S + y[e], a = S + y[e + 1], f = S + y[e + 2], l = s[u * 3], c = s[u * 3 + 1], h = s[u * 3 + 2], p.set(l, c, h), l = s[a * 3], c = s[a * 3 + 1], h = s[a * 3 + 2], d.set(l, c, h), l = s[f * 3], c = s[f * 3 + 1], h = s[f * 3 + 2], v.set(l, c, h), m.subVectors(v, d), g.subVectors(p, d), m.cross(g), o[u * 3] += m.x, o[u * 3 + 1] += m.y, o[u * 3 + 2] += m.z, o[a * 3] += m.x, o[a * 3 + 1] += m.y, o[a * 3 + 2] += m.z, o[f * 3] += m.x, o[f * 3 + 1] += m.y, o[f * 3 + 2] += m.z
                }
            } else for (e = 0, t = s.length; e < t; e += 9)l = s[e], c = s[e + 1], h = s[e + 2], p.set(l, c, h), l = s[e + 3], c = s[e + 4], h = s[e + 5], d.set(l, c, h), l = s[e + 6], c = s[e + 7], h = s[e + 8], v.set(l, c, h), m.subVectors(v, d), g.subVectors(p, d), m.cross(g), o[e] = m.x, o[e + 1] = m.y, o[e + 2] = m.z, o[e + 3] = m.x, o[e + 4] = m.y, o[e + 5] = m.z, o[e + 6] = m.x, o[e + 7] = m.y, o[e + 8] = m.z;
            this.normalizeNormals(), this.normalsNeedUpdate = !0
        }
    }, normalizeNormals: function () {
        var e = this.attributes.normal.array, t, n, r, i;
        for (var s = 0,
                 o = e.length; s < o; s += 3)t = e[s], n = e[s + 1], r = e[s + 2], i = 1 / Math.sqrt(t * t + n * n + r * r), e[s] *= i, e[s + 1] *= i, e[s + 2] *= i
    }, computeTangents: function () {
        function F(e, n, i) {
            l = t[e * 3], c = t[e * 3 + 1], h = t[e * 3 + 2], p = t[n * 3], d = t[n * 3 + 1], v = t[n * 3 + 2], m = t[i * 3], g = t[i * 3 + 1], y = t[i * 3 + 2], b = r[e * 2], w = r[e * 2 + 1], E = r[n * 2], S = r[n * 2 + 1], x = r[i * 2], T = r[i * 2 + 1], N = p - l, C = m - l, k = d - c, L = g - c, A = v - h, O = y - h, M = E - b, _ = x - b, D = S - w, P = T - w, H = 1 / (M * P - _ * D), B.set((P * N - D * C) * H, (P * k - D * L) * H, (P * A - D * O) * H), j.set((M * C - _ * N) * H, (M * L - _ * k) * H, (M * O - _ * A) * H), u[e].add(B), u[n].add(B), u[i].add(B), a[e].add(j), a[n].add(j), a[i].add(j)
        }

        function rt(e) {
            Y.x = n[e * 3], Y.y = n[e * 3 + 1], Y.z = n[e * 3 + 2], Z.copy(Y), tt = u[e], Q.copy(tt), Q.sub(Y.multiplyScalar(Y.dot(tt))).normalize(), G.crossVectors(Z, tt), nt = G.dot(a[e]), et = nt < 0 ? -1 : 1, o[e * 4] = Q.x, o[e * 4 + 1] = Q.y, o[e * 4 + 2] = Q.z, o[e * 4 + 3] = et
        }

        if (this.attributes.index === undefined || this.attributes.position === undefined || this.attributes.normal === undefined || this.attributes.uv === undefined) {
            0;
            return
        }
        var e = this.attributes.index.array, t = this.attributes.position.array, n = this.attributes.normal.array,
            r = this.attributes.uv.array, i = t.length / 3;
        if (this.attributes.tangent === undefined) {
            var s = 4 * i;
            this.attributes.tangent = {itemSize: 4, array: new Float32Array(s)}
        }
        var o = this.attributes.tangent.array, u = [], a = [];
        for (var f = 0; f < i; f++)u[f] = new THREE.Vector3, a[f] = new THREE.Vector3;
        var l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M, _, D, P, H, B = new THREE.Vector3,
            j = new THREE.Vector3, I, q, R, U, z, W, X, V = this.offsets;
        for (R = 0, U = V.length; R < U; ++R) {
            var $ = V[R].start, J = V[R].count, K = V[R].index;
            for (I = $, q = $ + J; I < q; I += 3)z = K + e[I], W = K + e[I + 1], X = K + e[I + 2], F(z, W, X)
        }
        var Q = new THREE.Vector3, G = new THREE.Vector3, Y = new THREE.Vector3, Z = new THREE.Vector3, et, tt, nt;
        for (R = 0, U = V.length; R < U; ++R) {
            var $ = V[R].start, J = V[R].count, K = V[R].index;
            for (I = $, q = $ + J; I < q; I += 3)z = K + e[I], W = K + e[I + 1], X = K + e[I + 2], rt(z), rt(W), rt(X)
        }
        this.hasTangents = !0, this.tangentsNeedUpdate = !0
    }, dispose: function () {
        this.dispatchEvent({type: "dispose"})
    }
},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Camera = function () {
    THREE.Object3D.call(this), this.matrixWorldInverse = new THREE.Matrix4, this.projectionMatrix = new THREE.Matrix4, this.projectionMatrixInverse = new THREE.Matrix4
},THREE.Camera.prototype = Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt = function () {
    var e = new THREE.Matrix4;
    return function (t) {
        e.lookAt(this.position, t, this.up), this.quaternion.setFromRotationMatrix(e)
    }
}(),THREE.Camera.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Camera), THREE.Object3D.prototype.clone.call(this, e), e.matrixWorldInverse.copy(this.matrixWorldInverse), e.projectionMatrix.copy(this.projectionMatrix), e.projectionMatrixInverse.copy(this.projectionMatrixInverse), e
},THREE.OrthographicCamera = function (e, t, n, r, i, s) {
    THREE.Camera.call(this), this.left = e, this.right = t, this.top = n, this.bottom = r, this.near = i !== undefined ? i : .1, this.far = s !== undefined ? s : 2e3, this.updateProjectionMatrix()
},THREE.OrthographicCamera.prototype = Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {
    this.projectionMatrix.makeOrthographic(this.left, this.right, this.top, this.bottom, this.near, this.far)
},THREE.OrthographicCamera.prototype.clone = function () {
    var e = new THREE.OrthographicCamera;
    return THREE.Camera.prototype.clone.call(this, e), e.left = this.left, e.right = this.right, e.top = this.top, e.bottom = this.bottom, e.near = this.near, e.far = this.far, e
},THREE.PerspectiveCamera = function (e, t, n, r) {
    THREE.Camera.call(this), this.fov = e !== undefined ? e : 50, this.aspect = t !== undefined ? t : 1, this.near = n !== undefined ? n : .1, this.far = r !== undefined ? r : 2e3, this.updateProjectionMatrix()
},THREE.PerspectiveCamera.prototype = Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens = function (e, t) {
    t === undefined && (t = 24), this.fov = 2 * THREE.Math.radToDeg(Math.atan(t / (e * 2))), this.updateProjectionMatrix()
},THREE.PerspectiveCamera.prototype.setViewOffset = function (e, t, n, r, i, s) {
    this.fullWidth = e, this.fullHeight = t, this.x = n, this.y = r, this.width = i, this.height = s, this.updateProjectionMatrix()
},THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {
    if (this.fullWidth) {
        var e = this.fullWidth / this.fullHeight, t = Math.tan(THREE.Math.degToRad(this.fov * .5)) * this.near, n = -t,
            r = e * n, i = e * t, s = Math.abs(i - r), o = Math.abs(t - n);
        this.projectionMatrix.makeFrustum(r + this.x * s / this.fullWidth, r + (this.x + this.width) * s / this.fullWidth, t - (this.y + this.height) * o / this.fullHeight, t - this.y * o / this.fullHeight, this.near, this.far)
    } else this.projectionMatrix.makePerspective(this.fov, this.aspect, this.near, this.far)
},THREE.PerspectiveCamera.prototype.clone = function () {
    var e = new THREE.PerspectiveCamera;
    return THREE.Camera.prototype.clone.call(this, e), e.fov = this.fov, e.aspect = this.aspect, e.near = this.near, e.far = this.far, e
},THREE.Light = function (e) {
    THREE.Object3D.call(this), this.color = new THREE.Color(e)
},THREE.Light.prototype = Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Light), THREE.Object3D.prototype.clone.call(this, e), e.color.copy(this.color), e
},THREE.AmbientLight = function (e) {
    THREE.Light.call(this, e)
},THREE.AmbientLight.prototype = Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone = function () {
    var e = new THREE.AmbientLight;
    return THREE.Light.prototype.clone.call(this, e), e
},THREE.AreaLight = function (e, t) {
    THREE.Light.call(this, e), this.normal = new THREE.Vector3(0, -1, 0), this.right = new THREE.Vector3(1, 0, 0), this.intensity = t !== undefined ? t : 1, this.width = 1, this.height = 1, this.constantAttenuation = 1.5, this.linearAttenuation = .5, this.quadraticAttenuation = .1
},THREE.AreaLight.prototype = Object.create(THREE.Light.prototype),THREE.DirectionalLight = function (e, t) {
    THREE.Light.call(this, e), this.position.set(0, 1, 0), this.target = new THREE.Object3D, this.intensity = t !== undefined ? t : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraLeft = -500, this.shadowCameraRight = 500, this.shadowCameraTop = 500, this.shadowCameraBottom = -500, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowCascade = !1, this.shadowCascadeOffset = new THREE.Vector3(0, 0, -1e3), this.shadowCascadeCount = 2, this.shadowCascadeBias = [0, 0, 0], this.shadowCascadeWidth = [512, 512, 512], this.shadowCascadeHeight = [512, 512, 512], this.shadowCascadeNearZ = [-1, .99, .998], this.shadowCascadeFarZ = [.99, .998, 1], this.shadowCascadeArray = [], this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
},THREE.DirectionalLight.prototype = Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone = function () {
    var e = new THREE.DirectionalLight;
    return THREE.Light.prototype.clone.call(this, e), e.target = this.target.clone(), e.intensity = this.intensity, e.castShadow = this.castShadow, e.onlyShadow = this.onlyShadow, e
},THREE.HemisphereLight = function (e, t, n) {
    THREE.Light.call(this, e), this.position.set(0, 100, 0), this.groundColor = new THREE.Color(t), this.intensity = n !== undefined ? n : 1
},THREE.HemisphereLight.prototype = Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone = function () {
    var e = new THREE.HemisphereLight;
    return THREE.Light.prototype.clone.call(this, e), e.groundColor.copy(this.groundColor), e.intensity = this.intensity, e
},THREE.PointLight = function (e, t, n) {
    THREE.Light.call(this, e), this.intensity = t !== undefined ? t : 1, this.distance = n !== undefined ? n : 0
},THREE.PointLight.prototype = Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone = function () {
    var e = new THREE.PointLight;
    return THREE.Light.prototype.clone.call(this, e), e.intensity = this.intensity, e.distance = this.distance, e
},THREE.SpotLight = function (e, t, n, r, i) {
    THREE.Light.call(this, e), this.position.set(0, 1, 0), this.target = new THREE.Object3D, this.intensity = t !== undefined ? t : 1, this.distance = n !== undefined ? n : 0, this.angle = r !== undefined ? r : Math.PI / 3, this.exponent = i !== undefined ? i : 10, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraFov = 50, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
},THREE.SpotLight.prototype = Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone = function () {
    var e = new THREE.SpotLight;
    return THREE.Light.prototype.clone.call(this, e), e.target = this.target.clone(), e.intensity = this.intensity, e.distance = this.distance, e.angle = this.angle, e.exponent = this.exponent, e.castShadow = this.castShadow, e.onlyShadow = this.onlyShadow, e
},THREE.Loader = function (e) {
    this.showStatus = e, this.statusDomElement = e ? THREE.Loader.prototype.addStatusElement() : null, this.onLoadStart = function () {
    }, this.onLoadProgress = function () {
    }, this.onLoadComplete = function () {
    }
},THREE.Loader.prototype = {
    constructor: THREE.Loader, crossOrigin: "anonymous", addStatusElement: function () {
       }, updateProgress: function (e) {
        var t = "Loaded ";
        e.total ? t += (100 * e.loaded / e.total).toFixed(0) + "%" : t += (e.loaded / 1e3).toFixed(2) + " KB", this.statusDomElement.innerHTML = t
    }, extractUrlBase: function (e) {
        var t = e.split("/");
        return t.pop(), (t.length < 1 ? "." : t.join("/")) + "/"
    }, initMaterials: function (e, t) {
        var n = [];
        for (var r = 0; r < e.length; ++r)n[r] = THREE.Loader.prototype.createMaterial(e[r], t);
        return n
    }, needsTangents: function (e) {
        for (var t = 0, n = e.length; t < n; t++) {
            var r = e[t];
            if (r instanceof THREE.ShaderMaterial)return !0
        }
        return !1
    }
},
THREE.XHRLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},THREE.XHRLoader.prototype = {
    constructor: THREE.XHRLoader, load: function (e, t, n, r) {
        var i = this, s = new XMLHttpRequest;
        t !== undefined && s.addEventListener("load", function (n) {
            t(n.target.responseText), i.manager.itemEnd(e)
        }, !1), n !== undefined && s.addEventListener("progress", function (e) {
            n(e)
        }, !1), r !== undefined && s.addEventListener("error", function (e) {
            r(e)
        }, !1), this.crossOrigin !== undefined && (s.crossOrigin = this.crossOrigin), s.open("GET", e, !0), s.send(null), i.manager.itemStart(e)
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }
},THREE.ImageLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},THREE.ImageLoader.prototype = {
    constructor: THREE.ImageLoader, load: function (e, t, n, r) {
        var i = this, s = document.createElement("img");
        t !== undefined && s.addEventListener("load", function (n) {
            i.manager.itemEnd(e), t(this)
        }, !1), n !== undefined && s.addEventListener("progress", function (e) {
            n(e)
        }, !1), r !== undefined && s.addEventListener("error", function (e) {
            r(e)
        }, !1), this.crossOrigin !== undefined && (s.crossOrigin = this.crossOrigin), s.src = e, i.manager.itemStart(e)
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }
},THREE.JSONLoader = function (e) {
    THREE.Loader.call(this, e), this.withCredentials = !1
},THREE.JSONLoader.prototype = Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load = function (e, t, n) {
    var r = this;
    n = n && typeof n == "string" ? n : this.extractUrlBase(e), this.onLoadStart(), this.loadAjaxJSON(this, e, t, n)
},THREE.JSONLoader.prototype.loadAjaxJSON = function (e, t, n, r, i) {
    var s = new XMLHttpRequest, o = 0;
    s.onreadystatechange = function () {
        if (s.readyState === s.DONE)if (s.status === 200 || s.status === 0) {
            if (s.responseText) {
                var u = JSON.parse(s.responseText), a = e.parse(u, r);
                n(a.geometry, a.materials)
            } else 0;
            e.onLoadComplete()
        } else 0; else s.readyState === s.LOADING ? i && (o === 0 && (o = s.getResponseHeader("Content-Length")), i({
                total: o,
                loaded: s.responseText.length
            })) : s.readyState === s.HEADERS_RECEIVED && i !== undefined && (o = s.getResponseHeader("Content-Length"))
    }, s.open("GET", t, !0), s.withCredentials = this.withCredentials, s.send(null)
},THREE.JSONLoader.prototype.parse = function (e, t) {


},THREE.LoadingManager = function (e, t, n) {
    var r = this, i = 0, s = 0;
    this.onLoad = e, this.onProgress = t, this.onError = n, this.itemStart = function (e) {
        s++
    }, this.itemEnd = function (e) {
        i++, r.onProgress !== undefined && r.onProgress(e, i, s), i === s && r.onLoad !== undefined && r.onLoad()
    }
},THREE.DefaultLoadingManager = new THREE.LoadingManager,THREE.BufferGeometryLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},THREE.BufferGeometryLoader.prototype = {
    constructor: THREE.BufferGeometryLoader, load: function (e, t, n, r) {
        var i = this, s = new THREE.XHRLoader;
        s.setCrossOrigin(this.crossOrigin), s.load(e, function (e) {
            t(i.parse(JSON.parse(e)))
        })
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }, parse: function (e) {
        var t = new THREE.BufferGeometry, n = e.attributes, r = e.offsets, i = e.boundingSphere;
        for (var s in n) {
            var o = n[s];
            t.attributes[s] = {itemSize: o.itemSize, array: new self[o.type](o.array)}
        }
        return r !== undefined && (t.offsets = JSON.parse(JSON.stringify(r))), i !== undefined && (t.boundingSphere = new THREE.Sphere((new THREE.Vector3).fromArray(i.center !== undefined ? i.center : [0, 0, 0]), i.radius)), t
    }
},THREE.GeometryLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},THREE.GeometryLoader.prototype = {
    constructor: THREE.GeometryLoader, load: function (e, t, n, r) {
        var i = this, s = new THREE.XHRLoader;
        s.setCrossOrigin(this.crossOrigin), s.load(e, function (e) {
            t(i.parse(JSON.parse(e)))
        })
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }, parse: function (e) {
    }
},THREE.MaterialLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},THREE.MaterialLoader.prototype = {
    constructor: THREE.MaterialLoader, load: function (e, t, n, r) {
        var i = this, s = new THREE.XHRLoader;
        s.setCrossOrigin(this.crossOrigin), s.load(e, function (e) {
            t(i.parse(JSON.parse(e)))
        })
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }, parse: function (e) {
        var t = new THREE[e.type];
        e.color !== undefined && t.color.setHex(e.color), e.ambient !== undefined && t.ambient.setHex(e.ambient), e.emissive !== undefined && t.emissive.setHex(e.emissive), e.specular !== undefined && t.specular.setHex(e.specular), e.shininess !== undefined && (t.shininess = e.shininess), e.vertexColors !== undefined && (t.vertexColors = e.vertexColors), e.blending !== undefined && (t.blending = e.blending), e.opacity !== undefined && (t.opacity = e.opacity), e.transparent !== undefined && (t.transparent = e.transparent), e.wireframe !== undefined && (t.wireframe = e.wireframe);
        if (e.materials !== undefined)for (var n = 0,
                                               r = e.materials.length; n < r; n++)t.materials.push(this.parse(e.materials[n]));
        return t
    }
},THREE.ObjectLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},
THREE.ObjectLoader.prototype = {
    constructor: THREE.ObjectLoader, load: function (e, t, n, r) {
        var i = this, s = new THREE.XHRLoader(i.manager);
        s.setCrossOrigin(this.crossOrigin), s.load(e, function (e) {
            t(i.parse(JSON.parse(e)))
        })
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }, parse: function (e) {
        var t = this.parseGeometries(e.geometries), n = this.parseMaterials(e.materials),
            r = this.parseObject(e.object, t, n);
        return r
    }, parseGeometries: function (e) {
        var t = {};
        if (e !== undefined) {
            var n = new THREE.JSONLoader, r = new THREE.BufferGeometryLoader;
            for (var i = 0, s = e.length; i < s; i++) {
                var o, u = e[i];
                switch (u.type) {
                    case"PlaneGeometry":
                        o = new THREE.PlaneGeometry(u.width, u.height, u.widthSegments, u.heightSegments);
                        break;
                    case"CubeGeometry":
                        o = new THREE.CubeGeometry(u.width, u.height, u.depth, u.widthSegments, u.heightSegments, u.depthSegments);
                        break;
                    case"CylinderGeometry":
                        o = new THREE.CylinderGeometry(u.radiusTop, u.radiusBottom, u.height, u.radiusSegments, u.heightSegments, u.openEnded);
                        break;
                    case"SphereGeometry":
                        o = new THREE.SphereGeometry(u.radius, u.widthSegments, u.heightSegments, u.phiStart, u.phiLength, u.thetaStart, u.thetaLength);
                        break;
                    case"IcosahedronGeometry":
                        o = new THREE.IcosahedronGeometry(u.radius, u.detail);
                        break;
                    case"TorusGeometry":
                        o = new THREE.TorusGeometry(u.radius, u.tube, u.radialSegments, u.tubularSegments, u.arc);
                        break;
                    case"TorusKnotGeometry":
                        o = new THREE.TorusKnotGeometry(u.radius, u.tube, u.radialSegments, u.tubularSegments, u.p, u.q, u.heightScale);
                        break;
                    case"BufferGeometry":
                        o = r.parse(u.data);
                        break;
                    case"Geometry":
                        o = n.parse(u.data).geometry
                }
                o.uuid = u.uuid, u.name !== undefined && (o.name = u.name), t[u.uuid] = o
            }
        }
        return t
    }, parseMaterials: function (e) {
        var t = {};
        if (e !== undefined) {
            var n = new THREE.MaterialLoader;
            for (var r = 0, i = e.length; r < i; r++) {
                var s = e[r], o = n.parse(s);
                o.uuid = s.uuid, s.name !== undefined && (o.name = s.name), t[s.uuid] = o
            }
        }
        return t
    }, parseObject: function () {
        var e = new THREE.Matrix4;
        return function (t, n, r) {
            var i;
            switch (t.type) {
                case"Scene":
                    i = new THREE.Scene;
                    break;
                case"PerspectiveCamera":
                    i = new THREE.PerspectiveCamera(t.fov, t.aspect, t.near, t.far);
                    break;
                case"OrthographicCamera":
                    i = new THREE.OrthographicCamera(t.left, t.right, t.top, t.bottom, t.near, t.far);
                    break;
                case"AmbientLight":
                    i = new THREE.AmbientLight(t.color);
                    break;
                case"DirectionalLight":
                    i = new THREE.DirectionalLight(t.color, t.intensity);
                    break;
                case"PointLight":
                    i = new THREE.PointLight(t.color, t.intensity, t.distance);
                    break;
                case"SpotLight":
                    i = new THREE.SpotLight(t.color, t.intensity, t.distance, t.angle, t.exponent);
                    break;
                case"HemisphereLight":
                    i = new THREE.HemisphereLight(t.color, t.groundColor, t.intensity);
                    break;
                case"Mesh":
                    var s = n[t.geometry], o = r[t.material];
                    s === undefined && 0, o === undefined && 0, i = new THREE.Mesh(s, o);
                    break;
                default:
                    i = new THREE.Object3D
            }
            i.uuid = t.uuid, t.name !== undefined && (i.name = t.name), t.matrix !== undefined ? (e.fromArray(t.matrix), e.decompose(i.position, i.quaternion, i.scale)) : (t.position !== undefined && i.position.fromArray(t.position), t.rotation !== undefined && i.rotation.fromArray(t.rotation), t.scale !== undefined && i.scale.fromArray(t.scale)), t.visible !== undefined && (i.visible = t.visible), t.userData !== undefined && (i.userData = t.userData);
            if (t.children !== undefined)for (var u in t.children)i.add(this.parseObject(t.children[u], n, r));
            return i
        }
    }()
},
THREE.SceneLoader = function () {
    this.onLoadStart = function () {
    }, this.onLoadProgress = function () {
    }, this.onLoadComplete = function () {
    }, this.callbackSync = function () {
    }, this.callbackProgress = function () {
    }, this.geometryHandlers = {}, this.hierarchyHandlers = {}, this.addGeometryHandler("ascii", THREE.JSONLoader)
},
THREE.SceneLoader.prototype = {
    constructor: THREE.SceneLoader, load: function (e, t, n, r) {
        var i = this, s = new THREE.XHRLoader(i.manager);
        s.setCrossOrigin(this.crossOrigin), s.load(e, function (n) {
            i.parse(JSON.parse(n), t, e)
        })
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }, addGeometryHandler: function (e, t) {
        this.geometryHandlers[e] = {loaderClass: t}
    }, addHierarchyHandler: function (e, t) {
        this.hierarchyHandlers[e] = {loaderClass: t}
    }, parse: function (e, t, n) {
        function k(e, t) {
            return t == "relativeToHTML" ? e : i + "/" + e
        }

        function L() {
            A(b.scene, E.objects)
        }

        function A(e, t) {
            var n, i, a, f, l, c;
            for (var v in t) {
                var m = b.objects[v], g = t[v];
                if (m === undefined) {
                    if (g.type && g.type in r.hierarchyHandlers) {
                        if (g.loading === undefined) {
                            var y = {
                                type: 1,
                                url: 1,
                                material: 1,
                                position: 1,
                                rotation: 1,
                                scale: 1,
                                visible: 1,
                                children: 1,
                                userData: 1,
                                skin: 1,
                                morph: 1,
                                mirroredLoop: 1,
                                duration: 1
                            }, S = {};
                            for (var x in g)x in y || (S[x] = g[x]);
                            o = b.materials[g.material], g.loading = !0;
                            var T = r.hierarchyHandlers[g.type].loaderObject;
                            T.options ? T.load(k(g.url, E.urlBaseType), D(v, e, o, g)) : T.load(k(g.url, E.urlBaseType), D(v, e, o, g), S)
                        }
                    } else if (g.geometry !== undefined) {
                        s = b.geometries[g.geometry];
                        if (s) {
                            var N = !1;
                            o = b.materials[g.material], N = o instanceof THREE.ShaderMaterial, a = g.position, f = g.rotation, l = g.scale, n = g.matrix, c = g.quaternion, g.material || (o = new THREE.MeshFaceMaterial(b.face_materials[g.geometry])), o instanceof THREE.MeshFaceMaterial && o.materials.length === 0 && (o = new THREE.MeshFaceMaterial(b.face_materials[g.geometry]));
                            if (o instanceof THREE.MeshFaceMaterial)for (var C = 0; C < o.materials.length; C++)N = N || o.materials[C] instanceof THREE.ShaderMaterial;
                            N && s.computeTangents(), g.skin ? m = new THREE.SkinnedMesh(s, o) : g.morph ? (m = new THREE.MorphAnimMesh(s, o), g.duration !== undefined && (m.duration = g.duration), g.time !== undefined && (m.time = g.time), g.mirroredLoop !== undefined && (m.mirroredLoop = g.mirroredLoop), o.morphNormals && s.computeMorphNormals()) : m = new THREE.Mesh(s, o), m.name = v, n ? (m.matrixAutoUpdate = !1, m.matrix.set(n[0], n[1], n[2], n[3], n[4], n[5], n[6], n[7], n[8], n[9], n[10], n[11], n[12], n[13], n[14], n[15])) : (m.position.fromArray(a), c ? m.quaternion.fromArray(c) : m.rotation.fromArray(f), m.scale.fromArray(l)), m.visible = g.visible, m.castShadow = g.castShadow, m.receiveShadow = g.receiveShadow, e.add(m), b.objects[v] = m
                        }
                    } else g.type === "DirectionalLight" || g.type === "PointLight" || g.type === "AmbientLight" ? (p = g.color !== undefined ? g.color : 16777215, d = g.intensity !== undefined ? g.intensity : 1, g.type === "DirectionalLight" ? (a = g.direction, h = new THREE.DirectionalLight(p, d), h.position.fromArray(a), g.target && (w.push({
                        object: h,
                        targetName: g.target
                    }), h.target = null)) : g.type === "PointLight" ? (a = g.position, i = g.distance, h = new THREE.PointLight(p, d, i), h.position.fromArray(a)) : g.type === "AmbientLight" && (h = new THREE.AmbientLight(p)), e.add(h), h.name = v, b.lights[v] = h, b.objects[v] = h) : g.type === "PerspectiveCamera" || g.type === "OrthographicCamera" ? (a = g.position, f = g.rotation, c = g.quaternion, g.type === "PerspectiveCamera" ? u = new THREE.PerspectiveCamera(g.fov, g.aspect, g.near, g.far) : g.type === "OrthographicCamera" && (u = new THREE.OrthographicCamera(g.left, g.right, g.top, g.bottom, g.near, g.far)), u.name = v, u.position.fromArray(a), c !== undefined ? u.quaternion.fromArray(c) : f !== undefined && u.rotation.fromArray(f), e.add(u), b.cameras[v] = u, b.objects[v] = u) : (a = g.position, f = g.rotation, l = g.scale, c = g.quaternion, m = new THREE.Object3D, m.name = v, m.position.fromArray(a), c ? m.quaternion.fromArray(c) : m.rotation.fromArray(f), m.scale.fromArray(l), m.visible = g.visible !== undefined ? g.visible : !1, e.add(m), b.objects[v] = m, b.empties[v] = m);
                    if (m) {
                        if (g.userData !== undefined)for (var L in g.userData) {
                            var O = g.userData[L];
                            m.userData[L] = O
                        }
                        if (g.groups !== undefined)for (var C = 0; C < g.groups.length; C++) {
                            var M = g.groups[C];
                            b.groups[M] === undefined && (b.groups[M] = []), b.groups[M].push(v)
                        }
                    }
                }
                m !== undefined && g.children !== undefined && A(m, g.children)
            }
        }

        function O(e, t, n) {
            b.geometries[n] = e, b.face_materials[n] = t, L()
        }

        function M(e, t, n, r, i) {
            var s = i.position, o = i.rotation, u = i.quaternion, a = i.scale;
            e.position.fromArray(s), u ? e.quaternion.fromArray(u) : e.rotation.fromArray(o), e.scale.fromArray(a), r && e.traverse(function (e) {
                e.material = r
            });
            var f = i.visible !== undefined ? i.visible : !0;
            e.traverse(function (e) {
                e.visible = f
            }), n.add(e), e.name = t, b.objects[t] = e, L()
        }

        function _(e) {
            return function (t, n) {
                t.name = e, O(t, n, e), v -= 1, r.onLoadComplete(), H()
            }
        }

        function D(e, t, n, i) {
            return function (s) {
                var o;
                s.content ? o = s.content : s.dae ? o = s.scene : o = s, M(o, e, t, n, i), v -= 1, r.onLoadComplete(), H()
            }
        }

        function P(e) {
            return function (t, n) {
                t.name = e, b.geometries[e] = t, b.face_materials[e] = n
            }
        }

        function H() {
            var e = {totalModels: g, totalTextures: y, loadedModels: g - v, loadedTextures: y - m};
            r.callbackProgress(e, b), r.onLoadProgress(), v === 0 && m === 0 && (B(), t(b))
        }

        function B() {
            for (var e = 0; e < w.length; e++) {
                var t = w[e], n = b.objects[t.targetName];
                n ? t.object.target = n : (t.object.target = new THREE.Object3D, b.scene.add(t.object.target)), t.object.target.userData.targetInverse = t.object
            }
        }

        function I(e, t) {
            t(e);
            if (e.children !== undefined)for (var n in e.children)I(e.children[n], t)
        }

        var r = this, i = THREE.Loader.prototype.extractUrlBase(n), s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w = [],
            E = e;
        for (var S in this.geometryHandlers) {
            var x = this.geometryHandlers[S].loaderClass;
            this.geometryHandlers[S].loaderObject = new x
        }
        for (var S in this.hierarchyHandlers) {
            var x = this.hierarchyHandlers[S].loaderClass;
            this.hierarchyHandlers[S].loaderObject = new x
        }
        v = 0, m = 0, b = {
            scene: new THREE.Scene,
            geometries: {},
            face_materials: {},
            materials: {},
            textures: {},
            objects: {},
            cameras: {},
            lights: {},
            fogs: {},
            empties: {},
            groups: {}
        };
        if (E.transform) {
            var T = E.transform.position, N = E.transform.rotation, C = E.transform.scale;
            T && b.scene.position.fromArray(T), N && b.scene.rotation.fromArray(N), C && b.scene.scale.fromArray(C);
            if (T || N || C) b.scene.updateMatrix(), b.scene.updateMatrixWorld()
        }
        var j = function (e) {
            m -= e, H(), r.onLoadComplete()
        }, F = function (e) {
            return function () {
                j(e)
            }
        }, q, R;
        for (q in E.fogs)R = E.fogs[q], R.type === "linear" ? a = new THREE.Fog(0, R.near, R.far) : R.type === "exp2" && (a = new THREE.FogExp2(0, R.density)), c = R.color, a.color.setRGB(c[0], c[1], c[2]), b.fogs[q] = a;
        var U, z;
        for (U in E.geometries)z = E.geometries[U], z.type in this.geometryHandlers && (v += 1, r.onLoadStart());
        for (var W in E.objects)I(E.objects[W], function (e) {
            e.type && e.type in r.hierarchyHandlers && (v += 1, r.onLoadStart())
        });
        g = v;
        for (U in E.geometries) {
            z = E.geometries[U];
            if (z.type === "cube") s = new THREE.CubeGeometry(z.width, z.height, z.depth, z.widthSegments, z.heightSegments, z.depthSegments), s.name = U, b.geometries[U] = s; else if (z.type === "plane") s = new THREE.PlaneGeometry(z.width, z.height, z.widthSegments, z.heightSegments), s.name = U, b.geometries[U] = s; else if (z.type === "sphere") s = new THREE.SphereGeometry(z.radius, z.widthSegments, z.heightSegments), s.name = U, b.geometries[U] = s; else if (z.type === "cylinder") s = new THREE.CylinderGeometry(z.topRad, z.botRad, z.height, z.radSegs, z.heightSegs), s.name = U, b.geometries[U] = s; else if (z.type === "torus") s = new THREE.TorusGeometry(z.radius, z.tube, z.segmentsR, z.segmentsT), s.name = U, b.geometries[U] = s; else if (z.type === "icosahedron") s = new THREE.IcosahedronGeometry(z.radius, z.subdivisions), s.name = U, b.geometries[U] = s; else if (z.type in this.geometryHandlers) {
                var X = {};
                for (var V in z)V !== "type" && V !== "url" && (X[V] = z[V]);
                var $ = this.geometryHandlers[z.type].loaderObject;
                $.load(k(z.url, E.urlBaseType), _(U), X)
            } else if (z.type === "embedded") {
                var J = E.embeds[z.id], K = "";
                J.metadata = E.metadata;
                if (J) {
                    var Q = this.geometryHandlers.ascii.loaderObject, G = Q.parse(J, K);
                    P(U)(G.geometry, G.materials)
                }
            }
        }
        var Y, Z;
        for (Y in E.textures) {
            Z = E.textures[Y];
            if (Z.url instanceof Array) {
                m += Z.url.length;
                for (var et = 0; et < Z.url.length; et++)r.onLoadStart()
            } else m += 1, r.onLoadStart()
        }
        y = m;
        for (Y in E.textures) {
            Z = E.textures[Y], Z.mapping !== undefined && THREE[Z.mapping] !== undefined && (Z.mapping = new THREE[Z.mapping]);
            if (Z.url instanceof Array) {
                var tt = Z.url.length, nt = [];
                for (var rt = 0; rt < tt; rt++)nt[rt] = k(Z.url[rt], E.urlBaseType);
                var it = /\.dds$/i.test(nt[0]);
                it ? f = THREE.ImageUtils.loadCompressedTextureCube(nt, Z.mapping, F(tt)) : f = THREE.ImageUtils.loadTextureCube(nt, Z.mapping, F(tt))
            } else {
                var it = /\.dds$/i.test(Z.url), st = k(Z.url, E.urlBaseType), ot = F(1);
                it ? f = THREE.ImageUtils.loadCompressedTexture(st, Z.mapping, ot) : f = THREE.ImageUtils.loadTexture(st, Z.mapping, ot), THREE[Z.minFilter] !== undefined && (f.minFilter = THREE[Z.minFilter]), THREE[Z.magFilter] !== undefined && (f.magFilter = THREE[Z.magFilter]), Z.anisotropy && (f.anisotropy = Z.anisotropy), Z.repeat && (f.repeat.set(Z.repeat[0], Z.repeat[1]), Z.repeat[0] !== 1 && (f.wrapS = THREE.RepeatWrapping), Z.repeat[1] !== 1 && (f.wrapT = THREE.RepeatWrapping)), Z.offset && f.offset.set(Z.offset[0], Z.offset[1]);
                if (Z.wrap) {
                    var ut = {repeat: THREE.RepeatWrapping, mirror: THREE.MirroredRepeatWrapping};
                    ut[Z.wrap[0]] !== undefined && (f.wrapS = ut[Z.wrap[0]]), ut[Z.wrap[1]] !== undefined && (f.wrapT = ut[Z.wrap[1]])
                }
            }
            b.textures[Y] = f
        }
        var at, ft, lt;
        for (at in E.materials) {
            ft = E.materials[at];
            for (lt in ft.parameters)if (lt === "envMap" || lt === "map" || lt === "lightMap" || lt === "bumpMap") ft.parameters[lt] = b.textures[ft.parameters[lt]]; else if (lt === "shading") ft.parameters[lt] = ft.parameters[lt] === "flat" ? THREE.FlatShading : THREE.SmoothShading; else if (lt === "side") ft.parameters[lt] == "double" ? ft.parameters[lt] = THREE.DoubleSide : ft.parameters[lt] == "back" ? ft.parameters[lt] = THREE.BackSide : ft.parameters[lt] = THREE.FrontSide; else if (lt === "blending") ft.parameters[lt] = ft.parameters[lt] in THREE ? THREE[ft.parameters[lt]] : THREE.NormalBlending; else if (lt === "combine") ft.parameters[lt] = ft.parameters[lt] in THREE ? THREE[ft.parameters[lt]] : THREE.MultiplyOperation; else if (lt === "vertexColors") ft.parameters[lt] == "face" ? ft.parameters[lt] = THREE.FaceColors : ft.parameters[lt] && (ft.parameters[lt] = THREE.VertexColors); else if (lt === "wrapRGB") {
                var ct = ft.parameters[lt];
                ft.parameters[lt] = new THREE.Vector3(ct[0], ct[1], ct[2])
            }
            ft.parameters.opacity !== undefined && ft.parameters.opacity < 1 && (ft.parameters.transparent = !0);
            if (ft.parameters.normalMap) {
                var ht = THREE.ShaderLib.normalmap, pt = THREE.UniformsUtils.clone(ht.uniforms),
                    dt = ft.parameters.color, vt = ft.parameters.specular, mt = ft.parameters.ambient,
                    gt = ft.parameters.shininess;
                pt.tNormal.value = b.textures[ft.parameters.normalMap], ft.parameters.normalScale && pt.uNormalScale.value.set(ft.parameters.normalScale[0], ft.parameters.normalScale[1]), ft.parameters.map && (pt.tDiffuse.value = ft.parameters.map, pt.enableDiffuse.value = !0), ft.parameters.envMap && (pt.tCube.value = ft.parameters.envMap, pt.enableReflection.value = !0, pt.uReflectivity.value = ft.parameters.reflectivity), ft.parameters.lightMap && (pt.tAO.value = ft.parameters.lightMap, pt.enableAO.value = !0), ft.parameters.specularMap && (pt.tSpecular.value = b.textures[ft.parameters.specularMap], pt.enableSpecular.value = !0), ft.parameters.displacementMap && (pt.tDisplacement.value = b.textures[ft.parameters.displacementMap], pt.enableDisplacement.value = !0, pt.uDisplacementBias.value = ft.parameters.displacementBias, pt.uDisplacementScale.value = ft.parameters.displacementScale), pt.uDiffuseColor.value.setHex(dt), pt.uSpecularColor.value.setHex(vt), pt.uAmbientColor.value.setHex(mt), pt.uShininess.value = gt, ft.parameters.opacity && (pt.uOpacity.value = ft.parameters.opacity);
                var yt = {
                    fragmentShader: ht.fragmentShader,
                    vertexShader: ht.vertexShader,
                    uniforms: pt,
                    lights: !0,
                    fog: !0
                };
                o = new THREE.ShaderMaterial(yt)
            } else o = new THREE[ft.type](ft.parameters);
            o.name = at, b.materials[at] = o
        }
        for (at in E.materials) {
            ft = E.materials[at];
            if (ft.parameters.materials) {
                var bt = [];
                for (var rt = 0; rt < ft.parameters.materials.length; rt++) {
                    var wt = ft.parameters.materials[rt];
                    bt.push(b.materials[wt])
                }
                b.materials[at].materials = bt
            }
        }
        L(), b.cameras && E.defaults.camera && (b.currentCamera = b.cameras[E.defaults.camera]), b.fogs && E.defaults.fog && (b.scene.fog = b.fogs[E.defaults.fog]), r.callbackSync(b), H()
    }
},
THREE.TextureLoader = function (e) {
    this.manager = e !== undefined ? e : THREE.DefaultLoadingManager
},
THREE.TextureLoader.prototype = {
    constructor: THREE.TextureLoader, load: function (e, t, n, r) {
        var i = this, s = new THREE.ImageLoader(i.manager);
        s.setCrossOrigin(this.crossOrigin), s.load(e, function (e) {
            var n = new THREE.Texture(e);
            n.needsUpdate = !0, t !== undefined && t(n)
        })
    }, setCrossOrigin: function (e) {
        this.crossOrigin = e
    }
},
THREE.Material = function () {
    this.id = THREE.MaterialIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", this.side = THREE.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = THREE.NormalBlending, this.blendSrc = THREE.SrcAlphaFactor, this.blendDst = THREE.OneMinusSrcAlphaFactor, this.blendEquation = THREE.AddEquation, this.depthTest = !0, this.depthWrite = !0, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.overdraw = 0, this.visible = !0, this.needsUpdate = !0
},
THREE.Material.prototype = {
    constructor: THREE.Material, setValues: function (e) {
        if (e === undefined)return;
        for (var t in e) {
            var n = e[t];
            if (n === undefined) {
                0;
                continue
            }
            if (t in this) {
                var r = this[t];
                r instanceof THREE.Color ? r.set(n) : r instanceof THREE.Vector3 && n instanceof THREE.Vector3 ? r.copy(n) : t == "overdraw" ? this[t] = Number(n) : this[t] = n
            }
        }
    }, clone: function (e) {
        return e === undefined && (e = new THREE.Material), e.name = this.name, e.side = this.side, e.opacity = this.opacity, e.transparent = this.transparent, e.blending = this.blending, e.blendSrc = this.blendSrc, e.blendDst = this.blendDst, e.blendEquation = this.blendEquation, e.depthTest = this.depthTest, e.depthWrite = this.depthWrite, e.polygonOffset = this.polygonOffset, e.polygonOffsetFactor = this.polygonOffsetFactor, e.polygonOffsetUnits = this.polygonOffsetUnits, e.alphaTest = this.alphaTest, e.overdraw = this.overdraw, e.visible = this.visible, e
    }, dispose: function () {
        this.dispatchEvent({type: "dispose"})
    }
},
THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),
THREE.MaterialIdCount = 0,
THREE.LineBasicMaterial = function (e) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.vertexColors = !1, this.fog = !0, this.setValues(e)
},
THREE.LineBasicMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.LineBasicMaterial.prototype.clone = function () {
    var e = new THREE.LineBasicMaterial;
    return THREE.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.linewidth = this.linewidth, e.linecap = this.linecap, e.linejoin = this.linejoin, e.vertexColors = this.vertexColors, e.fog = this.fog, e
},
THREE.LineDashedMaterial = function (e) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(e)
},
THREE.LineDashedMaterial.prototype = Object.create(THREE.Material.prototype),
THREE.LineDashedMaterial.prototype.clone = function () {
    var e = new THREE.LineDashedMaterial;
    return THREE.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.linewidth = this.linewidth, e.scale = this.scale, e.dashSize = this.dashSize, e.gapSize = this.gapSize, e.vertexColors = this.vertexColors, e.fog = this.fog, e
},

THREE.MeshFaceMaterial = function (e) {
    this.materials = e instanceof Array ? e : []
},
THREE.MeshFaceMaterial.prototype.clone = function () {
    return new THREE.MeshFaceMaterial(this.materials.slice(0))
},
THREE.ParticleBasicMaterial = function (e) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.vertexColors = !1, this.fog = !0, this.setValues(e)
},THREE.ParticleBasicMaterial.prototype = Object.create(THREE.Material.prototype),THREE.ParticleBasicMaterial.prototype.clone = function () {
    var e = new THREE.ParticleBasicMaterial;
    return THREE.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.map = this.map, e.size = this.size, e.sizeAttenuation = this.sizeAttenuation, e.vertexColors = this.vertexColors, e.fog = this.fog, e
},THREE.ParticleCanvasMaterial = function (e) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.program = function (e, t) {
    }, this.setValues(e)
},THREE.ParticleCanvasMaterial.prototype = Object.create(THREE.Material.prototype),THREE.ParticleCanvasMaterial.prototype.clone = function () {
    var e = new THREE.ParticleCanvasMaterial;
    return THREE.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.program = this.program, e
},THREE.ShaderMaterial = function (e) {
    THREE.Material.call(this), this.fragmentShader = "void main() {}", this.vertexShader = "void main() {}", this.uniforms = {}, this.defines = {}, this.attributes = null, this.shading = THREE.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.defaultAttributeValues = {
        color: [1, 1, 1],
        uv: [0, 0],
        uv2: [0, 0]
    }, this.index0AttributeName = "position", this.setValues(e)
},THREE.ShaderMaterial.prototype = Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone = function () {
    var e = new THREE.ShaderMaterial;
    return THREE.Material.prototype.clone.call(this, e), e.fragmentShader = this.fragmentShader, e.vertexShader = this.vertexShader, e.uniforms = THREE.UniformsUtils.clone(this.uniforms), e.attributes = this.attributes, e.defines = this.defines, e.shading = this.shading, e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e.fog = this.fog, e.lights = this.lights, e.vertexColors = this.vertexColors, e.skinning = this.skinning, e.morphTargets = this.morphTargets, e.morphNormals = this.morphNormals, e
},THREE.SpriteMaterial = function (e) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.map = new THREE.Texture, this.useScreenCoordinates = !0, this.depthTest = !this.useScreenCoordinates, this.sizeAttenuation = !this.useScreenCoordinates, this.scaleByViewport = !this.sizeAttenuation, this.alignment = THREE.SpriteAlignment.center.clone(), this.fog = !1, this.uvOffset = new THREE.Vector2(0, 0), this.uvScale = new THREE.Vector2(1, 1), this.setValues(e), e = e || {}, e.depthTest === undefined && (this.depthTest = !this.useScreenCoordinates), e.sizeAttenuation === undefined && (this.sizeAttenuation = !this.useScreenCoordinates), e.scaleByViewport === undefined && (this.scaleByViewport = !this.sizeAttenuation)
},THREE.SpriteMaterial.prototype = Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone = function () {
    var e = new THREE.SpriteMaterial;
    return THREE.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.map = this.map, e.useScreenCoordinates = this.useScreenCoordinates, e.sizeAttenuation = this.sizeAttenuation, e.scaleByViewport = this.scaleByViewport, e.alignment.copy(this.alignment), e.uvOffset.copy(this.uvOffset), e.uvScale.copy(this.uvScale), e.fog = this.fog, e
},THREE.SpriteAlignment = {},THREE.SpriteAlignment.topLeft = new THREE.Vector2(1, -1),THREE.SpriteAlignment.topCenter = new THREE.Vector2(0, -1),THREE.SpriteAlignment.topRight = new THREE.Vector2(-1, -1),THREE.SpriteAlignment.centerLeft = new THREE.Vector2(1, 0),THREE.SpriteAlignment.center = new THREE.Vector2(0, 0),THREE.SpriteAlignment.centerRight = new THREE.Vector2(-1, 0),THREE.SpriteAlignment.bottomLeft = new THREE.Vector2(1, 1),THREE.SpriteAlignment.bottomCenter = new THREE.Vector2(0, 1),THREE.SpriteAlignment.bottomRight = new THREE.Vector2(-1, 1),THREE.Texture = function (e, t, n, r, i, s, o, u, a) {
    this.id = THREE.TextureIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", this.image = e, this.mipmaps = [], this.mapping = t !== undefined ? t : new THREE.UVMapping, this.wrapS = n !== undefined ? n : THREE.ClampToEdgeWrapping, this.wrapT = r !== undefined ? r : THREE.ClampToEdgeWrapping, this.magFilter = i !== undefined ? i : THREE.LinearFilter, this.minFilter = s !== undefined ? s : THREE.LinearMipMapLinearFilter, this.anisotropy = a !== undefined ? a : 1, this.format = o !== undefined ? o : THREE.RGBAFormat, this.type = u !== undefined ? u : THREE.UnsignedByteType, this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.needsUpdate = !1, this.onUpdate = null
},THREE.Texture.prototype = {
    constructor: THREE.Texture, clone: function (e) {
        return e === undefined && (e = new THREE.Texture), e.image = this.image, e.mipmaps = this.mipmaps.slice(0), e.mapping = this.mapping, e.wrapS = this.wrapS, e.wrapT = this.wrapT, e.magFilter = this.magFilter, e.minFilter = this.minFilter, e.anisotropy = this.anisotropy, e.format = this.format, e.type = this.type, e.offset.copy(this.offset), e.repeat.copy(this.repeat), e.generateMipmaps = this.generateMipmaps, e.premultiplyAlpha = this.premultiplyAlpha, e.flipY = this.flipY, e.unpackAlignment = this.unpackAlignment, e
    }, dispose: function () {
        this.dispatchEvent({type: "dispose"})
    }
},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount = 0,THREE.CompressedTexture = function (e, t, n, r, i, s, o, u, a, f, l) {
    THREE.Texture.call(this, null, s, o, u, a, f, r, i, l), this.image = {
        width: t,
        height: n
    }, this.mipmaps = e, this.generateMipmaps = !1
},THREE.CompressedTexture.prototype = Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone = function () {
    var e = new THREE.CompressedTexture;
    return THREE.Texture.prototype.clone.call(this, e), e
},THREE.DataTexture = function (e, t, n, r, i, s, o, u, a, f, l) {
    THREE.Texture.call(this, null, s, o, u, a, f, r, i, l), this.image = {data: e, width: t, height: n}
},THREE.DataTexture.prototype = Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone = function () {
    var e = new THREE.DataTexture;
    return THREE.Texture.prototype.clone.call(this, e), e
},THREE.Particle = function (e) {
    THREE.Object3D.call(this), this.material = e
},THREE.Particle.prototype = Object.create(THREE.Object3D.prototype),THREE.Particle.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Particle(this.material)), THREE.Object3D.prototype.clone.call(this, e), e
},THREE.ParticleSystem = function (e, t) {
    THREE.Object3D.call(this), this.geometry = e !== undefined ? e : new THREE.Geometry, this.material = t !== undefined ? t : new THREE.ParticleBasicMaterial({color: Math.random() * 16777215}), this.sortParticles = !1, this.frustumCulled = !1
},THREE.ParticleSystem.prototype = Object.create(THREE.Object3D.prototype),THREE.ParticleSystem.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.ParticleSystem(this.geometry, this.material)), e.sortParticles = this.sortParticles, THREE.Object3D.prototype.clone.call(this, e), e
},THREE.Line = function (e, t, n) {
    THREE.Object3D.call(this), this.geometry = e !== undefined ? e : new THREE.Geometry, this.material = t !== undefined ? t : new THREE.LineBasicMaterial({color: Math.random() * 16777215}), this.type = n !== undefined ? n : THREE.LineStrip
},THREE.LineStrip = 0,THREE.LinePieces = 1,THREE.Line.prototype = Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Line(this.geometry, this.material, this.type)), THREE.Object3D.prototype.clone.call(this, e), e
},THREE.Mesh = function (e, t) {
    THREE.Object3D.call(this), this.geometry = e !== undefined ? e : new THREE.Geometry, this.material = t !== undefined ? t : new THREE.MeshBasicMaterial({color: Math.random() * 16777215}), this.updateMorphTargets()
},THREE.Mesh.prototype = Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets = function () {
    if (this.geometry.morphTargets.length > 0) {
        this.morphTargetBase = -1, this.morphTargetForcedOrder = [], this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (var e = 0,
                 t = this.geometry.morphTargets.length; e < t; e++)this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[e].name] = e
    }
},THREE.Mesh.prototype.getMorphTargetIndexByName = function (e) {
    return this.morphTargetDictionary[e] !== undefined ? this.morphTargetDictionary[e] : (0, 0)
},THREE.Mesh.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Mesh(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, e), e
},THREE.Bone = function (e) {
    THREE.Object3D.call(this), this.skin = e, this.skinMatrix = new THREE.Matrix4
},THREE.Bone.prototype = Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update = function (e, t) {
    this.matrixAutoUpdate && (t |= this.updateMatrix());
    if (t || this.matrixWorldNeedsUpdate) e ? this.skinMatrix.multiplyMatrices(e, this.matrix) : this.skinMatrix.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, t = !0;
    var n, r, i = this.children.length;
    for (r = 0; r < i; r++)this.children[r].update(this.skinMatrix, t)
},THREE.SkinnedMesh = function (e, t, n) {
    THREE.Mesh.call(this, e, t), this.useVertexTexture = n !== undefined ? n : !0, this.identityMatrix = new THREE.Matrix4, this.bones = [], this.boneMatrices = [];
    var r, i, s, o, u, a;
    if (this.geometry && this.geometry.bones !== undefined) {
        for (r = 0; r < this.geometry.bones.length; r++)s = this.geometry.bones[r], o = s.pos, u = s.rotq, a = s.scl, i = this.addBone(), i.name = s.name, i.position.set(o[0], o[1], o[2]), i.quaternion.set(u[0], u[1], u[2], u[3]), a !== undefined ? i.scale.set(a[0], a[1], a[2]) : i.scale.set(1, 1, 1);
        for (r = 0; r < this.bones.length; r++)s = this.geometry.bones[r], i = this.bones[r], s.parent === -1 ? this.add(i) : this.bones[s.parent].add(i);
        var f = this.bones.length;
        if (this.useVertexTexture) {
            var l;
            f > 256 ? l = 64 : f > 64 ? l = 32 : f > 16 ? l = 16 : l = 8, this.boneTextureWidth = l, this.boneTextureHeight = l, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new THREE.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType), this.boneTexture.minFilter = THREE.NearestFilter, this.boneTexture.magFilter = THREE.NearestFilter, this.boneTexture.generateMipmaps = !1, this.boneTexture.flipY = !1
        } else this.boneMatrices = new Float32Array(16 * f);
        this.pose()
    }
},THREE.SkinnedMesh.prototype = Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.addBone = function (e) {
    return e === undefined && (e = new THREE.Bone(this)), this.bones.push(e), e
},THREE.SkinnedMesh.prototype.updateMatrixWorld = function () {
    var e = new THREE.Matrix4;
    return function (t) {
        this.matrixAutoUpdate && this.updateMatrix();
        if (this.matrixWorldNeedsUpdate || t) this.parent ? this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix) : this.matrixWorld.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, t = !0;
        for (var n = 0, r = this.children.length; n < r; n++) {
            var i = this.children[n];
            i instanceof THREE.Bone ? i.update(this.identityMatrix, !1) : i.updateMatrixWorld(!0)
        }
        if (this.boneInverses == undefined) {
            this.boneInverses = [];
            for (var s = 0, o = this.bones.length; s < o; s++) {
                var u = new THREE.Matrix4;
                u.getInverse(this.bones[s].skinMatrix), this.boneInverses.push(u)
            }
        }
        for (var s = 0,
                 o = this.bones.length; s < o; s++)e.multiplyMatrices(this.bones[s].skinMatrix, this.boneInverses[s]), e.flattenToArrayOffset(this.boneMatrices, s * 16);
        this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
    }
}(),THREE.SkinnedMesh.prototype.pose = function () {
    this.updateMatrixWorld(!0), this.normalizeSkinWeights()
},THREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {
    if (this.geometry instanceof THREE.Geometry)for (var e = 0; e < this.geometry.skinIndices.length; e++) {
        var t = this.geometry.skinWeights[e], n = 1 / t.lengthManhattan();
        n !== Infinity ? t.multiplyScalar(n) : t.set(1)
    }
},THREE.SkinnedMesh.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.SkinnedMesh(this.geometry, this.material, this.useVertexTexture)), THREE.Mesh.prototype.clone.call(this, e), e
},THREE.MorphAnimMesh = function (e, t) {
    THREE.Mesh.call(this, e, t), this.duration = 1e3, this.mirroredLoop = !1, this.time = 0, this.lastKeyframe = 0, this.currentKeyframe = 0, this.direction = 1, this.directionBackwards = !1, this.setFrameRange(0, this.geometry.morphTargets.length - 1)
},THREE.MorphAnimMesh.prototype = Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange = function (e, t) {
    this.startKeyframe = e, this.endKeyframe = t, this.length = this.endKeyframe - this.startKeyframe + 1
},THREE.MorphAnimMesh.prototype.setDirectionForward = function () {
    this.direction = 1, this.directionBackwards = !1
},THREE.MorphAnimMesh.prototype.setDirectionBackward = function () {
    this.direction = -1, this.directionBackwards = !0
},THREE.MorphAnimMesh.prototype.parseAnimations = function () {
    var e = this.geometry;
    e.animations || (e.animations = {});
    var t, n = e.animations, r = /([a-z]+)(\d+)/;
    for (var i = 0, s = e.morphTargets.length; i < s; i++) {
        var o = e.morphTargets[i], u = o.name.match(r);
        if (u && u.length > 1) {
            var a = u[1], f = u[2];
            n[a] || (n[a] = {start: Infinity, end: -Infinity});
            var l = n[a];
            i < l.start && (l.start = i), i > l.end && (l.end = i), t || (t = a)
        }
    }
    e.firstAnimation = t
},THREE.MorphAnimMesh.prototype.setAnimationLabel = function (e, t, n) {
    this.geometry.animations || (this.geometry.animations = {}), this.geometry.animations[e] = {start: t, end: n}
},THREE.MorphAnimMesh.prototype.playAnimation = function (e, t) {
    var n = this.geometry.animations[e];
    n ? (this.setFrameRange(n.start, n.end), this.duration = 1e3 * ((n.end - n.start) / t), this.time = 0) : 0
},THREE.MorphAnimMesh.prototype.updateAnimation = function (e) {
    var t = this.duration / this.length;
    this.time += this.direction * e;
    if (this.mirroredLoop) {
        if (this.time > this.duration || this.time < 0) this.direction *= -1, this.time > this.duration && (this.time = this.duration, this.directionBackwards = !0), this.time < 0 && (this.time = 0, this.directionBackwards = !1)
    } else this.time = this.time % this.duration, this.time < 0 && (this.time += this.duration);
    var n = this.startKeyframe + THREE.Math.clamp(Math.floor(this.time / t), 0, this.length - 1);
    n !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0, this.morphTargetInfluences[this.currentKeyframe] = 1, this.morphTargetInfluences[n] = 0, this.lastKeyframe = this.currentKeyframe, this.currentKeyframe = n);
    var r = this.time % t / t;
    this.directionBackwards && (r = 1 - r), this.morphTargetInfluences[this.currentKeyframe] = r, this.morphTargetInfluences[this.lastKeyframe] = 1 - r
},THREE.MorphAnimMesh.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.MorphAnimMesh(this.geometry, this.material)), e.duration = this.duration, e.mirroredLoop = this.mirroredLoop, e.time = this.time, e.lastKeyframe = this.lastKeyframe, e.currentKeyframe = this.currentKeyframe, e.direction = this.direction, e.directionBackwards = this.directionBackwards, THREE.Mesh.prototype.clone.call(this, e), e
},THREE.Ribbon = function (e, t) {
    THREE.Object3D.call(this), this.geometry = e, this.material = t
},THREE.Ribbon.prototype = Object.create(THREE.Object3D.prototype),THREE.Ribbon.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Ribbon(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, e), e
},THREE.LOD = function () {
    THREE.Object3D.call(this), this.objects = []
},THREE.LOD.prototype = Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel = function (e, t) {
    t === undefined && (t = 0), t = Math.abs(t);
    for (var n = 0; n < this.objects.length; n++)if (t < this.objects[n].distance)break;
    this.objects.splice(n, 0, {distance: t, object: e}), this.add(e)
},THREE.LOD.prototype.getObjectForDistance = function (e) {
    for (var t = 1, n = this.objects.length; t < n; t++)if (e < this.objects[t].distance)break;
    return this.objects[t - 1].object
},THREE.LOD.prototype.update = function () {
    var e = new THREE.Vector3, t = new THREE.Vector3;
    return function (n) {
        if (this.objects.length > 1) {
            e.getPositionFromMatrix(n.matrixWorld), t.getPositionFromMatrix(this.matrixWorld);
            var r = e.distanceTo(t);
            this.objects[0].object.visible = !0;
            for (var i = 1, s = this.objects.length; i < s; i++) {
                if (!(r >= this.objects[i].distance))break;
                this.objects[i - 1].object.visible = !1, this.objects[i].object.visible = !0
            }
            for (; i < s; i++)this.objects[i].object.visible = !1
        }
    }
}(),THREE.LOD.prototype.clone = function () {
},THREE.Sprite = function (e) {
    THREE.Object3D.call(this), this.material = e !== undefined ? e : new THREE.SpriteMaterial, this.rotation3d = this.rotation, this.rotation = 0
},THREE.Sprite.prototype = Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix = function () {
    this.rotation3d.set(0, 0, this.rotation, this.rotation3d.order), this.quaternion.setFromEuler(this.rotation3d), this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
},THREE.Sprite.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Sprite(this.material)), THREE.Object3D.prototype.clone.call(this, e), e
},THREE.Scene = function () {
    THREE.Object3D.call(this), this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0, this.matrixAutoUpdate = !1, this.__objects = [], this.__lights = [], this.__objectsAdded = [], this.__objectsRemoved = []
},THREE.Scene.prototype = Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject = function (e) {
    if (e instanceof THREE.Light) this.__lights.indexOf(e) === -1 && this.__lights.push(e), e.target && e.target.parent === undefined && this.add(e.target); else if (!(e instanceof THREE.Camera || e instanceof THREE.Bone) && this.__objects.indexOf(e) === -1) {
        this.__objects.push(e), this.__objectsAdded.push(e);
        var t = this.__objectsRemoved.indexOf(e);
        t !== -1 && this.__objectsRemoved.splice(t, 1)
    }
    for (var n = 0; n < e.children.length; n++)this.__addObject(e.children[n])
},THREE.Scene.prototype.__removeObject = function (e) {
    if (e instanceof THREE.Light) {
        var t = this.__lights.indexOf(e);
        t !== -1 && this.__lights.splice(t, 1)
    } else if (!(e instanceof THREE.Camera)) {
        var t = this.__objects.indexOf(e);
        if (t !== -1) {
            this.__objects.splice(t, 1), this.__objectsRemoved.push(e);
            var n = this.__objectsAdded.indexOf(e);
            n !== -1 && this.__objectsAdded.splice(n, 1)
        }
    }
    for (var r = 0; r < e.children.length; r++)this.__removeObject(e.children[r])
},THREE.Scene.prototype.clone = function (e) {
    return e === undefined && (e = new THREE.Scene), THREE.Object3D.prototype.clone.call(this, e), this.fog !== null && (e.fog = this.fog.clone()), this.overrideMaterial !== null && (e.overrideMaterial = this.overrideMaterial.clone()), e.autoUpdate = this.autoUpdate, e.matrixAutoUpdate = this.matrixAutoUpdate, e
},THREE.Fog = function (e, t, n) {
    this.name = "", this.color = new THREE.Color(e), this.near = t !== undefined ? t : 1, this.far = n !== undefined ? n : 1e3
},THREE.Fog.prototype.clone = function () {
    return new THREE.Fog(this.color.getHex(), this.near, this.far)
},THREE.FogExp2 = function (e, t) {
    this.name = "", this.color = new THREE.Color(e), this.density = t !== undefined ? t : 25e-5
},THREE.FogExp2.prototype.clone = function () {
    return new THREE.FogExp2(this.color.getHex(), this.density)
},

THREE.ShaderChunk = {
    fog_pars_fragment: ["#ifdef USE_FOG", "uniform vec3 fogColor;", "#ifdef FOG_EXP2", "uniform float fogDensity;", "#else", "uniform float fogNear;", "uniform float fogFar;", "#endif", "#endif"].join("\n"),
    fog_fragment: ["#ifdef USE_FOG", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "#ifdef FOG_EXP2", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "#else", "float fogFactor = smoothstep( fogNear, fogFar, depth );", "#endif", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "#endif"].join("\n"),
    envmap_pars_fragment: ["#ifdef USE_ENVMAP", "uniform float reflectivity;", "uniform samplerCube envMap;", "uniform float flipEnvMap;", "uniform int combine;", "#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )", "uniform bool useRefract;", "uniform float refractionRatio;", "#else", "varying vec3 vReflect;", "#endif", "#endif"].join("\n"),
    envmap_fragment: ["#ifdef USE_ENVMAP", "vec3 reflectVec;", "#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )", "vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );", "if ( useRefract ) {", "reflectVec = refract( cameraToVertex, normal, refractionRatio );", "} else { ", "reflectVec = reflect( cameraToVertex, normal );", "}", "#else", "reflectVec = vReflect;", "#endif", "#ifdef DOUBLE_SIDED", "float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );", "vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );", "#else", "vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );", "#endif", "#ifdef GAMMA_INPUT", "cubeColor.xyz *= cubeColor.xyz;", "#endif", "if ( combine == 1 ) {", "gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );", "} else if ( combine == 2 ) {", "gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;", "} else {", "gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );", "}", "#endif"].join("\n"),
    envmap_pars_vertex: ["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )", "varying vec3 vReflect;", "uniform float refractionRatio;", "uniform bool useRefract;", "#endif"].join("\n"),
    worldpos_vertex: ["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )", "#ifdef USE_SKINNING", "vec4 worldPosition = modelMatrix * skinned;", "#endif", "#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )", "vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );", "#endif", "#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )", "vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "#endif", "#endif"].join("\n"),
    envmap_vertex: ["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )", "vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;", "worldNormal = normalize( worldNormal );", "vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );", "if ( useRefract ) {", "vReflect = refract( cameraToVertex, worldNormal, refractionRatio );", "} else {", "vReflect = reflect( cameraToVertex, worldNormal );", "}", "#endif"].join("\n"),
    map_particle_pars_fragment: ["#ifdef USE_MAP", "uniform sampler2D map;", "#endif"].join("\n"),
    map_particle_fragment: ["#ifdef USE_MAP", "gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );", "#endif"].join("\n"),
    map_pars_vertex: ["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )", "varying vec2 vUv;", "uniform vec4 offsetRepeat;", "#endif"].join("\n"),
    map_pars_fragment: ["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )", "varying vec2 vUv;", "#endif", "#ifdef USE_MAP", "uniform sampler2D map;", "#endif"].join("\n"),
    map_vertex: ["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )", "vUv = uv * offsetRepeat.zw + offsetRepeat.xy;", "#endif"].join("\n"),
    map_fragment: ["#ifdef USE_MAP", "vec4 texelColor = texture2D( map, vUv );", "#ifdef GAMMA_INPUT", "texelColor.xyz *= texelColor.xyz;", "#endif", "gl_FragColor = gl_FragColor * texelColor;", "#endif"].join("\n"),
    lightmap_pars_fragment: ["#ifdef USE_LIGHTMAP", "varying vec2 vUv2;", "uniform sampler2D lightMap;", "#endif"].join("\n"),
    lightmap_pars_vertex: ["#ifdef USE_LIGHTMAP", "varying vec2 vUv2;", "#endif"].join("\n"),
    lightmap_fragment: ["#ifdef USE_LIGHTMAP", "gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );", "#endif"].join("\n"),
    lightmap_vertex: ["#ifdef USE_LIGHTMAP", "vUv2 = uv2;", "#endif"].join("\n"),
    bumpmap_pars_fragment: ["#ifdef USE_BUMPMAP", "uniform sampler2D bumpMap;", "uniform float bumpScale;", "vec2 dHdxy_fwd() {", "vec2 dSTdx = dFdx( vUv );", "vec2 dSTdy = dFdy( vUv );", "float Hll = bumpScale * texture2D( bumpMap, vUv ).x;", "float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;", "float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;", "return vec2( dBx, dBy );", "}", "vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {", "vec3 vSigmaX = dFdx( surf_pos );", "vec3 vSigmaY = dFdy( surf_pos );", "vec3 vN = surf_norm;", "vec3 R1 = cross( vSigmaY, vN );", "vec3 R2 = cross( vN, vSigmaX );", "float fDet = dot( vSigmaX, R1 );", "vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );", "return normalize( abs( fDet ) * surf_norm - vGrad );", "}", "#endif"].join("\n"),
    normalmap_pars_fragment: ["#ifdef USE_NORMALMAP", "uniform sampler2D normalMap;", "uniform vec2 normalScale;", "vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {", "vec3 q0 = dFdx( eye_pos.xyz );", "vec3 q1 = dFdy( eye_pos.xyz );", "vec2 st0 = dFdx( vUv.st );", "vec2 st1 = dFdy( vUv.st );", "vec3 S = normalize(  q0 * st1.t - q1 * st0.t );", "vec3 T = normalize( -q0 * st1.s + q1 * st0.s );", "vec3 N = normalize( surf_norm );", "vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;", "mapN.xy = normalScale * mapN.xy;", "mat3 tsn = mat3( S, T, N );", "return normalize( tsn * mapN );", "}", "#endif"].join("\n"),
    specularmap_pars_fragment: ["#ifdef USE_SPECULARMAP", "uniform sampler2D specularMap;", "#endif"].join("\n"),
    specularmap_fragment: ["float specularStrength;", "#ifdef USE_SPECULARMAP", "vec4 texelSpecular = texture2D( specularMap, vUv );", "specularStrength = texelSpecular.r;", "#else", "specularStrength = 1.0;", "#endif"].join("\n"),
    lights_lambert_pars_vertex: ["uniform vec3 ambient;", "uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform vec3 ambientLightColor;", "#if MAX_DIR_LIGHTS > 0", "uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];", "uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];", "#endif", "#if MAX_HEMI_LIGHTS > 0", "uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];", "uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];", "uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];", "#endif", "#if MAX_POINT_LIGHTS > 0", "uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];", "uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];", "uniform float pointLightDistance[ MAX_POINT_LIGHTS ];", "#endif", "#if MAX_SPOT_LIGHTS > 0", "uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];", "uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];", "uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];", "uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];", "uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];", "uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];", "#endif", "#ifdef WRAP_AROUND", "uniform vec3 wrapRGB;", "#endif"].join("\n"),
    lights_lambert_vertex: ["vLightFront = vec3( 0.0 );", "#ifdef DOUBLE_SIDED", "vLightBack = vec3( 0.0 );", "#endif", "transformedNormal = normalize( transformedNormal );", "#if MAX_DIR_LIGHTS > 0", "for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {", "vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );", "vec3 dirVector = normalize( lDirection.xyz );", "float dotProduct = dot( transformedNormal, dirVector );", "vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );", "#ifdef DOUBLE_SIDED", "vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );", "#ifdef WRAP_AROUND", "vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );", "#endif", "#endif", "#ifdef WRAP_AROUND", "vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );", "directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );", "#ifdef DOUBLE_SIDED", "directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );", "#endif", "#endif", "vLightFront += directionalLightColor[ i ] * directionalLightWeighting;", "#ifdef DOUBLE_SIDED", "vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;", "#endif", "}", "#endif", "#if MAX_POINT_LIGHTS > 0", "for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {", "vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );", "vec3 lVector = lPosition.xyz - mvPosition.xyz;", "float lDistance = 1.0;", "if ( pointLightDistance[ i ] > 0.0 )", "lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );", "lVector = normalize( lVector );", "float dotProduct = dot( transformedNormal, lVector );", "vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );", "#ifdef DOUBLE_SIDED", "vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );", "#ifdef WRAP_AROUND", "vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );", "#endif", "#endif", "#ifdef WRAP_AROUND", "vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );", "pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );", "#ifdef DOUBLE_SIDED", "pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );", "#endif", "#endif", "vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;", "#ifdef DOUBLE_SIDED", "vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;", "#endif", "}", "#endif", "#if MAX_SPOT_LIGHTS > 0", "for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {", "vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );", "vec3 lVector = lPosition.xyz - mvPosition.xyz;", "float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );", "if ( spotEffect > spotLightAngleCos[ i ] ) {", "spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );", "float lDistance = 1.0;", "if ( spotLightDistance[ i ] > 0.0 )", "lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );", "lVector = normalize( lVector );", "float dotProduct = dot( transformedNormal, lVector );", "vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );", "#ifdef DOUBLE_SIDED", "vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );", "#ifdef WRAP_AROUND", "vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );", "#endif", "#endif", "#ifdef WRAP_AROUND", "vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );", "spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );", "#ifdef DOUBLE_SIDED", "spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );", "#endif", "#endif", "vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;", "#ifdef DOUBLE_SIDED", "vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;", "#endif", "}", "}", "#endif", "#if MAX_HEMI_LIGHTS > 0", "for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {", "vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );", "vec3 lVector = normalize( lDirection.xyz );", "float dotProduct = dot( transformedNormal, lVector );", "float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;", "float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;", "vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );", "#ifdef DOUBLE_SIDED", "vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );", "#endif", "}", "#endif", "vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;", "#ifdef DOUBLE_SIDED", "vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;", "#endif"].join("\n"),
    lights_phong_pars_vertex: ["#ifndef PHONG_PER_PIXEL", "#if MAX_POINT_LIGHTS > 0", "uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];", "uniform float pointLightDistance[ MAX_POINT_LIGHTS ];", "varying vec4 vPointLight[ MAX_POINT_LIGHTS ];", "#endif", "#if MAX_SPOT_LIGHTS > 0", "uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];", "uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];", "varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];", "#endif", "#endif", "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )", "varying vec3 vWorldPosition;", "#endif"].join("\n"),
    lights_phong_vertex: ["#ifndef PHONG_PER_PIXEL", "#if MAX_POINT_LIGHTS > 0", "for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {", "vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );", "vec3 lVector = lPosition.xyz - mvPosition.xyz;", "float lDistance = 1.0;", "if ( pointLightDistance[ i ] > 0.0 )", "lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );", "vPointLight[ i ] = vec4( lVector, lDistance );", "}", "#endif", "#if MAX_SPOT_LIGHTS > 0", "for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {", "vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );", "vec3 lVector = lPosition.xyz - mvPosition.xyz;", "float lDistance = 1.0;", "if ( spotLightDistance[ i ] > 0.0 )", "lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );", "vSpotLight[ i ] = vec4( lVector, lDistance );", "}", "#endif", "#endif", "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )", "vWorldPosition = worldPosition.xyz;", "#endif"].join("\n"),
    lights_phong_pars_fragment: ["uniform vec3 ambientLightColor;", "#if MAX_DIR_LIGHTS > 0", "uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];", "uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];", "#endif", "#if MAX_HEMI_LIGHTS > 0", "uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];", "uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];", "uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];", "#endif", "#if MAX_POINT_LIGHTS > 0", "uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];", "#ifdef PHONG_PER_PIXEL", "uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];", "uniform float pointLightDistance[ MAX_POINT_LIGHTS ];", "#else", "varying vec4 vPointLight[ MAX_POINT_LIGHTS ];", "#endif", "#endif", "#if MAX_SPOT_LIGHTS > 0", "uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];", "uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];", "uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];", "uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];", "uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];", "#ifdef PHONG_PER_PIXEL", "uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];", "#else", "varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];", "#endif", "#endif", "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )", "varying vec3 vWorldPosition;", "#endif", "#ifdef WRAP_AROUND", "uniform vec3 wrapRGB;", "#endif", "varying vec3 vViewPosition;", "varying vec3 vNormal;"].join("\n"),
    lights_phong_fragment: ["vec3 normal = normalize( vNormal );", "vec3 viewPosition = normalize( vViewPosition );", "#ifdef DOUBLE_SIDED", "normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );", "#endif", "#ifdef USE_NORMALMAP", "normal = perturbNormal2Arb( -vViewPosition, normal );", "#elif defined( USE_BUMPMAP )", "normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );", "#endif", "#if MAX_POINT_LIGHTS > 0", "vec3 pointDiffuse  = vec3( 0.0 );", "vec3 pointSpecular = vec3( 0.0 );", "for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {", "#ifdef PHONG_PER_PIXEL", "vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );", "vec3 lVector = lPosition.xyz + vViewPosition.xyz;", "float lDistance = 1.0;", "if ( pointLightDistance[ i ] > 0.0 )", "lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );", "lVector = normalize( lVector );", "#else", "vec3 lVector = normalize( vPointLight[ i ].xyz );", "float lDistance = vPointLight[ i ].w;", "#endif", "float dotProduct = dot( normal, lVector );", "#ifdef WRAP_AROUND", "float pointDiffuseWeightFull = max( dotProduct, 0.0 );", "float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );", "vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );", "#else", "float pointDiffuseWeight = max( dotProduct, 0.0 );", "#endif", "pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;", "vec3 pointHalfVector = normalize( lVector + viewPosition );", "float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );", "float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float specularNormalization = ( shininess + 2.0001 ) / 8.0;", "vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );", "pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;", "#else", "pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;", "#endif", "}", "#endif", "#if MAX_SPOT_LIGHTS > 0", "vec3 spotDiffuse  = vec3( 0.0 );", "vec3 spotSpecular = vec3( 0.0 );", "for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {", "#ifdef PHONG_PER_PIXEL", "vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );", "vec3 lVector = lPosition.xyz + vViewPosition.xyz;", "float lDistance = 1.0;", "if ( spotLightDistance[ i ] > 0.0 )", "lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );", "lVector = normalize( lVector );", "#else", "vec3 lVector = normalize( vSpotLight[ i ].xyz );", "float lDistance = vSpotLight[ i ].w;", "#endif", "float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );", "if ( spotEffect > spotLightAngleCos[ i ] ) {", "spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );", "float dotProduct = dot( normal, lVector );", "#ifdef WRAP_AROUND", "float spotDiffuseWeightFull = max( dotProduct, 0.0 );", "float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );", "vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );", "#else", "float spotDiffuseWeight = max( dotProduct, 0.0 );", "#endif", "spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;", "vec3 spotHalfVector = normalize( lVector + viewPosition );", "float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );", "float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float specularNormalization = ( shininess + 2.0001 ) / 8.0;", "vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );", "spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;", "#else", "spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;", "#endif", "}", "}", "#endif", "#if MAX_DIR_LIGHTS > 0", "vec3 dirDiffuse  = vec3( 0.0 );", "vec3 dirSpecular = vec3( 0.0 );", "for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {", "vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );", "vec3 dirVector = normalize( lDirection.xyz );", "float dotProduct = dot( normal, dirVector );", "#ifdef WRAP_AROUND", "float dirDiffuseWeightFull = max( dotProduct, 0.0 );", "float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );", "vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );", "#else", "float dirDiffuseWeight = max( dotProduct, 0.0 );", "#endif", "dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;", "vec3 dirHalfVector = normalize( dirVector + viewPosition );", "float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );", "float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float specularNormalization = ( shininess + 2.0001 ) / 8.0;", "vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );", "dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;", "#else", "dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;", "#endif", "}", "#endif", "#if MAX_HEMI_LIGHTS > 0", "vec3 hemiDiffuse  = vec3( 0.0 );", "vec3 hemiSpecular = vec3( 0.0 );", "for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {", "vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );", "vec3 lVector = normalize( lDirection.xyz );", "float dotProduct = dot( normal, lVector );", "float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;", "vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );", "hemiDiffuse += diffuse * hemiColor;", "vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );", "float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;", "float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );", "vec3 lVectorGround = -lVector;", "vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );", "float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;", "float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float dotProductGround = dot( normal, lVectorGround );", "float specularNormalization = ( shininess + 2.0001 ) / 8.0;", "vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );", "vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );", "hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );", "#else", "hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;", "#endif", "}", "#endif", "vec3 totalDiffuse = vec3( 0.0 );", "vec3 totalSpecular = vec3( 0.0 );", "#if MAX_DIR_LIGHTS > 0", "totalDiffuse += dirDiffuse;", "totalSpecular += dirSpecular;", "#endif", "#if MAX_HEMI_LIGHTS > 0", "totalDiffuse += hemiDiffuse;", "totalSpecular += hemiSpecular;", "#endif", "#if MAX_POINT_LIGHTS > 0", "totalDiffuse += pointDiffuse;", "totalSpecular += pointSpecular;", "#endif", "#if MAX_SPOT_LIGHTS > 0", "totalDiffuse += spotDiffuse;", "totalSpecular += spotSpecular;", "#endif", "#ifdef METAL", "gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );", "#else", "gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;", "#endif"].join("\n"),
    color_pars_fragment: ["#ifdef USE_COLOR", "varying vec3 vColor;", "#endif"].join("\n"),
    color_fragment: ["#ifdef USE_COLOR", "gl_FragColor = gl_FragColor * vec4( vColor, opacity );", "#endif"].join("\n"),
    color_pars_vertex: ["#ifdef USE_COLOR", "varying vec3 vColor;", "#endif"].join("\n"),
    color_vertex: ["#ifdef USE_COLOR", "#ifdef GAMMA_INPUT", "vColor = color * color;", "#else", "vColor = color;", "#endif", "#endif"].join("\n"),
    skinning_pars_vertex: ["#ifdef USE_SKINNING", "#ifdef BONE_TEXTURE", "uniform sampler2D boneTexture;", "mat4 getBoneMatrix( const in float i ) {", "float j = i * 4.0;", "float x = mod( j, N_BONE_PIXEL_X );", "float y = floor( j / N_BONE_PIXEL_X );", "const float dx = 1.0 / N_BONE_PIXEL_X;", "const float dy = 1.0 / N_BONE_PIXEL_Y;", "y = dy * ( y + 0.5 );", "vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );", "vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );", "vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );", "vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );", "mat4 bone = mat4( v1, v2, v3, v4 );", "return bone;", "}", "#else", "uniform mat4 boneGlobalMatrices[ MAX_BONES ];", "mat4 getBoneMatrix( const in float i ) {", "mat4 bone = boneGlobalMatrices[ int(i) ];", "return bone;", "}", "#endif", "#endif"].join("\n"),
    skinbase_vertex: ["#ifdef USE_SKINNING", "mat4 boneMatX = getBoneMatrix( skinIndex.x );", "mat4 boneMatY = getBoneMatrix( skinIndex.y );", "#endif"].join("\n"),
    skinning_vertex: ["#ifdef USE_SKINNING", "#ifdef USE_MORPHTARGETS", "vec4 skinVertex = vec4( morphed, 1.0 );", "#else", "vec4 skinVertex = vec4( position, 1.0 );", "#endif", "vec4 skinned  = boneMatX * skinVertex * skinWeight.x;", "skinned 	  += boneMatY * skinVertex * skinWeight.y;", "#endif"].join("\n"),
    morphtarget_pars_vertex: ["#ifdef USE_MORPHTARGETS", "#ifndef USE_MORPHNORMALS", "uniform float morphTargetInfluences[ 8 ];", "#else", "uniform float morphTargetInfluences[ 4 ];", "#endif", "#endif"].join("\n"),
    morphtarget_vertex: ["#ifdef USE_MORPHTARGETS", "vec3 morphed = vec3( 0.0 );", "morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];", "morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];", "morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];", "morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];", "#ifndef USE_MORPHNORMALS", "morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];", "morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];", "morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];", "morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];", "#endif", "morphed += position;", "#endif"].join("\n"),
    default_vertex: ["vec4 mvPosition;", "#ifdef USE_SKINNING", "mvPosition = modelViewMatrix * skinned;", "#endif", "#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )", "mvPosition = modelViewMatrix * vec4( morphed, 1.0 );", "#endif", "#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )", "mvPosition = modelViewMatrix * vec4( position, 1.0 );", "#endif", "gl_Position = projectionMatrix * mvPosition;"].join("\n"),
    morphnormal_vertex: ["#ifdef USE_MORPHNORMALS", "vec3 morphedNormal = vec3( 0.0 );", "morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];", "morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];", "morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];", "morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];", "morphedNormal += normal;", "#endif"].join("\n"),
    skinnormal_vertex: ["#ifdef USE_SKINNING", "mat4 skinMatrix = skinWeight.x * boneMatX;", "skinMatrix 	+= skinWeight.y * boneMatY;", "#ifdef USE_MORPHNORMALS", "vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );", "#else", "vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );", "#endif", "#endif"].join("\n"),
    defaultnormal_vertex: ["vec3 objectNormal;", "#ifdef USE_SKINNING", "objectNormal = skinnedNormal.xyz;", "#endif", "#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )", "objectNormal = morphedNormal;", "#endif", "#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )", "objectNormal = normal;", "#endif", "#ifdef FLIP_SIDED", "objectNormal = -objectNormal;", "#endif", "vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),
    shadowmap_pars_fragment: ["#ifdef USE_SHADOWMAP", "uniform sampler2D shadowMap[ MAX_SHADOWS ];", "uniform vec2 shadowMapSize[ MAX_SHADOWS ];", "uniform float shadowDarkness[ MAX_SHADOWS ];", "uniform float shadowBias[ MAX_SHADOWS ];", "varying vec4 vShadowCoord[ MAX_SHADOWS ];", "float unpackDepth( const in vec4 rgba_depth ) {", "const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );", "float depth = dot( rgba_depth, bit_shift );", "return depth;", "}", "#endif"].join("\n"),
    shadowmap_fragment: ["#ifdef USE_SHADOWMAP", "#ifdef SHADOWMAP_DEBUG", "vec3 frustumColors[3];", "frustumColors[0] = vec3( 1.0, 0.5, 0.0 );", "frustumColors[1] = vec3( 0.0, 1.0, 0.8 );", "frustumColors[2] = vec3( 0.0, 0.5, 1.0 );", "#endif", "#ifdef SHADOWMAP_CASCADE", "int inFrustumCount = 0;", "#endif", "float fDepth;", "vec3 shadowColor = vec3( 1.0 );", "for( int i = 0; i < MAX_SHADOWS; i ++ ) {", "vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;", "bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );", "bool inFrustum = all( inFrustumVec );", "#ifdef SHADOWMAP_CASCADE", "inFrustumCount += int( inFrustum );", "bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );", "#else", "bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );", "#endif", "bool frustumTest = all( frustumTestVec );", "if ( frustumTest ) {", "shadowCoord.z += shadowBias[ i ];", "#if defined( SHADOWMAP_TYPE_PCF )", "float shadow = 0.0;", "const float shadowDelta = 1.0 / 9.0;", "float xPixelOffset = 1.0 / shadowMapSize[ i ].x;", "float yPixelOffset = 1.0 / shadowMapSize[ i ].y;", "float dx0 = -1.25 * xPixelOffset;", "float dy0 = -1.25 * yPixelOffset;", "float dx1 = 1.25 * xPixelOffset;", "float dy1 = 1.25 * yPixelOffset;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );", "if ( fDepth < shadowCoord.z ) shadow += shadowDelta;", "shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );", "#elif defined( SHADOWMAP_TYPE_PCF_SOFT )", "float shadow = 0.0;", "float xPixelOffset = 1.0 / shadowMapSize[ i ].x;", "float yPixelOffset = 1.0 / shadowMapSize[ i ].y;", "float dx0 = -1.0 * xPixelOffset;", "float dy0 = -1.0 * yPixelOffset;", "float dx1 = 1.0 * xPixelOffset;", "float dy1 = 1.0 * yPixelOffset;", "mat3 shadowKernel;", "mat3 depthKernel;", "depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );", "depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );", "depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );", "depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );", "depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );", "depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );", "depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );", "depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );", "depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );", "vec3 shadowZ = vec3( shadowCoord.z );", "shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));", "shadowKernel[0] *= vec3(0.25);", "shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));", "shadowKernel[1] *= vec3(0.25);", "shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));", "shadowKernel[2] *= vec3(0.25);", "vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );", "shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );", "shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );", "vec4 shadowValues;", "shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );", "shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );", "shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );", "shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );", "shadow = dot( shadowValues, vec4( 1.0 ) );", "shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );", "#else", "vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );", "float fDepth = unpackDepth( rgbaDepth );", "if ( fDepth < shadowCoord.z )", "shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );", "#endif", "}", "#ifdef SHADOWMAP_DEBUG", "#ifdef SHADOWMAP_CASCADE", "if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];", "#else", "if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];", "#endif", "#endif", "}", "#ifdef GAMMA_OUTPUT", "shadowColor *= shadowColor;", "#endif", "gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;", "#endif"].join("\n"),
    shadowmap_pars_vertex: ["#ifdef USE_SHADOWMAP", "varying vec4 vShadowCoord[ MAX_SHADOWS ];", "uniform mat4 shadowMatrix[ MAX_SHADOWS ];", "#endif"].join("\n"),
    shadowmap_vertex: ["#ifdef USE_SHADOWMAP", "for( int i = 0; i < MAX_SHADOWS; i ++ ) {", "vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;", "}", "#endif"].join("\n"),
    alphatest_fragment: ["#ifdef ALPHATEST", "if ( gl_FragColor.a < ALPHATEST ) discard;", "#endif"].join("\n"),
    linear_to_gamma_fragment: ["#ifdef GAMMA_OUTPUT", "gl_FragColor.xyz = sqrt( gl_FragColor.xyz );", "#endif"].join("\n")
},
THREE.UniformsUtils = {
    merge: function (e) {
        var t, n, r, i = {};
        for (t = 0; t < e.length; t++) {
            r = this.clone(e[t]);
            for (n in r)i[n] = r[n]
        }
        return i
    }, clone: function (e) {
        var t, n, r, i, s = {};
        for (t in e) {
            s[t] = {};
            for (n in e[t])i = e[t][n], i instanceof THREE.Color || i instanceof THREE.Vector2 || i instanceof THREE.Vector3 || i instanceof THREE.Vector4 || i instanceof THREE.Matrix4 || i instanceof THREE.Texture ? s[t][n] = i.clone() : i instanceof Array ? s[t][n] = i.slice() : s[t][n] = i
        }
        return s
    }
},
THREE.UniformsLib = {
    common: {
        diffuse: {type: "c", value: new THREE.Color(15658734)},
        opacity: {type: "f", value: 1},
        map: {type: "t", value: null},
        offsetRepeat: {type: "v4", value: new THREE.Vector4(0, 0, 1, 1)},
        lightMap: {type: "t", value: null},
        specularMap: {type: "t", value: null},
        envMap: {type: "t", value: null},
        flipEnvMap: {type: "f", value: -1},
        useRefract: {type: "i", value: 0},
        reflectivity: {type: "f", value: 1},
        refractionRatio: {type: "f", value: .98},
        combine: {type: "i", value: 0},
        morphTargetInfluences: {type: "f", value: 0}
    },
    bump: {bumpMap: {type: "t", value: null}, bumpScale: {type: "f", value: 1}},
    normalmap: {normalMap: {type: "t", value: null}, normalScale: {type: "v2", value: new THREE.Vector2(1, 1)}},
    fog: {
        fogDensity: {type: "f", value: 25e-5},
        fogNear: {type: "f", value: 1},
        fogFar: {type: "f", value: 2e3},
        fogColor: {type: "c", value: new THREE.Color(16777215)}
    },
    lights: {
        ambientLightColor: {type: "fv", value: []},
        directionalLightDirection: {type: "fv", value: []},
        directionalLightColor: {type: "fv", value: []},
        hemisphereLightDirection: {type: "fv", value: []},
        hemisphereLightSkyColor: {type: "fv", value: []},
        hemisphereLightGroundColor: {type: "fv", value: []},
        pointLightColor: {type: "fv", value: []},
        pointLightPosition: {type: "fv", value: []},
        pointLightDistance: {type: "fv1", value: []},
        spotLightColor: {type: "fv", value: []},
        spotLightPosition: {type: "fv", value: []},
        spotLightDirection: {type: "fv", value: []},
        spotLightDistance: {type: "fv1", value: []},
        spotLightAngleCos: {type: "fv1", value: []},
        spotLightExponent: {type: "fv1", value: []}
    },
    particle: {
        psColor: {type: "c", value: new THREE.Color(15658734)},
        opacity: {type: "f", value: 1},
        size: {type: "f", value: 1},
        scale: {type: "f", value: 1},
        map: {type: "t", value: null},
        fogDensity: {type: "f", value: 25e-5},
        fogNear: {type: "f", value: 1},
        fogFar: {type: "f", value: 2e3},
        fogColor: {type: "c", value: new THREE.Color(16777215)}
    },
    shadowmap: {
        shadowMap: {type: "tv", value: []},
        shadowMapSize: {type: "v2v", value: []},
        shadowBias: {type: "fv1", value: []},
        shadowDarkness: {type: "fv1", value: []},
        shadowMatrix: {type: "m4v", value: []}
    }
},
THREE.ShaderLib = {
    basic: {
        uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.shadowmap]),
        vertexShader: [THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.skinbase_vertex, "#ifdef USE_ENVMAP", THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "#endif", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
        fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {", "gl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
    },
    lambert: {
        uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
            ambient: {
                type: "c",
                value: new THREE.Color(16777215)
            },
            emissive: {type: "c", value: new THREE.Color(0)},
            wrapRGB: {type: "v3", value: new THREE.Vector3(1, 1, 1)}
        }]),
        vertexShader: ["#define LAMBERT", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "varying vec3 vLightBack;", "#endif", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_lambert_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_lambert_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
        fragmentShader: ["uniform float opacity;", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "varying vec3 vLightBack;", "#endif", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {", "gl_FragColor = vec4( vec3 ( 1.0 ), opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, "#ifdef DOUBLE_SIDED", "if ( gl_FrontFacing )", "gl_FragColor.xyz *= vLightFront;", "else", "gl_FragColor.xyz *= vLightBack;", "#else", "gl_FragColor.xyz *= vLightFront;", "#endif", THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
    },
    phong: {
        uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.normalmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
            ambient: {
                type: "c",
                value: new THREE.Color(16777215)
            },
            emissive: {type: "c", value: new THREE.Color(0)},
            specular: {type: "c", value: new THREE.Color(1118481)},
            shininess: {type: "f", value: 30},
            wrapRGB: {type: "v3", value: new THREE.Vector3(1, 1, 1)}
        }]),
        vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "varying vec3 vNormal;", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_phong_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "vNormal = normalize( transformedNormal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, "vViewPosition = -mvPosition.xyz;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_phong_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
        fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform vec3 ambient;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.lights_phong_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.bumpmap_pars_fragment, THREE.ShaderChunk.normalmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {", "gl_FragColor = vec4( vec3 ( 1.0 ), opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lights_phong_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
    },
    particle_basic: {
        uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.particle, THREE.UniformsLib.shadowmap]),
        vertexShader: ["uniform float size;", "uniform float scale;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "#ifdef USE_SIZEATTENUATION", "gl_PointSize = size * ( scale / length( mvPosition.xyz ) );", "#else", "gl_PointSize = size;", "#endif", "gl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
        fragmentShader: ["uniform vec3 psColor;", "uniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_particle_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, "void main() {", "gl_FragColor = vec4( psColor, opacity );", THREE.ShaderChunk.map_particle_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
    },
    dashed: {
        uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, {
            scale: {
                type: "f",
                value: 1
            }, dashSize: {type: "f", value: 1}, totalSize: {type: "f", value: 2}
        }]),
        vertexShader: ["uniform float scale;", "attribute float lineDistance;", "varying float vLineDistance;", THREE.ShaderChunk.color_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "vLineDistance = scale * lineDistance;", "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "gl_Position = projectionMatrix * mvPosition;", "}"].join("\n"),
        fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform float dashSize;", "uniform float totalSize;", "varying float vLineDistance;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, "void main() {", "if ( mod( vLineDistance, totalSize ) > dashSize ) {", "discard;", "}", "gl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
    },
    depth: {
        uniforms: {mNear: {type: "f", value: 1}, mFar: {type: "f", value: 2e3}, opacity: {type: "f", value: 1}},
        vertexShader: ["void main() {", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform float mNear;", "uniform float mFar;", "uniform float opacity;", "void main() {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float color = 1.0 - smoothstep( mNear, mFar, depth );", "gl_FragColor = vec4( vec3( color ), opacity );", "}"].join("\n")
    },
    normal: {
        uniforms: {opacity: {type: "f", value: 1}},
        vertexShader: ["varying vec3 vNormal;", THREE.ShaderChunk.morphtarget_pars_vertex, "void main() {", "vNormal = normalize( normalMatrix * normal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, "}"].join("\n"),
        fragmentShader: ["uniform float opacity;", "varying vec3 vNormal;", "void main() {", "gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", "}"].join("\n")
    },
    normalmap: {
        uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
            enableAO: {
                type: "i",
                value: 0
            },
            enableDiffuse: {type: "i", value: 0},
            enableSpecular: {type: "i", value: 0},
            enableReflection: {type: "i", value: 0},
            enableDisplacement: {type: "i", value: 0},
            tDisplacement: {type: "t", value: null},
            tDiffuse: {type: "t", value: null},
            tCube: {type: "t", value: null},
            tNormal: {type: "t", value: null},
            tSpecular: {type: "t", value: null},
            tAO: {type: "t", value: null},
            uNormalScale: {type: "v2", value: new THREE.Vector2(1, 1)},
            uDisplacementBias: {type: "f", value: 0},
            uDisplacementScale: {type: "f", value: 1},
            uDiffuseColor: {type: "c", value: new THREE.Color(16777215)},
            uSpecularColor: {type: "c", value: new THREE.Color(1118481)},
            uAmbientColor: {type: "c", value: new THREE.Color(16777215)},
            uShininess: {type: "f", value: 30},
            uOpacity: {type: "f", value: 1},
            useRefract: {type: "i", value: 0},
            uRefractionRatio: {type: "f", value: .98},
            uReflectivity: {type: "f", value: .5},
            uOffset: {type: "v2", value: new THREE.Vector2(0, 0)},
            uRepeat: {type: "v2", value: new THREE.Vector2(1, 1)},
            wrapRGB: {type: "v3", value: new THREE.Vector3(1, 1, 1)}
        }]),
        fragmentShader: ["uniform vec3 uAmbientColor;", "uniform vec3 uDiffuseColor;", "uniform vec3 uSpecularColor;", "uniform float uShininess;", "uniform float uOpacity;", "uniform bool enableDiffuse;", "uniform bool enableSpecular;", "uniform bool enableAO;", "uniform bool enableReflection;", "uniform sampler2D tDiffuse;", "uniform sampler2D tNormal;", "uniform sampler2D tSpecular;", "uniform sampler2D tAO;", "uniform samplerCube tCube;", "uniform vec2 uNormalScale;", "uniform bool useRefract;", "uniform float uRefractionRatio;", "uniform float uReflectivity;", "varying vec3 vTangent;", "varying vec3 vBinormal;", "varying vec3 vNormal;", "varying vec2 vUv;", "uniform vec3 ambientLightColor;", "#if MAX_DIR_LIGHTS > 0", "uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];", "uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];", "#endif", "#if MAX_HEMI_LIGHTS > 0", "uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];", "uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];", "uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];", "#endif", "#if MAX_POINT_LIGHTS > 0", "uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];", "uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];", "uniform float pointLightDistance[ MAX_POINT_LIGHTS ];", "#endif", "#if MAX_SPOT_LIGHTS > 0", "uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];", "uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];", "uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];", "uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];", "uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];", "uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];", "#endif", "#ifdef WRAP_AROUND", "uniform vec3 wrapRGB;", "#endif", "varying vec3 vWorldPosition;", "varying vec3 vViewPosition;", THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, "void main() {", "gl_FragColor = vec4( vec3( 1.0 ), uOpacity );", "vec3 specularTex = vec3( 1.0 );", "vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;", "normalTex.xy *= uNormalScale;", "normalTex = normalize( normalTex );", "if( enableDiffuse ) {", "#ifdef GAMMA_INPUT", "vec4 texelColor = texture2D( tDiffuse, vUv );", "texelColor.xyz *= texelColor.xyz;", "gl_FragColor = gl_FragColor * texelColor;", "#else", "gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );", "#endif", "}", "if( enableAO ) {", "#ifdef GAMMA_INPUT", "vec4 aoColor = texture2D( tAO, vUv );", "aoColor.xyz *= aoColor.xyz;", "gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;", "#else", "gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;", "#endif", "}", "if( enableSpecular )", "specularTex = texture2D( tSpecular, vUv ).xyz;", "mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );", "vec3 finalNormal = tsb * normalTex;", "#ifdef FLIP_SIDED", "finalNormal = -finalNormal;", "#endif", "vec3 normal = normalize( finalNormal );", "vec3 viewPosition = normalize( vViewPosition );", "#if MAX_POINT_LIGHTS > 0", "vec3 pointDiffuse = vec3( 0.0 );", "vec3 pointSpecular = vec3( 0.0 );", "for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {", "vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );", "vec3 pointVector = lPosition.xyz + vViewPosition.xyz;", "float pointDistance = 1.0;", "if ( pointLightDistance[ i ] > 0.0 )", "pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );", "pointVector = normalize( pointVector );", "#ifdef WRAP_AROUND", "float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );", "float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );", "vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );", "#else", "float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );", "#endif", "pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;", "vec3 pointHalfVector = normalize( pointVector + viewPosition );", "float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );", "float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float specularNormalization = ( uShininess + 2.0001 ) / 8.0;", "vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );", "pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;", "#else", "pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;", "#endif", "}", "#endif", "#if MAX_SPOT_LIGHTS > 0", "vec3 spotDiffuse = vec3( 0.0 );", "vec3 spotSpecular = vec3( 0.0 );", "for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {", "vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );", "vec3 spotVector = lPosition.xyz + vViewPosition.xyz;", "float spotDistance = 1.0;", "if ( spotLightDistance[ i ] > 0.0 )", "spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );", "spotVector = normalize( spotVector );", "float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );", "if ( spotEffect > spotLightAngleCos[ i ] ) {", "spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );", "#ifdef WRAP_AROUND", "float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );", "float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );", "vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );", "#else", "float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );", "#endif", "spotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;", "vec3 spotHalfVector = normalize( spotVector + viewPosition );", "float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );", "float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float specularNormalization = ( uShininess + 2.0001 ) / 8.0;", "vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );", "spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;", "#else", "spotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;", "#endif", "}", "}", "#endif", "#if MAX_DIR_LIGHTS > 0", "vec3 dirDiffuse = vec3( 0.0 );", "vec3 dirSpecular = vec3( 0.0 );", "for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {", "vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );", "vec3 dirVector = normalize( lDirection.xyz );", "#ifdef WRAP_AROUND", "float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );", "float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );", "vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );", "#else", "float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );", "#endif", "dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;", "vec3 dirHalfVector = normalize( dirVector + viewPosition );", "float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );", "float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float specularNormalization = ( uShininess + 2.0001 ) / 8.0;", "vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );", "dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;", "#else", "dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;", "#endif", "}", "#endif", "#if MAX_HEMI_LIGHTS > 0", "vec3 hemiDiffuse  = vec3( 0.0 );", "vec3 hemiSpecular = vec3( 0.0 );", "for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {", "vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );", "vec3 lVector = normalize( lDirection.xyz );", "float dotProduct = dot( normal, lVector );", "float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;", "vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );", "hemiDiffuse += uDiffuseColor * hemiColor;", "vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );", "float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;", "float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );", "vec3 lVectorGround = -lVector;", "vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );", "float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;", "float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );", "#ifdef PHYSICALLY_BASED_SHADING", "float dotProductGround = dot( normal, lVectorGround );", "float specularNormalization = ( uShininess + 2.0001 ) / 8.0;", "vec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );", "vec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );", "hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );", "#else", "hemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;", "#endif", "}", "#endif", "vec3 totalDiffuse = vec3( 0.0 );", "vec3 totalSpecular = vec3( 0.0 );", "#if MAX_DIR_LIGHTS > 0", "totalDiffuse += dirDiffuse;", "totalSpecular += dirSpecular;", "#endif", "#if MAX_HEMI_LIGHTS > 0", "totalDiffuse += hemiDiffuse;", "totalSpecular += hemiSpecular;", "#endif", "#if MAX_POINT_LIGHTS > 0", "totalDiffuse += pointDiffuse;", "totalSpecular += pointSpecular;", "#endif", "#if MAX_SPOT_LIGHTS > 0", "totalDiffuse += spotDiffuse;", "totalSpecular += spotSpecular;", "#endif", "#ifdef METAL", "gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );", "#else", "gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;", "#endif", "if ( enableReflection ) {", "vec3 vReflect;", "vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );", "if ( useRefract ) {", "vReflect = refract( cameraToVertex, normal, uRefractionRatio );", "} else {", "vReflect = reflect( cameraToVertex, normal );", "}", "vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );", "#ifdef GAMMA_INPUT", "cubeColor.xyz *= cubeColor.xyz;", "#endif", "gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );", "}", THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n"),
        vertexShader: ["attribute vec4 tangent;", "uniform vec2 uOffset;", "uniform vec2 uRepeat;", "uniform bool enableDisplacement;", "#ifdef VERTEX_TEXTURES", "uniform sampler2D tDisplacement;", "uniform float uDisplacementScale;", "uniform float uDisplacementBias;", "#endif", "varying vec3 vTangent;", "varying vec3 vBinormal;", "varying vec3 vNormal;", "varying vec2 vUv;", "varying vec3 vWorldPosition;", "varying vec3 vViewPosition;", THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, "#ifdef USE_SKINNING", "vNormal = normalize( normalMatrix * skinnedNormal.xyz );", "vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );", "vTangent = normalize( normalMatrix * skinnedTangent.xyz );", "#else", "vNormal = normalize( normalMatrix * normal );", "vTangent = normalize( normalMatrix * tangent.xyz );", "#endif", "vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );", "vUv = uv * uRepeat + uOffset;", "vec3 displacedPosition;", "#ifdef VERTEX_TEXTURES", "if ( enableDisplacement ) {", "vec3 dv = texture2D( tDisplacement, uv ).xyz;", "float df = uDisplacementScale * dv.x + uDisplacementBias;", "displacedPosition = position + normalize( normal ) * df;", "} else {", "#ifdef USE_SKINNING", "vec4 skinVertex = vec4( position, 1.0 );", "vec4 skinned  = boneMatX * skinVertex * skinWeight.x;", "skinned 	  += boneMatY * skinVertex * skinWeight.y;", "displacedPosition  = skinned.xyz;", "#else", "displacedPosition = position;", "#endif", "}", "#else", "#ifdef USE_SKINNING", "vec4 skinVertex = vec4( position, 1.0 );", "vec4 skinned  = boneMatX * skinVertex * skinWeight.x;", "skinned 	  += boneMatY * skinVertex * skinWeight.y;", "displacedPosition  = skinned.xyz;", "#else", "displacedPosition = position;", "#endif", "#endif", "vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );", "vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );", "gl_Position = projectionMatrix * mvPosition;", "vWorldPosition = worldPosition.xyz;", "vViewPosition = -mvPosition.xyz;", "#ifdef USE_SHADOWMAP", "for( int i = 0; i < MAX_SHADOWS; i ++ ) {", "vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;", "}", "#endif", "}"].join("\n")
    },
    cube: {
        uniforms: {tCube: {type: "t", value: null}, tFlip: {type: "f", value: -1}},
        vertexShader: ["varying vec3 vWorldPosition;", "void main() {", "vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "vWorldPosition = worldPosition.xyz;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform samplerCube tCube;", "uniform float tFlip;", "varying vec3 vWorldPosition;", "void main() {", "gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", "}"].join("\n")
    },
    depthRGBA: {
        uniforms: {},
        vertexShader: [THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, "}"].join("\n"),
        fragmentShader: ["vec4 pack_depth( const in float depth ) {", "const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );", "const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );", "vec4 res = fract( depth * bit_shift );", "res -= res.xxyz * bit_mask;", "return res;", "}", "void main() {", "gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );", "}"].join("\n")
    }
},
THREE.WebGLRenderer = function (e) {
    function wt(e) {
        e.__webglVertexBuffer = V.createBuffer(), e.__webglColorBuffer = V.createBuffer(), l.info.memory.geometries++
    }

    function Et(e) {
        e.__webglVertexBuffer = V.createBuffer(), e.__webglColorBuffer = V.createBuffer(), e.__webglLineDistanceBuffer = V.createBuffer(), l.info.memory.geometries++
    }

    function St(e) {
        e.__webglVertexBuffer = V.createBuffer(), e.__webglColorBuffer = V.createBuffer(), e.__webglNormalBuffer = V.createBuffer(), l.info.memory.geometries++
    }

    function xt(e) {
        e.__webglVertexBuffer = V.createBuffer(), e.__webglNormalBuffer = V.createBuffer(), e.__webglTangentBuffer = V.createBuffer(), e.__webglColorBuffer = V.createBuffer(), e.__webglUVBuffer = V.createBuffer(), e.__webglUV2Buffer = V.createBuffer(), e.__webglSkinIndicesBuffer = V.createBuffer(), e.__webglSkinWeightsBuffer = V.createBuffer(), e.__webglFaceBuffer = V.createBuffer(), e.__webglLineBuffer = V.createBuffer();
        var t, n;
        if (e.numMorphTargets) {
            e.__webglMorphTargetsBuffers = [];
            for (t = 0, n = e.numMorphTargets; t < n; t++)e.__webglMorphTargetsBuffers.push(V.createBuffer())
        }
        if (e.numMorphNormals) {
            e.__webglMorphNormalsBuffers = [];
            for (t = 0, n = e.numMorphNormals; t < n; t++)e.__webglMorphNormalsBuffers.push(V.createBuffer())
        }
        l.info.memory.geometries++
    }

    function Dt(e, t) {
        var n = e.vertices.length, r = t.material;
        if (r.attributes) {
            e.__webglCustomAttributesList === undefined && (e.__webglCustomAttributesList = []);
            for (var i in r.attributes) {
                var s = r.attributes[i];
                if (!s.__webglInitialized || s.createUniqueBuffers) {
                    s.__webglInitialized = !0;
                    var o = 1;
                    s.type === "v2" ? o = 2 : s.type === "v3" ? o = 3 : s.type === "v4" ? o = 4 : s.type === "c" && (o = 3), s.size = o, s.array = new Float32Array(n * o), s.buffer = V.createBuffer(), s.buffer.belongsToAttribute = i, s.needsUpdate = !0
                }
                e.__webglCustomAttributesList.push(s)
            }
        }
    }

    function Pt(e, t) {
        var n = e.vertices.length;
        e.__vertexArray = new Float32Array(n * 3), e.__colorArray = new Float32Array(n * 3), e.__sortArray = [], e.__webglParticleCount = n, Dt(e, t)
    }

    function Ht(e, t) {
        var n = e.vertices.length;
        e.__vertexArray = new Float32Array(n * 3), e.__colorArray = new Float32Array(n * 3), e.__lineDistanceArray = new Float32Array(n * 1), e.__webglLineCount = n, Dt(e, t)
    }

    function Bt(e, t) {
        var n = e.vertices.length;
        e.__vertexArray = new Float32Array(n * 3), e.__colorArray = new Float32Array(n * 3), e.__normalArray = new Float32Array(n * 3), e.__webglVertexCount = n, Dt(e, t)
    }

    function jt(e, t) {
        var n = t.geometry, r = e.faces3, i = r.length * 3, s = r.length * 1, o = r.length * 3, u = Ft(t, e), a = Ut(u),
            f = qt(u), l = Rt(u);
        e.__vertexArray = new Float32Array(i * 3), f && (e.__normalArray = new Float32Array(i * 3)), n.hasTangents && (e.__tangentArray = new Float32Array(i * 4)), l && (e.__colorArray = new Float32Array(i * 3)), a && (n.faceVertexUvs.length > 0 && (e.__uvArray = new Float32Array(i * 2)), n.faceVertexUvs.length > 1 && (e.__uv2Array = new Float32Array(i * 2))), t.geometry.skinWeights.length && t.geometry.skinIndices.length && (e.__skinIndexArray = new Float32Array(i * 4), e.__skinWeightArray = new Float32Array(i * 4)), e.__faceArray = new Uint16Array(s * 3), e.__lineArray = new Uint16Array(o * 2);
        var c, h;
        if (e.numMorphTargets) {
            e.__morphTargetsArrays = [];
            for (c = 0, h = e.numMorphTargets; c < h; c++)e.__morphTargetsArrays.push(new Float32Array(i * 3))
        }
        if (e.numMorphNormals) {
            e.__morphNormalsArrays = [];
            for (c = 0, h = e.numMorphNormals; c < h; c++)e.__morphNormalsArrays.push(new Float32Array(i * 3))
        }
        e.__webglFaceCount = s * 3, e.__webglLineCount = o * 2;
        if (u.attributes) {
            e.__webglCustomAttributesList === undefined && (e.__webglCustomAttributesList = []);
            for (var p in u.attributes) {
                var d = u.attributes[p], v = {};
                for (var m in d)v[m] = d[m];
                if (!v.__webglInitialized || v.createUniqueBuffers) {
                    v.__webglInitialized = !0;
                    var g = 1;
                    v.type === "v2" ? g = 2 : v.type === "v3" ? g = 3 : v.type === "v4" ? g = 4 : v.type === "c" && (g = 3), v.size = g, v.array = new Float32Array(i * g), v.buffer = V.createBuffer(), v.buffer.belongsToAttribute = p, d.needsUpdate = !0, v.__original = d
                }
                e.__webglCustomAttributesList.push(v)
            }
        }
        e.__inittedArrays = !0
    }

    function Ft(e, t) {
        return e.material instanceof THREE.MeshFaceMaterial ? e.material.materials[t.materialIndex] : e.material
    }

    function It(e) {
        return e && e.shading !== undefined && e.shading === THREE.SmoothShading
    }

    function qt(e) {
        return e instanceof THREE.MeshBasicMaterial && !e.envMap || e instanceof THREE.MeshDepthMaterial ? !1 : It(e) ? THREE.SmoothShading : THREE.FlatShading
    }

    function Rt(e) {
        return e.vertexColors ? e.vertexColors : !1
    }

    function Ut(e) {
        return e.map || e.lightMap || e.bumpMap || e.normalMap || e.specularMap || e instanceof THREE.ShaderMaterial ? !0 : !1
    }

    function zt(e) {
        var t, n, r;
        for (t in e.attributes)t === "index" ? r = V.ELEMENT_ARRAY_BUFFER : r = V.ARRAY_BUFFER, n = e.attributes[t], n.numItems === undefined && (n.numItems = n.array.length), n.buffer = V.createBuffer(), V.bindBuffer(r, n.buffer), V.bufferData(r, n.array, V.STATIC_DRAW)
    }

    function Wt(e, t, n) {
        var r, i, s, o, u, a, f = e.vertices, l = f.length, c = e.colors, h = c.length, p = e.__vertexArray,
            d = e.__colorArray, v = e.__sortArray, m = e.verticesNeedUpdate, g = e.elementsNeedUpdate,
            y = e.colorsNeedUpdate, b = e.__webglCustomAttributesList, w, E, S, x, T, N, C;
        if (n.sortParticles) {
            R.copy(q), R.multiply(n.matrixWorld);
            for (r = 0; r < l; r++)s = f[r], U.copy(s), U.applyProjection(R), v[r] = [U.z, r];
            v.sort(Zt);
            for (r = 0; r < l; r++)s = f[v[r][1]], o = r * 3, p[o] = s.x, p[o + 1] = s.y, p[o + 2] = s.z;
            for (i = 0; i < h; i++)o = i * 3, a = c[v[i][1]], d[o] = a.r, d[o + 1] = a.g, d[o + 2] = a.b;
            if (b)for (w = 0, E = b.length; w < E; w++) {
                C = b[w];
                if (C.boundTo !== undefined && C.boundTo !== "vertices")continue;
                o = 0, T = C.value.length;
                if (C.size === 1)for (x = 0; x < T; x++)u = v[x][1], C.array[x] = C.value[u]; else if (C.size === 2)for (x = 0; x < T; x++)u = v[x][1], N = C.value[u], C.array[o] = N.x, C.array[o + 1] = N.y, o += 2; else if (C.size === 3)if (C.type === "c")for (x = 0; x < T; x++)u = v[x][1], N = C.value[u], C.array[o] = N.r, C.array[o + 1] = N.g, C.array[o + 2] = N.b, o += 3; else for (x = 0; x < T; x++)u = v[x][1], N = C.value[u], C.array[o] = N.x, C.array[o + 1] = N.y, C.array[o + 2] = N.z, o += 3; else if (C.size === 4)for (x = 0; x < T; x++)u = v[x][1], N = C.value[u], C.array[o] = N.x, C.array[o + 1] = N.y, C.array[o + 2] = N.z, C.array[o + 3] = N.w, o += 4
            }
        } else {
            if (m)for (r = 0; r < l; r++)s = f[r], o = r * 3, p[o] = s.x, p[o + 1] = s.y, p[o + 2] = s.z;
            if (y)for (i = 0; i < h; i++)a = c[i], o = i * 3, d[o] = a.r, d[o + 1] = a.g, d[o + 2] = a.b;
            if (b)for (w = 0, E = b.length; w < E; w++) {
                C = b[w];
                if (C.needsUpdate && (C.boundTo === undefined || C.boundTo === "vertices")) {
                    T = C.value.length, o = 0;
                    if (C.size === 1)for (x = 0; x < T; x++)C.array[x] = C.value[x]; else if (C.size === 2)for (x = 0; x < T; x++)N = C.value[x], C.array[o] = N.x, C.array[o + 1] = N.y, o += 2; else if (C.size === 3)if (C.type === "c")for (x = 0; x < T; x++)N = C.value[x], C.array[o] = N.r, C.array[o + 1] = N.g, C.array[o + 2] = N.b, o += 3; else for (x = 0; x < T; x++)N = C.value[x], C.array[o] = N.x, C.array[o + 1] = N.y, C.array[o + 2] = N.z, o += 3; else if (C.size === 4)for (x = 0; x < T; x++)N = C.value[x], C.array[o] = N.x, C.array[o + 1] = N.y, C.array[o + 2] = N.z, C.array[o + 3] = N.w, o += 4
                }
            }
        }
        if (m || n.sortParticles) V.bindBuffer(V.ARRAY_BUFFER, e.__webglVertexBuffer), V.bufferData(V.ARRAY_BUFFER, p, t);
        if (y || n.sortParticles) V.bindBuffer(V.ARRAY_BUFFER, e.__webglColorBuffer), V.bufferData(V.ARRAY_BUFFER, d, t);
        if (b)for (w = 0, E = b.length; w < E; w++) {
            C = b[w];
            if (C.needsUpdate || n.sortParticles) V.bindBuffer(V.ARRAY_BUFFER, C.buffer), V.bufferData(V.ARRAY_BUFFER, C.array, t)
        }
    }

    function Xt(e, t) {
        var n, r, i, s, o, u, a = e.vertices, f = e.colors, l = e.lineDistances, c = a.length, h = f.length,
            p = l.length, d = e.__vertexArray, v = e.__colorArray, m = e.__lineDistanceArray, g = e.verticesNeedUpdate,
            y = e.colorsNeedUpdate, b = e.lineDistancesNeedUpdate, w = e.__webglCustomAttributesList, E, S, x, T, N, C,
            k;
        if (g) {
            for (n = 0; n < c; n++)s = a[n], o = n * 3, d[o] = s.x, d[o + 1] = s.y, d[o + 2] = s.z;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglVertexBuffer), V.bufferData(V.ARRAY_BUFFER, d, t)
        }
        if (y) {
            for (r = 0; r < h; r++)u = f[r], o = r * 3, v[o] = u.r, v[o + 1] = u.g, v[o + 2] = u.b;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglColorBuffer), V.bufferData(V.ARRAY_BUFFER, v, t)
        }
        if (b) {
            for (i = 0; i < p; i++)m[i] = l[i];
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglLineDistanceBuffer), V.bufferData(V.ARRAY_BUFFER, m, t)
        }
        if (w)for (E = 0, S = w.length; E < S; E++) {
            k = w[E];
            if (k.needsUpdate && (k.boundTo === undefined || k.boundTo === "vertices")) {
                o = 0, N = k.value.length;
                if (k.size === 1)for (T = 0; T < N; T++)k.array[T] = k.value[T]; else if (k.size === 2)for (T = 0; T < N; T++)C = k.value[T], k.array[o] = C.x, k.array[o + 1] = C.y, o += 2; else if (k.size === 3)if (k.type === "c")for (T = 0; T < N; T++)C = k.value[T], k.array[o] = C.r, k.array[o + 1] = C.g, k.array[o + 2] = C.b, o += 3; else for (T = 0; T < N; T++)C = k.value[T], k.array[o] = C.x, k.array[o + 1] = C.y, k.array[o + 2] = C.z, o += 3; else if (k.size === 4)for (T = 0; T < N; T++)C = k.value[T], k.array[o] = C.x, k.array[o + 1] = C.y, k.array[o + 2] = C.z, k.array[o + 3] = C.w, o += 4;
                V.bindBuffer(V.ARRAY_BUFFER, k.buffer), V.bufferData(V.ARRAY_BUFFER, k.array, t)
            }
        }
    }

    function Vt(e, t) {
        var n, r, i, s, o, u, a, f, l, c, h, p, d, v = e.vertices, m = e.colors, g = e.normals, y = v.length,
            b = m.length, w = g.length, E = e.__vertexArray, S = e.__colorArray, x = e.__normalArray,
            T = e.verticesNeedUpdate, N = e.colorsNeedUpdate, C = e.normalsNeedUpdate,
            k = e.__webglCustomAttributesList;
        if (T) {
            for (n = 0; n < y; n++)s = v[n], o = n * 3, E[o] = s.x, E[o + 1] = s.y, E[o + 2] = s.z;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglVertexBuffer), V.bufferData(V.ARRAY_BUFFER, E, t)
        }
        if (N) {
            for (r = 0; r < b; r++)u = m[r], o = r * 3, S[o] = u.r, S[o + 1] = u.g, S[o + 2] = u.b;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglColorBuffer), V.bufferData(V.ARRAY_BUFFER, S, t)
        }
        if (C) {
            for (i = 0; i < w; i++)a = g[i], o = i * 3, x[o] = a.x, x[o + 1] = a.y, x[o + 2] = a.z;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglNormalBuffer), V.bufferData(V.ARRAY_BUFFER, x, t)
        }
        if (k)for (f = 0, l = k.length; f < l; f++) {
            p = k[f];
            if (p.needsUpdate && (p.boundTo === undefined || p.boundTo === "vertices")) {
                o = 0, h = p.value.length;
                if (p.size === 1)for (c = 0; c < h; c++)p.array[c] = p.value[c]; else if (p.size === 2)for (c = 0; c < h; c++)d = p.value[c], p.array[o] = d.x, p.array[o + 1] = d.y, o += 2; else if (p.size === 3)if (p.type === "c")for (c = 0; c < h; c++)d = p.value[c], p.array[o] = d.r, p.array[o + 1] = d.g, p.array[o + 2] = d.b, o += 3; else for (c = 0; c < h; c++)d = p.value[c], p.array[o] = d.x, p.array[o + 1] = d.y, p.array[o + 2] = d.z, o += 3; else if (p.size === 4)for (c = 0; c < h; c++)d = p.value[c], p.array[o] = d.x, p.array[o + 1] = d.y, p.array[o + 2] = d.z, p.array[o + 3] = d.w, o += 4;
                V.bindBuffer(V.ARRAY_BUFFER, p.buffer), V.bufferData(V.ARRAY_BUFFER, p.array, t)
            }
        }
    }

    function $t(e, t, n, r, i) {
        if (!e.__inittedArrays)return;
        var s = qt(i), o = Rt(i), u = Ut(i), a = s === THREE.SmoothShading, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x,
            T, N, C, k, L, A, O, M, _, D, P, H, B, j, F, I, q, R, U, z, W, X, $, J, K, Q, G, Y, Z, et, tt, nt, rt, it,
            st, ot, ut, at, ft, lt, ct, ht, pt, dt = 0, vt = 0, mt = 0, gt = 0, yt = 0, bt = 0, wt = 0, Et = 0, St = 0,
            xt = 0, Tt = 0, Nt = 0, Ct = 0, kt, Lt = e.__vertexArray, At = e.__uvArray, Ot = e.__uv2Array,
            Mt = e.__normalArray, _t = e.__tangentArray, Dt = e.__colorArray, Pt = e.__skinIndexArray,
            Ht = e.__skinWeightArray, Bt = e.__morphTargetsArrays, jt = e.__morphNormalsArrays,
            Ft = e.__webglCustomAttributesList, It, zt = e.__faceArray, Wt = e.__lineArray, Xt = t.geometry,
            Vt = Xt.verticesNeedUpdate, $t = Xt.elementsNeedUpdate, Jt = Xt.uvsNeedUpdate, Kt = Xt.normalsNeedUpdate,
            Qt = Xt.tangentsNeedUpdate, Gt = Xt.colorsNeedUpdate, Yt = Xt.morphTargetsNeedUpdate, Zt = Xt.vertices,
            en = e.faces3, tn = Xt.faces, nn = Xt.faceVertexUvs[0], rn = Xt.faceVertexUvs[1], sn = Xt.colors,
            on = Xt.skinIndices, un = Xt.skinWeights, an = Xt.morphTargets, fn = Xt.morphNormals;
        if (Vt) {
            for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], E = Zt[h.a], S = Zt[h.b], x = Zt[h.c], Lt[vt] = E.x, Lt[vt + 1] = E.y, Lt[vt + 2] = E.z, Lt[vt + 3] = S.x, Lt[vt + 4] = S.y, Lt[vt + 5] = S.z, Lt[vt + 6] = x.x, Lt[vt + 7] = x.y, Lt[vt + 8] = x.z, vt += 9;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglVertexBuffer), V.bufferData(V.ARRAY_BUFFER, Lt, n)
        }
        if (Yt)for (ut = 0, at = an.length; ut < at; ut++) {
            Tt = 0;
            for (f = 0, l = en.length; f < l; f++)ct = en[f], h = tn[ct], E = an[ut].vertices[h.a], S = an[ut].vertices[h.b], x = an[ut].vertices[h.c], ft = Bt[ut], ft[Tt] = E.x, ft[Tt + 1] = E.y, ft[Tt + 2] = E.z, ft[Tt + 3] = S.x, ft[Tt + 4] = S.y, ft[Tt + 5] = S.z, ft[Tt + 6] = x.x, ft[Tt + 7] = x.y, ft[Tt + 8] = x.z, i.morphNormals && (a ? (ht = fn[ut].vertexNormals[ct], A = ht.a, O = ht.b, M = ht.c) : (A = fn[ut].faceNormals[ct], O = A, M = A), lt = jt[ut], lt[Tt] = A.x, lt[Tt + 1] = A.y, lt[Tt + 2] = A.z, lt[Tt + 3] = O.x, lt[Tt + 4] = O.y, lt[Tt + 5] = O.z, lt[Tt + 6] = M.x, lt[Tt + 7] = M.y, lt[Tt + 8] = M.z), Tt += 9;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglMorphTargetsBuffers[ut]), V.bufferData(V.ARRAY_BUFFER, Bt[ut], n), i.morphNormals && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglMorphNormalsBuffers[ut]), V.bufferData(V.ARRAY_BUFFER, jt[ut], n))
        }
        if (un.length) {
            for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], j = un[h.a], F = un[h.b], I = un[h.c], Ht[xt] = j.x, Ht[xt + 1] = j.y, Ht[xt + 2] = j.z, Ht[xt + 3] = j.w, Ht[xt + 4] = F.x, Ht[xt + 5] = F.y, Ht[xt + 6] = F.z, Ht[xt + 7] = F.w, Ht[xt + 8] = I.x, Ht[xt + 9] = I.y, Ht[xt + 10] = I.z, Ht[xt + 11] = I.w, R = on[h.a], U = on[h.b], z = on[h.c], Pt[xt] = R.x, Pt[xt + 1] = R.y, Pt[xt + 2] = R.z, Pt[xt + 3] = R.w, Pt[xt + 4] = U.x, Pt[xt + 5] = U.y, Pt[xt + 6] = U.z, Pt[xt + 7] = U.w, Pt[xt + 8] = z.x, Pt[xt + 9] = z.y, Pt[xt + 10] = z.z, Pt[xt + 11] = z.w, xt += 12;
            xt > 0 && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglSkinIndicesBuffer), V.bufferData(V.ARRAY_BUFFER, Pt, n), V.bindBuffer(V.ARRAY_BUFFER, e.__webglSkinWeightsBuffer), V.bufferData(V.ARRAY_BUFFER, Ht, n))
        }
        if (Gt && o) {
            for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], m = h.vertexColors, g = h.color, m.length === 3 && o === THREE.VertexColors ? (D = m[0], P = m[1], H = m[2]) : (D = g, P = g, H = g), Dt[St] = D.r, Dt[St + 1] = D.g, Dt[St + 2] = D.b, Dt[St + 3] = P.r, Dt[St + 4] = P.g, Dt[St + 5] = P.b, Dt[St + 6] = H.r, Dt[St + 7] = H.g, Dt[St + 8] = H.b, St += 9;
            St > 0 && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglColorBuffer), V.bufferData(V.ARRAY_BUFFER, Dt, n))
        }
        if (Qt && Xt.hasTangents) {
            for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], y = h.vertexTangents, N = y[0], C = y[1], k = y[2], _t[wt] = N.x, _t[wt + 1] = N.y, _t[wt + 2] = N.z, _t[wt + 3] = N.w, _t[wt + 4] = C.x, _t[wt + 5] = C.y, _t[wt + 6] = C.z, _t[wt + 7] = C.w, _t[wt + 8] = k.x, _t[wt + 9] = k.y, _t[wt + 10] = k.z, _t[wt + 11] = k.w, wt += 12;
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglTangentBuffer), V.bufferData(V.ARRAY_BUFFER, _t, n)
        }
        if (Kt && s) {
            for (f = 0, l = en.length; f < l; f++) {
                h = tn[en[f]], p = h.vertexNormals, d = h.normal;
                if (p.length === 3 && a)for (nt = 0; nt < 3; nt++)it = p[nt], Mt[bt] = it.x, Mt[bt + 1] = it.y, Mt[bt + 2] = it.z, bt += 3; else for (nt = 0; nt < 3; nt++)Mt[bt] = d.x, Mt[bt + 1] = d.y, Mt[bt + 2] = d.z, bt += 3
            }
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglNormalBuffer), V.bufferData(V.ARRAY_BUFFER, Mt, n)
        }
        if (Jt && nn && u) {
            for (f = 0, l = en.length; f < l; f++) {
                c = en[f], b = nn[c];
                if (b === undefined)continue;
                for (nt = 0; nt < 3; nt++)st = b[nt], At[mt] = st.x, At[mt + 1] = st.y, mt += 2
            }
            mt > 0 && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglUVBuffer), V.bufferData(V.ARRAY_BUFFER, At, n))
        }
        if (Jt && rn && u) {
            for (f = 0, l = en.length; f < l; f++) {
                c = en[f], w = rn[c];
                if (w === undefined)continue;
                for (nt = 0; nt < 3; nt++)ot = w[nt], Ot[gt] = ot.x, Ot[gt + 1] = ot.y, gt += 2
            }
            gt > 0 && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglUV2Buffer), V.bufferData(V.ARRAY_BUFFER, Ot, n))
        }
        if ($t) {
            for (f = 0, l = en.length; f < l; f++)zt[yt] = dt, zt[yt + 1] = dt + 1, zt[yt + 2] = dt + 2, yt += 3, Wt[Et] = dt, Wt[Et + 1] = dt + 1, Wt[Et + 2] = dt, Wt[Et + 3] = dt + 2, Wt[Et + 4] = dt + 1, Wt[Et + 5] = dt + 2, Et += 6, dt += 3;
            V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer), V.bufferData(V.ELEMENT_ARRAY_BUFFER, zt, n), V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer), V.bufferData(V.ELEMENT_ARRAY_BUFFER, Wt, n)
        }
        if (Ft)for (nt = 0, rt = Ft.length; nt < rt; nt++) {
            It = Ft[nt];
            if (!It.__original.needsUpdate)continue;
            Nt = 0, Ct = 0;
            if (It.size === 1) {
                if (It.boundTo === undefined || It.boundTo === "vertices")for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], It.array[Nt] = It.value[h.a], It.array[Nt + 1] = It.value[h.b], It.array[Nt + 2] = It.value[h.c], Nt += 3; else if (It.boundTo === "faces")for (f = 0, l = en.length; f < l; f++)kt = It.value[en[f]], It.array[Nt] = kt, It.array[Nt + 1] = kt, It.array[Nt + 2] = kt, Nt += 3
            } else if (It.size === 2) {
                if (It.boundTo === undefined || It.boundTo === "vertices")for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], E = It.value[h.a], S = It.value[h.b], x = It.value[h.c], It.array[Nt] = E.x, It.array[Nt + 1] = E.y, It.array[Nt + 2] = S.x, It.array[Nt + 3] = S.y, It.array[Nt + 4] = x.x, It.array[Nt + 5] = x.y, Nt += 6; else if (It.boundTo === "faces")for (f = 0, l = en.length; f < l; f++)kt = It.value[en[f]], E = kt, S = kt, x = kt, It.array[Nt] = E.x, It.array[Nt + 1] = E.y, It.array[Nt + 2] = S.x, It.array[Nt + 3] = S.y, It.array[Nt + 4] = x.x, It.array[Nt + 5] = x.y, Nt += 6
            } else if (It.size === 3) {
                var ln;
                It.type === "c" ? ln = ["r", "g", "b"] : ln = ["x", "y", "z"];
                if (It.boundTo === undefined || It.boundTo === "vertices")for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], E = It.value[h.a], S = It.value[h.b], x = It.value[h.c], It.array[Nt] = E[ln[0]], It.array[Nt + 1] = E[ln[1]], It.array[Nt + 2] = E[ln[2]], It.array[Nt + 3] = S[ln[0]], It.array[Nt + 4] = S[ln[1]], It.array[Nt + 5] = S[ln[2]], It.array[Nt + 6] = x[ln[0]], It.array[Nt + 7] = x[ln[1]], It.array[Nt + 8] = x[ln[2]], Nt += 9; else if (It.boundTo === "faces")for (f = 0, l = en.length; f < l; f++)kt = It.value[en[f]], E = kt, S = kt, x = kt, It.array[Nt] = E[ln[0]], It.array[Nt + 1] = E[ln[1]], It.array[Nt + 2] = E[ln[2]], It.array[Nt + 3] = S[ln[0]], It.array[Nt + 4] = S[ln[1]], It.array[Nt + 5] = S[ln[2]], It.array[Nt + 6] = x[ln[0]], It.array[Nt + 7] = x[ln[1]], It.array[Nt + 8] = x[ln[2]], Nt += 9; else if (It.boundTo === "faceVertices")for (f = 0, l = en.length; f < l; f++)kt = It.value[en[f]], E = kt[0], S = kt[1], x = kt[2], It.array[Nt] = E[ln[0]], It.array[Nt + 1] = E[ln[1]], It.array[Nt + 2] = E[ln[2]], It.array[Nt + 3] = S[ln[0]], It.array[Nt + 4] = S[ln[1]], It.array[Nt + 5] = S[ln[2]], It.array[Nt + 6] = x[ln[0]], It.array[Nt + 7] = x[ln[1]], It.array[Nt + 8] = x[ln[2]], Nt += 9
            } else if (It.size === 4)if (It.boundTo === undefined || It.boundTo === "vertices")for (f = 0, l = en.length; f < l; f++)h = tn[en[f]], E = It.value[h.a], S = It.value[h.b], x = It.value[h.c], It.array[Nt] = E.x, It.array[Nt + 1] = E.y, It.array[Nt + 2] = E.z, It.array[Nt + 3] = E.w, It.array[Nt + 4] = S.x, It.array[Nt + 5] = S.y, It.array[Nt + 6] = S.z, It.array[Nt + 7] = S.w, It.array[Nt + 8] = x.x, It.array[Nt + 9] = x.y, It.array[Nt + 10] = x.z, It.array[Nt + 11] = x.w, Nt += 12; else if (It.boundTo === "faces")for (f = 0, l = en.length; f < l; f++)kt = It.value[en[f]], E = kt, S = kt, x = kt, It.array[Nt] = E.x, It.array[Nt + 1] = E.y, It.array[Nt + 2] = E.z, It.array[Nt + 3] = E.w, It.array[Nt + 4] = S.x, It.array[Nt + 5] = S.y, It.array[Nt + 6] = S.z, It.array[Nt + 7] = S.w, It.array[Nt + 8] = x.x, It.array[Nt + 9] = x.y, It.array[Nt + 10] = x.z, It.array[Nt + 11] = x.w, Nt += 12; else if (It.boundTo === "faceVertices")for (f = 0, l = en.length; f < l; f++)kt = It.value[en[f]], E = kt[0], S = kt[1], x = kt[2], It.array[Nt] = E.x, It.array[Nt + 1] = E.y, It.array[Nt + 2] = E.z, It.array[Nt + 3] = E.w, It.array[Nt + 4] = S.x, It.array[Nt + 5] = S.y, It.array[Nt + 6] = S.z, It.array[Nt + 7] = S.w, It.array[Nt + 8] = x.x, It.array[Nt + 9] = x.y, It.array[Nt + 10] = x.z, It.array[Nt + 11] = x.w, Nt += 12;
            V.bindBuffer(V.ARRAY_BUFFER, It.buffer), V.bufferData(V.ARRAY_BUFFER, It.array, n)
        }
        r && (delete e.__inittedArrays, delete e.__colorArray, delete e.__normalArray, delete e.__tangentArray, delete e.__uvArray, delete e.__uv2Array, delete e.__faceArray, delete e.__vertexArray, delete e.__lineArray, delete e.__skinIndexArray, delete e.__skinWeightArray)
    }

    function Jt(e, t, n) {
        var r = e.attributes, i, s;
        for (i in r)s = r[i], s.needsUpdate && (i === "index" ? (V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, s.buffer), V.bufferData(V.ELEMENT_ARRAY_BUFFER, s.array, t)) : (V.bindBuffer(V.ARRAY_BUFFER, s.buffer), V.bufferData(V.ARRAY_BUFFER, s.array, t)), s.needsUpdate = !1), n && !s.dynamic && (s.array = null)
    }

    function Kt(e) {
        F[e] || (V.enableVertexAttribArray(e), F[e] = !0)
    }

    function Qt() {
        for (var e in F)F[e] && (V.disableVertexAttribArray(e), F[e] = !1)
    }

    function Gt(e, t, n) {
        var r = e.program.attributes;
        n.morphTargetBase !== -1 && r.position >= 0 ? (V.bindBuffer(V.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[n.morphTargetBase]), Kt(r.position), V.vertexAttribPointer(r.position, 3, V.FLOAT, !1, 0, 0)) : r.position >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglVertexBuffer), Kt(r.position), V.vertexAttribPointer(r.position, 3, V.FLOAT, !1, 0, 0));
        if (n.morphTargetForcedOrder.length) {
            var i = 0, s = n.morphTargetForcedOrder, o = n.morphTargetInfluences;
            while (i < e.numSupportedMorphTargets && i < s.length)r["morphTarget" + i] >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[s[i]]), Kt(r["morphTarget" + i]), V.vertexAttribPointer(r["morphTarget" + i], 3, V.FLOAT, !1, 0, 0)), r["morphNormal" + i] >= 0 && e.morphNormals && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[s[i]]), Kt(r["morphNormal" + i]), V.vertexAttribPointer(r["morphNormal" + i], 3, V.FLOAT, !1, 0, 0)), n.__webglMorphTargetInfluences[i] = o[s[i]], i++
        } else {
            var u, a = [], o = n.morphTargetInfluences, f, l = o.length;
            for (f = 0; f < l; f++)u = o[f], u > 0 && a.push([u, f]);
            a.length > e.numSupportedMorphTargets ? (a.sort(Zt), a.length = e.numSupportedMorphTargets) : a.length > e.numSupportedMorphNormals ? a.sort(Zt) : a.length === 0 && a.push([0, 0]);
            var c, i = 0;
            while (i < e.numSupportedMorphTargets)a[i] ? (c = a[i][1], r["morphTarget" + i] >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[c]), Kt(r["morphTarget" + i]), V.vertexAttribPointer(r["morphTarget" + i], 3, V.FLOAT, !1, 0, 0)), r["morphNormal" + i] >= 0 && e.morphNormals && (V.bindBuffer(V.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[c]), Kt(r["morphNormal" + i]), V.vertexAttribPointer(r["morphNormal" + i], 3, V.FLOAT, !1, 0, 0)), n.__webglMorphTargetInfluences[i] = o[c]) : n.__webglMorphTargetInfluences[i] = 0, i++
        }
        e.program.uniforms.morphTargetInfluences !== null && V.uniform1fv(e.program.uniforms.morphTargetInfluences, n.__webglMorphTargetInfluences)
    }

    function Yt(e, t) {
        return e.z !== t.z ? t.z - e.z : e.id - t.id
    }

    function Zt(e, t) {
        return t[0] - e[0]
    }

    function en(e, t, n) {
        if (!e.length)return;
        for (var r = 0,
                 i = e.length; r < i; r++)p = null, g = null, S = -1, C = -1, k = -1, w = -1, E = -1, m = -1, v = -1, W = !0, e[r].render(t, n, B, j), p = null, g = null, S = -1, C = -1, k = -1, w = -1, E = -1, m = -1, v = -1, W = !0
    }

    function tn(e, t, n, r, i, s, o, u) {
        var a, f, c, h, p, d, v;
        t ? (p = e.length - 1, d = -1, v = -1) : (p = 0, d = e.length, v = 1);
        for (var m = p; m !== d; m += v) {
            a = e[m];
            if (a.render) {
                f = a.object, c = a.buffer;
                if (u) h = u; else {
                    h = a[n];
                    if (!h)continue;
                    o && l.setBlending(h.blending, h.blendEquation, h.blendSrc, h.blendDst), l.setDepthTest(h.depthTest), l.setDepthWrite(h.depthWrite), Hn(h.polygonOffset, h.polygonOffsetFactor, h.polygonOffsetUnits)
                }
                l.setMaterialFaces(h), c instanceof THREE.BufferGeometry ? l.renderBufferDirect(r, i, s, h, c, f) : l.renderBuffer(r, i, s, h, c, f)
            }
        }
    }

    function nn(e, t, n, r, i, s, o) {
        var u, a, f, c;
        for (var h = 0, p = e.length; h < p; h++) {
            u = e[h], a = u.object;
            if (a.visible) {
                if (o) f = o; else {
                    f = u[t];
                    if (!f)continue;
                    s && l.setBlending(f.blending, f.blendEquation, f.blendSrc, f.blendDst), l.setDepthTest(f.depthTest), l.setDepthWrite(f.depthWrite), Hn(f.polygonOffset, f.polygonOffsetFactor, f.polygonOffsetUnits)
                }
                l.renderImmediateObject(n, r, i, f, a)
            }
        }
    }

    function rn(e) {
        var t = e.object, n = t.material;
        n.transparent ? (e.transparent = n, e.opaque = null) : (e.opaque = n, e.transparent = null)
    }

    function sn(e) {
        var t = e.object, n = e.buffer, r, i, s;
        s = t.material, s instanceof THREE.MeshFaceMaterial ? (i = n.materialIndex, r = s.materials[i], r.transparent ? (e.transparent = r, e.opaque = null) : (e.opaque = r, e.transparent = null)) : (r = s, r && (r.transparent ? (e.transparent = r, e.opaque = null) : (e.opaque = r, e.transparent = null)))
    }

    function on(e, t) {
        var n, r, i, s, o, u, a = {}, f = e.morphTargets.length, l = e.morphNormals.length,
            c = t instanceof THREE.MeshFaceMaterial;
        e.geometryGroups = {};
        for (n = 0, r = e.faces.length; n < r; n++)i = e.faces[n], s = c ? i.materialIndex : 0, a[s] === undefined && (a[s] = {
            hash: s,
            counter: 0
        }), u = a[s].hash + "_" + a[s].counter, e.geometryGroups[u] === undefined && (e.geometryGroups[u] = {
            faces3: [],
            materialIndex: s,
            vertices: 0,
            numMorphTargets: f,
            numMorphNormals: l
        }), o = 3, e.geometryGroups[u].vertices + o > 65535 && (a[s].counter += 1, u = a[s].hash + "_" + a[s].counter, e.geometryGroups[u] === undefined && (e.geometryGroups[u] = {
            faces3: [],
            materialIndex: s,
            vertices: 0,
            numMorphTargets: f,
            numMorphNormals: l
        })), e.geometryGroups[u].faces3.push(n), e.geometryGroups[u].vertices += o;
        e.geometryGroupsList = [];
        for (var h in e.geometryGroups)e.geometryGroups[h].id = y++, e.geometryGroupsList.push(e.geometryGroups[h])
    }

    function un(e, t) {
        var n, r, i, s;
        if (e.__webglInit === undefined) {
            e.__webglInit = !0, e._modelViewMatrix = new THREE.Matrix4, e._normalMatrix = new THREE.Matrix3, e.geometry !== undefined && e.geometry.__webglInit === undefined && (e.geometry.__webglInit = !0, e.geometry.addEventListener("dispose", Tt)), r = e.geometry;
            if (r !== undefined)if (r instanceof THREE.BufferGeometry) zt(r); else if (e instanceof THREE.Mesh) {
                i = e.material, r.geometryGroups === undefined && on(r, i);
                for (n in r.geometryGroups)s = r.geometryGroups[n], s.__webglVertexBuffer || (xt(s), jt(s, e), r.verticesNeedUpdate = !0, r.morphTargetsNeedUpdate = !0, r.elementsNeedUpdate = !0, r.uvsNeedUpdate = !0, r.normalsNeedUpdate = !0, r.tangentsNeedUpdate = !0, r.colorsNeedUpdate = !0)
            } else e instanceof THREE.Ribbon ? r.__webglVertexBuffer || (St(r), Bt(r, e), r.verticesNeedUpdate = !0, r.colorsNeedUpdate = !0, r.normalsNeedUpdate = !0) : e instanceof THREE.Line ? r.__webglVertexBuffer || (Et(r), Ht(r, e), r.verticesNeedUpdate = !0, r.colorsNeedUpdate = !0, r.lineDistancesNeedUpdate = !0) : e instanceof THREE.ParticleSystem && (r.__webglVertexBuffer || (wt(r), Pt(r, e), r.verticesNeedUpdate = !0, r.colorsNeedUpdate = !0))
        }
        if (e.__webglActive === undefined) {
            if (e instanceof THREE.Mesh) {
                r = e.geometry;
                if (r instanceof THREE.BufferGeometry) an(t.__webglObjects, r, e); else if (r instanceof THREE.Geometry)for (n in r.geometryGroups)s = r.geometryGroups[n], an(t.__webglObjects, s, e)
            } else e instanceof THREE.Ribbon || e instanceof THREE.Line || e instanceof THREE.ParticleSystem ? (r = e.geometry, an(t.__webglObjects, r, e)) : e instanceof THREE.ImmediateRenderObject || e.immediateRenderCallback ? fn(t.__webglObjectsImmediate, e) : e instanceof THREE.Sprite ? t.__webglSprites.push(e) : e instanceof THREE.LensFlare && t.__webglFlares.push(e);
            e.__webglActive = !0
        }
    }

    function an(e, t, n) {
        e.push({id: null, buffer: t, object: n, opaque: null, transparent: null, z: 0})
    }

    function fn(e, t) {
        e.push({id: null, object: t, opaque: null, transparent: null, z: 0})
    }

    function ln(e) {
        var t = e.geometry, n, r, i;
        if (t instanceof THREE.BufferGeometry) Jt(t, V.DYNAMIC_DRAW, !t.dynamic); else if (e instanceof THREE.Mesh) {
            for (var s = 0,
                     o = t.geometryGroupsList.length; s < o; s++)n = t.geometryGroupsList[s], i = Ft(e, n), t.buffersNeedUpdate && jt(n, e), r = i.attributes && cn(i), (t.verticesNeedUpdate || t.morphTargetsNeedUpdate || t.elementsNeedUpdate || t.uvsNeedUpdate || t.normalsNeedUpdate || t.colorsNeedUpdate || t.tangentsNeedUpdate || r) && $t(n, e, V.DYNAMIC_DRAW, !t.dynamic, i);
            t.verticesNeedUpdate = !1, t.morphTargetsNeedUpdate = !1, t.elementsNeedUpdate = !1, t.uvsNeedUpdate = !1, t.normalsNeedUpdate = !1, t.colorsNeedUpdate = !1, t.tangentsNeedUpdate = !1, t.buffersNeedUpdate = !1, i.attributes && hn(i)
        } else e instanceof THREE.Ribbon ? (i = Ft(e, t), r = i.attributes && cn(i), (t.verticesNeedUpdate || t.colorsNeedUpdate || t.normalsNeedUpdate || r) && Vt(t, V.DYNAMIC_DRAW), t.verticesNeedUpdate = !1, t.colorsNeedUpdate = !1, t.normalsNeedUpdate = !1, i.attributes && hn(i)) : e instanceof THREE.Line ? (i = Ft(e, t), r = i.attributes && cn(i), (t.verticesNeedUpdate || t.colorsNeedUpdate || t.lineDistancesNeedUpdate || r) && Xt(t, V.DYNAMIC_DRAW), t.verticesNeedUpdate = !1, t.colorsNeedUpdate = !1, t.lineDistancesNeedUpdate = !1, i.attributes && hn(i)) : e instanceof THREE.ParticleSystem && (i = Ft(e, t), r = i.attributes && cn(i), (t.verticesNeedUpdate || t.colorsNeedUpdate || e.sortParticles || r) && Wt(t, V.DYNAMIC_DRAW, e), t.verticesNeedUpdate = !1, t.colorsNeedUpdate = !1, i.attributes && hn(i))
    }

    function cn(e) {
        for (var t in e.attributes)if (e.attributes[t].needsUpdate)return !0;
        return !1
    }

    function hn(e) {
        for (var t in e.attributes)e.attributes[t].needsUpdate = !1
    }

    function pn(e, t) {
        e instanceof THREE.Mesh || e instanceof THREE.ParticleSystem || e instanceof THREE.Ribbon || e instanceof THREE.Line ? dn(t.__webglObjects, e) : e instanceof THREE.Sprite ? vn(t.__webglSprites, e) : e instanceof THREE.LensFlare ? vn(t.__webglFlares, e) : (e instanceof THREE.ImmediateRenderObject || e.immediateRenderCallback) && dn(t.__webglObjectsImmediate, e), delete e.__webglActive
    }

    function dn(e, t) {
        for (var n = e.length - 1; n >= 0; n--)e[n].object === t && e.splice(n, 1)
    }

    function vn(e, t) {
        for (var n = e.length - 1; n >= 0; n--)e[n] === t && e.splice(n, 1)
    }

    function mn(e, t) {
        e.uniforms = THREE.UniformsUtils.clone(t.uniforms), e.vertexShader = t.vertexShader, e.fragmentShader = t.fragmentShader
    }

    function gn(e, t, n, r, i) {
        b = 0, r.needsUpdate && (r.program && _t(r), l.initMaterial(r, t, n, i), r.needsUpdate = !1), r.morphTargets && (i.__webglMorphTargetInfluences || (i.__webglMorphTargetInfluences = new Float32Array(l.maxMorphTargets)));
        var s = !1, o = r.program, u = o.uniforms, a = r.uniforms;
        o !== p && (V.useProgram(o), p = o, s = !0), r.id !== v && (v = r.id, s = !0);
        if (s || e !== g) V.uniformMatrix4fv(u.projectionMatrix, !1, e.projectionMatrix.elements), e !== g && (g = e);
        if (r.skinning)if (it && i.useVertexTexture) {
            if (u.boneTexture !== null) {
                var f = Ln();
                V.uniform1i(u.boneTexture, f), l.setTexture(i.boneTexture, f)
            }
        } else u.boneGlobalMatrices !== null && V.uniformMatrix4fv(u.boneGlobalMatrices, !1, i.boneMatrices);
        if (s) {
            n && r.fog && Sn(a, n);
            if (r instanceof THREE.MeshPhongMaterial || r instanceof THREE.MeshLambertMaterial || r.lights) W && (Dn(o, t), W = !1), Nn(a, X);
            (r instanceof THREE.MeshBasicMaterial || r instanceof THREE.MeshLambertMaterial || r instanceof THREE.MeshPhongMaterial) && yn(a, r), r instanceof THREE.LineBasicMaterial ? bn(a, r) : r instanceof THREE.LineDashedMaterial ? (bn(a, r), wn(a, r)) : r instanceof THREE.ParticleBasicMaterial ? En(a, r) : r instanceof THREE.MeshPhongMaterial ? xn(a, r) : r instanceof THREE.MeshLambertMaterial ? Tn(a, r) : r instanceof THREE.MeshDepthMaterial ? (a.mNear.value = e.near, a.mFar.value = e.far, a.opacity.value = r.opacity) : r instanceof THREE.MeshNormalMaterial && (a.opacity.value = r.opacity), i.receiveShadow && !r._shadowPass && Cn(a, t), An(o, r.uniformsList), (r instanceof THREE.ShaderMaterial || r instanceof THREE.MeshPhongMaterial || r.envMap) && u.cameraPosition !== null && (U.getPositionFromMatrix(e.matrixWorld), V.uniform3f(u.cameraPosition, U.x, U.y, U.z)), (r instanceof THREE.MeshPhongMaterial || r instanceof THREE.MeshLambertMaterial || r instanceof THREE.ShaderMaterial || r.skinning) && u.viewMatrix !== null && V.uniformMatrix4fv(u.viewMatrix, !1, e.matrixWorldInverse.elements)
        }
        return kn(u, i), u.modelMatrix !== null && V.uniformMatrix4fv(u.modelMatrix, !1, i.matrixWorld.elements), o
    }

    function yn(e, t) {
        e.opacity.value = t.opacity, l.gammaInput ? e.diffuse.value.copyGammaToLinear(t.color) : e.diffuse.value = t.color, e.map.value = t.map, e.lightMap.value = t.lightMap, e.specularMap.value = t.specularMap, t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale), t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale));
        var n;
        t.map ? n = t.map : t.specularMap ? n = t.specularMap : t.normalMap ? n = t.normalMap : t.bumpMap && (n = t.bumpMap);
        if (n !== undefined) {
            var r = n.offset, i = n.repeat;
            e.offsetRepeat.value.set(r.x, r.y, i.x, i.y)
        }
        e.envMap.value = t.envMap, e.flipEnvMap.value = t.envMap instanceof THREE.WebGLRenderTargetCube ? 1 : -1, l.gammaInput ? e.reflectivity.value = t.reflectivity : e.reflectivity.value = t.reflectivity, e.refractionRatio.value = t.refractionRatio, e.combine.value = t.combine, e.useRefract.value = t.envMap && t.envMap.mapping instanceof THREE.CubeRefractionMapping
    }

    function bn(e, t) {
        e.diffuse.value = t.color, e.opacity.value = t.opacity
    }

    function wn(e, t) {
        e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale
    }

    function En(e, n) {
        e.psColor.value = n.color, e.opacity.value = n.opacity, e.size.value = n.size, e.scale.value = t.height / 2, e.map.value = n.map
    }

    function Sn(e, t) {
        e.fogColor.value = t.color, t instanceof THREE.Fog ? (e.fogNear.value = t.near, e.fogFar.value = t.far) : t instanceof THREE.FogExp2 && (e.fogDensity.value = t.density)
    }

    function xn(e, t) {
        e.shininess.value = t.shininess, l.gammaInput ? (e.ambient.value.copyGammaToLinear(t.ambient), e.emissive.value.copyGammaToLinear(t.emissive), e.specular.value.copyGammaToLinear(t.specular)) : (e.ambient.value = t.ambient, e.emissive.value = t.emissive, e.specular.value = t.specular), t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
    }

    function Tn(e, t) {
        l.gammaInput ? (e.ambient.value.copyGammaToLinear(t.ambient), e.emissive.value.copyGammaToLinear(t.emissive)) : (e.ambient.value = t.ambient, e.emissive.value = t.emissive), t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
    }

    function Nn(e, t) {
        e.ambientLightColor.value = t.ambient, e.directionalLightColor.value = t.directional.colors, e.directionalLightDirection.value = t.directional.positions, e.pointLightColor.value = t.point.colors, e.pointLightPosition.value = t.point.positions, e.pointLightDistance.value = t.point.distances, e.spotLightColor.value = t.spot.colors, e.spotLightPosition.value = t.spot.positions, e.spotLightDistance.value = t.spot.distances, e.spotLightDirection.value = t.spot.directions, e.spotLightAngleCos.value = t.spot.anglesCos, e.spotLightExponent.value = t.spot.exponents, e.hemisphereLightSkyColor.value = t.hemi.skyColors, e.hemisphereLightGroundColor.value = t.hemi.groundColors, e.hemisphereLightDirection.value = t.hemi.positions
    }

    function Cn(e, t) {
        if (e.shadowMatrix) {
            var n = 0;
            for (var r = 0, i = t.length; r < i; r++) {
                var s = t[r];
                if (!s.castShadow)continue;
                if (s instanceof THREE.SpotLight || s instanceof THREE.DirectionalLight && !s.shadowCascade) e.shadowMap.value[n] = s.shadowMap, e.shadowMapSize.value[n] = s.shadowMapSize, e.shadowMatrix.value[n] = s.shadowMatrix, e.shadowDarkness.value[n] = s.shadowDarkness, e.shadowBias.value[n] = s.shadowBias, n++
            }
        }
    }

    function kn(e, t) {
        V.uniformMatrix4fv(e.modelViewMatrix, !1, t._modelViewMatrix.elements), e.normalMatrix && V.uniformMatrix3fv(e.normalMatrix, !1, t._normalMatrix.elements)
    }

    function Ln() {
        var e = b;
        return e >= Y && 0, b += 1, e
    }

    function An(e, t) {
        var n, r, i, s, o, u, a, f, c, h, p;
        for (c = 0, h = t.length; c < h; c++) {
            s = e.uniforms[t[c][1]];
            if (!s)continue;
            n = t[c][0], i = n.type, r = n.value;
            if (i === "i") V.uniform1i(s, r); else if (i === "f") V.uniform1f(s, r); else if (i === "v2") V.uniform2f(s, r.x, r.y); else if (i === "v3") V.uniform3f(s, r.x, r.y, r.z); else if (i === "v4") V.uniform4f(s, r.x, r.y, r.z, r.w); else if (i === "c") V.uniform3f(s, r.r, r.g, r.b); else if (i === "iv1") V.uniform1iv(s, r); else if (i === "iv") V.uniform3iv(s, r); else if (i === "fv1") V.uniform1fv(s, r); else if (i === "fv") V.uniform3fv(s, r); else if (i === "v2v") {
                n._array === undefined && (n._array = new Float32Array(2 * r.length));
                for (a = 0, f = r.length; a < f; a++)p = a * 2, n._array[p] = r[a].x, n._array[p + 1] = r[a].y;
                V.uniform2fv(s, n._array)
            } else if (i === "v3v") {
                n._array === undefined && (n._array = new Float32Array(3 * r.length));
                for (a = 0, f = r.length; a < f; a++)p = a * 3, n._array[p] = r[a].x, n._array[p + 1] = r[a].y, n._array[p + 2] = r[a].z;
                V.uniform3fv(s, n._array)
            } else if (i === "v4v") {
                n._array === undefined && (n._array = new Float32Array(4 * r.length));
                for (a = 0, f = r.length; a < f; a++)p = a * 4, n._array[p] = r[a].x, n._array[p + 1] = r[a].y, n._array[p + 2] = r[a].z, n._array[p + 3] = r[a].w;
                V.uniform4fv(s, n._array)
            } else if (i === "m4") n._array === undefined && (n._array = new Float32Array(16)), r.flattenToArray(n._array), V.uniformMatrix4fv(s, !1, n._array); else if (i === "m4v") {
                n._array === undefined && (n._array = new Float32Array(16 * r.length));
                for (a = 0, f = r.length; a < f; a++)r[a].flattenToArrayOffset(n._array, a * 16);
                V.uniformMatrix4fv(s, !1, n._array)
            } else if (i === "t") {
                o = r, u = Ln(), V.uniform1i(s, u);
                if (!o)continue;
                o.image instanceof Array && o.image.length === 6 ? Xn(o, u) : o instanceof THREE.WebGLRenderTargetCube ? Vn(o, u) : l.setTexture(o, u)
            } else if (i === "tv") {
                n._array === undefined && (n._array = []);
                for (a = 0, f = n.value.length; a < f; a++)n._array[a] = Ln();
                V.uniform1iv(s, n._array);
                for (a = 0, f = n.value.length; a < f; a++) {
                    o = n.value[a], u = n._array[a];
                    if (!o)continue;
                    l.setTexture(o, u)
                }
            } else 0
        }
    }

    function On(e, t) {
        e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, e.matrixWorld), e._normalMatrix.getNormalMatrix(e._modelViewMatrix)
    }

    function Mn(e, t, n, r) {
        e[t] = n.r * n.r * r, e[t + 1] = n.g * n.g * r, e[t + 2] = n.b * n.b * r
    }

    function _n(e, t, n, r) {
        e[t] = n.r * r, e[t + 1] = n.g * r, e[t + 2] = n.b * r
    }

    function Dn(e, t) {
        var n, r, i, s, o = 0, u = 0, a = 0, f, c, h, p, d, v, m, g = X, y = g.directional.colors,
            b = g.directional.positions, w = g.point.colors, E = g.point.positions, S = g.point.distances,
            x = g.spot.colors, T = g.spot.positions, N = g.spot.distances, C = g.spot.directions, k = g.spot.anglesCos,
            L = g.spot.exponents, A = g.hemi.skyColors, O = g.hemi.groundColors, M = g.hemi.positions, _ = 0, D = 0,
            P = 0, H = 0, B = 0, j = 0, F = 0, I = 0, q = 0, R = 0, W = 0, V = 0;
        for (n = 0, r = t.length; n < r; n++) {
            i = t[n];
            if (i.onlyShadow)continue;
            f = i.color, p = i.intensity, m = i.distance;
            if (i instanceof THREE.AmbientLight) {
                if (!i.visible)continue;
                l.gammaInput ? (o += f.r * f.r, u += f.g * f.g, a += f.b * f.b) : (o += f.r, u += f.g, a += f.b)
            } else if (i instanceof THREE.DirectionalLight) {
                B += 1;
                if (!i.visible)continue;
                z.getPositionFromMatrix(i.matrixWorld), U.getPositionFromMatrix(i.target.matrixWorld), z.sub(U), z.normalize();
                if (z.x === 0 && z.y === 0 && z.z === 0)continue;
                q = _ * 3, b[q] = z.x, b[q + 1] = z.y, b[q + 2] = z.z, l.gammaInput ? Mn(y, q, f, p * p) : _n(y, q, f, p), _ += 1
            } else if (i instanceof THREE.PointLight) {
                j += 1;
                if (!i.visible)continue;
                R = D * 3, l.gammaInput ? Mn(w, R, f, p * p) : _n(w, R, f, p), U.getPositionFromMatrix(i.matrixWorld), E[R] = U.x, E[R + 1] = U.y, E[R + 2] = U.z, S[D] = m, D += 1
            } else if (i instanceof THREE.SpotLight) {
                F += 1;
                if (!i.visible)continue;
                W = P * 3, l.gammaInput ? Mn(x, W, f, p * p) : _n(x, W, f, p), U.getPositionFromMatrix(i.matrixWorld), T[W] = U.x, T[W + 1] = U.y, T[W + 2] = U.z, N[P] = m, z.copy(U), U.getPositionFromMatrix(i.target.matrixWorld), z.sub(U), z.normalize(), C[W] = z.x, C[W + 1] = z.y, C[W + 2] = z.z, k[P] = Math.cos(i.angle), L[P] = i.exponent, P += 1
            } else if (i instanceof THREE.HemisphereLight) {
                I += 1;
                if (!i.visible)continue;
                z.getPositionFromMatrix(i.matrixWorld), z.normalize();
                if (z.x === 0 && z.y === 0 && z.z === 0)continue;
                V = H * 3, M[V] = z.x, M[V + 1] = z.y, M[V + 2] = z.z, c = i.color, h = i.groundColor, l.gammaInput ? (d = p * p, Mn(A, V, c, d), Mn(O, V, h, d)) : (_n(A, V, c, p), _n(O, V, h, p)), H += 1
            }
        }
        for (n = _ * 3, r = Math.max(y.length, B * 3); n < r; n++)y[n] = 0;
        for (n = D * 3, r = Math.max(w.length, j * 3); n < r; n++)w[n] = 0;
        for (n = P * 3, r = Math.max(x.length, F * 3); n < r; n++)x[n] = 0;
        for (n = H * 3, r = Math.max(A.length, I * 3); n < r; n++)A[n] = 0;
        for (n = H * 3, r = Math.max(O.length, I * 3); n < r; n++)O[n] = 0;
        g.directional.length = _, g.point.length = D, g.spot.length = P, g.hemi.length = H, g.ambient[0] = o, g.ambient[1] = u, g.ambient[2] = a
    }

    function Pn(e) {
        e !== M && (V.lineWidth(e), M = e)
    }

    function Hn(e, t, n) {
        L !== e && (e ? V.enable(V.POLYGON_OFFSET_FILL) : V.disable(V.POLYGON_OFFSET_FILL), L = e), e && (A !== t || O !== n) && (V.polygonOffset(t, n), A = t, O = n)
    }

    function Bn(e) {
        var t, n, r = [];
        for (var i in e) {
            t = e[i];
            if (t === !1)continue;
            n = "#define " + i + " " + t, r.push(n)
        }
        return r.join("\n")
    }


    function Fn(e, t) {
        var n, r, i;
        for (n = 0, r = t.length; n < r; n++)i = t[n], e.uniforms[i] = V.getUniformLocation(e, i)
    }

    function In(e, t) {
        var n, r, i;
        for (n = 0, r = t.length; n < r; n++)i = t[n], e.attributes[i] = V.getAttribLocation(e, i)
    }

    function qn(e) {
        var t = e.split("\n");
        for (var n = 0, r = t.length; n < r; n++)t[n] = n + 1 + ": " + t[n];
        return t.join("\n")
    }

    function Rn(e, t) {
        var n;
        return e === "fragment" ? n = V.createShader(V.FRAGMENT_SHADER) : e === "vertex" && (n = V.createShader(V.VERTEX_SHADER)), V.shaderSource(n, t), V.compileShader(n), V.getShaderParameter(n, V.COMPILE_STATUS) ? n : (0, 0, null)
    }

    function Un(e) {
        return (e & e - 1) === 0
    }

    function zn(e, t, n) {
        n ? (V.texParameteri(e, V.TEXTURE_WRAP_S, Gn(t.wrapS)), V.texParameteri(e, V.TEXTURE_WRAP_T, Gn(t.wrapT)), V.texParameteri(e, V.TEXTURE_MAG_FILTER, Gn(t.magFilter)), V.texParameteri(e, V.TEXTURE_MIN_FILTER, Gn(t.minFilter))) : (V.texParameteri(e, V.TEXTURE_WRAP_S, V.CLAMP_TO_EDGE), V.texParameteri(e, V.TEXTURE_WRAP_T, V.CLAMP_TO_EDGE), V.texParameteri(e, V.TEXTURE_MAG_FILTER, Qn(t.magFilter)), V.texParameteri(e, V.TEXTURE_MIN_FILTER, Qn(t.minFilter))), Q && t.type !== THREE.FloatType && (t.anisotropy > 1 || t.__oldAnisotropy) && (V.texParameterf(e, Q.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(t.anisotropy, nt)), t.__oldAnisotropy = t.anisotropy)
    }


    function Xn(e, t) {
        if (e.image.length === 6)if (e.needsUpdate) {
            e.image.__webglTextureCube || (e.addEventListener("dispose", Nt), e.image.__webglTextureCube = V.createTexture(), l.info.memory.textures++), V.activeTexture(V.TEXTURE0 + t), V.bindTexture(V.TEXTURE_CUBE_MAP, e.image.__webglTextureCube), V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL, e.flipY);
            var n = e instanceof THREE.CompressedTexture, r = [];
            for (var i = 0; i < 6; i++)l.autoScaleCubemaps && !n ? r[i] = Wn(e.image[i], tt) : r[i] = e.image[i];
            var s = r[0], o = Un(s.width) && Un(s.height), u = Gn(e.format), a = Gn(e.type);
            zn(V.TEXTURE_CUBE_MAP, e, o);
            for (var i = 0; i < 6; i++)if (n) {
                var f, c = r[i].mipmaps;
                for (var h = 0,
                         p = c.length; h < p; h++)f = c[h], V.compressedTexImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + i, h, u, f.width, f.height, 0, f.data)
            } else V.texImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, u, u, a, r[i]);
            e.generateMipmaps && o && V.generateMipmap(V.TEXTURE_CUBE_MAP), e.needsUpdate = !1, e.onUpdate && e.onUpdate()
        } else V.activeTexture(V.TEXTURE0 + t), V.bindTexture(V.TEXTURE_CUBE_MAP, e.image.__webglTextureCube)
    }

    function Vn(e, t) {
        V.activeTexture(V.TEXTURE0 + t), V.bindTexture(V.TEXTURE_CUBE_MAP, e.__webglTexture)
    }

    function $n(e, t, n) {
        V.bindFramebuffer(V.FRAMEBUFFER, e), V.framebufferTexture2D(V.FRAMEBUFFER, V.COLOR_ATTACHMENT0, n, t.__webglTexture, 0)
    }

    function Jn(e, t) {
        V.bindRenderbuffer(V.RENDERBUFFER, e), t.depthBuffer && !t.stencilBuffer ? (V.renderbufferStorage(V.RENDERBUFFER, V.DEPTH_COMPONENT16, t.width, t.height), V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_ATTACHMENT, V.RENDERBUFFER, e)) : t.depthBuffer && t.stencilBuffer ? (V.renderbufferStorage(V.RENDERBUFFER, V.DEPTH_STENCIL, t.width, t.height), V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_STENCIL_ATTACHMENT, V.RENDERBUFFER, e)) : V.renderbufferStorage(V.RENDERBUFFER, V.RGBA4, t.width, t.height)
    }

    function Kn(e) {
        e instanceof THREE.WebGLRenderTargetCube ? (V.bindTexture(V.TEXTURE_CUBE_MAP, e.__webglTexture), V.generateMipmap(V.TEXTURE_CUBE_MAP), V.bindTexture(V.TEXTURE_CUBE_MAP, null)) : (V.bindTexture(V.TEXTURE_2D, e.__webglTexture), V.generateMipmap(V.TEXTURE_2D), V.bindTexture(V.TEXTURE_2D, null))
    }

    function Qn(e) {
        return e === THREE.NearestFilter || e === THREE.NearestMipMapNearestFilter || e === THREE.NearestMipMapLinearFilter ? V.NEAREST : V.LINEAR
    }



    function Yn(e) {
        if (it && e && e.useVertexTexture)return 1024;
        var t = V.getParameter(V.MAX_VERTEX_UNIFORM_VECTORS), n = Math.floor((t - 20) / 4), r = n;
        return e !== undefined && e instanceof THREE.SkinnedMesh && (r = Math.min(e.bones.length, r), r < e.bones.length && 0), r
    }

    function Zn(e) {
        var t = 0, n = 0, r = 0, i = 0;
        for (var s = 0, o = e.length; s < o; s++) {
            var u = e[s];
            if (u.onlyShadow)continue;
            u instanceof THREE.DirectionalLight && t++, u instanceof THREE.PointLight && n++, u instanceof THREE.SpotLight && r++, u instanceof THREE.HemisphereLight && i++
        }
        return {directional: t, point: n, spot: r, hemi: i}
    }

    function er(e) {
        var t = 0;
        for (var n = 0, r = e.length; n < r; n++) {
            var i = e[n];
            if (!i.castShadow)continue;
            i instanceof THREE.SpotLight && t++, i instanceof THREE.DirectionalLight && !i.shadowCascade && t++
        }
        return t
    }

    function tr(e) {
		setTimeout(function(){jQuery(window).trigger('mousemove')},1000);
        try {
            var n = {
                alpha: e === undefined ? r : e,
                premultipliedAlpha: i,
                antialias: s,
                stencil: o,
                preserveDrawingBuffer: u
            };
            V = t.getContext("webgl", n) || t.getContext("experimental-webgl", n);
            if (V === null)throw"Error creating WebGL context."
        } catch (a) {
            0
        }
        $ = V.getExtension("OES_texture_float"), J = V.getExtension("OES_texture_float_linear"), K = V.getExtension("OES_standard_derivatives"), Q = V.getExtension("EXT_texture_filter_anisotropic") || V.getExtension("MOZ_EXT_texture_filter_anisotropic") || V.getExtension("WEBKIT_EXT_texture_filter_anisotropic"), G = V.getExtension("WEBGL_compressed_texture_s3tc") || V.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || V.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"), $ || 0, K || 0, Q || 0, G || 0, V.getShaderPrecisionFormat === undefined && (V.getShaderPrecisionFormat = function () {
            return {rangeMin: 1, rangeMax: 1, precision: 1}
        })
    }

    function nr() {
        V.clearColor(0, 0, 0, 1), V.clearDepth(1), V.clearStencil(0), V.enable(V.DEPTH_TEST), V.depthFunc(V.LEQUAL), V.frontFace(V.CCW), V.cullFace(V.BACK), V.enable(V.CULL_FACE), V.enable(V.BLEND), V.blendEquation(V.FUNC_ADD), V.blendFunc(V.SRC_ALPHA, V.ONE_MINUS_SRC_ALPHA), V.clearColor(a.r, a.g, a.b, f)
    }

    0, e = e || {};
    var t = e.canvas !== undefined ? e.canvas : document.createElement("canvas"),
        n = e.precision !== undefined ? e.precision : "highp", r = e.alpha !== undefined ? e.alpha : !0,
        i = e.premultipliedAlpha !== undefined ? e.premultipliedAlpha : !0,
        s = e.antialias !== undefined ? e.antialias : !1, o = e.stencil !== undefined ? e.stencil : !0,
        u = e.preserveDrawingBuffer !== undefined ? e.preserveDrawingBuffer : !1, a = new THREE.Color(0), f = 0;
    e.clearColor !== undefined && (0, a.setHex(e.clearColor)), e.clearAlpha !== undefined && (0, f = e.clearAlpha), this.domElement = t, this.context = null, this.devicePixelRatio = e.devicePixelRatio !== undefined ? e.devicePixelRatio : window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.autoUpdateObjects = !0, this.gammaInput = !1, this.gammaOutput = !1, this.physicallyBasedShading = !1, this.shadowMapEnabled = !1, this.shadowMapAutoUpdate = !0, this.shadowMapType = THREE.PCFShadowMap, this.shadowMapCullFace = THREE.CullFaceFront, this.shadowMapDebug = !1, this.shadowMapCascade = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0, this.renderPluginsPre = [], this.renderPluginsPost = [], this.info = {
        memory: {
            programs: 0,
            geometries: 0,
            textures: 0
        }, render: {calls: 0, vertices: 0, faces: 0, points: 0}
    };
    var l = this, c = [], h = 0, p = null, d = null, v = -1, m = null, g = null, y = 0, b = 0, w = -1, E = -1, S = -1,
        x = -1, T = -1, N = -1, C = -1, k = -1, L = null, A = null, O = null, M = null, _ = 0, D = 0, P = 0, H = 0,
        B = 0, j = 0, F = {}, I = new THREE.Frustum, q = new THREE.Matrix4, R = new THREE.Matrix4,
        U = new THREE.Vector3, z = new THREE.Vector3, W = !0, X = {
            ambient: [0, 0, 0],
            directional: {length: 0, colors: new Array, positions: new Array},
            point: {length: 0, colors: new Array, positions: new Array, distances: new Array},
            spot: {
                length: 0,
                colors: new Array,
                positions: new Array,
                distances: new Array,
                directions: new Array,
                anglesCos: new Array,
                exponents: new Array
            },
            hemi: {length: 0, skyColors: new Array, groundColors: new Array, positions: new Array}
        }, V, $, J, K, Q, G;
    tr(), this.initGL = tr, nr(), this.setDefaultGLState = nr, this.context = V;
    var Y = V.getParameter(V.MAX_TEXTURE_IMAGE_UNITS), Z = V.getParameter(V.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
        et = V.getParameter(V.MAX_TEXTURE_SIZE), tt = V.getParameter(V.MAX_CUBE_MAP_TEXTURE_SIZE),
        nt = Q ? V.getParameter(Q.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0, rt = Z > 0, it = rt && $,
        st = G ? V.getParameter(V.COMPRESSED_TEXTURE_FORMATS) : [],
        ot = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.HIGH_FLOAT),
        ut = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.MEDIUM_FLOAT),
        at = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.LOW_FLOAT),
        ft = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.HIGH_FLOAT),
        lt = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.MEDIUM_FLOAT),
        ct = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.LOW_FLOAT),
        ht = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.HIGH_INT),
        pt = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.MEDIUM_INT),
        dt = V.getShaderPrecisionFormat(V.VERTEX_SHADER, V.LOW_INT),
        vt = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.HIGH_INT),
        mt = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.MEDIUM_INT),
        gt = V.getShaderPrecisionFormat(V.FRAGMENT_SHADER, V.LOW_INT), yt = ot.precision > 0 && ft.precision > 0,
        bt = ut.precision > 0 && lt.precision > 0;
    n === "highp" && !yt && (bt ? (n = "mediump", 0) : (n = "lowp", 0)), n === "mediump" && !bt && (n = "lowp", 0), this.getContext = function () {
        return V
    }, this.supportsVertexTextures = function () {
        return rt
    }, this.supportsFloatTextures = function () {
        return $
    }, this.supportsStandardDerivatives = function () {
        return K
    }, this.supportsCompressedTextureS3TC = function () {
        return G
    }, this.getMaxAnisotropy = function () {
        return nt
    }, this.getPrecision = function () {
        return n
    }, this.setSize = function (e, n, r) {
        t.width = e * this.devicePixelRatio, t.height = n * this.devicePixelRatio, this.devicePixelRatio !== 1 && r !== !1 && (t.style.width = e + "px", t.style.height = n + "px"), this.setViewport(0, 0, t.width, t.height)
    }, this.setViewport = function (e, n, r, i) {
        _ = e !== undefined ? e : 0, D = n !== undefined ? n : 0, P = r !== undefined ? r : t.width, H = i !== undefined ? i : t.height, V.viewport(_, D, P, H)
    }, this.setScissor = function (e, t, n, r) {
        V.scissor(e, t, n, r)
    }, this.enableScissorTest = function (e) {
        e ? V.enable(V.SCISSOR_TEST) : V.disable(V.SCISSOR_TEST)
    }, this.setClearColor = function (e, t) {
        a.set(e), f = t !== undefined ? t : 1, V.clearColor(a.r, a.g, a.b, f)
    }, this.setClearColorHex = function (e, t) {
        0, this.setClearColor(e, t)
    }, this.getClearColor = function () {
        return a
    }, this.getClearAlpha = function () {
        return f
    }, this.clear = function (e, t, n) {
        var r = 0;
        if (e === undefined || e) r |= V.COLOR_BUFFER_BIT;
        if (t === undefined || t) r |= V.DEPTH_BUFFER_BIT;
        if (n === undefined || n) r |= V.STENCIL_BUFFER_BIT;
        V.clear(r)
    }, this.clearTarget = function (e, t, n, r) {
        this.setRenderTarget(e), this.clear(t, n, r)
    }, this.addPostPlugin = function (e) {
        e.init(this), this.renderPluginsPost.push(e)
    }, this.addPrePlugin = function (e) {
        e.init(this), this.renderPluginsPre.push(e)
    }, this.updateShadowMap = function (e, t) {
        p = null, S = -1, C = -1, k = -1, m = -1, v = -1, W = !0, w = -1, E = -1, this.shadowMapPlugin.update(e, t)
    };
    var Tt = function (e) {
        var t = e.target;
        t.removeEventListener("dispose", Tt), At(t)
    }, Nt = function (e) {
        var t = e.target;
        t.removeEventListener("dispose", Nt), Ot(t), l.info.memory.textures--
    }, Ct = function (e) {
        var t = e.target;
        t.removeEventListener("dispose", Ct), Mt(t), l.info.memory.textures--
    }, kt = function (e) {
        var t = e.target;
        t.removeEventListener("dispose", kt), _t(t)
    }, Lt = function (e) {
        e.__webglVertexBuffer !== undefined && V.deleteBuffer(e.__webglVertexBuffer), e.__webglNormalBuffer !== undefined && V.deleteBuffer(e.__webglNormalBuffer), e.__webglTangentBuffer !== undefined && V.deleteBuffer(e.__webglTangentBuffer), e.__webglColorBuffer !== undefined && V.deleteBuffer(e.__webglColorBuffer), e.__webglUVBuffer !== undefined && V.deleteBuffer(e.__webglUVBuffer), e.__webglUV2Buffer !== undefined && V.deleteBuffer(e.__webglUV2Buffer), e.__webglSkinIndicesBuffer !== undefined && V.deleteBuffer(e.__webglSkinIndicesBuffer), e.__webglSkinWeightsBuffer !== undefined && V.deleteBuffer(e.__webglSkinWeightsBuffer), e.__webglFaceBuffer !== undefined && V.deleteBuffer(e.__webglFaceBuffer), e.__webglLineBuffer !== undefined && V.deleteBuffer(e.__webglLineBuffer), e.__webglLineDistanceBuffer !== undefined && V.deleteBuffer(e.__webglLineDistanceBuffer);
        if (e.__webglCustomAttributesList !== undefined)for (var t in e.__webglCustomAttributesList)V.deleteBuffer(e.__webglCustomAttributesList[t].buffer);
        l.info.memory.geometries--
    }, At = function (e) {
        e.__webglInit = undefined;
        if (e instanceof THREE.BufferGeometry) {
            var t = e.attributes;
            for (var n in t)t[n].buffer !== undefined && V.deleteBuffer(t[n].buffer);
            l.info.memory.geometries--
        } else if (e.geometryGroups !== undefined)for (var r in e.geometryGroups) {
            var i = e.geometryGroups[r];
            if (i.numMorphTargets !== undefined)for (var s = 0,
                                                         o = i.numMorphTargets; s < o; s++)V.deleteBuffer(i.__webglMorphTargetsBuffers[s]);
            if (i.numMorphNormals !== undefined)for (var s = 0,
                                                         o = i.numMorphNormals; s < o; s++)V.deleteBuffer(i.__webglMorphNormalsBuffers[s]);
            Lt(i)
        } else Lt(e)
    }, Ot = function (e) {
        if (e.image && e.image.__webglTextureCube) V.deleteTexture(e.image.__webglTextureCube); else {
            if (!e.__webglInit)return;
            e.__webglInit = !1, V.deleteTexture(e.__webglTexture)
        }
    }, Mt = function (e) {
        if (!e || !e.__webglTexture)return;
        V.deleteTexture(e.__webglTexture);
        if (e instanceof THREE.WebGLRenderTargetCube)for (var t = 0; t < 6; t++)V.deleteFramebuffer(e.__webglFramebuffer[t]), V.deleteRenderbuffer(e.__webglRenderbuffer[t]); else V.deleteFramebuffer(e.__webglFramebuffer), V.deleteRenderbuffer(e.__webglRenderbuffer)
    }, _t = function (e) {
        var t = e.program;
        if (t === undefined)return;
        e.program = undefined;
        var n, r, i, s = !1;
        for (n = 0, r = c.length; n < r; n++) {
            i = c[n];
            if (i.program === t) {
                i.usedTimes--, i.usedTimes === 0 && (s = !0);
                break
            }
        }
        if (s === !0) {
            var o = [];
            for (n = 0, r = c.length; n < r; n++)i = c[n], i.program !== t && o.push(i);
            c = o, V.deleteProgram(t), l.info.memory.programs--
        }
    };
    this.renderBufferImmediate = function (e, t, n) {
        e.hasPositions && !e.__webglVertexBuffer && (e.__webglVertexBuffer = V.createBuffer()), e.hasNormals && !e.__webglNormalBuffer && (e.__webglNormalBuffer = V.createBuffer()), e.hasUvs && !e.__webglUvBuffer && (e.__webglUvBuffer = V.createBuffer()), e.hasColors && !e.__webglColorBuffer && (e.__webglColorBuffer = V.createBuffer()), e.hasPositions && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglVertexBuffer), V.bufferData(V.ARRAY_BUFFER, e.positionArray, V.DYNAMIC_DRAW), V.enableVertexAttribArray(t.attributes.position), V.vertexAttribPointer(t.attributes.position, 3, V.FLOAT, !1, 0, 0));
        if (e.hasNormals) {
            V.bindBuffer(V.ARRAY_BUFFER, e.__webglNormalBuffer);
            if (n.shading === THREE.FlatShading) {
                var r, i, s, o, u, a, f, l, c, h, p, d, v, m, g = e.count * 3;
                for (m = 0; m < g; m += 9)v = e.normalArray, o = v[m], f = v[m + 1], h = v[m + 2], u = v[m + 3], l = v[m + 4], p = v[m + 5], a = v[m + 6], c = v[m + 7], d = v[m + 8], r = (o + u + a) / 3, i = (f + l + c) / 3, s = (h + p + d) / 3, v[m] = r, v[m + 1] = i, v[m + 2] = s, v[m + 3] = r, v[m + 4] = i, v[m + 5] = s, v[m + 6] = r, v[m + 7] = i, v[m + 8] = s
            }
            V.bufferData(V.ARRAY_BUFFER, e.normalArray, V.DYNAMIC_DRAW), V.enableVertexAttribArray(t.attributes.normal), V.vertexAttribPointer(t.attributes.normal, 3, V.FLOAT, !1, 0, 0)
        }
        e.hasUvs && n.map && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglUvBuffer), V.bufferData(V.ARRAY_BUFFER, e.uvArray, V.DYNAMIC_DRAW), V.enableVertexAttribArray(t.attributes.uv), V.vertexAttribPointer(t.attributes.uv, 2, V.FLOAT, !1, 0, 0)), e.hasColors && n.vertexColors !== THREE.NoColors && (V.bindBuffer(V.ARRAY_BUFFER, e.__webglColorBuffer), V.bufferData(V.ARRAY_BUFFER, e.colorArray, V.DYNAMIC_DRAW), V.enableVertexAttribArray(t.attributes.color), V.vertexAttribPointer(t.attributes.color, 3, V.FLOAT, !1, 0, 0)), V.drawArrays(V.TRIANGLES, 0, e.count), e.count = 0
    }, this.renderBufferDirect = function (e, t, n, r, i, s) {
        if (r.visible === !1)return;
        var o, u, a, f, c, h, p, d = gn(e, t, n, r, s), v = d.attributes, g = i.attributes, y = !1,
            b = r.wireframe ? 1 : 0, w = i.id * 16777215 + d.id * 2 + b;
        w !== m && (m = w, y = !0), y && Qt();
        if (s instanceof THREE.Mesh) {
            var E = g.index;
            if (E) {
                var S = i.offsets;
                S.length > 1 && (y = !0);
                for (var x = 0, T = S.length; x < T; x++) {
                    var N = S[x].index;
                    if (y) {
                        for (c in v)h = v[c], f = g[c], h >= 0 && (f ? (p = f.itemSize, V.bindBuffer(V.ARRAY_BUFFER, f.buffer), Kt(h), V.vertexAttribPointer(h, p, V.FLOAT, !1, 0, N * p * 4)) : r.defaultAttributeValues && (r.defaultAttributeValues[c].length === 2 ? V.vertexAttrib2fv(h, r.defaultAttributeValues[c]) : r.defaultAttributeValues[c].length === 3 && V.vertexAttrib3fv(h, r.defaultAttributeValues[c])));
                        V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, E.buffer)
                    }
                    V.drawElements(V.TRIANGLES, S[x].count, V.UNSIGNED_SHORT, S[x].start * 2), l.info.render.calls++, l.info.render.vertices += S[x].count, l.info.render.faces += S[x].count / 3
                }
            } else {
                if (y)for (c in v) {
                    if (c === "index")continue;
                    h = v[c], f = g[c], h >= 0 && (f ? (p = f.itemSize, V.bindBuffer(V.ARRAY_BUFFER, f.buffer), Kt(h), V.vertexAttribPointer(h, p, V.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && r.defaultAttributeValues[c] && (r.defaultAttributeValues[c].length === 2 ? V.vertexAttrib2fv(h, r.defaultAttributeValues[c]) : r.defaultAttributeValues[c].length === 3 && V.vertexAttrib3fv(h, r.defaultAttributeValues[c])))
                }
                var C = i.attributes.position;
                V.drawArrays(V.TRIANGLES, 0, C.numItems / 3), l.info.render.calls++, l.info.render.vertices += C.numItems / 3, l.info.render.faces += C.numItems / 3 / 3
            }
        } else if (s instanceof THREE.ParticleSystem) {
            if (y) {
                for (c in v)h = v[c], f = g[c], h >= 0 && (f ? (p = f.itemSize, V.bindBuffer(V.ARRAY_BUFFER, f.buffer), Kt(h), V.vertexAttribPointer(h, p, V.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && r.defaultAttributeValues[c] && (r.defaultAttributeValues[c].length === 2 ? V.vertexAttrib2fv(h, r.defaultAttributeValues[c]) : r.defaultAttributeValues[c].length === 3 && V.vertexAttrib3fv(h, r.defaultAttributeValues[c])));
                var C = g.position;
                V.drawArrays(V.POINTS, 0, C.numItems / 3), l.info.render.calls++, l.info.render.points += C.numItems / 3
            }
        } else if (s instanceof THREE.Line && y) {
            for (c in v)h = v[c], f = g[c], h >= 0 && (f ? (p = f.itemSize, V.bindBuffer(V.ARRAY_BUFFER, f.buffer), Kt(h), V.vertexAttribPointer(h, p, V.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && r.defaultAttributeValues[c] && (r.defaultAttributeValues[c].length === 2 ? V.vertexAttrib2fv(h, r.defaultAttributeValues[c]) : r.defaultAttributeValues[c].length === 3 && V.vertexAttrib3fv(h, r.defaultAttributeValues[c])));
            var k = s.type === THREE.LineStrip ? V.LINE_STRIP : V.LINES;
            Pn(r.linewidth);
            var C = g.position;
            V.drawArrays(k, 0, C.numItems / 3), l.info.render.calls++, l.info.render.points += C.numItems
        }
    }, this.renderBuffer = function (e, t, n, r, i, s) {
        if (r.visible === !1)return;
        var o, u, a, f, c, h = gn(e, t, n, r, s), p = h.attributes, d = !1, v = r.wireframe ? 1 : 0,
            g = i.id * 16777215 + h.id * 2 + v;
        g !== m && (m = g, d = !0), d && Qt(), !r.morphTargets && p.position >= 0 ? d && (V.bindBuffer(V.ARRAY_BUFFER, i.__webglVertexBuffer), Kt(p.position), V.vertexAttribPointer(p.position, 3, V.FLOAT, !1, 0, 0)) : s.morphTargetBase && Gt(r, i, s);
        if (d) {
            if (i.__webglCustomAttributesList)for (f = 0, c = i.__webglCustomAttributesList.length; f < c; f++)a = i.__webglCustomAttributesList[f], p[a.buffer.belongsToAttribute] >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, a.buffer), Kt(p[a.buffer.belongsToAttribute]), V.vertexAttribPointer(p[a.buffer.belongsToAttribute], a.size, V.FLOAT, !1, 0, 0));
            p.color >= 0 && (s.geometry.colors.length > 0 || s.geometry.faces.length > 0 ? (V.bindBuffer(V.ARRAY_BUFFER, i.__webglColorBuffer), Kt(p.color), V.vertexAttribPointer(p.color, 3, V.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && V.vertexAttrib3fv(p.color, r.defaultAttributeValues.color)), p.normal >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, i.__webglNormalBuffer), Kt(p.normal), V.vertexAttribPointer(p.normal, 3, V.FLOAT, !1, 0, 0)), p.tangent >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, i.__webglTangentBuffer), Kt(p.tangent), V.vertexAttribPointer(p.tangent, 4, V.FLOAT, !1, 0, 0)), p.uv >= 0 && (s.geometry.faceVertexUvs[0] ? (V.bindBuffer(V.ARRAY_BUFFER, i.__webglUVBuffer), Kt(p.uv), V.vertexAttribPointer(p.uv, 2, V.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && V.vertexAttrib2fv(p.uv, r.defaultAttributeValues.uv)), p.uv2 >= 0 && (s.geometry.faceVertexUvs[1] ? (V.bindBuffer(V.ARRAY_BUFFER, i.__webglUV2Buffer), Kt(p.uv2), V.vertexAttribPointer(p.uv2, 2, V.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && V.vertexAttrib2fv(p.uv2, r.defaultAttributeValues.uv2)), r.skinning && p.skinIndex >= 0 && p.skinWeight >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, i.__webglSkinIndicesBuffer), Kt(p.skinIndex), V.vertexAttribPointer(p.skinIndex, 4, V.FLOAT, !1, 0, 0), V.bindBuffer(V.ARRAY_BUFFER, i.__webglSkinWeightsBuffer), Kt(p.skinWeight), V.vertexAttribPointer(p.skinWeight, 4, V.FLOAT, !1, 0, 0)), p.lineDistance >= 0 && (V.bindBuffer(V.ARRAY_BUFFER, i.__webglLineDistanceBuffer), Kt(p.lineDistance), V.vertexAttribPointer(p.lineDistance, 1, V.FLOAT, !1, 0, 0))
        }
        if (s instanceof THREE.Mesh) r.wireframe ? (Pn(r.wireframeLinewidth), d && V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, i.__webglLineBuffer), V.drawElements(V.LINES, i.__webglLineCount, V.UNSIGNED_SHORT, 0)) : (d && V.bindBuffer(V.ELEMENT_ARRAY_BUFFER, i.__webglFaceBuffer), V.drawElements(V.TRIANGLES, i.__webglFaceCount, V.UNSIGNED_SHORT, 0)), l.info.render.calls++, l.info.render.vertices += i.__webglFaceCount, l.info.render.faces += i.__webglFaceCount / 3; else if (s instanceof THREE.Line) {
            var y = s.type === THREE.LineStrip ? V.LINE_STRIP : V.LINES;
            Pn(r.linewidth), V.drawArrays(y, 0, i.__webglLineCount), l.info.render.calls++
        } else s instanceof THREE.ParticleSystem ? (V.drawArrays(V.POINTS, 0, i.__webglParticleCount), l.info.render.calls++, l.info.render.points += i.__webglParticleCount) : s instanceof THREE.Ribbon && (V.drawArrays(V.TRIANGLE_STRIP, 0, i.__webglVertexCount), l.info.render.calls++)
    }, this.render = function (e, t, n, r) {
        if (t instanceof THREE.Camera == 0) {
            0;
            return
        }
        var i, s, o, u, a, f = e.__lights, c = e.fog;
        v = -1, W = !0, e.autoUpdate === !0 && e.updateMatrixWorld(), t.parent === undefined && t.updateMatrixWorld(), t.matrixWorldInverse.getInverse(t.matrixWorld), q.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), I.setFromMatrix(q), this.autoUpdateObjects && this.initWebGLObjects(e), en(this.renderPluginsPre, e, t), l.info.render.calls = 0, l.info.render.vertices = 0, l.info.render.faces = 0, l.info.render.points = 0, this.setRenderTarget(n), (this.autoClear || r) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil), a = e.__webglObjects;
        for (i = 0, s = a.length; i < s; i++)o = a[i], u = o.object, o.id = i, o.render = !1, u.visible && (!(u instanceof THREE.Mesh || u instanceof THREE.ParticleSystem) || !u.frustumCulled || I.intersectsObject(u)) && (On(u, t), sn(o), o.render = !0, this.sortObjects === !0 && (u.renderDepth !== null ? o.z = u.renderDepth : (U.getPositionFromMatrix(u.matrixWorld), U.applyProjection(q), o.z = U.z)));
        this.sortObjects && a.sort(Yt), a = e.__webglObjectsImmediate;
        for (i = 0, s = a.length; i < s; i++)o = a[i], u = o.object, u.visible && (On(u, t), rn(o));
        if (e.overrideMaterial) {
            var h = e.overrideMaterial;
            this.setBlending(h.blending, h.blendEquation, h.blendSrc, h.blendDst), this.setDepthTest(h.depthTest), this.setDepthWrite(h.depthWrite), Hn(h.polygonOffset, h.polygonOffsetFactor, h.polygonOffsetUnits), tn(e.__webglObjects, !1, "", t, f, c, !0, h), nn(e.__webglObjectsImmediate, "", t, f, c, !1, h)
        } else {
            var h = null;
            this.setBlending(THREE.NoBlending), tn(e.__webglObjects, !0, "opaque", t, f, c, !1, h), nn(e.__webglObjectsImmediate, "opaque", t, f, c, !1, h), tn(e.__webglObjects, !1, "transparent", t, f, c, !0, h), nn(e.__webglObjectsImmediate, "transparent", t, f, c, !0, h)
        }
        en(this.renderPluginsPost, e, t), n && n.generateMipmaps && n.minFilter !== THREE.NearestFilter && n.minFilter !== THREE.LinearFilter && Kn(n), this.setDepthTest(!0), this.setDepthWrite(!0)
    }, this.renderImmediateObject = function (e, t, n, r, i) {
        var s = gn(e, t, n, r, i);
        m = -1, l.setMaterialFaces(r), i.immediateRenderCallback ? i.immediateRenderCallback(s, V, I) : i.render(function (e) {
            l.renderBufferImmediate(e, s, r)
        })
    }, this.initWebGLObjects = function (e) {
        e.__webglObjects || (e.__webglObjects = [], e.__webglObjectsImmediate = [], e.__webglSprites = [], e.__webglFlares = []);
        while (e.__objectsAdded.length)un(e.__objectsAdded[0], e), e.__objectsAdded.splice(0, 1);
        while (e.__objectsRemoved.length)pn(e.__objectsRemoved[0], e), e.__objectsRemoved.splice(0, 1);
        for (var t = 0, n = e.__webglObjects.length; t < n; t++) {
            var r = e.__webglObjects[t].object;
            r.__webglInit === undefined && (r.__webglActive !== undefined && pn(r, e), un(r, e)), ln(r)
        }
    }, this.initMaterial = function (e, t, n, r) {
        e.addEventListener("dispose", kt);
        var i, s, o, u, a, f, l, c, h;
        e instanceof THREE.MeshDepthMaterial ? h = "depth" : e instanceof THREE.MeshNormalMaterial ? h = "normal" : e instanceof THREE.MeshBasicMaterial ? h = "basic" : e instanceof THREE.MeshLambertMaterial ? h = "lambert" : e instanceof THREE.MeshPhongMaterial ? h = "phong" : e instanceof THREE.LineBasicMaterial ? h = "basic" : e instanceof THREE.LineDashedMaterial ? h = "dashed" : e instanceof THREE.ParticleBasicMaterial && (h = "particle_basic"), h && mn(e, THREE.ShaderLib[h]), f = Zn(t), c = er(t), l = Yn(r), a = {
            map: !!e.map,
            envMap: !!e.envMap,
            lightMap: !!e.lightMap,
            bumpMap: !!e.bumpMap,
            normalMap: !!e.normalMap,
            specularMap: !!e.specularMap,
            vertexColors: e.vertexColors,
            fog: n,
            useFog: e.fog,
            fogExp: n instanceof THREE.FogExp2,
            sizeAttenuation: e.sizeAttenuation,
            skinning: e.skinning,
            maxBones: l,
            useVertexTexture: it && r && r.useVertexTexture,
            boneTextureWidth: r && r.boneTextureWidth,
            boneTextureHeight: r && r.boneTextureHeight,
            morphTargets: e.morphTargets,
            morphNormals: e.morphNormals,
            maxMorphTargets: this.maxMorphTargets,
            maxMorphNormals: this.maxMorphNormals,
            maxDirLights: f.directional,
            maxPointLights: f.point,
            maxSpotLights: f.spot,
            maxHemiLights: f.hemi,
            maxShadows: c,
            shadowMapEnabled: this.shadowMapEnabled && r.receiveShadow,
            shadowMapType: this.shadowMapType,
            shadowMapDebug: this.shadowMapDebug,
            shadowMapCascade: this.shadowMapCascade,
            alphaTest: e.alphaTest,
            metal: e.metal,
            perPixel: e.perPixel,
            wrapAround: e.wrapAround,
            doubleSided: e.side === THREE.DoubleSide,
            flipSided: e.side === THREE.BackSide
        }, e.program = jn(h, e.fragmentShader, e.vertexShader, e.uniforms, e.attributes, e.defines, a, e.index0AttributeName);
        var p = e.program.attributes;
        if (e.morphTargets) {
            e.numSupportedMorphTargets = 0;
            var d, v = "morphTarget";
            for (u = 0; u < this.maxMorphTargets; u++)d = v + u, p[d] >= 0 && e.numSupportedMorphTargets++
        }
        if (e.morphNormals) {
            e.numSupportedMorphNormals = 0;
            var d, v = "morphNormal";
            for (u = 0; u < this.maxMorphNormals; u++)d = v + u, p[d] >= 0 && e.numSupportedMorphNormals++
        }
        e.uniformsList = [];
        for (i in e.uniforms)e.uniformsList.push([e.uniforms[i], i])
    }, this.setFaceCulling = function (e, t) {
        e === THREE.CullFaceNone ? V.disable(V.CULL_FACE) : (t === THREE.FrontFaceDirectionCW ? V.frontFace(V.CW) : V.frontFace(V.CCW), e === THREE.CullFaceBack ? V.cullFace(V.BACK) : e === THREE.CullFaceFront ? V.cullFace(V.FRONT) : V.cullFace(V.FRONT_AND_BACK), V.enable(V.CULL_FACE))
    }, this.setMaterialFaces = function (e) {
        var t = e.side === THREE.DoubleSide, n = e.side === THREE.BackSide;
        w !== t && (t ? V.disable(V.CULL_FACE) : V.enable(V.CULL_FACE), w = t), E !== n && (n ? V.frontFace(V.CW) : V.frontFace(V.CCW), E = n)
    }, this.setDepthTest = function (e) {
        C !== e && (e ? V.enable(V.DEPTH_TEST) : V.disable(V.DEPTH_TEST), C = e)
    }, this.setDepthWrite = function (e) {
        k !== e && (V.depthMask(e), k = e)
    }, this.setBlending = function (e, t, n, r) {
        e !== S && (e === THREE.NoBlending ? V.disable(V.BLEND) : e === THREE.AdditiveBlending ? (V.enable(V.BLEND), V.blendEquation(V.FUNC_ADD), V.blendFunc(V.SRC_ALPHA, V.ONE)) : e === THREE.SubtractiveBlending ? (V.enable(V.BLEND), V.blendEquation(V.FUNC_ADD), V.blendFunc(V.ZERO, V.ONE_MINUS_SRC_COLOR)) : e === THREE.MultiplyBlending ? (V.enable(V.BLEND), V.blendEquation(V.FUNC_ADD), V.blendFunc(V.ZERO, V.SRC_COLOR)) : e === THREE.CustomBlending ? V.enable(V.BLEND) : (V.enable(V.BLEND), V.blendEquationSeparate(V.FUNC_ADD, V.FUNC_ADD), V.blendFuncSeparate(V.SRC_ALPHA, V.ONE_MINUS_SRC_ALPHA, V.ONE, V.ONE_MINUS_SRC_ALPHA)), S = e);
        if (e === THREE.CustomBlending) {
            t !== x && (V.blendEquation(Gn(t)), x = t);
            if (n !== T || r !== N) V.blendFunc(Gn(n), Gn(r)), T = n, N = r
        } else x = null, T = null, N = null
    }, this.setTexture = function (e, t) {
        if (e.needsUpdate) {
            e.__webglInit || (e.__webglInit = !0, e.addEventListener("dispose", Nt), e.__webglTexture = V.createTexture(), l.info.memory.textures++), V.activeTexture(V.TEXTURE0 + t), V.bindTexture(V.TEXTURE_2D, e.__webglTexture), V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL, e.flipY), V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.premultiplyAlpha), V.pixelStorei(V.UNPACK_ALIGNMENT, e.unpackAlignment);
            var n = e.image, r = Un(n.width) && Un(n.height), i = Gn(e.format), s = Gn(e.type);
            zn(V.TEXTURE_2D, e, r);
            var o, u = e.mipmaps;
            if (e instanceof THREE.DataTexture)if (u.length > 0 && r) {
                for (var a = 0,
                         f = u.length; a < f; a++)o = u[a], V.texImage2D(V.TEXTURE_2D, a, i, o.width, o.height, 0, i, s, o.data);
                e.generateMipmaps = !1
            } else V.texImage2D(V.TEXTURE_2D, 0, i, n.width, n.height, 0, i, s, n.data); else if (e instanceof THREE.CompressedTexture)for (var a = 0,
                                                                                                                                                f = u.length; a < f; a++)o = u[a], V.compressedTexImage2D(V.TEXTURE_2D, a, i, o.width, o.height, 0, o.data); else if (u.length > 0 && r) {
                for (var a = 0, f = u.length; a < f; a++)o = u[a], V.texImage2D(V.TEXTURE_2D, a, i, i, s, o);
                e.generateMipmaps = !1
            } else V.texImage2D(V.TEXTURE_2D, 0, i, i, s, e.image);
            e.generateMipmaps && r && V.generateMipmap(V.TEXTURE_2D), e.needsUpdate = !1, e.onUpdate && e.onUpdate()
        } else V.activeTexture(V.TEXTURE0 + t), V.bindTexture(V.TEXTURE_2D, e.__webglTexture)
    }, this.setRenderTarget = function (e) {
        var t = e instanceof THREE.WebGLRenderTargetCube;
        if (e && !e.__webglFramebuffer) {
            e.depthBuffer === undefined && (e.depthBuffer = !0), e.stencilBuffer === undefined && (e.stencilBuffer = !0), e.addEventListener("dispose", Ct), e.__webglTexture = V.createTexture(), l.info.memory.textures++;
            var n = Un(e.width) && Un(e.height), r = Gn(e.format), i = Gn(e.type);
            if (t) {
                e.__webglFramebuffer = [], e.__webglRenderbuffer = [], V.bindTexture(V.TEXTURE_CUBE_MAP, e.__webglTexture), zn(V.TEXTURE_CUBE_MAP, e, n);
                for (var s = 0; s < 6; s++)e.__webglFramebuffer[s] = V.createFramebuffer(), e.__webglRenderbuffer[s] = V.createRenderbuffer(), V.texImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X + s, 0, r, e.width, e.height, 0, r, i, null), $n(e.__webglFramebuffer[s], e, V.TEXTURE_CUBE_MAP_POSITIVE_X + s), Jn(e.__webglRenderbuffer[s], e);
                n && V.generateMipmap(V.TEXTURE_CUBE_MAP)
            } else e.__webglFramebuffer = V.createFramebuffer(), e.shareDepthFrom ? e.__webglRenderbuffer = e.shareDepthFrom.__webglRenderbuffer : e.__webglRenderbuffer = V.createRenderbuffer(), V.bindTexture(V.TEXTURE_2D, e.__webglTexture), zn(V.TEXTURE_2D, e, n), V.texImage2D(V.TEXTURE_2D, 0, r, e.width, e.height, 0, r, i, null), $n(e.__webglFramebuffer, e, V.TEXTURE_2D), e.shareDepthFrom ? e.depthBuffer && !e.stencilBuffer ? V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_ATTACHMENT, V.RENDERBUFFER, e.__webglRenderbuffer) : e.depthBuffer && e.stencilBuffer && V.framebufferRenderbuffer(V.FRAMEBUFFER, V.DEPTH_STENCIL_ATTACHMENT, V.RENDERBUFFER, e.__webglRenderbuffer) : Jn(e.__webglRenderbuffer, e), n && V.generateMipmap(V.TEXTURE_2D);
            t ? V.bindTexture(V.TEXTURE_CUBE_MAP, null) : V.bindTexture(V.TEXTURE_2D, null), V.bindRenderbuffer(V.RENDERBUFFER, null), V.bindFramebuffer(V.FRAMEBUFFER, null)
        }
        var o, u, a, f, c;
        e ? (t ? o = e.__webglFramebuffer[e.activeCubeFace] : o = e.__webglFramebuffer, u = e.width, a = e.height, f = 0, c = 0) : (o = null, u = P, a = H, f = _, c = D), o !== d && (V.bindFramebuffer(V.FRAMEBUFFER, o), V.viewport(f, c, u, a), d = o), B = u, j = a
    }, this.shadowMapPlugin = new THREE.ShadowMapPlugin, this.addPrePlugin(this.shadowMapPlugin), this.addPostPlugin(new THREE.SpritePlugin), this.addPostPlugin(new THREE.LensFlarePlugin)
},
THREE.WebGLRenderTarget = function (e, t, n) {
    this.width = e, this.height = t, n = n || {}, this.wrapS = n.wrapS !== undefined ? n.wrapS : THREE.ClampToEdgeWrapping, this.wrapT = n.wrapT !== undefined ? n.wrapT : THREE.ClampToEdgeWrapping, this.magFilter = n.magFilter !== undefined ? n.magFilter : THREE.LinearFilter, this.minFilter = n.minFilter !== undefined ? n.minFilter : THREE.LinearMipMapLinearFilter, this.anisotropy = n.anisotropy !== undefined ? n.anisotropy : 1, this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.format = n.format !== undefined ? n.format : THREE.RGBAFormat, this.type = n.type !== undefined ? n.type : THREE.UnsignedByteType, this.depthBuffer = n.depthBuffer !== undefined ? n.depthBuffer : !0, this.stencilBuffer = n.stencilBuffer !== undefined ? n.stencilBuffer : !0, this.generateMipmaps = !0, this.shareDepthFrom = null
},THREE.WebGLRenderTarget.prototype = {
    constructor: THREE.WebGLRenderTarget, clone: function () {
        var e = new THREE.WebGLRenderTarget(this.width, this.height);
        return e.wrapS = this.wrapS, e.wrapT = this.wrapT, e.magFilter = this.magFilter, e.minFilter = this.minFilter, e.anisotropy = this.anisotropy, e.offset.copy(this.offset), e.repeat.copy(this.repeat), e.format = this.format, e.type = this.type, e.depthBuffer = this.depthBuffer, e.stencilBuffer = this.stencilBuffer, e.generateMipmaps = this.generateMipmaps, e.shareDepthFrom = this.shareDepthFrom, e
    }, dispose: function () {
        this.dispatchEvent({type: "dispose"})
    }
},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube = function (e, t, n) {
    THREE.WebGLRenderTarget.call(this, e, t, n), this.activeCubeFace = 0
},THREE.WebGLRenderTargetCube.prototype = Object.create(THREE.WebGLRenderTarget.prototype),THREE.RenderableVertex = function () {
    this.positionWorld = new THREE.Vector3, this.positionScreen = new THREE.Vector4, this.visible = !0
},THREE.RenderableVertex.prototype.copy = function (e) {
    this.positionWorld.copy(e.positionWorld), this.positionScreen.copy(e.positionScreen)
},THREE.RenderableFace3 = function () {
    this.id = 0, this.v1 = new THREE.RenderableVertex, this.v2 = new THREE.RenderableVertex, this.v3 = new THREE.RenderableVertex, this.centroidModel = new THREE.Vector3, this.normalModel = new THREE.Vector3, this.normalModelView = new THREE.Vector3, this.vertexNormalsLength = 0, this.vertexNormalsModel = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3], this.vertexNormalsModelView = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3], this.color = null, this.material = null, this.uvs = [[]], this.z = 0
},THREE.RenderableObject = function () {
    this.id = 0, this.object = null, this.z = 0
},THREE.RenderableParticle = function () {
    this.id = 0, this.object = null, this.x = 0, this.y = 0, this.z = 0, this.rotation = null, this.scale = new THREE.Vector2, this.material = null
},THREE.RenderableLine = function () {
    this.id = 0, this.v1 = new THREE.RenderableVertex, this.v2 = new THREE.RenderableVertex, this.vertexColors = [new THREE.Color, new THREE.Color], this.material = null, this.z = 0
},THREE.GeometryUtils = {
    merge: function (e, t, n) {
        var r, i, s = e.vertices.length, o = e.faceVertexUvs[0].length, u = t instanceof THREE.Mesh ? t.geometry : t,
            a = e.vertices, f = u.vertices, l = e.faces, c = u.faces, h = e.faceVertexUvs[0], p = u.faceVertexUvs[0];
        n === undefined && (n = 0), t instanceof THREE.Mesh && (t.matrixAutoUpdate && t.updateMatrix(), r = t.matrix, i = (new THREE.Matrix3).getNormalMatrix(r));
        for (var d = 0, v = f.length; d < v; d++) {
            var m = f[d], g = m.clone();
            r && g.applyMatrix4(r), a.push(g)
        }
        for (d = 0, v = c.length; d < v; d++) {
            var y = c[d], b, w, E, S = y.vertexNormals, x = y.vertexColors;
            b = new THREE.Face3(y.a + s, y.b + s, y.c + s), b.normal.copy(y.normal), i && b.normal.applyMatrix3(i).normalize();
            for (var T = 0,
                     N = S.length; T < N; T++)w = S[T].clone(), i && w.applyMatrix3(i).normalize(), b.vertexNormals.push(w);
            b.color.copy(y.color);
            for (var T = 0, N = x.length; T < N; T++)E = x[T], b.vertexColors.push(E.clone());
            b.materialIndex = y.materialIndex + n, b.centroid.copy(y.centroid), r && b.centroid.applyMatrix4(r), l.push(b)
        }
        for (d = 0, v = p.length; d < v; d++) {
            var C = p[d], k = [];
            for (var T = 0, N = C.length; T < N; T++)k.push(new THREE.Vector2(C[T].x, C[T].y));
            h.push(k)
        }
    }, randomPointInTriangle: function () {
        var e = new THREE.Vector3;
        return function (t, n, r) {
            var i = new THREE.Vector3, s = THREE.Math.random16(), o = THREE.Math.random16();
            s + o > 1 && (s = 1 - s, o = 1 - o);
            var u = 1 - s - o;
            return i.copy(t), i.multiplyScalar(s), e.copy(n), e.multiplyScalar(o), i.add(e), e.copy(r), e.multiplyScalar(u), i.add(e), i
        }
    }(), randomPointInFace: function (e, t, n) {
        var r, i, s, o;
        return r = t.vertices[e.a], i = t.vertices[e.b], s = t.vertices[e.c], THREE.GeometryUtils.randomPointInTriangle(r, i, s)
    }, randomPointsInGeometry: function (e, t) {
        function p(e) {
            function t(n, r) {
                if (r < n)return n;
                var i = n + Math.floor((r - n) / 2);
                return a[i] > e ? t(n, i - 1) : a[i] < e ? t(i + 1, r) : i
            }

            var n = t(0, a.length - 1);
            return n
        }

        var n, r, i = e.faces, s = e.vertices, o = i.length, u = 0, a = [], f, l, c, h;
        for (r = 0; r < o; r++)n = i[r], f = s[n.a], l = s[n.b], c = s[n.c], n._area = THREE.GeometryUtils.triangleArea(f, l, c), u += n._area, a[r] = u;
        var d, v, m = [], g = {};
        for (r = 0; r < t; r++)d = THREE.Math.random16() * u, v = p(d), m[r] = THREE.GeometryUtils.randomPointInFace(i[v], e, !0), g[v] ? g[v] += 1 : g[v] = 1;
        return m
    }, triangleArea: function () {
        var e = new THREE.Vector3, t = new THREE.Vector3;
        return function (n, r, i) {
            return e.subVectors(r, n), t.subVectors(i, n), e.cross(t), .5 * e.length()
        }
    }(), center: function (e) {
        e.computeBoundingBox();
        var t = e.boundingBox, n = new THREE.Vector3;
        return n.addVectors(t.min, t.max), n.multiplyScalar(-0.5), e.applyMatrix((new THREE.Matrix4).makeTranslation(n.x, n.y, n.z)), e.computeBoundingBox(), n
    }, triangulateQuads: function (e) {
        var t, n, r, i, s = [], o = [];
        for (t = 0, n = e.faceVertexUvs.length; t < n; t++)o[t] = [];
        for (t = 0, n = e.faces.length; t < n; t++) {
            var u = e.faces[t];
            s.push(u);
            for (r = 0, i = e.faceVertexUvs.length; r < i; r++)o[r].push(e.faceVertexUvs[r][t])
        }
        e.faces = s, e.faceVertexUvs = o, e.computeCentroids(), e.computeFaceNormals(), e.computeVertexNormals(), e.hasTangents && e.computeTangents()
    }
},THREE.ImageUtils = {
    crossOrigin: "anonymous", loadTexture: function (e, t, n, r) {
        var i = new Image, s = new THREE.Texture(i, t), o = new THREE.ImageLoader;
        return o.crossOrigin = this.crossOrigin, o.load(e, function (e) {
            s.image = e, s.needsUpdate = !0, n && n(s)
        }), s.sourceFile = e, s
    }, loadCompressedTexture: function (e, t, n, r) {
        var i = new THREE.CompressedTexture;
        i.mapping = t;
        var s = new XMLHttpRequest;
        return s.onload = function () {
            var e = s.response, t = THREE.ImageUtils.parseDDS(e, !0);
            i.format = t.format, i.mipmaps = t.mipmaps, i.image.width = t.width, i.image.height = t.height, i.generateMipmaps = !1, i.needsUpdate = !0, n && n(i)
        }, s.onerror = r, s.open("GET", e, !0), s.responseType = "arraybuffer", s.send(null), i
    }, loadTextureCube: function (e, t, n, r) {
        var i = [];
        i.loadCount = 0;
        var s = new THREE.Texture;
        s.image = i, t !== undefined && (s.mapping = t), s.flipY = !1;
        for (var o = 0, u = e.length; o < u; ++o) {
            var a = new Image;
            i[o] = a, a.onload = function () {
                i.loadCount += 1, i.loadCount === 6 && (s.needsUpdate = !0, n && n(s))
            }, a.onerror = r, a.crossOrigin = this.crossOrigin, a.src = e[o]
        }
        return s
    }, loadCompressedTextureCube: function (e, t, n, r) {
        var i = [];
        i.loadCount = 0;
        var s = new THREE.CompressedTexture;
        s.image = i, t !== undefined && (s.mapping = t), s.flipY = !1, s.generateMipmaps = !1;
        var o = function (e, t) {
            return function () {
                var r = e.response, o = THREE.ImageUtils.parseDDS(r, !0);
                t.format = o.format, t.mipmaps = o.mipmaps, t.width = o.width, t.height = o.height, i.loadCount += 1, i.loadCount === 6 && (s.format = o.format, s.needsUpdate = !0, n && n(s))
            }
        };
        if (e instanceof Array)for (var u = 0, a = e.length; u < a; ++u) {
            var f = {};
            i[u] = f;
            var l = new XMLHttpRequest;
            l.onload = o(l, f), l.onerror = r;
            var c = e[u];
            l.open("GET", c, !0), l.responseType = "arraybuffer", l.send(null)
        } else {
            var c = e, l = new XMLHttpRequest;
            l.onload = function () {
                var e = l.response, t = THREE.ImageUtils.parseDDS(e, !0);
                if (t.isCubemap) {
                    var r = t.mipmaps.length / t.mipmapCount;
                    for (var o = 0; o < r; o++) {
                        i[o] = {mipmaps: []};
                        for (var u = 0; u < t.mipmapCount; u++)i[o].mipmaps.push(t.mipmaps[o * t.mipmapCount + u]), i[o].format = t.format, i[o].width = t.width, i[o].height = t.height
                    }
                    s.format = t.format, s.needsUpdate = !0, n && n(s)
                }
            }, l.onerror = r, l.open("GET", c, !0), l.responseType = "arraybuffer", l.send(null)
        }
        return s
    }, parseDDS: function (e, t) {
        function A(e) {
            return e.charCodeAt(0) + (e.charCodeAt(1) << 8) + (e.charCodeAt(2) << 16) + (e.charCodeAt(3) << 24)
        }

        function O(e) {
            return String.fromCharCode(e & 255, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255)
        }

        var n = {mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1}, r = 542327876, i = 1, s = 2, o = 4,
            u = 8, a = 4096, f = 131072, l = 524288, c = 8388608, h = 8, p = 4194304, d = 4096, v = 512, m = 1024,
            g = 2048, y = 4096, b = 8192, w = 16384, E = 32768, S = 2097152, x = 1, T = 2, N = 4, C = 64, k = 512,
            L = 131072, M = A("DXT1"), _ = A("DXT3"), D = A("DXT5"), P = 31, H = 0, B = 1, j = 2, F = 3, I = 4, q = 7,
            R = 20, U = 21, z = 27, W = 28, X = 29, V = 30, $ = new Int32Array(e, 0, P);
        if ($[H] !== r)return 0, n;
        if (!$[R] & N)return 0, n;
        var J, K = $[U];
        switch (K) {
            case M:
                J = 8, n.format = THREE.RGB_S3TC_DXT1_Format;
                break;
            case _:
                J = 16, n.format = THREE.RGBA_S3TC_DXT3_Format;
                break;
            case D:
                J = 16, n.format = THREE.RGBA_S3TC_DXT5_Format;
                break;
            default:
                return 0, n
        }
        n.mipmapCount = 1, $[j] & f && t !== !1 && (n.mipmapCount = Math.max(1, $[q])), n.isCubemap = $[W] & v ? !0 : !1, n.width = $[I], n.height = $[F];
        var Q = $[B] + 4, G = n.width, Y = n.height, Z = n.isCubemap ? 6 : 1;
        for (var et = 0; et < Z; et++) {
            for (var tt = 0; tt < n.mipmapCount; tt++) {
                var nt = Math.max(4, G) / 4 * Math.max(4, Y) / 4 * J, rt = new Uint8Array(e, Q, nt),
                    it = {data: rt, width: G, height: Y};
                n.mipmaps.push(it), Q += nt, G = Math.max(G * .5, 1), Y = Math.max(Y * .5, 1)
            }
            G = n.width, Y = n.height
        }
        return n
    },
    generateDataTexture: function (e, t, n) {
        var r = e * t, i = new Uint8Array(3 * r), s = Math.floor(n.r * 255), o = Math.floor(n.g * 255),
            u = Math.floor(n.b * 255);
        for (var a = 0; a < r; a++)i[a * 3] = s, i[a * 3 + 1] = o, i[a * 3 + 2] = u;
        var f = new THREE.DataTexture(i, e, t, THREE.RGBFormat);
        return f.needsUpdate = !0, f
    }
},THREE.SceneUtils = {
    createMultiMaterialObject: function (e, t) {
        var n = new THREE.Object3D;
        for (var r = 0, i = t.length; r < i; r++)n.add(new THREE.Mesh(e, t[r]));
        return n
    }, detach: function (e, t, n) {
        e.applyMatrix(t.matrixWorld), t.remove(e), n.add(e)
    }, attach: function (e, t, n) {
        var r = new THREE.Matrix4;
        r.getInverse(n.matrixWorld), e.applyMatrix(r), t.remove(e), n.add(e)
    }
},THREE.FontUtils = {
    faces: {},
    face: "helvetiker",
    weight: "normal",
    style: "normal",
    size: 150,
    divisions: 10,
    getFace: function () {
        return this.faces[this.face][this.weight][this.style]
    },
    loadFace: function (e) {
        var t = e.familyName.toLowerCase(), n = this;
        n.faces[t] = n.faces[t] || {}, n.faces[t][e.cssFontWeight] = n.faces[t][e.cssFontWeight] || {}, n.faces[t][e.cssFontWeight][e.cssFontStyle] = e;
        var r = n.faces[t][e.cssFontWeight][e.cssFontStyle] = e;
        return e
    },
    drawText: function (e) {
        var t = [], n = [], r, i, s = this.getFace(), o = this.size / s.resolution, u = 0, a = String(e).split(""),
            f = a.length, l = [];
        for (r = 0; r < f; r++) {
            var c = new THREE.Path, h = this.extractGlyphPoints(a[r], s, o, u, c);
            u += h.offset, l.push(h.path)
        }
        var p = u / 2;
        return {paths: l, offset: p}
    },
    extractGlyphPoints: function (e, t, n, r, i) {
        var s = [], o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N = t.glyphs[e] || t.glyphs["?"];
        if (!N)return;
        if (N.o) {
            f = N._cachedOutline || (N._cachedOutline = N.o.split(" ")), c = f.length, h = n, p = n;
            for (o = 0; o < c;) {
                l = f[o++];
                switch (l) {
                    case"m":
                        d = f[o++] * h + r, v = f[o++] * p, i.moveTo(d, v);
                        break;
                    case"l":
                        d = f[o++] * h + r, v = f[o++] * p, i.lineTo(d, v);
                        break;
                    case"q":
                        m = f[o++] * h + r, g = f[o++] * p, w = f[o++] * h + r, E = f[o++] * p, i.quadraticCurveTo(w, E, m, g), T = s[s.length - 1];
                        if (T) {
                            y = T.x, b = T.y;
                            for (u = 1, a = this.divisions; u <= a; u++)var C = u / a,
                                k = THREE.Shape.Utils.b2(C, y, w, m), L = THREE.Shape.Utils.b2(C, b, E, g)
                        }
                        break;
                    case"b":
                        m = f[o++] * h + r, g = f[o++] * p, w = f[o++] * h + r, E = f[o++] * -p, S = f[o++] * h + r, x = f[o++] * -p, i.bezierCurveTo(m, g, w, E, S, x), T = s[s.length - 1];
                        if (T) {
                            y = T.x, b = T.y;
                            for (u = 1, a = this.divisions; u <= a; u++)var C = u / a,
                                k = THREE.Shape.Utils.b3(C, y, w, S, m), L = THREE.Shape.Utils.b3(C, b, E, x, g)
                        }
                }
            }
        }
        return {offset: N.ha * n, path: i}
    }
},THREE.FontUtils.generateShapes = function (e, t) {
    t = t || {};
    var n = t.size !== undefined ? t.size : 100, r = t.curveSegments !== undefined ? t.curveSegments : 4,
        i = t.font !== undefined ? t.font : "helvetiker", s = t.weight !== undefined ? t.weight : "normal",
        o = t.style !== undefined ? t.style : "normal";
    THREE.FontUtils.size = n, THREE.FontUtils.divisions = r, THREE.FontUtils.face = i, THREE.FontUtils.weight = s, THREE.FontUtils.style = o;
    var u = THREE.FontUtils.drawText(e), a = u.paths, f = [];
    for (var l = 0, c = a.length; l < c; l++)Array.prototype.push.apply(f, a[l].toShapes());
    return f
},function (e) {
    var t = 1e-10, n = function (e, t) {
        var n = e.length;
        if (n < 3)return null;
        var s = [], o = [], u = [], a, f, l;
        if (r(e) > 0)for (f = 0; f < n; f++)o[f] = f; else for (f = 0; f < n; f++)o[f] = n - 1 - f;
        var c = n, h = 2 * c;
        for (f = c - 1; c > 2;) {
            if (h-- <= 0)return 0, t ? u : s;
            a = f, c <= a && (a = 0), f = a + 1, c <= f && (f = 0), l = f + 1, c <= l && (l = 0);
            if (i(e, a, f, l, c, o)) {
                var p, d, v, m, g;
                p = o[a], d = o[f], v = o[l], s.push([e[p], e[d], e[v]]), u.push([o[a], o[f], o[l]]);
                for (m = f, g = f + 1; g < c; m++, g++)o[m] = o[g];
                c--, h = 2 * c
            }
        }
        return t ? u : s
    }, r = function (e) {
        var t = e.length, n = 0;
        for (var r = t - 1, i = 0; i < t; r = i++)n += e[r].x * e[i].y - e[i].x * e[r].y;
        return n * .5
    }, i = function (e, n, r, i, s, o) {
        var u, a, f, l, c, h, p, d, v;
        a = e[o[n]].x, f = e[o[n]].y, l = e[o[r]].x, c = e[o[r]].y, h = e[o[i]].x, p = e[o[i]].y;
        if (t > (l - a) * (p - f) - (c - f) * (h - a))return !1;
        var m, g, y, b, w, E, S, x, T, N, C, k, L, A, O;
        m = h - l, g = p - c, y = a - h, b = f - p, w = l - a, E = c - f;
        for (u = 0; u < s; u++) {
            if (u === n || u === r || u === i)continue;
            d = e[o[u]].x, v = e[o[u]].y, S = d - a, x = v - f, T = d - l, N = v - c, C = d - h, k = v - p, O = m * N - g * T, L = w * x - E * S, A = y * k - b * C;
            if (O >= -t && A >= -t && L >= -t)return !1
        }
        return !0
    };
    return e.Triangulate = n, e.Triangulate.area = r, e
}(THREE.FontUtils),self._typeface_js = {
    faces: THREE.FontUtils.faces,
    loadFace: THREE.FontUtils.loadFace
},THREE.typeface_js = self._typeface_js,THREE.Curve = function () {
},THREE.Curve.prototype.getPoint = function (e) {
    return 0, null
},THREE.Curve.prototype.getPointAt = function (e) {
    var t = this.getUtoTmapping(e);
    return this.getPoint(t)
},THREE.Curve.prototype.getPoints = function (e) {
    e || (e = 5);
    var t, n = [];
    for (t = 0; t <= e; t++)n.push(this.getPoint(t / e));
    return n
},THREE.Curve.prototype.getSpacedPoints = function (e) {
    e || (e = 5);
    var t, n = [];
    for (t = 0; t <= e; t++)n.push(this.getPointAt(t / e));
    return n
},THREE.Curve.prototype.getLength = function () {
    var e = this.getLengths();
    return e[e.length - 1]
},THREE.Curve.prototype.getLengths = function (e) {
    e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200);
    if (this.cacheArcLengths && this.cacheArcLengths.length == e + 1 && !this.needsUpdate)return this.cacheArcLengths;
    this.needsUpdate = !1;
    var t = [], n, r = this.getPoint(0), i, s = 0;
    t.push(0);
    for (i = 1; i <= e; i++)n = this.getPoint(i / e), s += n.distanceTo(r), t.push(s), r = n;
    return this.cacheArcLengths = t, t
},THREE.Curve.prototype.updateArcLengths = function () {
    this.needsUpdate = !0, this.getLengths()
},THREE.Curve.prototype.getUtoTmapping = function (e, t) {
    var n = this.getLengths(), r = 0, i = n.length, s;
    t ? s = t : s = e * n[i - 1];
    var o = 0, u = i - 1, a;
    while (o <= u) {
        r = Math.floor(o + (u - o) / 2), a = n[r] - s;
        if (a < 0) {
            o = r + 1;
            continue
        }
        if (a > 0) {
            u = r - 1;
            continue
        }
        u = r;
        break
    }
    r = u;
    if (n[r] == s) {
        var f = r / (i - 1);
        return f
    }
    var l = n[r], c = n[r + 1], h = c - l, p = (s - l) / h, f = (r + p) / (i - 1);
    return f
},THREE.Curve.prototype.getTangent = function (e) {
    var t = 1e-4, n = e - t, r = e + t;
    n < 0 && (n = 0), r > 1 && (r = 1);
    var i = this.getPoint(n), s = this.getPoint(r), o = s.clone().sub(i);
    return o.normalize()
},THREE.Curve.prototype.getTangentAt = function (e) {
    var t = this.getUtoTmapping(e);
    return this.getTangent(t)
},THREE.Curve.Utils = {
    tangentQuadraticBezier: function (e, t, n, r) {
        return 2 * (1 - e) * (n - t) + 2 * e * (r - n)
    }, tangentCubicBezier: function (e, t, n, r, i) {
        return -3 * t * (1 - e) * (1 - e) + 3 * n * (1 - e) * (1 - e) - 6 * e * n * (1 - e) + 6 * e * r * (1 - e) - 3 * e * e * r + 3 * e * e * i
    }, tangentSpline: function (e, t, n, r, i) {
        var s = 6 * e * e - 6 * e, o = 3 * e * e - 4 * e + 1, u = -6 * e * e + 6 * e, a = 3 * e * e - 2 * e;
        return s + o + u + a
    }, interpolate: function (e, t, n, r, i) {
        var s = (n - e) * .5, o = (r - t) * .5, u = i * i, a = i * u;
        return (2 * t - 2 * n + s + o) * a + (-3 * t + 3 * n - 2 * s - o) * u + s * i + t
    }
},THREE.Curve.create = function (e, t) {
    return e.prototype = Object.create(THREE.Curve.prototype), e.prototype.getPoint = t, e
},THREE.CurvePath = function () {
    this.curves = [], this.bends = [], this.autoClose = !1
},THREE.CurvePath.prototype = Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add = function (e) {
    this.curves.push(e)
},THREE.CurvePath.prototype.checkConnection = function () {
},THREE.CurvePath.prototype.closePath = function () {
    var e = this.curves[0].getPoint(0), t = this.curves[this.curves.length - 1].getPoint(1);
    e.equals(t) || this.curves.push(new THREE.LineCurve(t, e))
},THREE.CurvePath.prototype.getPoint = function (e) {
    var t = e * this.getLength(), n = this.getCurveLengths(), r = 0, i, s;
    while (r < n.length) {
        if (n[r] >= t) {
            i = n[r] - t, s = this.curves[r];
            var o = 1 - i / s.getLength();
            return s.getPointAt(o)
        }
        r++
    }
    return null
},THREE.CurvePath.prototype.getLength = function () {
    var e = this.getCurveLengths();
    return e[e.length - 1]
},THREE.CurvePath.prototype.getCurveLengths = function () {
    if (this.cacheLengths && this.cacheLengths.length == this.curves.length)return this.cacheLengths;
    var e = [], t = 0, n, r = this.curves.length;
    for (n = 0; n < r; n++)t += this.curves[n].getLength(), e.push(t);
    return this.cacheLengths = e, e
},THREE.CurvePath.prototype.getBoundingBox = function () {
    var e = this.getPoints(), t, n, r, i, s, o;
    t = n = Number.NEGATIVE_INFINITY, i = s = Number.POSITIVE_INFINITY;
    var u, a, f, l, c = e[0] instanceof THREE.Vector3;
    l = c ? new THREE.Vector3 : new THREE.Vector2;
    for (a = 0, f = e.length; a < f; a++)u = e[a], u.x > t ? t = u.x : u.x < i && (i = u.x), u.y > n ? n = u.y : u.y < s && (s = u.y), c && (u.z > r ? r = u.z : u.z < o && (o = u.z)), l.add(u);
    var h = {minX: i, minY: s, maxX: t, maxY: n, centroid: l.divideScalar(f)};
    return c && (h.maxZ = r, h.minZ = o), h
},THREE.CurvePath.prototype.createPointsGeometry = function (e) {
    var t = this.getPoints(e, !0);
    return this.createGeometry(t)
},THREE.CurvePath.prototype.createSpacedPointsGeometry = function (e) {
    var t = this.getSpacedPoints(e, !0);
    return this.createGeometry(t)
},THREE.CurvePath.prototype.createGeometry = function (e) {
    var t = new THREE.Geometry;
    for (var n = 0; n < e.length; n++)t.vertices.push(new THREE.Vector3(e[n].x, e[n].y, e[n].z || 0));
    return t
},THREE.CurvePath.prototype.addWrapPath = function (e) {
    this.bends.push(e)
},THREE.CurvePath.prototype.getTransformedPoints = function (e, t) {
    var n = this.getPoints(e), r, i;
    t || (t = this.bends);
    for (r = 0, i = t.length; r < i; r++)n = this.getWrapPoints(n, t[r]);
    return n
},THREE.CurvePath.prototype.getTransformedSpacedPoints = function (e, t) {
    var n = this.getSpacedPoints(e), r, i;
    t || (t = this.bends);
    for (r = 0, i = t.length; r < i; r++)n = this.getWrapPoints(n, t[r]);
    return n
},THREE.CurvePath.prototype.getWrapPoints = function (e, t) {
    var n = this.getBoundingBox(), r, i, s, o, u, a;
    for (r = 0, i = e.length; r < i; r++) {
        s = e[r], o = s.x, u = s.y, a = o / n.maxX, a = t.getUtoTmapping(a, o);
        var f = t.getPoint(a), l = t.getNormalVector(a).multiplyScalar(u);
        s.x = f.x + l.x, s.y = f.y + l.y
    }
    return e
},THREE.Gyroscope = function () {
    THREE.Object3D.call(this)
},THREE.Gyroscope.prototype = Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld = function (e) {
    this.matrixAutoUpdate && this.updateMatrix();
    if (this.matrixWorldNeedsUpdate || e) this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorld.decompose(this.translationWorld, this.quaternionWorld, this.scaleWorld), this.matrix.decompose(this.translationObject, this.quaternionObject, this.scaleObject), this.matrixWorld.compose(this.translationWorld, this.quaternionObject, this.scaleWorld)) : this.matrixWorld.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0;
    for (var t = 0, n = this.children.length; t < n; t++)this.children[t].updateMatrixWorld(e)
},THREE.Gyroscope.prototype.translationWorld = new THREE.Vector3,THREE.Gyroscope.prototype.translationObject = new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld = new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject = new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld = new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject = new THREE.Vector3,THREE.Path = function (e) {
    THREE.CurvePath.call(this), this.actions = [], e && this.fromPoints(e)
},THREE.Path.prototype = Object.create(THREE.CurvePath.prototype),THREE.PathActions = {
    MOVE_TO: "moveTo",
    LINE_TO: "lineTo",
    QUADRATIC_CURVE_TO: "quadraticCurveTo",
    BEZIER_CURVE_TO: "bezierCurveTo",
    CSPLINE_THRU: "splineThru",
    ARC: "arc",
    ELLIPSE: "ellipse"
},THREE.Path.prototype.fromPoints = function (e) {
    this.moveTo(e[0].x, e[0].y);
    for (var t = 1, n = e.length; t < n; t++)this.lineTo(e[t].x, e[t].y)
},THREE.Path.prototype.moveTo = function (e, t) {
    var n = Array.prototype.slice.call(arguments);
    this.actions.push({action: THREE.PathActions.MOVE_TO, args: n})
},THREE.Path.prototype.lineTo = function (e, t) {
    var n = Array.prototype.slice.call(arguments), r = this.actions[this.actions.length - 1].args, i = r[r.length - 2],
        s = r[r.length - 1], o = new THREE.LineCurve(new THREE.Vector2(i, s), new THREE.Vector2(e, t));
    this.curves.push(o), this.actions.push({action: THREE.PathActions.LINE_TO, args: n})
},THREE.Path.prototype.quadraticCurveTo = function (e, t, n, r) {
    var i = Array.prototype.slice.call(arguments), s = this.actions[this.actions.length - 1].args, o = s[s.length - 2],
        u = s[s.length - 1],
        a = new THREE.QuadraticBezierCurve(new THREE.Vector2(o, u), new THREE.Vector2(e, t), new THREE.Vector2(n, r));
    this.curves.push(a), this.actions.push({action: THREE.PathActions.QUADRATIC_CURVE_TO, args: i})
},THREE.Path.prototype.bezierCurveTo = function (e, t, n, r, i, s) {
    var o = Array.prototype.slice.call(arguments), u = this.actions[this.actions.length - 1].args, a = u[u.length - 2],
        f = u[u.length - 1],
        l = new THREE.CubicBezierCurve(new THREE.Vector2(a, f), new THREE.Vector2(e, t), new THREE.Vector2(n, r), new THREE.Vector2(i, s));
    this.curves.push(l), this.actions.push({action: THREE.PathActions.BEZIER_CURVE_TO, args: o})
},THREE.Path.prototype.splineThru = function (e) {
    var t = Array.prototype.slice.call(arguments), n = this.actions[this.actions.length - 1].args, r = n[n.length - 2],
        i = n[n.length - 1], s = [new THREE.Vector2(r, i)];
    Array.prototype.push.apply(s, e);
    var o = new THREE.SplineCurve(s);
    this.curves.push(o), this.actions.push({action: THREE.PathActions.CSPLINE_THRU, args: t})
},THREE.Path.prototype.arc = function (e, t, n, r, i, s) {
    var o = this.actions[this.actions.length - 1].args, u = o[o.length - 2], a = o[o.length - 1];
    this.absarc(e + u, t + a, n, r, i, s)
},THREE.Path.prototype.absarc = function (e, t, n, r, i, s) {
    this.absellipse(e, t, n, n, r, i, s)
},THREE.Path.prototype.ellipse = function (e, t, n, r, i, s, o) {
    var u = this.actions[this.actions.length - 1].args, a = u[u.length - 2], f = u[u.length - 1];
    this.absellipse(e + a, t + f, n, r, i, s, o)
},THREE.Path.prototype.absellipse = function (e, t, n, r, i, s, o) {
    var u = Array.prototype.slice.call(arguments), a = new THREE.EllipseCurve(e, t, n, r, i, s, o);
    this.curves.push(a);
    var f = a.getPoint(o ? 1 : 0);
    u.push(f.x), u.push(f.y), this.actions.push({action: THREE.PathActions.ELLIPSE, args: u})
},THREE.Path.prototype.getSpacedPoints = function (e, t) {
    e || (e = 40);
    var n = [];
    for (var r = 0; r < e; r++)n.push(this.getPoint(r / e));
    return n
},THREE.Path.prototype.getPoints = function (e, t) {
    if (this.useSpacedPoints)return 0, this.getSpacedPoints(e, t);
    e = e || 12;
    var n = [], r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w;
    for (r = 0, i = this.actions.length; r < i; r++) {
        s = this.actions[r], o = s.action, u = s.args;
        switch (o) {
            case THREE.PathActions.MOVE_TO:
                n.push(new THREE.Vector2(u[0], u[1]));
                break;
            case THREE.PathActions.LINE_TO:
                n.push(new THREE.Vector2(u[0], u[1]));
                break;
            case THREE.PathActions.QUADRATIC_CURVE_TO:
                a = u[2], f = u[3], h = u[0], p = u[1], n.length > 0 ? (m = n[n.length - 1], d = m.x, v = m.y) : (m = this.actions[r - 1].args, d = m[m.length - 2], v = m[m.length - 1]);
                for (g = 1; g <= e; g++)y = g / e, b = THREE.Shape.Utils.b2(y, d, h, a), w = THREE.Shape.Utils.b2(y, v, p, f), n.push(new THREE.Vector2(b, w));
                break;
            case THREE.PathActions.BEZIER_CURVE_TO:
                a = u[4], f = u[5], h = u[0], p = u[1], l = u[2], c = u[3], n.length > 0 ? (m = n[n.length - 1], d = m.x, v = m.y) : (m = this.actions[r - 1].args, d = m[m.length - 2], v = m[m.length - 1]);
                for (g = 1; g <= e; g++)y = g / e, b = THREE.Shape.Utils.b3(y, d, h, l, a), w = THREE.Shape.Utils.b3(y, v, p, c, f), n.push(new THREE.Vector2(b, w));
                break;
            case THREE.PathActions.CSPLINE_THRU:
                m = this.actions[r - 1].args;
                var E = new THREE.Vector2(m[m.length - 2], m[m.length - 1]), S = [E], x = e * u[0].length;
                S = S.concat(u[0]);
                var T = new THREE.SplineCurve(S);
                for (g = 1; g <= x; g++)n.push(T.getPointAt(g / x));
                break;
            case THREE.PathActions.ARC:
                var N = u[0], C = u[1], k = u[2], L = u[3], A = u[4], O = !!u[5], M = A - L, _, D = e * 2;
                for (g = 1; g <= D; g++)y = g / D, O || (y = 1 - y), _ = L + y * M, b = N + k * Math.cos(_), w = C + k * Math.sin(_), n.push(new THREE.Vector2(b, w));
                break;
            case THREE.PathActions.ELLIPSE:
                var N = u[0], C = u[1], P = u[2], H = u[3], L = u[4], A = u[5], O = !!u[6], M = A - L, _, D = e * 2;
                for (g = 1; g <= D; g++)y = g / D, O || (y = 1 - y), _ = L + y * M, b = N + P * Math.cos(_), w = C + H * Math.sin(_), n.push(new THREE.Vector2(b, w))
        }
    }
    var B = n[n.length - 1], j = 1e-10;
    return Math.abs(B.x - n[0].x) < j && Math.abs(B.y - n[0].y) < j && n.splice(n.length - 1, 1), t && n.push(n[0]), n
},THREE.Path.prototype.toShapes = function (e) {
    var t, n, r, i, s, o = [], u = new THREE.Path;
    for (t = 0, n = this.actions.length; t < n; t++)r = this.actions[t], s = r.args, i = r.action, i == THREE.PathActions.MOVE_TO && u.actions.length != 0 && (o.push(u), u = new THREE.Path), u[i].apply(u, s);
    u.actions.length != 0 && o.push(u);
    if (o.length == 0)return [];
    var a, f, l, c = [];
    if (o.length == 1)return f = o[0], l = new THREE.Shape, l.actions = f.actions, l.curves = f.curves, c.push(l), c;
    var h = !THREE.Shape.Utils.isClockWise(o[0].getPoints());
    h = e ? !h : h;
    if (h) {
        l = new THREE.Shape;
        for (t = 0, n = o.length; t < n; t++)f = o[t], a = THREE.Shape.Utils.isClockWise(f.getPoints()), a = e ? !a : a, a ? (l.actions = f.actions, l.curves = f.curves, c.push(l), l = new THREE.Shape) : l.holes.push(f)
    } else {
        l = undefined;
        for (t = 0, n = o.length; t < n; t++)f = o[t], a = THREE.Shape.Utils.isClockWise(f.getPoints()), a = e ? !a : a, a ? (l && c.push(l), l = new THREE.Shape, l.actions = f.actions, l.curves = f.curves) : l.holes.push(f);
        c.push(l)
    }
    return c
},THREE.Shape = function () {
    THREE.Path.apply(this, arguments), this.holes = []
},THREE.Shape.prototype = Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude = function (e) {
    var t = new THREE.ExtrudeGeometry(this, e);
    return t
},THREE.Shape.prototype.makeGeometry = function (e) {
    var t = new THREE.ShapeGeometry(this, e);
    return t
},THREE.Shape.prototype.getPointsHoles = function (e) {
    var t, n = this.holes.length, r = [];
    for (t = 0; t < n; t++)r[t] = this.holes[t].getTransformedPoints(e, this.bends);
    return r
},THREE.Shape.prototype.getSpacedPointsHoles = function (e) {
    var t, n = this.holes.length, r = [];
    for (t = 0; t < n; t++)r[t] = this.holes[t].getTransformedSpacedPoints(e, this.bends);
    return r
},THREE.Shape.prototype.extractAllPoints = function (e) {
    return {shape: this.getTransformedPoints(e), holes: this.getPointsHoles(e)}
},THREE.Shape.prototype.extractPoints = function (e) {
    return this.useSpacedPoints ? this.extractAllSpacedPoints(e) : this.extractAllPoints(e)
},THREE.Shape.prototype.extractAllSpacedPoints = function (e) {
    return {shape: this.getTransformedSpacedPoints(e), holes: this.getSpacedPointsHoles(e)}
},THREE.Shape.Utils = {
    removeHoles: function (e, t) {
        var n = e.concat(), r = n.concat(), i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T = [];
        for (h = 0; h < t.length; h++) {
            d = t[h], Array.prototype.push.apply(r, d), v = Number.POSITIVE_INFINITY;
            for (p = 0; p < d.length; p++) {
                y = d[p];
                var N = [];
                for (g = 0; g < n.length; g++)b = n[g], m = y.distanceToSquared(b), N.push(m), m < v && (v = m, a = p, f = g)
            }
            i = f - 1 >= 0 ? f - 1 : n.length - 1, o = a - 1 >= 0 ? a - 1 : d.length - 1;
            var C = [d[a], n[f], n[i]], k = THREE.FontUtils.Triangulate.area(C), L = [d[a], d[o], n[f]],
                A = THREE.FontUtils.Triangulate.area(L), O = 1, M = -1, _ = f, D = a;
            f += O, a += M, f < 0 && (f += n.length), f %= n.length, a < 0 && (a += d.length), a %= d.length, i = f - 1 >= 0 ? f - 1 : n.length - 1, o = a - 1 >= 0 ? a - 1 : d.length - 1, C = [d[a], n[f], n[i]];
            var P = THREE.FontUtils.Triangulate.area(C);
            L = [d[a], d[o], n[f]];
            var H = THREE.FontUtils.Triangulate.area(L);
            k + A > P + H && (f = _, a = D, f < 0 && (f += n.length), f %= n.length, a < 0 && (a += d.length), a %= d.length, i = f - 1 >= 0 ? f - 1 : n.length - 1, o = a - 1 >= 0 ? a - 1 : d.length - 1), w = n.slice(0, f), E = n.slice(f), S = d.slice(a), x = d.slice(0, a);
            var B = [d[a], n[f], n[i]], j = [d[a], d[o], n[f]];
            T.push(B), T.push(j), n = w.concat(S).concat(x).concat(E)
        }
        return {shape: n, isolatedPts: T, allpoints: r}
    }, triangulateShape: function (e, t) {
        var n = THREE.Shape.Utils.removeHoles(e, t), r = n.shape, i = n.allpoints, s = n.isolatedPts,
            o = THREE.FontUtils.Triangulate(r, !1), u, a, f, l, c, h, p = {}, d = {};
        for (u = 0, a = i.length; u < a; u++)c = i[u].x + ":" + i[u].y, p[c] !== undefined && 0, p[c] = u;
        for (u = 0, a = o.length; u < a; u++) {
            l = o[u];
            for (f = 0; f < 3; f++)c = l[f].x + ":" + l[f].y, h = p[c], h !== undefined && (l[f] = h)
        }
        for (u = 0, a = s.length; u < a; u++) {
            l = s[u];
            for (f = 0; f < 3; f++)c = l[f].x + ":" + l[f].y, h = p[c], h !== undefined && (l[f] = h)
        }
        return o.concat(s)
    }, isClockWise: function (e) {
        return THREE.FontUtils.Triangulate.area(e) < 0
    }, b2p0: function (e, t) {
        var n = 1 - e;
        return n * n * t
    }, b2p1: function (e, t) {
        return 2 * (1 - e) * e * t
    }, b2p2: function (e, t) {
        return e * e * t
    }, b2: function (e, t, n, r) {
        return this.b2p0(e, t) + this.b2p1(e, n) + this.b2p2(e, r)
    }, b3p0: function (e, t) {
        var n = 1 - e;
        return n * n * n * t
    }, b3p1: function (e, t) {
        var n = 1 - e;
        return 3 * n * n * e * t
    }, b3p2: function (e, t) {
        var n = 1 - e;
        return 3 * n * e * e * t
    }, b3p3: function (e, t) {
        return e * e * e * t
    }, b3: function (e, t, n, r, i) {
        return this.b3p0(e, t) + this.b3p1(e, n) + this.b3p2(e, r) + this.b3p3(e, i)
    }
},THREE.LineCurve = function (e, t) {
    this.v1 = e, this.v2 = t
},THREE.LineCurve.prototype = Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint = function (e) {
    var t = this.v2.clone().sub(this.v1);
    return t.multiplyScalar(e).add(this.v1), t
},THREE.LineCurve.prototype.getPointAt = function (e) {
    return this.getPoint(e)
},THREE.LineCurve.prototype.getTangent = function (e) {
    var t = this.v2.clone().sub(this.v1);
    return t.normalize()
},THREE.QuadraticBezierCurve = function (e, t, n) {
    this.v0 = e, this.v1 = t, this.v2 = n
},THREE.QuadraticBezierCurve.prototype = Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint = function (e) {
    var t, n;
    return t = THREE.Shape.Utils.b2(e, this.v0.x, this.v1.x, this.v2.x), n = THREE.Shape.Utils.b2(e, this.v0.y, this.v1.y, this.v2.y), new THREE.Vector2(t, n)
},THREE.QuadraticBezierCurve.prototype.getTangent = function (e) {
    var t, n;
    t = THREE.Curve.Utils.tangentQuadraticBezier(e, this.v0.x, this.v1.x, this.v2.x), n = THREE.Curve.Utils.tangentQuadraticBezier(e, this.v0.y, this.v1.y, this.v2.y);
    var r = new THREE.Vector2(t, n);
    return r.normalize(), r
},THREE.CubicBezierCurve = function (e, t, n, r) {
    this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = r
},THREE.CubicBezierCurve.prototype = Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint = function (e) {
    var t, n;
    return t = THREE.Shape.Utils.b3(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), n = THREE.Shape.Utils.b3(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new THREE.Vector2(t, n)
},THREE.CubicBezierCurve.prototype.getTangent = function (e) {
    var t, n;
    t = THREE.Curve.Utils.tangentCubicBezier(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), n = THREE.Curve.Utils.tangentCubicBezier(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y);
    var r = new THREE.Vector2(t, n);
    return r.normalize(), r
},THREE.SplineCurve = function (e) {
    this.points = e == undefined ? [] : e
},THREE.SplineCurve.prototype = Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint = function (e) {
    var t = new THREE.Vector2, n = [], r = this.points, i, s, o;
    return i = (r.length - 1) * e, s = Math.floor(i), o = i - s, n[0] = s == 0 ? s : s - 1, n[1] = s, n[2] = s > r.length - 2 ? r.length - 1 : s + 1, n[3] = s > r.length - 3 ? r.length - 1 : s + 2, t.x = THREE.Curve.Utils.interpolate(r[n[0]].x, r[n[1]].x, r[n[2]].x, r[n[3]].x, o), t.y = THREE.Curve.Utils.interpolate(r[n[0]].y, r[n[1]].y, r[n[2]].y, r[n[3]].y, o), t
},THREE.EllipseCurve = function (e, t, n, r, i, s, o) {
    this.aX = e, this.aY = t, this.xRadius = n, this.yRadius = r, this.aStartAngle = i, this.aEndAngle = s, this.aClockwise = o
},THREE.EllipseCurve.prototype = Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint = function (e) {
    var t = this.aEndAngle - this.aStartAngle;
    this.aClockwise || (e = 1 - e);
    var n = this.aStartAngle + e * t, r = this.aX + this.xRadius * Math.cos(n),
        i = this.aY + this.yRadius * Math.sin(n);
    return new THREE.Vector2(r, i)
},THREE.ArcCurve = function (e, t, n, r, i, s) {
    THREE.EllipseCurve.call(this, e, t, n, n, r, i, s)
},THREE.ArcCurve.prototype = Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3 = THREE.Curve.create(function (e, t) {
    this.v1 = e, this.v2 = t
}, function (e) {
    var t = new THREE.Vector3;
    return t.subVectors(this.v2, this.v1), t.multiplyScalar(e), t.add(this.v1), t
}),THREE.QuadraticBezierCurve3 = THREE.Curve.create(function (e, t, n) {
    this.v0 = e, this.v1 = t, this.v2 = n
}, function (e) {
    var t, n, r;
    return t = THREE.Shape.Utils.b2(e, this.v0.x, this.v1.x, this.v2.x), n = THREE.Shape.Utils.b2(e, this.v0.y, this.v1.y, this.v2.y), r = THREE.Shape.Utils.b2(e, this.v0.z, this.v1.z, this.v2.z), new THREE.Vector3(t, n, r)
}),THREE.CubicBezierCurve3 = THREE.Curve.create(function (e, t, n, r) {
    this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = r
}, function (e) {
    var t, n, r;
    return t = THREE.Shape.Utils.b3(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), n = THREE.Shape.Utils.b3(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y), r = THREE.Shape.Utils.b3(e, this.v0.z, this.v1.z, this.v2.z, this.v3.z), new THREE.Vector3(t, n, r)
}),THREE.SplineCurve3 = THREE.Curve.create(function (e) {
    this.points = e == undefined ? [] : e
}, function (e) {
    var t = new THREE.Vector3, n = [], r = this.points, i, s, o;
    i = (r.length - 1) * e, s = Math.floor(i), o = i - s, n[0] = s == 0 ? s : s - 1, n[1] = s, n[2] = s > r.length - 2 ? r.length - 1 : s + 1, n[3] = s > r.length - 3 ? r.length - 1 : s + 2;
    var u = r[n[0]], a = r[n[1]], f = r[n[2]], l = r[n[3]];
    return t.x = THREE.Curve.Utils.interpolate(u.x, a.x, f.x, l.x, o), t.y = THREE.Curve.Utils.interpolate(u.y, a.y, f.y, l.y, o), t.z = THREE.Curve.Utils.interpolate(u.z, a.z, f.z, l.z, o), t
}),THREE.ClosedSplineCurve3 = THREE.Curve.create(function (e) {
    this.points = e == undefined ? [] : e
}, function (e) {
    var t = new THREE.Vector3, n = [], r = this.points, i, s, o;
    return i = (r.length - 0) * e, s = Math.floor(i), o = i - s, s += s > 0 ? 0 : (Math.floor(Math.abs(s) / r.length) + 1) * r.length, n[0] = (s - 1) % r.length, n[1] = s % r.length, n[2] = (s + 1) % r.length, n[3] = (s + 2) % r.length, t.x = THREE.Curve.Utils.interpolate(r[n[0]].x, r[n[1]].x, r[n[2]].x, r[n[3]].x, o), t.y = THREE.Curve.Utils.interpolate(r[n[0]].y, r[n[1]].y, r[n[2]].y, r[n[3]].y, o), t.z = THREE.Curve.Utils.interpolate(r[n[0]].z, r[n[1]].z, r[n[2]].z, r[n[3]].z, o), t
}),THREE.AnimationHandler = function () {
    var e = [], t = {}, n = {};
    n.update = function (t) {
        for (var n = 0; n < e.length; n++)e[n].update(t)
    }, n.addToUpdate = function (t) {
        e.indexOf(t) === -1 && e.push(t)
    }, n.removeFromUpdate = function (t) {
        var n = e.indexOf(t);
        n !== -1 && e.splice(n, 1)
    }, n.add = function (e) {
        t[e.name] !== undefined && 0, t[e.name] = e, i(e)
    }, n.get = function (e) {
        if (typeof e == "string")return t[e] ? t[e] : (0, null)
    }, n.parse = function (e) {
        var t = [];
        if (e instanceof THREE.SkinnedMesh)for (var n = 0; n < e.bones.length; n++)t.push(e.bones[n]); else r(e, t);
        return t
    };
    var r = function (e, t) {
        t.push(e);
        for (var n = 0; n < e.children.length; n++)r(e.children[n], t)
    }, i = function (e) {
        if (e.initialized === !0)return;
        for (var t = 0; t < e.hierarchy.length; t++) {
            for (var n = 0; n < e.hierarchy[t].keys.length; n++) {
                e.hierarchy[t].keys[n].time < 0 && (e.hierarchy[t].keys[n].time = 0);
                if (e.hierarchy[t].keys[n].rot !== undefined && !(e.hierarchy[t].keys[n].rot instanceof THREE.Quaternion)) {
                    var r = e.hierarchy[t].keys[n].rot;
                    e.hierarchy[t].keys[n].rot = new THREE.Quaternion(r[0], r[1], r[2], r[3])
                }
            }
            if (e.hierarchy[t].keys.length && e.hierarchy[t].keys[0].morphTargets !== undefined) {
                var i = {};
                for (var n = 0; n < e.hierarchy[t].keys.length; n++)for (var s = 0; s < e.hierarchy[t].keys[n].morphTargets.length; s++) {
                    var o = e.hierarchy[t].keys[n].morphTargets[s];
                    i[o] = -1
                }
                e.hierarchy[t].usedMorphTargets = i;
                for (var n = 0; n < e.hierarchy[t].keys.length; n++) {
                    var u = {};
                    for (var o in i) {
                        for (var s = 0; s < e.hierarchy[t].keys[n].morphTargets.length; s++)if (e.hierarchy[t].keys[n].morphTargets[s] === o) {
                            u[o] = e.hierarchy[t].keys[n].morphTargetsInfluences[s];
                            break
                        }
                        s === e.hierarchy[t].keys[n].morphTargets.length && (u[o] = 0)
                    }
                    e.hierarchy[t].keys[n].morphTargetsInfluences = u
                }
            }
            for (var n = 1; n < e.hierarchy[t].keys.length; n++)e.hierarchy[t].keys[n].time === e.hierarchy[t].keys[n - 1].time && (e.hierarchy[t].keys.splice(n, 1), n--);
            for (var n = 0; n < e.hierarchy[t].keys.length; n++)e.hierarchy[t].keys[n].index = n
        }
        var a = parseInt(e.length * e.fps, 10);
        e.JIT = {}, e.JIT.hierarchy = [];
        for (var t = 0; t < e.hierarchy.length; t++)e.JIT.hierarchy.push(new Array(a));
        e.initialized = !0
    };
    return n.LINEAR = 0, n.CATMULLROM = 1, n.CATMULLROM_FORWARD = 2, n
}(),THREE.Animation = function (e, t, n) {
    this.root = e, this.data = THREE.AnimationHandler.get(t), this.hierarchy = THREE.AnimationHandler.parse(e), this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.isPaused = !0, this.loop = !0, this.interpolationType = n !== undefined ? n : THREE.AnimationHandler.LINEAR, this.points = [], this.target = new THREE.Vector3
},THREE.Animation.prototype.play = function (e, t) {
    if (this.isPlaying === !1) {
        this.isPlaying = !0, this.loop = e !== undefined ? e : !0, this.currentTime = t !== undefined ? t : 0;
        var n, r = this.hierarchy.length, i;
        for (n = 0; n < r; n++) {
            i = this.hierarchy[n], i.matrixAutoUpdate = !0, i.animationCache === undefined && (i.animationCache = {}, i.animationCache.prevKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, i.animationCache.nextKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, i.animationCache.originalMatrix = i instanceof THREE.Bone ? i.skinMatrix : i.matrix);
            var s = i.animationCache.prevKey, o = i.animationCache.nextKey;
            s.pos = this.data.hierarchy[n].keys[0], s.rot = this.data.hierarchy[n].keys[0], s.scl = this.data.hierarchy[n].keys[0], o.pos = this.getNextKeyWith("pos", n, 1), o.rot = this.getNextKeyWith("rot", n, 1), o.scl = this.getNextKeyWith("scl", n, 1)
        }
        this.update(0)
    }
    this.isPaused = !1, THREE.AnimationHandler.addToUpdate(this)
},THREE.Animation.prototype.pause = function () {
    this.isPaused === !0 ? THREE.AnimationHandler.addToUpdate(this) : THREE.AnimationHandler.removeFromUpdate(this), this.isPaused = !this.isPaused
},THREE.Animation.prototype.stop = function () {
    this.isPlaying = !1, this.isPaused = !1, THREE.AnimationHandler.removeFromUpdate(this)
},THREE.Animation.prototype.update = function (e) {
    if (this.isPlaying === !1)return;
    var t = ["pos", "rot", "scl"], n, r, i, s, o, u, a, f, l, c, h = this.data.JIT.hierarchy, p, d, v, m, g;
    this.currentTime += e * this.timeScale, d = this.currentTime, p = this.currentTime = this.currentTime % this.data.length, c = parseInt(Math.min(p * this.data.fps, this.data.length * this.data.fps), 10);
    for (var y = 0, b = this.hierarchy.length; y < b; y++) {
        f = this.hierarchy[y], l = f.animationCache;
        for (var w = 0; w < 3; w++) {
            n = t[w], u = l.prevKey[n], a = l.nextKey[n];
            if (a.time <= d) {
                if (p < d) {
                    if (!this.loop) {
                        this.stop();
                        return
                    }
                    u = this.data.hierarchy[y].keys[0], a = this.getNextKeyWith(n, y, 1);
                    while (a.time < p)u = a, a = this.getNextKeyWith(n, y, a.index + 1)
                } else do u = a, a = this.getNextKeyWith(n, y, a.index + 1); while (a.time < p);
                l.prevKey[n] = u, l.nextKey[n] = a
            }
            f.matrixAutoUpdate = !0, f.matrixWorldNeedsUpdate = !0, r = (p - u.time) / (a.time - u.time), s = u[n], o = a[n];
            if (r < 0 || r > 1) 0, r = r < 0 ? 0 : 1;
            if (n === "pos") {
                i = f.position;
                if (this.interpolationType === THREE.AnimationHandler.LINEAR) i.x = s[0] + (o[0] - s[0]) * r, i.y = s[1] + (o[1] - s[1]) * r, i.z = s[2] + (o[2] - s[2]) * r; else if (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) this.points[0] = this.getPrevKeyWith("pos", y, u.index - 1).pos, this.points[1] = s, this.points[2] = o, this.points[3] = this.getNextKeyWith("pos", y, a.index + 1).pos, r = r * .33 + .33, v = this.interpolateCatmullRom(this.points, r), i.x = v[0], i.y = v[1], i.z = v[2], this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD && (m = this.interpolateCatmullRom(this.points, r * 1.01), this.target.set(m[0], m[1], m[2]), this.target.sub(i), this.target.y = 0, this.target.normalize(), g = Math.atan2(this.target.x, this.target.z), f.rotation.set(0, g, 0))
            } else n === "rot" ? THREE.Quaternion.slerp(s, o, f.quaternion, r) : n === "scl" && (i = f.scale, i.x = s[0] + (o[0] - s[0]) * r, i.y = s[1] + (o[1] - s[1]) * r, i.z = s[2] + (o[2] - s[2]) * r)
        }
    }
},THREE.Animation.prototype.interpolateCatmullRom = function (e, t) {
    var n = [], r = [], i, s, o, u, a, f, l, c, h;
    return i = (e.length - 1) * t, s = Math.floor(i), o = i - s, n[0] = s === 0 ? s : s - 1, n[1] = s, n[2] = s > e.length - 2 ? s : s + 1, n[3] = s > e.length - 3 ? s : s + 2, f = e[n[0]], l = e[n[1]], c = e[n[2]], h = e[n[3]], u = o * o, a = o * u, r[0] = this.interpolate(f[0], l[0], c[0], h[0], o, u, a), r[1] = this.interpolate(f[1], l[1], c[1], h[1], o, u, a), r[2] = this.interpolate(f[2], l[2], c[2], h[2], o, u, a), r
},THREE.Animation.prototype.interpolate = function (e, t, n, r, i, s, o) {
    var u = (n - e) * .5, a = (r - t) * .5;
    return (2 * (t - n) + u + a) * o + (-3 * (t - n) - 2 * u - a) * s + u * i + t
},THREE.Animation.prototype.getNextKeyWith = function (e, t, n) {
    var r = this.data.hierarchy[t].keys;
    this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? n = n < r.length - 1 ? n : r.length - 1 : n %= r.length;
    for (; n < r.length; n++)if (r[n][e] !== undefined)return r[n];
    return this.data.hierarchy[t].keys[0]
},THREE.Animation.prototype.getPrevKeyWith = function (e, t, n) {
    var r = this.data.hierarchy[t].keys;
    this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? n = n > 0 ? n : 0 : n = n >= 0 ? n : n + r.length;
    for (; n >= 0; n--)if (r[n][e] !== undefined)return r[n];
    return this.data.hierarchy[t].keys[r.length - 1]
},THREE.KeyFrameAnimation = function (e, t, n) {
    this.root = e, this.data = THREE.AnimationHandler.get(t), this.hierarchy = THREE.AnimationHandler.parse(e), this.currentTime = 0, this.timeScale = .001, this.isPlaying = !1, this.isPaused = !0, this.loop = !0, this.JITCompile = n !== undefined ? n : !0;
    for (var r = 0, i = this.hierarchy.length; r < i; r++) {
        var s = this.data.hierarchy[r].keys, o = this.data.hierarchy[r].sids, u = this.hierarchy[r];
        if (s.length && o) {
            for (var a = 0; a < o.length; a++) {
                var f = o[a], l = this.getNextKeyWith(f, r, 0);
                l && l.apply(f)
            }
            u.matrixAutoUpdate = !1, this.data.hierarchy[r].node.updateMatrix(), u.matrixWorldNeedsUpdate = !0
        }
    }
},THREE.KeyFrameAnimation.prototype.play = function (e, t) {
    if (!this.isPlaying) {
        this.isPlaying = !0, this.loop = e !== undefined ? e : !0, this.currentTime = t !== undefined ? t : 0, this.startTimeMs = t, this.startTime = 1e7, this.endTime = -this.startTime;
        var n, r = this.hierarchy.length, i, s;
        for (n = 0; n < r; n++) {
            i = this.hierarchy[n], s = this.data.hierarchy[n], s.animationCache === undefined && (s.animationCache = {}, s.animationCache.prevKey = null, s.animationCache.nextKey = null, s.animationCache.originalMatrix = i instanceof THREE.Bone ? i.skinMatrix : i.matrix);
            var o = this.data.hierarchy[n].keys;
            o.length && (s.animationCache.prevKey = o[0], s.animationCache.nextKey = o[1], this.startTime = Math.min(o[0].time, this.startTime), this.endTime = Math.max(o[o.length - 1].time, this.endTime))
        }
        this.update(0)
    }
    this.isPaused = !1, THREE.AnimationHandler.addToUpdate(this)
},THREE.KeyFrameAnimation.prototype.pause = function () {
    this.isPaused ? THREE.AnimationHandler.addToUpdate(this) : THREE.AnimationHandler.removeFromUpdate(this), this.isPaused = !this.isPaused
},THREE.KeyFrameAnimation.prototype.stop = function () {
    this.isPlaying = !1, this.isPaused = !1, THREE.AnimationHandler.removeFromUpdate(this);
    for (var e = 0; e < this.data.hierarchy.length; e++) {
        var t = this.hierarchy[e], n = this.data.hierarchy[e];
        if (n.animationCache !== undefined) {
            var r = n.animationCache.originalMatrix;
            t instanceof THREE.Bone ? (r.copy(t.skinMatrix), t.skinMatrix = r) : (r.copy(t.matrix), t.matrix = r), delete n.animationCache
        }
    }
},THREE.KeyFrameAnimation.prototype.update = function (e) {
    if (!this.isPlaying)return;
    var t, n, r, i, s, o = this.data.JIT.hierarchy, u, a, f;
    this.currentTime += e * this.timeScale, a = this.currentTime, u = this.currentTime = this.currentTime % this.data.length, u < this.startTimeMs && (u = this.currentTime = this.startTimeMs + u), s = parseInt(Math.min(u * this.data.fps, this.data.length * this.data.fps), 10), f = u < a;
    if (f && !this.loop) {
        for (var l = 0, c = this.hierarchy.length; l < c; l++) {
            var h = this.data.hierarchy[l].keys, p = this.data.hierarchy[l].sids, d = h.length - 1,
                v = this.hierarchy[l];
            if (h.length) {
                for (var m = 0; m < p.length; m++) {
                    var g = p[m], y = this.getPrevKeyWith(g, l, d);
                    y && y.apply(g)
                }
                this.data.hierarchy[l].node.updateMatrix(), v.matrixWorldNeedsUpdate = !0
            }
        }
        this.stop();
        return
    }
    if (u < this.startTime)return;
    for (var l = 0, c = this.hierarchy.length; l < c; l++) {
        r = this.hierarchy[l], i = this.data.hierarchy[l];
        var h = i.keys, b = i.animationCache;
        if (this.JITCompile && o[l][s] !== undefined) r instanceof THREE.Bone ? (r.skinMatrix = o[l][s], r.matrixWorldNeedsUpdate = !1) : (r.matrix = o[l][s], r.matrixWorldNeedsUpdate = !0); else if (h.length) {
            this.JITCompile && b && (r instanceof THREE.Bone ? r.skinMatrix = b.originalMatrix : r.matrix = b.originalMatrix), t = b.prevKey, n = b.nextKey;
            if (t && n) {
                if (n.time <= a) {
                    if (f && this.loop) {
                        t = h[0], n = h[1];
                        while (n.time < u)t = n, n = h[t.index + 1]
                    } else if (!f) {
                        var w = h.length - 1;
                        while (n.time < u && n.index !== w)t = n, n = h[t.index + 1]
                    }
                    b.prevKey = t, b.nextKey = n
                }
                n.time >= u ? t.interpolate(n, u) : t.interpolate(n, n.time)
            }
            this.data.hierarchy[l].node.updateMatrix(), r.matrixWorldNeedsUpdate = !0
        }
    }
    if (this.JITCompile && o[0][s] === undefined) {
        this.hierarchy[0].updateMatrixWorld(!0);
        for (var l = 0; l < this.hierarchy.length; l++)this.hierarchy[l] instanceof THREE.Bone ? o[l][s] = this.hierarchy[l].skinMatrix.clone() : o[l][s] = this.hierarchy[l].matrix.clone()
    }
},THREE.KeyFrameAnimation.prototype.getNextKeyWith = function (e, t, n) {
    var r = this.data.hierarchy[t].keys;
    n %= r.length;
    for (; n < r.length; n++)if (r[n].hasTarget(e))return r[n];
    return r[0]
},THREE.KeyFrameAnimation.prototype.getPrevKeyWith = function (e, t, n) {
    var r = this.data.hierarchy[t].keys;
    n = n >= 0 ? n : n + r.length;
    for (; n >= 0; n--)if (r[n].hasTarget(e))return r[n];
    return r[r.length - 1]
},THREE.CubeCamera = function (e, t, n) {
    THREE.Object3D.call(this);
    var r = 90, i = 1, s = new THREE.PerspectiveCamera(r, i, e, t);
    s.up.set(0, -1, 0), s.lookAt(new THREE.Vector3(1, 0, 0)), this.add(s);
    var o = new THREE.PerspectiveCamera(r, i, e, t);
    o.up.set(0, -1, 0), o.lookAt(new THREE.Vector3(-1, 0, 0)), this.add(o);
    var u = new THREE.PerspectiveCamera(r, i, e, t);
    u.up.set(0, 0, 1), u.lookAt(new THREE.Vector3(0, 1, 0)), this.add(u);
    var a = new THREE.PerspectiveCamera(r, i, e, t);
    a.up.set(0, 0, -1), a.lookAt(new THREE.Vector3(0, -1, 0)), this.add(a);
    var f = new THREE.PerspectiveCamera(r, i, e, t);
    f.up.set(0, -1, 0), f.lookAt(new THREE.Vector3(0, 0, 1)), this.add(f);
    var l = new THREE.PerspectiveCamera(r, i, e, t);
    l.up.set(0, -1, 0), l.lookAt(new THREE.Vector3(0, 0, -1)), this.add(l), this.renderTarget = new THREE.WebGLRenderTargetCube(n, n, {
        format: THREE.RGBFormat,
        magFilter: THREE.LinearFilter,
        minFilter: THREE.LinearFilter
    }), this.updateCubeMap = function (e, t) {
        var n = this.renderTarget, r = n.generateMipmaps;
        n.generateMipmaps = !1, n.activeCubeFace = 0, e.render(t, s, n), n.activeCubeFace = 1, e.render(t, o, n), n.activeCubeFace = 2, e.render(t, u, n), n.activeCubeFace = 3, e.render(t, a, n), n.activeCubeFace = 4, e.render(t, f, n), n.generateMipmaps = r, n.activeCubeFace = 5, e.render(t, l, n)
    }
},THREE.CubeCamera.prototype = Object.create(THREE.Object3D.prototype),THREE.CombinedCamera = function (e, t, n, r, i, s, o) {
    THREE.Camera.call(this), this.fov = n, this.left = -e / 2, this.right = e / 2, this.top = t / 2, this.bottom = -t / 2, this.cameraO = new THREE.OrthographicCamera(e / -2, e / 2, t / 2, t / -2, s, o), this.cameraP = new THREE.PerspectiveCamera(n, e / t, r, i), this.zoom = 1, this.toPerspective();
    var u = e / t
},THREE.CombinedCamera.prototype = Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.toPerspective = function () {
    this.near = this.cameraP.near, this.far = this.cameraP.far, this.cameraP.fov = this.fov / this.zoom, this.cameraP.updateProjectionMatrix(), this.projectionMatrix = this.cameraP.projectionMatrix, this.inPerspectiveMode = !0, this.inOrthographicMode = !1
},THREE.CombinedCamera.prototype.toOrthographic = function () {
    var e = this.fov, t = this.cameraP.aspect, n = this.cameraP.near, r = this.cameraP.far, i = (n + r) / 2,
        s = Math.tan(e / 2) * i, o = 2 * s, u = o * t, a = u / 2;
    s /= this.zoom, a /= this.zoom, this.cameraO.left = -a, this.cameraO.right = a, this.cameraO.top = s, this.cameraO.bottom = -s, this.cameraO.updateProjectionMatrix(), this.near = this.cameraO.near, this.far = this.cameraO.far, this.projectionMatrix = this.cameraO.projectionMatrix, this.inPerspectiveMode = !1, this.inOrthographicMode = !0
},THREE.CombinedCamera.prototype.setSize = function (e, t) {
    this.cameraP.aspect = e / t, this.left = -e / 2, this.right = e / 2, this.top = t / 2, this.bottom = -t / 2
},THREE.CombinedCamera.prototype.setFov = function (e) {
    this.fov = e, this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic()
},THREE.CombinedCamera.prototype.updateProjectionMatrix = function () {
    this.inPerspectiveMode ? this.toPerspective() : (this.toPerspective(), this.toOrthographic())
},THREE.CombinedCamera.prototype.setLens = function (e, t) {
    t === undefined && (t = 24);
    var n = 2 * THREE.Math.radToDeg(Math.atan(t / (e * 2)));
    return this.setFov(n), n
},THREE.CombinedCamera.prototype.setZoom = function (e) {
    this.zoom = e, this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic()
},THREE.CombinedCamera.prototype.toFrontView = function () {
    this.rotation.x = 0, this.rotation.y = 0, this.rotation.z = 0, this.rotationAutoUpdate = !1
},THREE.CombinedCamera.prototype.toBackView = function () {
    this.rotation.x = 0, this.rotation.y = Math.PI, this.rotation.z = 0, this.rotationAutoUpdate = !1
},THREE.CombinedCamera.prototype.toLeftView = function () {
    this.rotation.x = 0, this.rotation.y = -Math.PI / 2, this.rotation.z = 0, this.rotationAutoUpdate = !1
},THREE.CombinedCamera.prototype.toRightView = function () {
    this.rotation.x = 0, this.rotation.y = Math.PI / 2, this.rotation.z = 0, this.rotationAutoUpdate = !1
},THREE.CombinedCamera.prototype.toTopView = function () {
    this.rotation.x = -Math.PI / 2, this.rotation.y = 0, this.rotation.z = 0, this.rotationAutoUpdate = !1
},THREE.CombinedCamera.prototype.toBottomView = function () {
    this.rotation.x = Math.PI / 2, this.rotation.y = 0, this.rotation.z = 0, this.rotationAutoUpdate = !1
},THREE.CircleGeometry = function (e, t, n, r) {
    THREE.Geometry.call(this), e = e || 50, n = n !== undefined ? n : 0, r = r !== undefined ? r : Math.PI * 2, t = t !== undefined ? Math.max(3, t) : 8;
    var i, s = [], o = new THREE.Vector3, u = new THREE.Vector2(.5, .5);
    this.vertices.push(o), s.push(u);
    for (i = 0; i <= t; i++) {
        var a = new THREE.Vector3, f = n + i / t * r;
        a.x = e * Math.cos(f), a.y = e * Math.sin(f), this.vertices.push(a), s.push(new THREE.Vector2((a.x / e + 1) / 2, (a.y / e + 1) / 2))
    }
    var l = new THREE.Vector3(0, 0, 1);
    for (i = 1; i <= t; i++) {
        var c = i, h = i + 1, p = 0;
        this.faces.push(new THREE.Face3(c, h, p, [l, l, l])), this.faceVertexUvs[0].push([s[i], s[i + 1], u])
    }
    this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, e)
},THREE.CircleGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.CubeGeometry = function (e, t, n, r, i, s) {
    function l(e, t, n, r, i, s, u, a) {
        var f, l, c, h = o.widthSegments, p = o.heightSegments, d = i / 2, v = s / 2, m = o.vertices.length;
        if (e === "x" && t === "y" || e === "y" && t === "x") f = "z"; else if (e === "x" && t === "z" || e === "z" && t === "x") f = "y", p = o.depthSegments; else if (e === "z" && t === "y" || e === "y" && t === "z") f = "x", h = o.depthSegments;
        var g = h + 1, y = p + 1, b = i / h, w = s / p, E = new THREE.Vector3;
        E[f] = u > 0 ? 1 : -1;
        for (c = 0; c < y; c++)for (l = 0; l < g; l++) {
            var S = new THREE.Vector3;
            S[e] = (l * b - d) * n, S[t] = (c * w - v) * r, S[f] = u, o.vertices.push(S)
        }
        for (c = 0; c < p; c++)for (l = 0; l < h; l++) {
            var x = l + g * c, T = l + g * (c + 1), N = l + 1 + g * (c + 1), C = l + 1 + g * c,
                k = new THREE.Vector2(l / h, 1 - c / p), L = new THREE.Vector2(l / h, 1 - (c + 1) / p),
                A = new THREE.Vector2((l + 1) / h, 1 - (c + 1) / p), O = new THREE.Vector2((l + 1) / h, 1 - c / p),
                M = new THREE.Face3(x + m, T + m, C + m);
            M.normal.copy(E), M.vertexNormals.push(E.clone(), E.clone(), E.clone()), M.materialIndex = a, o.faces.push(M), o.faceVertexUvs[0].push([k, L, O]), M = new THREE.Face3(T + m, N + m, C + m), M.normal.copy(E), M.vertexNormals.push(E.clone(), E.clone(), E.clone()), M.materialIndex = a, o.faces.push(M), o.faceVertexUvs[0].push([L.clone(), A, O.clone()])
        }
    }

    THREE.Geometry.call(this);
    var o = this;
    this.width = e, this.height = t, this.depth = n, this.widthSegments = r || 1, this.heightSegments = i || 1, this.depthSegments = s || 1;
    var u = this.width / 2, a = this.height / 2, f = this.depth / 2;
    l("z", "y", -1, -1, this.depth, this.height, u, 0), l("z", "y", 1, -1, this.depth, this.height, -u, 1), l("x", "z", 1, 1, this.width, this.depth, a, 2), l("x", "z", 1, -1, this.width, this.depth, -a, 3), l("x", "y", 1, -1, this.width, this.height, f, 4), l("x", "y", -1, -1, this.width, this.height, -f, 5), this.computeCentroids(), this.mergeVertices()
},THREE.CubeGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry = function (e, t, n, r, i, s) {
    THREE.Geometry.call(this), this.radiusTop = e = e !== undefined ? e : 20, this.radiusBottom = t = t !== undefined ? t : 20, this.height = n = n !== undefined ? n : 100, this.radialSegments = r = r || 8, this.heightSegments = i = i || 1, this.openEnded = s = s !== undefined ? s : !1;
    var o = n / 2, u, a, f = [], l = [];
    for (a = 0; a <= i; a++) {
        var c = [], h = [], p = a / i, d = p * (t - e) + e;
        for (u = 0; u <= r; u++) {
            var v = u / r, m = new THREE.Vector3;
            m.x = d * Math.sin(v * Math.PI * 2), m.y = -p * n + o, m.z = d * Math.cos(v * Math.PI * 2), this.vertices.push(m), c.push(this.vertices.length - 1), h.push(new THREE.Vector2(v, 1 - p))
        }
        f.push(c), l.push(h)
    }
    var g = (t - e) / n, y, b;
    for (u = 0; u < r; u++) {
        e !== 0 ? (y = this.vertices[f[0][u]].clone(), b = this.vertices[f[0][u + 1]].clone()) : (y = this.vertices[f[1][u]].clone(), b = this.vertices[f[1][u + 1]].clone()), y.setY(Math.sqrt(y.x * y.x + y.z * y.z) * g).normalize(), b.setY(Math.sqrt(b.x * b.x + b.z * b.z) * g).normalize();
        for (a = 0; a < i; a++) {
            var w = f[a][u], E = f[a + 1][u], S = f[a + 1][u + 1], x = f[a][u + 1], T = y.clone(), N = y.clone(),
                C = b.clone(), k = b.clone(), L = l[a][u].clone(), A = l[a + 1][u].clone(), O = l[a + 1][u + 1].clone(),
                M = l[a][u + 1].clone();
            this.faces.push(new THREE.Face3(w, E, x, [T, N, k])), this.faceVertexUvs[0].push([L, A, M]), this.faces.push(new THREE.Face3(E, S, x, [N, C, k])), this.faceVertexUvs[0].push([A, O, M])
        }
    }
    if (s === !1 && e > 0) {
        this.vertices.push(new THREE.Vector3(0, o, 0));
        for (u = 0; u < r; u++) {
            var w = f[0][u], E = f[0][u + 1], S = this.vertices.length - 1, T = new THREE.Vector3(0, 1, 0),
                N = new THREE.Vector3(0, 1, 0), C = new THREE.Vector3(0, 1, 0), L = l[0][u].clone(),
                A = l[0][u + 1].clone(), O = new THREE.Vector2(A.u, 0);
            this.faces.push(new THREE.Face3(w, E, S, [T, N, C])), this.faceVertexUvs[0].push([L, A, O])
        }
    }
    if (s === !1 && t > 0) {
        this.vertices.push(new THREE.Vector3(0, -o, 0));
        for (u = 0; u < r; u++) {
            var w = f[a][u + 1], E = f[a][u], S = this.vertices.length - 1, T = new THREE.Vector3(0, -1, 0),
                N = new THREE.Vector3(0, -1, 0), C = new THREE.Vector3(0, -1, 0), L = l[a][u + 1].clone(),
                A = l[a][u].clone(), O = new THREE.Vector2(A.u, 1);
            this.faces.push(new THREE.Face3(w, E, S, [T, N, C])), this.faceVertexUvs[0].push([L, A, O])
        }
    }
    this.computeCentroids(), this.computeFaceNormals()
},THREE.CylinderGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry = function (e, t) {
    if (typeof e == "undefined") {
        e = [];
        return
    }
    THREE.Geometry.call(this), e = e instanceof Array ? e : [e], this.shapebb = e[e.length - 1].getBoundingBox(), this.addShapeList(e, t), this.computeCentroids(), this.computeFaceNormals()
},THREE.ExtrudeGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList = function (e, t) {
    var n = e.length;
    for (var r = 0; r < n; r++) {
        var i = e[r];
        this.addShape(i, t)
    }
},THREE.ExtrudeGeometry.prototype.addShape = function (e, t) {
    function _(e, t, n) {
        return t || 0, t.clone().multiplyScalar(n).add(e)
    }

    function W(e, t, n) {
        return V(e, t, n)
    }

    function X(e, t, n) {
        var r = Math.atan2(t.y - e.y, t.x - e.x), i = Math.atan2(n.y - e.y, n.x - e.x);
        r > i && (i += Math.PI * 2);
        var s = (r + i) / 2, o = -Math.cos(s), u = -Math.sin(s), a = new THREE.Vector2(o, u);
        return a
    }

    function V(e, t, n) {
        var r = THREE.ExtrudeGeometry.__v1, i = THREE.ExtrudeGeometry.__v2, s = THREE.ExtrudeGeometry.__v3,
            o = THREE.ExtrudeGeometry.__v4, u = THREE.ExtrudeGeometry.__v5, a = THREE.ExtrudeGeometry.__v6, f, l, c, h,
            p, d;
        return r.set(e.x - t.x, e.y - t.y), i.set(e.x - n.x, e.y - n.y), f = r.normalize(), l = i.normalize(), s.set(-f.y, f.x), o.set(l.y, -l.x), u.copy(e).add(s), a.copy(e).add(o), u.equals(a) ? o.clone() : (u.copy(t).add(s), a.copy(n).add(o), c = f.dot(o), h = a.sub(u).dot(o), c === 0 && (0, h === 0 ? 0 : 0), p = h / c, p < 0 ? X(e, t, n) : (d = f.multiplyScalar(p).add(u), d.sub(e).clone()))
    }

    function st() {
        if (o) {
            var e = 0, t = F * e;
            for (J = 0; J < q; J++)I = O[J], ft(I[2] + t, I[1] + t, I[0] + t, !0);
            e = a + s * 2, t = F * e;
            for (J = 0; J < q; J++)I = O[J], ft(I[0] + t, I[1] + t, I[2] + t, !1)
        } else {
            for (J = 0; J < q; J++)I = O[J], ft(I[2], I[1], I[0], !0);
            for (J = 0; J < q; J++)I = O[J], ft(I[0] + F * a, I[1] + F * a, I[2] + F * a, !1)
        }
    }

    function ot() {
        var e = 0;
        ut(M, e), e += M.length;
        for (E = 0, S = L.length; E < S; E++)w = L[E], ut(w, e), e += w.length
    }

    function ut(e, t) {
        var n, r;
        J = e.length;
        while (--J >= 0) {
            n = J, r = J - 1, r < 0 && (r = e.length - 1);
            var i = 0, o = a + s * 2;
            for (i = 0; i < o; i++) {
                var u = F * i, f = F * (i + 1), l = t + n + u, c = t + r + u, h = t + r + f, p = t + n + f;
                lt(l, c, h, p, e, i, o, n, r)
            }
        }
    }

    function at(e, t, n) {
        x.vertices.push(new THREE.Vector3(e, t, n))
    }

    function ft(n, r, i, s) {
        n += N, r += N, i += N, x.faces.push(new THREE.Face3(n, r, i, null, null, h));
        var o = s ? d.generateBottomUV(x, e, t, n, r, i) : d.generateTopUV(x, e, t, n, r, i);
        x.faceVertexUvs[0].push(o)
    }

    function lt(n, r, i, s, o, u, a, f, l) {
        n += N, r += N, i += N, s += N, x.faces.push(new THREE.Face3(n, r, s, null, null, p)), x.faces.push(new THREE.Face3(r, i, s, null, null, p));
        var c = d.generateSideWallUV(x, e, o, t, n, r, i, s, u, a, f, l);
        x.faceVertexUvs[0].push([c[0], c[1], c[3]]), x.faceVertexUvs[0].push([c[1], c[2], c[3]])
    }

    var n = t.amount !== undefined ? t.amount : 100, r = t.bevelThickness !== undefined ? t.bevelThickness : 6,
        i = t.bevelSize !== undefined ? t.bevelSize : r - 2, s = t.bevelSegments !== undefined ? t.bevelSegments : 3,
        o = t.bevelEnabled !== undefined ? t.bevelEnabled : !0,
        u = t.curveSegments !== undefined ? t.curveSegments : 12, a = t.steps !== undefined ? t.steps : 1,
        f = t.extrudePath, l, c = !1, h = t.material, p = t.extrudeMaterial,
        d = t.UVGenerator !== undefined ? t.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator, v = this.shapebb, m,
        g, y, b;
    f && (l = f.getSpacedPoints(a), c = !0, o = !1, m = t.frames !== undefined ? t.frames : new THREE.TubeGeometry.FrenetFrames(f, a, !1), g = new THREE.Vector3, y = new THREE.Vector3, b = new THREE.Vector3), o || (s = 0, r = 0, i = 0);
    var w, E, S, x = this, T = [], N = this.vertices.length, C = e.extractPoints(u), k = C.shape, L = C.holes,
        A = !THREE.Shape.Utils.isClockWise(k);
    if (A) {
        k = k.reverse();
        for (E = 0, S = L.length; E < S; E++)w = L[E], THREE.Shape.Utils.isClockWise(w) && (L[E] = w.reverse());
        A = !1
    }
    var O = THREE.Shape.Utils.triangulateShape(k, L), M = k;
    for (E = 0, S = L.length; E < S; E++)w = L[E], k = k.concat(w);
    var D, P, H, B, j, F = k.length, I, q = O.length, R, U = M.length, z = 180 / Math.PI, $ = [];
    for (var J = 0, K = M.length, Q = K - 1, G = J + 1; J < K; J++, Q++, G++) {
        Q === K && (Q = 0), G === K && (G = 0);
        var Y = M[J], Z = M[Q], et = M[G];
        $[J] = W(M[J], M[Q], M[G])
    }
    var tt = [], nt, rt = $.concat();
    for (E = 0, S = L.length; E < S; E++) {
        w = L[E], nt = [];
        for (J = 0, K = w.length, Q = K - 1, G = J + 1; J < K; J++, Q++, G++)Q === K && (Q = 0), G === K && (G = 0), nt[J] = W(w[J], w[Q], w[G]);
        tt.push(nt), rt = rt.concat(nt)
    }
    for (D = 0; D < s; D++) {
        H = D / s, B = r * (1 - H), P = i * Math.sin(H * Math.PI / 2);
        for (J = 0, K = M.length; J < K; J++)j = _(M[J], $[J], P), at(j.x, j.y, -B);
        for (E = 0, S = L.length; E < S; E++) {
            w = L[E], nt = tt[E];
            for (J = 0, K = w.length; J < K; J++)j = _(w[J], nt[J], P), at(j.x, j.y, -B)
        }
    }
    P = i;
    for (J = 0; J < F; J++)j = o ? _(k[J], rt[J], P) : k[J], c ? (y.copy(m.normals[0]).multiplyScalar(j.x), g.copy(m.binormals[0]).multiplyScalar(j.y), b.copy(l[0]).add(y).add(g), at(b.x, b.y, b.z)) : at(j.x, j.y, 0);
    var it;
    for (it = 1; it <= a; it++)for (J = 0; J < F; J++)j = o ? _(k[J], rt[J], P) : k[J], c ? (y.copy(m.normals[it]).multiplyScalar(j.x), g.copy(m.binormals[it]).multiplyScalar(j.y), b.copy(l[it]).add(y).add(g), at(b.x, b.y, b.z)) : at(j.x, j.y, n / a * it);
    for (D = s - 1; D >= 0; D--) {
        H = D / s, B = r * (1 - H), P = i * Math.sin(H * Math.PI / 2);
        for (J = 0, K = M.length; J < K; J++)j = _(M[J], $[J], P), at(j.x, j.y, n + B);
        for (E = 0, S = L.length; E < S; E++) {
            w = L[E], nt = tt[E];
            for (J = 0, K = w.length; J < K; J++)j = _(w[J], nt[J], P), c ? at(j.x, j.y + l[a - 1].y, l[a - 1].x + B) : at(j.x, j.y, n + B)
        }
    }
    st(), ot()
},THREE.ExtrudeGeometry.WorldUVGenerator = {
    generateTopUV: function (e, t, n, r, i, s) {
        var o = e.vertices[r].x, u = e.vertices[r].y, a = e.vertices[i].x, f = e.vertices[i].y, l = e.vertices[s].x,
            c = e.vertices[s].y;
        return [new THREE.Vector2(o, u), new THREE.Vector2(a, f), new THREE.Vector2(l, c)]
    }, generateBottomUV: function (e, t, n, r, i, s) {
        return this.generateTopUV(e, t, n, r, i, s)
    }, generateSideWallUV: function (e, t, n, r, i, s, o, u, a, f, l, c) {
        var h = e.vertices[i].x, p = e.vertices[i].y, d = e.vertices[i].z, v = e.vertices[s].x, m = e.vertices[s].y,
            g = e.vertices[s].z, y = e.vertices[o].x, b = e.vertices[o].y, w = e.vertices[o].z, E = e.vertices[u].x,
            S = e.vertices[u].y, x = e.vertices[u].z;
        return Math.abs(p - m) < .01 ? [new THREE.Vector2(h, 1 - d), new THREE.Vector2(v, 1 - g), new THREE.Vector2(y, 1 - w), new THREE.Vector2(E, 1 - x)] : [new THREE.Vector2(p, 1 - d), new THREE.Vector2(m, 1 - g), new THREE.Vector2(b, 1 - w), new THREE.Vector2(S, 1 - x)]
    }
},THREE.ExtrudeGeometry.__v1 = new THREE.Vector2,THREE.ExtrudeGeometry.__v2 = new THREE.Vector2,THREE.ExtrudeGeometry.__v3 = new THREE.Vector2,THREE.ExtrudeGeometry.__v4 = new THREE.Vector2,THREE.ExtrudeGeometry.__v5 = new THREE.Vector2,THREE.ExtrudeGeometry.__v6 = new THREE.Vector2,THREE.ShapeGeometry = function (e, t) {
    THREE.Geometry.call(this), e instanceof Array == 0 && (e = [e]), this.shapebb = e[e.length - 1].getBoundingBox(), this.addShapeList(e, t), this.computeCentroids(), this.computeFaceNormals()
},THREE.ShapeGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList = function (e, t) {
    for (var n = 0, r = e.length; n < r; n++)this.addShape(e[n], t);
    return this
},THREE.ShapeGeometry.prototype.addShape = function (e, t) {
    t === undefined && (t = {});
    var n = t.curveSegments !== undefined ? t.curveSegments : 12, r = t.material,
        i = t.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : t.UVGenerator, s = this.shapebb, o,
        u, a, f, l = this.vertices.length, c = e.extractPoints(n), h = c.shape, p = c.holes,
        d = !THREE.Shape.Utils.isClockWise(h);
    if (d) {
        h = h.reverse();
        for (o = 0, u = p.length; o < u; o++)a = p[o], THREE.Shape.Utils.isClockWise(a) && (p[o] = a.reverse());
        d = !1
    }
    var v = THREE.Shape.Utils.triangulateShape(h, p), m = h;
    for (o = 0, u = p.length; o < u; o++)a = p[o], h = h.concat(a);
    var g, y = h.length, b, w = v.length, E, S = m.length;
    for (o = 0; o < y; o++)g = h[o], this.vertices.push(new THREE.Vector3(g.x, g.y, 0));
    for (o = 0; o < w; o++) {
        b = v[o];
        var x = b[0] + l, T = b[1] + l, N = b[2] + l;
        this.faces.push(new THREE.Face3(x, T, N, null, null, r)), this.faceVertexUvs[0].push(i.generateBottomUV(this, e, t, x, T, N))
    }
},THREE.LatheGeometry = function (e, t, n, r) {
    THREE.Geometry.call(this), t = t || 12, n = n || 0, r = r || 2 * Math.PI;
    var i = 1 / (e.length - 1), s = 1 / t;
    for (var o = 0, u = t; o <= u; o++) {
        var a = n + o * s * r, f = Math.cos(a), l = Math.sin(a);
        for (var c = 0, h = e.length; c < h; c++) {
            var p = e[c], d = new THREE.Vector3;
            d.x = f * p.x - l * p.y, d.y = l * p.x + f * p.y, d.z = p.z, this.vertices.push(d)
        }
    }
    var v = e.length;
    for (var o = 0, u = t; o < u; o++)for (var c = 0, h = e.length - 1; c < h; c++) {
        var m = c + v * o, g = m, y = m + v, f = m + 1 + v, b = m + 1, w = o * s, E = c * i, S = w + s, x = E + i;
        this.faces.push(new THREE.Face3(g, y, b)), this.faceVertexUvs[0].push([new THREE.Vector2(w, E), new THREE.Vector2(S, E), new THREE.Vector2(w, x)]), this.faces.push(new THREE.Face3(y, f, b)), this.faceVertexUvs[0].push([new THREE.Vector2(S, E), new THREE.Vector2(S, x), new THREE.Vector2(w, x)])
    }
    this.mergeVertices(), this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals()
},THREE.LatheGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry = function (e, t, n, r) {
    THREE.Geometry.call(this), this.width = e, this.height = t, this.widthSegments = n || 1, this.heightSegments = r || 1;
    var i, s, o = e / 2, u = t / 2, a = this.widthSegments, f = this.heightSegments, l = a + 1, c = f + 1,
        h = this.width / a, p = this.height / f, d = new THREE.Vector3(0, 0, 1);
    for (s = 0; s < c; s++)for (i = 0; i < l; i++) {
        var v = i * h - o, m = s * p - u;
        this.vertices.push(new THREE.Vector3(v, -m, 0))
    }
    for (s = 0; s < f; s++)for (i = 0; i < a; i++) {
        var g = i + l * s, y = i + l * (s + 1), b = i + 1 + l * (s + 1), w = i + 1 + l * s,
            E = new THREE.Vector2(i / a, 1 - s / f), S = new THREE.Vector2(i / a, 1 - (s + 1) / f),
            x = new THREE.Vector2((i + 1) / a, 1 - (s + 1) / f), T = new THREE.Vector2((i + 1) / a, 1 - s / f),
            N = new THREE.Face3(g, y, w);
        N.normal.copy(d), N.vertexNormals.push(d.clone(), d.clone(), d.clone()), this.faces.push(N), this.faceVertexUvs[0].push([E, S, T]), N = new THREE.Face3(y, b, w), N.normal.copy(d), N.vertexNormals.push(d.clone(), d.clone(), d.clone()), this.faces.push(N), this.faceVertexUvs[0].push([S.clone(), x, T.clone()])
    }
    this.computeCentroids()
},THREE.PlaneGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.RingGeometry = function (e, t, n, r, i, s) {
    THREE.Geometry.call(this), e = e || 0, t = t || 50, i = i !== undefined ? i : 0, s = s !== undefined ? s : Math.PI * 2, n = n !== undefined ? Math.max(3, n) : 8, r = r !== undefined ? Math.max(3, r) : 8;
    var o, u, a = [], f = e, l = (t - e) / r;
    for (o = 0; o <= r; o++) {
        for (u = 0; u <= n; u++) {
            var c = new THREE.Vector3, h = i + u / n * s;
            c.x = f * Math.cos(h), c.y = f * Math.sin(h), this.vertices.push(c), a.push(new THREE.Vector2((c.x / f + 1) / 2, -(c.y / f + 1) / 2 + 1))
        }
        f += l
    }
    var p = new THREE.Vector3(0, 0, 1);
    for (o = 0; o < r; o++) {
        var d = o * n;
        for (u = 0; u <= n; u++) {
            var h = u + d, v = h + o, m = h + n + o, g = h + n + 1 + o;
            this.faces.push(new THREE.Face3(v, m, g, [p, p, p])), this.faceVertexUvs[0].push([a[v], a[m], a[g]]), v = h + o, m = h + n + 1 + o, g = h + 1 + o, this.faces.push(new THREE.Face3(v, m, g, [p, p, p])), this.faceVertexUvs[0].push([a[v], a[m], a[g]])
        }
    }
    this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, f)
},THREE.RingGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.SphereGeometry = function (e, t, n, r, i, s, o) {
    THREE.Geometry.call(this), this.radius = e = e || 50, this.widthSegments = t = Math.max(3, Math.floor(t) || 8), this.heightSegments = n = Math.max(2, Math.floor(n) || 6), this.phiStart = r = r !== undefined ? r : 0, this.phiLength = i = i !== undefined ? i : Math.PI * 2, this.thetaStart = s = s !== undefined ? s : 0, this.thetaLength = o = o !== undefined ? o : Math.PI;
    var u, a, f = [], l = [];
    for (a = 0; a <= n; a++) {
        var c = [], h = [];
        for (u = 0; u <= t; u++) {
            var p = u / t, d = a / n, v = new THREE.Vector3;
            v.x = -e * Math.cos(r + p * i) * Math.sin(s + d * o), v.y = e * Math.cos(s + d * o), v.z = e * Math.sin(r + p * i) * Math.sin(s + d * o), this.vertices.push(v), c.push(this.vertices.length - 1), h.push(new THREE.Vector2(p, 1 - d))
        }
        f.push(c), l.push(h)
    }
    for (a = 0; a < this.heightSegments; a++)for (u = 0; u < this.widthSegments; u++) {
        var m = f[a][u + 1], g = f[a][u], y = f[a + 1][u], b = f[a + 1][u + 1],
            w = this.vertices[m].clone().normalize(), E = this.vertices[g].clone().normalize(),
            S = this.vertices[y].clone().normalize(), x = this.vertices[b].clone().normalize(), T = l[a][u + 1].clone(),
            N = l[a][u].clone(), C = l[a + 1][u].clone(), k = l[a + 1][u + 1].clone();
        Math.abs(this.vertices[m].y) === this.radius ? (this.faces.push(new THREE.Face3(m, y, b, [w, S, x])), this.faceVertexUvs[0].push([T, C, k])) : Math.abs(this.vertices[y].y) === this.radius ? (this.faces.push(new THREE.Face3(m, g, y, [w, E, S])), this.faceVertexUvs[0].push([T, N, C])) : (this.faces.push(new THREE.Face3(m, g, b, [w, E, x])), this.faceVertexUvs[0].push([T, N, k]), this.faces.push(new THREE.Face3(g, y, b, [E, S, x])), this.faceVertexUvs[0].push([N.clone(), C, k.clone()]))
    }
    this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, e)
},THREE.SphereGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.TextGeometry = function (e, t) {
    t = t || {};
    var n = THREE.FontUtils.generateShapes(e, t);
    t.amount = t.height !== undefined ? t.height : 50, t.bevelThickness === undefined && (t.bevelThickness = 10), t.bevelSize === undefined && (t.bevelSize = 8), t.bevelEnabled === undefined && (t.bevelEnabled = !1), THREE.ExtrudeGeometry.call(this, n, t)
},THREE.TextGeometry.prototype = Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry = function (e, t, n, r, i) {
    THREE.Geometry.call(this);
    var s = this;
    this.radius = e || 100, this.tube = t || 40, this.radialSegments = n || 8, this.tubularSegments = r || 6, this.arc = i || Math.PI * 2;
    var o = new THREE.Vector3, u = [], a = [];
    for (var f = 0; f <= this.radialSegments; f++)for (var l = 0; l <= this.tubularSegments; l++) {
        var c = l / this.tubularSegments * this.arc, h = f / this.radialSegments * Math.PI * 2;
        o.x = this.radius * Math.cos(c), o.y = this.radius * Math.sin(c);
        var p = new THREE.Vector3;
        p.x = (this.radius + this.tube * Math.cos(h)) * Math.cos(c), p.y = (this.radius + this.tube * Math.cos(h)) * Math.sin(c), p.z = this.tube * Math.sin(h), this.vertices.push(p), u.push(new THREE.Vector2(l / this.tubularSegments, f / this.radialSegments)), a.push(p.clone().sub(o).normalize())
    }
    for (var f = 1; f <= this.radialSegments; f++)for (var l = 1; l <= this.tubularSegments; l++) {
        var d = (this.tubularSegments + 1) * f + l - 1, v = (this.tubularSegments + 1) * (f - 1) + l - 1,
            m = (this.tubularSegments + 1) * (f - 1) + l, g = (this.tubularSegments + 1) * f + l,
            y = new THREE.Face3(d, v, g, [a[d], a[v], a[g]]);
        y.normal.add(a[d]), y.normal.add(a[v]), y.normal.add(a[g]), y.normal.normalize(), this.faces.push(y), this.faceVertexUvs[0].push([u[d].clone(), u[v].clone(), u[g].clone()]), y = new THREE.Face3(v, m, g, [a[v], a[m], a[g]]), y.normal.add(a[v]), y.normal.add(a[m]), y.normal.add(a[g]), y.normal.normalize(), this.faces.push(y), this.faceVertexUvs[0].push([u[v].clone(), u[m].clone(), u[g].clone()])
    }
    this.computeCentroids()
},THREE.TorusGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry = function (e, t, n, r, i, s, o) {
    function O(e, t, n, r, i) {
        var s = Math.cos(e), o = Math.sin(e), u = t / n * e, a = Math.cos(u), f = r * (2 + a) * .5 * s,
            l = r * (2 + a) * o * .5, c = i * r * Math.sin(u) * .5;
        return new THREE.Vector3(f, l, c)
    }

    THREE.Geometry.call(this);
    var u = this;
    this.radius = e || 100, this.tube = t || 40, this.radialSegments = n || 64, this.tubularSegments = r || 8, this.p = i || 2, this.q = s || 3, this.heightScale = o || 1, this.grid = new Array(this.radialSegments);
    var a = new THREE.Vector3, f = new THREE.Vector3, l = new THREE.Vector3;
    for (var c = 0; c < this.radialSegments; ++c) {
        this.grid[c] = new Array(this.tubularSegments);
        var h = c / this.radialSegments * 2 * this.p * Math.PI, p = O(h, this.q, this.p, this.radius, this.heightScale),
            d = O(h + .01, this.q, this.p, this.radius, this.heightScale);
        a.subVectors(d, p), f.addVectors(d, p), l.crossVectors(a, f), f.crossVectors(l, a), l.normalize(), f.normalize();
        for (var v = 0; v < this.tubularSegments; ++v) {
            var m = v / this.tubularSegments * 2 * Math.PI, g = -this.tube * Math.cos(m), y = this.tube * Math.sin(m),
                b = new THREE.Vector3;
            b.x = p.x + g * f.x + y * l.x, b.y = p.y + g * f.y + y * l.y, b.z = p.z + g * f.z + y * l.z, this.grid[c][v] = u.vertices.push(b) - 1
        }
    }
    for (var c = 0; c < this.radialSegments; ++c)for (var v = 0; v < this.tubularSegments; ++v) {
        var w = (c + 1) % this.radialSegments, E = (v + 1) % this.tubularSegments, S = this.grid[c][v],
            x = this.grid[w][v], T = this.grid[w][E], N = this.grid[c][E],
            C = new THREE.Vector2(c / this.radialSegments, v / this.tubularSegments),
            k = new THREE.Vector2((c + 1) / this.radialSegments, v / this.tubularSegments),
            L = new THREE.Vector2((c + 1) / this.radialSegments, (v + 1) / this.tubularSegments),
            A = new THREE.Vector2(c / this.radialSegments, (v + 1) / this.tubularSegments);
        this.faces.push(new THREE.Face3(S, x, N)), this.faceVertexUvs[0].push([C, k, A]), this.faces.push(new THREE.Face3(x, T, N)), this.faceVertexUvs[0].push([k.clone(), L, A.clone()])
    }
    this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals()
},THREE.TorusKnotGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.TubeGeometry = function (e, t, n, r, i) {
    function F(e, t, n) {
        return s.vertices.push(new THREE.Vector3(e, t, n)) - 1
    }

    THREE.Geometry.call(this), this.path = e, this.segments = t || 64, this.radius = n || 1, this.radialSegments = r || 8, this.closed = i || !1, this.grid = [];
    var s = this, o, u, a, f = this.segments + 1, l, c, h, p, d, v, m, g, y, b, w, E = new THREE.Vector3, S, x, T, N, C,
        k, L, A, O, M, _, D, P = new THREE.TubeGeometry.FrenetFrames(this.path, this.segments, this.closed),
        H = P.tangents, B = P.normals, j = P.binormals;
    this.tangents = H, this.normals = B, this.binormals = j;
    for (S = 0; S < f; S++) {
        this.grid[S] = [], m = S / (f - 1), w = e.getPointAt(m), o = H[S], u = B[S], a = j[S];
        for (x = 0; x < this.radialSegments; x++)g = x / this.radialSegments * 2 * Math.PI, y = -this.radius * Math.cos(g), b = this.radius * Math.sin(g), E.copy(w), E.x += y * u.x + b * a.x, E.y += y * u.y + b * a.y, E.z += y * u.z + b * a.z, this.grid[S][x] = F(E.x, E.y, E.z)
    }
    for (S = 0; S < this.segments; S++)for (x = 0; x < this.radialSegments; x++)T = this.closed ? (S + 1) % this.segments : S + 1, N = (x + 1) % this.radialSegments, C = this.grid[S][x], k = this.grid[T][x], L = this.grid[T][N], A = this.grid[S][N], O = new THREE.Vector2(S / this.segments, x / this.radialSegments), M = new THREE.Vector2((S + 1) / this.segments, x / this.radialSegments), _ = new THREE.Vector2((S + 1) / this.segments, (x + 1) / this.radialSegments), D = new THREE.Vector2(S / this.segments, (x + 1) / this.radialSegments), this.faces.push(new THREE.Face3(C, k, A)), this.faceVertexUvs[0].push([O, M, D]), this.faces.push(new THREE.Face3(k, L, A)), this.faceVertexUvs[0].push([M.clone(), _, D.clone()]);
    this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals()
},THREE.TubeGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames = function (e, t, n) {
    function E(e) {
        u[0] = new THREE.Vector3, a[0] = new THREE.Vector3, e === undefined && (e = new THREE.Vector3(0, 0, 1)), u[0].crossVectors(e, o[0]).normalize(), a[0].crossVectors(o[0], u[0]).normalize()
    }

    function S() {
        var t = e.getTangentAt(p);
        u[0] = (new THREE.Vector3).subVectors(t, o[0]).normalize(), a[0] = (new THREE.Vector3).crossVectors(o[0], u[0]), u[0].crossVectors(a[0], o[0]).normalize(), a[0].crossVectors(o[0], u[0]).normalize()
    }

    function x() {
        u[0] = new THREE.Vector3, a[0] = new THREE.Vector3, d = Number.MAX_VALUE, v = Math.abs(o[0].x), m = Math.abs(o[0].y), g = Math.abs(o[0].z), v <= d && (d = v, i.set(1, 0, 0)), m <= d && (d = m, i.set(0, 1, 0)), g <= d && i.set(0, 0, 1), f.crossVectors(o[0], i).normalize(), u[0].crossVectors(o[0], f), a[0].crossVectors(o[0], u[0])
    }

    var r = new THREE.Vector3, i = new THREE.Vector3, s = new THREE.Vector3, o = [], u = [], a = [],
        f = new THREE.Vector3, l = new THREE.Matrix4, c = t + 1, h, p = 1e-4, d, v, m, g, y, b, w;
    this.tangents = o, this.normals = u, this.binormals = a;
    for (y = 0; y < c; y++)b = y / (c - 1), o[y] = e.getTangentAt(b), o[y].normalize();
    x();
    for (y = 1; y < c; y++)u[y] = u[y - 1].clone(), a[y] = a[y - 1].clone(), f.crossVectors(o[y - 1], o[y]), f.length() > p && (f.normalize(), h = Math.acos(THREE.Math.clamp(o[y - 1].dot(o[y]), -1, 1)), u[y].applyMatrix4(l.makeRotationAxis(f, h))), a[y].crossVectors(o[y], u[y]);
    if (n) {
        h = Math.acos(THREE.Math.clamp(u[0].dot(u[c - 1]), -1, 1)), h /= c - 1, o[0].dot(f.crossVectors(u[0], u[c - 1])) > 0 && (h = -h);
        for (y = 1; y < c; y++)u[y].applyMatrix4(l.makeRotationAxis(o[y], h * y)), a[y].crossVectors(o[y], u[y])
    }
},THREE.PolyhedronGeometry = function (e, t, n, r) {
    function b(e) {
        var t = e.normalize().clone();
        t.index = i.vertices.push(t) - 1;
        var n = S(e) / 2 / Math.PI + .5, r = x(e) / Math.PI + .5;
        return t.uv = new THREE.Vector2(n, 1 - r), t
    }

    function w(e, t, n) {
        var r = new THREE.Face3(e.index, t.index, n.index, [e.clone(), t.clone(), n.clone()]);
        r.centroid.add(e).add(t).add(n).divideScalar(3), i.faces.push(r);
        var s = S(r.centroid);
        i.faceVertexUvs[0].push([T(e.uv, e, s), T(t.uv, t, s), T(n.uv, n, s)])
    }

    function E(e, t) {
        var n = Math.pow(2, t), r = Math.pow(4, t), s = b(i.vertices[e.a]), o = b(i.vertices[e.b]),
            u = b(i.vertices[e.c]), a = [];
        for (var f = 0; f <= n; f++) {
            a[f] = [];
            var l = b(s.clone().lerp(u, f / n)), c = b(o.clone().lerp(u, f / n)), h = n - f;
            for (var p = 0; p <= h; p++)p == 0 && f == n ? a[f][p] = l : a[f][p] = b(l.clone().lerp(c, p / h))
        }
        for (var f = 0; f < n; f++)for (var p = 0; p < 2 * (n - f) - 1; p++) {
            var d = Math.floor(p / 2);
            p % 2 == 0 ? w(a[f][d + 1], a[f + 1][d], a[f][d]) : w(a[f][d + 1], a[f + 1][d + 1], a[f + 1][d])
        }
    }

    function S(e) {
        return Math.atan2(e.z, -e.x)
    }

    function x(e) {
        return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z))
    }

    function T(e, t, n) {
        return n < 0 && e.x === 1 && (e = new THREE.Vector2(e.x - 1, e.y)), t.x === 0 && t.z === 0 && (e = new THREE.Vector2(n / 2 / Math.PI + .5, e.y)), e.clone()
    }

    THREE.Geometry.call(this), n = n || 1, r = r || 0;
    var i = this;
    for (var s = 0, o = e.length; s < o; s++)b(new THREE.Vector3(e[s][0], e[s][1], e[s][2]));
    var u = [], a = this.vertices, f = [];
    for (var s = 0, o = t.length; s < o; s++) {
        var l = a[t[s][0]], c = a[t[s][1]], h = a[t[s][2]];
        f[s] = new THREE.Face3(l.index, c.index, h.index, [l.clone(), c.clone(), h.clone()])
    }
    for (var s = 0, o = f.length; s < o; s++)E(f[s], r);
    for (var s = 0, o = this.faceVertexUvs[0].length; s < o; s++) {
        var p = this.faceVertexUvs[0][s], d = p[0].x, v = p[1].x, m = p[2].x, g = Math.max(d, Math.max(v, m)),
            y = Math.min(d, Math.min(v, m));
        g > .9 && y < .1 && (d < .2 && (p[0].x += 1), v < .2 && (p[1].x += 1), m < .2 && (p[2].x += 1))
    }
    for (var s = 0, o = this.vertices.length; s < o; s++)this.vertices[s].multiplyScalar(n);
    this.mergeVertices(), this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, n)
},THREE.PolyhedronGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry = function (e, t) {
    this.radius = e, this.detail = t;
    var n = (1 + Math.sqrt(5)) / 2,
        r = [[-1, n, 0], [1, n, 0], [-1, -n, 0], [1, -n, 0], [0, -1, n], [0, 1, n], [0, -1, -n], [0, 1, -n], [n, 0, -1], [n, 0, 1], [-n, 0, -1], [-n, 0, 1]],
        i = [[0, 11, 5], [0, 5, 1], [0, 1, 7], [0, 7, 10], [0, 10, 11], [1, 5, 9], [5, 11, 4], [11, 10, 2], [10, 7, 6], [7, 1, 8], [3, 9, 4], [3, 4, 2], [3, 2, 6], [3, 6, 8], [3, 8, 9], [4, 9, 5], [2, 4, 11], [6, 2, 10], [8, 6, 7], [9, 8, 1]];
    THREE.PolyhedronGeometry.call(this, r, i, e, t)
},THREE.IcosahedronGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry = function (e, t) {
    var n = [[1, 0, 0], [-1, 0, 0], [0, 1, 0], [0, -1, 0], [0, 0, 1], [0, 0, -1]],
        r = [[0, 2, 4], [0, 4, 3], [0, 3, 5], [0, 5, 2], [1, 2, 5], [1, 5, 3], [1, 3, 4], [1, 4, 2]];
    THREE.PolyhedronGeometry.call(this, n, r, e, t)
},THREE.OctahedronGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry = function (e, t) {
    var n = [[1, 1, 1], [-1, -1, 1], [-1, 1, -1], [1, -1, -1]], r = [[2, 1, 0], [0, 3, 2], [1, 3, 0], [2, 3, 1]];
    THREE.PolyhedronGeometry.call(this, n, r, e, t)
},THREE.TetrahedronGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry = function (e, t, n) {
    THREE.Geometry.call(this);
    var r = this.vertices, i = this.faces, s = this.faceVertexUvs[0], o, u, a, f, l, c, h = n + 1, p = t + 1;
    for (o = 0; o <= n; o++) {
        c = o / n;
        for (a = 0; a <= t; a++)l = a / t, f = e(l, c), r.push(f)
    }
    var d, v, m, g, y, b, w, E;
    for (o = 0; o < n; o++)for (a = 0; a < t; a++)d = o * p + a, v = o * p + a + 1, m = (o + 1) * p + a + 1, g = (o + 1) * p + a, y = new THREE.Vector2(a / t, o / n), b = new THREE.Vector2((a + 1) / t, o / n), w = new THREE.Vector2((a + 1) / t, (o + 1) / n), E = new THREE.Vector2(a / t, (o + 1) / n), i.push(new THREE.Face3(d, v, g)), s.push([y, b, E]), i.push(new THREE.Face3(v, m, g)), s.push([b.clone(), w, E.clone()]);
    this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals()
},THREE.ParametricGeometry.prototype = Object.create(THREE.Geometry.prototype),THREE.AxisHelper = function (e) {
    e = e || 1;
    var t = new THREE.Geometry;
    t.vertices.push(new THREE.Vector3, new THREE.Vector3(e, 0, 0), new THREE.Vector3, new THREE.Vector3(0, e, 0), new THREE.Vector3, new THREE.Vector3(0, 0, e)), t.colors.push(new THREE.Color(16711680), new THREE.Color(16755200), new THREE.Color(65280), new THREE.Color(11206400), new THREE.Color(255), new THREE.Color(43775));
    var n = new THREE.LineBasicMaterial({vertexColors: THREE.VertexColors});
    THREE.Line.call(this, t, n, THREE.LinePieces)
},THREE.AxisHelper.prototype = Object.create(THREE.Line.prototype),THREE.ArrowHelper = function (e, t, n, r) {
    THREE.Object3D.call(this), r === undefined && (r = 16776960), n === undefined && (n = 1), this.position = t;
    var i = new THREE.Geometry;
    i.vertices.push(new THREE.Vector3(0, 0, 0)), i.vertices.push(new THREE.Vector3(0, 1, 0)), this.line = new THREE.Line(i, new THREE.LineBasicMaterial({color: r})), this.line.matrixAutoUpdate = !1, this.add(this.line);
    var s = new THREE.CylinderGeometry(0, .05, .25, 5, 1);
    s.applyMatrix((new THREE.Matrix4).makeTranslation(0, .875, 0)), this.cone = new THREE.Mesh(s, new THREE.MeshBasicMaterial({color: r})), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(e), this.setLength(n)
},THREE.ArrowHelper.prototype = Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection = function () {
    var e = new THREE.Vector3, t;
    return function (n) {
        n.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : n.y < -0.99999 ? this.quaternion.set(1, 0, 0, 0) : (e.set(n.z, 0, -n.x).normalize(), t = Math.acos(n.y), this.quaternion.setFromAxisAngle(e, t))
    }
}(),THREE.ArrowHelper.prototype.setLength = function (e) {
    this.scale.set(e, e, e)
},THREE.ArrowHelper.prototype.setColor = function (e) {
    this.line.material.color.setHex(e), this.cone.material.color.setHex(e)
},THREE.BoxHelper = function (e) {
    var t = [new THREE.Vector3(1, 1, 1), new THREE.Vector3(-1, 1, 1), new THREE.Vector3(-1, -1, 1), new THREE.Vector3(1, -1, 1), new THREE.Vector3(1, 1, -1), new THREE.Vector3(-1, 1, -1), new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, -1, -1)];
    this.vertices = t;
    var n = new THREE.Geometry;
    n.vertices.push(t[0], t[1], t[1], t[2], t[2], t[3], t[3], t[0], t[4], t[5], t[5], t[6], t[6], t[7], t[7], t[4], t[0], t[4], t[1], t[5], t[2], t[6], t[3], t[7]), THREE.Line.call(this, n, new THREE.LineBasicMaterial({color: 16776960}), THREE.LinePieces), e !== undefined && this.update(e)
},THREE.BoxHelper.prototype = Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update = function (e) {
    var t = e.geometry;
    t.boundingBox === null && t.computeBoundingBox();
    var n = t.boundingBox.min, r = t.boundingBox.max, i = this.vertices;
    i[0].set(r.x, r.y, r.z), i[1].set(n.x, r.y, r.z), i[2].set(n.x, n.y, r.z), i[3].set(r.x, n.y, r.z), i[4].set(r.x, r.y, n.z), i[5].set(n.x, r.y, n.z), i[6].set(n.x, n.y, n.z), i[7].set(r.x, n.y, n.z), this.geometry.computeBoundingSphere(), this.geometry.verticesNeedUpdate = !0, this.matrixAutoUpdate = !1, this.matrixWorld = e.matrixWorld
},THREE.BoundingBoxHelper = function (e, t) {
    var n = t || 8947848;
    this.object = e, this.box = new THREE.Box3, THREE.Mesh.call(this, new THREE.CubeGeometry(1, 1, 1), new THREE.MeshBasicMaterial({
        color: n,
        wireframe: !0
    }))
},THREE.BoundingBoxHelper.prototype = Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update = function () {
    this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
},THREE.CameraHelper = function (e) {
    function f(e, t, n) {
        l(e, n), l(t, n)
    }

    function l(e, n) {
        t.vertices.push(new THREE.Vector3), t.colors.push(new THREE.Color(n)), r[e] === undefined && (r[e] = []), r[e].push(t.vertices.length - 1)
    }

    var t = new THREE.Geometry, n = new THREE.LineBasicMaterial({color: 16777215, vertexColors: THREE.FaceColors}),
        r = {}, i = 16755200, s = 16711680, o = 43775, u = 16777215, a = 3355443;
    f("n1", "n2", i), f("n2", "n4", i), f("n4", "n3", i), f("n3", "n1", i), f("f1", "f2", i), f("f2", "f4", i), f("f4", "f3", i), f("f3", "f1", i), f("n1", "f1", i), f("n2", "f2", i), f("n3", "f3", i), f("n4", "f4", i), f("p", "n1", s), f("p", "n2", s), f("p", "n3", s), f("p", "n4", s), f("u1", "u2", o), f("u2", "u3", o), f("u3", "u1", o), f("c", "t", u), f("p", "c", a), f("cn1", "cn2", a), f("cn3", "cn4", a), f("cf1", "cf2", a), f("cf3", "cf4", a), THREE.Line.call(this, t, n, THREE.LinePieces), this.camera = e, this.matrixWorld = e.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = r, this.update()
},THREE.CameraHelper.prototype = Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update = function () {
    var e = new THREE.Vector3, t = new THREE.Camera, n = new THREE.Projector;
    return function () {
        function o(i, s, o, u) {
            e.set(s, o, u), n.unprojectVector(e, t);
            var a = r.pointMap[i];
            if (a !== undefined)for (var f = 0, l = a.length; f < l; f++)r.geometry.vertices[a[f]].copy(e)
        }

        var r = this, i = 1, s = 1;
        t.projectionMatrix.copy(this.camera.projectionMatrix), o("c", 0, 0, -1), o("t", 0, 0, 1), o("n1", -i, -s, -1), o("n2", i, -s, -1), o("n3", -i, s, -1), o("n4", i, s, -1), o("f1", -i, -s, 1), o("f2", i, -s, 1), o("f3", -i, s, 1), o("f4", i, s, 1), o("u1", i * .7, s * 1.1, -1), o("u2", -i * .7, s * 1.1, -1), o("u3", 0, s * 2, -1), o("cf1", -i, 0, 1), o("cf2", i, 0, 1), o("cf3", 0, -s, 1), o("cf4", 0, s, 1), o("cn1", -i, 0, -1), o("cn2", i, 0, -1), o("cn3", 0, -s, -1), o("cn4", 0, s, -1), this.geometry.verticesNeedUpdate = !0
    }
}(),THREE.DirectionalLightHelper = function (e, t) {
    THREE.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrixWorld = e.matrixWorld, this.matrixAutoUpdate = !1;
    var n = new THREE.PlaneGeometry(t, t), r = new THREE.MeshBasicMaterial({wireframe: !0, fog: !1});
    r.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new THREE.Mesh(n, r), this.add(this.lightPlane), n = new THREE.Geometry, n.vertices.push(new THREE.Vector3), n.vertices.push(new THREE.Vector3), n.computeLineDistances(), r = new THREE.LineBasicMaterial({fog: !1}), r.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new THREE.Line(n, r), this.add(this.targetLine), this.update()
},THREE.DirectionalLightHelper.prototype = Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.update = function () {
    var e = new THREE.Vector3;
    return function () {
        e.getPositionFromMatrix(this.light.matrixWorld).negate(), this.lightPlane.lookAt(e), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(e), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
    }
}(),THREE.FaceNormalsHelper = function (e, t, n, r) {
    this.object = e, this.size = t || 1;
    var i = n || 16776960, s = r || 1, o = new THREE.Geometry, u = this.object.geometry.faces;
    for (var a = 0, f = u.length; a < f; a++)o.vertices.push(new THREE.Vector3), o.vertices.push(new THREE.Vector3);
    THREE.Line.call(this, o, new THREE.LineBasicMaterial({
        color: i,
        linewidth: s
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3, this.update()
},THREE.FaceNormalsHelper.prototype = Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update = function (e) {
    var t = new THREE.Vector3;
    return function (e) {
        this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
        var n = this.geometry.vertices, r = this.object.geometry.faces, i = this.object.matrixWorld;
        for (var s = 0, o = r.length; s < o; s++) {
            var u = r[s];
            t.copy(u.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
            var a = 2 * s;
            n[a].copy(u.centroid).applyMatrix4(i), n[a + 1].addVectors(n[a], t)
        }
        return this.geometry.verticesNeedUpdate = !0, this
    }
}(),
THREE.GridHelper = function (e, t) {
    var n = new THREE.Geometry, r = new THREE.LineBasicMaterial({vertexColors: THREE.VertexColors});
    this.color1 = new THREE.Color(4473924), this.color2 = new THREE.Color(8947848);
    for (var i = -e; i <= e; i += t) {
        n.vertices.push(new THREE.Vector3(-e, 0, i), new THREE.Vector3(e, 0, i), new THREE.Vector3(i, 0, -e), new THREE.Vector3(i, 0, e));
        var s = i === 0 ? this.color1 : this.color2;
        n.colors.push(s, s, s, s)
    }
    THREE.Line.call(this, n, r, THREE.LinePieces)
},
THREE.GridHelper.prototype = Object.create(THREE.Line.prototype),
THREE.GridHelper.prototype.setColors = function (e, t) {
    this.color1.set(e), this.color2.set(t), this.geometry.colorsNeedUpdate = !0
},THREE.HemisphereLightHelper = function (e, t, n, r) {
    THREE.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrixWorld = e.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new THREE.Color, new THREE.Color];
    var i = new THREE.SphereGeometry(t, 4, 2);
    i.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
    for (var s = 0, o = 8; s < o; s++)i.faces[s].color = this.colors[s < 4 ? 0 : 1];
    var u = new THREE.MeshBasicMaterial({vertexColors: THREE.FaceColors, wireframe: !0});
    this.lightSphere = new THREE.Mesh(i, u), this.add(this.lightSphere), this.update()
},THREE.HemisphereLightHelper.prototype = Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.update = function () {
    var e = new THREE.Vector3;
    return function () {
        this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(e.getPositionFromMatrix(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
    }
}(),THREE.PointLightHelper = function (e, t) {
    this.light = e, this.light.updateMatrixWorld();
    var n = new THREE.SphereGeometry(t, 4, 2), r = new THREE.MeshBasicMaterial({wireframe: !0, fog: !1});
    r.color.copy(this.light.color).multiplyScalar(this.light.intensity), THREE.Mesh.call(this, n, r), this.matrixWorld = this.light.matrixWorld, this.matrixAutoUpdate = !1
},THREE.PointLightHelper.prototype = Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.update = function () {
    this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
},THREE.SpotLightHelper = function (e) {
    THREE.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrixWorld = e.matrixWorld, this.matrixAutoUpdate = !1;
    var t = new THREE.CylinderGeometry(0, 1, 1, 8, 1, !0);
    t.applyMatrix((new THREE.Matrix4).makeTranslation(0, -0.5, 0)), t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
    var n = new THREE.MeshBasicMaterial({wireframe: !0, fog: !1});
    this.cone = new THREE.Mesh(t, n), this.add(this.cone), this.update()
},THREE.SpotLightHelper.prototype = Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.update = function () {
    var e = new THREE.Vector3, t = new THREE.Vector3;
    return function () {
        var n = this.light.distance ? this.light.distance : 1e4, r = n * Math.tan(this.light.angle);
        this.cone.scale.set(r, r, n), e.getPositionFromMatrix(this.light.matrixWorld), t.getPositionFromMatrix(this.light.target.matrixWorld), this.cone.lookAt(t.sub(e)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
    }
}(),THREE.VertexNormalsHelper = function (e, t, n, r) {
    this.object = e, this.size = t || 1;
    var i = n || 16711680, s = r || 1, o = new THREE.Geometry, u = e.geometry.vertices, a = e.geometry.faces;
    for (var f = 0, l = a.length; f < l; f++) {
        var c = a[f];
        for (var h = 0,
                 p = c.vertexNormals.length; h < p; h++)o.vertices.push(new THREE.Vector3), o.vertices.push(new THREE.Vector3)
    }
    THREE.Line.call(this, o, new THREE.LineBasicMaterial({
        color: i,
        linewidth: s
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3, this.update()
},THREE.VertexNormalsHelper.prototype = Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update = function (e) {
    var t = new THREE.Vector3;
    return function (e) {
        var n = ["a", "b", "c", "d"];
        this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
        var r = this.geometry.vertices, i = this.object.geometry.vertices, s = this.object.geometry.faces,
            o = this.object.matrixWorld, u = 0;
        for (var a = 0, f = s.length; a < f; a++) {
            var l = s[a];
            for (var c = 0, h = l.vertexNormals.length; c < h; c++) {
                var p = l[n[c]], d = i[p], v = l.vertexNormals[c];
                r[u].copy(d).applyMatrix4(o), t.copy(v).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size), t.add(r[u]), u += 1, r[u].copy(t), u += 1
            }
        }
        return this.geometry.verticesNeedUpdate = !0, this
    }
}(),THREE.VertexTangentsHelper = function (e, t, n, r) {
    this.object = e, this.size = t || 1;
    var i = n || 255, s = r || 1, o = new THREE.Geometry, u = e.geometry.vertices, a = e.geometry.faces;
    for (var f = 0, l = a.length; f < l; f++) {
        var c = a[f];
        for (var h = 0,
                 p = c.vertexTangents.length; h < p; h++)o.vertices.push(new THREE.Vector3), o.vertices.push(new THREE.Vector3)
    }
    THREE.Line.call(this, o, new THREE.LineBasicMaterial({
        color: i,
        linewidth: s
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.update()
},THREE.VertexTangentsHelper.prototype = Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update = function (e) {
    var t = new THREE.Vector3;
    return function (e) {
        var n = ["a", "b", "c", "d"];
        this.object.updateMatrixWorld(!0);
        var r = this.geometry.vertices, i = this.object.geometry.vertices, s = this.object.geometry.faces,
            o = this.object.matrixWorld, u = 0;
        for (var a = 0, f = s.length; a < f; a++) {
            var l = s[a];
            for (var c = 0, h = l.vertexTangents.length; c < h; c++) {
                var p = l[n[c]], d = i[p], v = l.vertexTangents[c];
                r[u].copy(d).applyMatrix4(o), t.copy(v).transformDirection(o).multiplyScalar(this.size), t.add(r[u]), u += 1, r[u].copy(t), u += 1
            }
        }
        return this.geometry.verticesNeedUpdate = !0, this
    }
}(),THREE.WireframeHelper = function (e) {
    var t = [0, 0], n = {}, r = function (e, t) {
        return e - t
    }, i = ["a", "b", "c", "d"], s = new THREE.Geometry, o = e.geometry.vertices, u = e.geometry.faces;
    for (var a = 0, f = u.length; a < f; a++) {
        var l = u[a];
        for (var c = 0; c < 3; c++) {
            t[0] = l[i[c]], t[1] = l[i[(c + 1) % 3]], t.sort(r);
            var h = t.toString();
            n[h] === undefined && (s.vertices.push(o[t[0]]), s.vertices.push(o[t[1]]), n[h] = !0)
        }
    }
    THREE.Line.call(this, s, new THREE.LineBasicMaterial({color: 16777215}), THREE.LinePieces), this.matrixAutoUpdate = !1, this.matrixWorld = e.matrixWorld
},THREE.WireframeHelper.prototype = Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject = function () {
    THREE.Object3D.call(this), this.render = function (e) {
    }
},THREE.ImmediateRenderObject.prototype = Object.create(THREE.Object3D.prototype),THREE.LensFlare = function (e, t, n, r, i) {
    THREE.Object3D.call(this), this.lensFlares = [], this.positionScreen = new THREE.Vector3, this.customUpdateCallback = undefined, e !== undefined && this.add(e, t, n, r, i)
},THREE.LensFlare.prototype = Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add = function (e, t, n, r, i, s) {
    t === undefined && (t = -1), n === undefined && (n = 0), s === undefined && (s = 1), i === undefined && (i = new THREE.Color(16777215)), r === undefined && (r = THREE.NormalBlending), n = Math.min(n, Math.max(0, n)), this.lensFlares.push({
        texture: e,
        size: t,
        distance: n,
        x: 0,
        y: 0,
        z: 0,
        scale: 1,
        rotation: 1,
        opacity: s,
        color: i,
        blending: r
    })
},THREE.LensFlare.prototype.updateLensFlares = function () {
    var e, t = this.lensFlares.length, n, r = -this.positionScreen.x * 2, i = -this.positionScreen.y * 2;
    for (e = 0; e < t; e++)n = this.lensFlares[e], n.x = this.positionScreen.x + r * n.distance, n.y = this.positionScreen.y + i * n.distance, n.wantedRotation = n.x * Math.PI * .25, n.rotation += (n.wantedRotation - n.rotation) * .25
},THREE.MorphBlendMesh = function (e, t) {
    THREE.Mesh.call(this, e, t), this.animationsMap = {}, this.animationsList = [];
    var n = this.geometry.morphTargets.length, r = "__default", i = 0, s = n - 1, o = n / 1;
    this.createAnimation(r, i, s, o), this.setAnimationWeight(r, 1)
},THREE.MorphBlendMesh.prototype = Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation = function (e, t, n, r) {
    var i = {
        startFrame: t,
        endFrame: n,
        length: n - t + 1,
        fps: r,
        duration: (n - t) / r,
        lastFrame: 0,
        currentFrame: 0,
        active: !1,
        time: 0,
        direction: 1,
        weight: 1,
        directionBackwards: !1,
        mirroredLoop: !1
    };
    this.animationsMap[e] = i, this.animationsList.push(i)
},THREE.MorphBlendMesh.prototype.autoCreateAnimations = function (e) {
    var t = /([a-z]+)(\d+)/, n, r = {}, i = this.geometry;
    for (var s = 0, o = i.morphTargets.length; s < o; s++) {
        var u = i.morphTargets[s], a = u.name.match(t);
        if (a && a.length > 1) {
            var f = a[1], l = a[2];
            r[f] || (r[f] = {start: Infinity, end: -Infinity});
            var c = r[f];
            s < c.start && (c.start = s), s > c.end && (c.end = s), n || (n = f)
        }
    }
    for (var f in r) {
        var c = r[f];
        this.createAnimation(f, c.start, c.end, e)
    }
    this.firstAnimation = n
},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function (e) {
    var t = this.animationsMap[e];
    t && (t.direction = 1, t.directionBackwards = !1)
},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function (e) {
    var t = this.animationsMap[e];
    t && (t.direction = -1, t.directionBackwards = !0)
},THREE.MorphBlendMesh.prototype.setAnimationFPS = function (e, t) {
    var n = this.animationsMap[e];
    n && (n.fps = t, n.duration = (n.end - n.start) / n.fps)
},THREE.MorphBlendMesh.prototype.setAnimationDuration = function (e, t) {
    var n = this.animationsMap[e];
    n && (n.duration = t, n.fps = (n.end - n.start) / n.duration)
},THREE.MorphBlendMesh.prototype.setAnimationWeight = function (e, t) {
    var n = this.animationsMap[e];
    n && (n.weight = t)
},THREE.MorphBlendMesh.prototype.setAnimationTime = function (e, t) {
    var n = this.animationsMap[e];
    n && (n.time = t)
},THREE.MorphBlendMesh.prototype.getAnimationTime = function (e) {
    var t = 0, n = this.animationsMap[e];
    return n && (t = n.time), t
},THREE.MorphBlendMesh.prototype.getAnimationDuration = function (e) {
    var t = -1, n = this.animationsMap[e];
    return n && (t = n.duration), t
},THREE.MorphBlendMesh.prototype.playAnimation = function (e) {
    var t = this.animationsMap[e];
    t ? (t.time = 0, t.active = !0) : 0
},THREE.MorphBlendMesh.prototype.stopAnimation = function (e) {
    var t = this.animationsMap[e];
    t && (t.active = !1)
},THREE.MorphBlendMesh.prototype.update = function (e) {
    for (var t = 0, n = this.animationsList.length; t < n; t++) {
        var r = this.animationsList[t];
        if (!r.active)continue;
        var i = r.duration / r.length;
        r.time += r.direction * e;
        if (r.mirroredLoop) {
            if (r.time > r.duration || r.time < 0) r.direction *= -1, r.time > r.duration && (r.time = r.duration, r.directionBackwards = !0), r.time < 0 && (r.time = 0, r.directionBackwards = !1)
        } else r.time = r.time % r.duration, r.time < 0 && (r.time += r.duration);
        var s = r.startFrame + THREE.Math.clamp(Math.floor(r.time / i), 0, r.length - 1), o = r.weight;
        s !== r.currentFrame && (this.morphTargetInfluences[r.lastFrame] = 0, this.morphTargetInfluences[r.currentFrame] = 1 * o, this.morphTargetInfluences[s] = 0, r.lastFrame = r.currentFrame, r.currentFrame = s);
        var u = r.time % i / i;
        r.directionBackwards && (u = 1 - u), this.morphTargetInfluences[r.currentFrame] = u * o, this.morphTargetInfluences[r.lastFrame] = (1 - u) * o
    }
},THREE.LensFlarePlugin = function () {
    function i(t, n) {
        var r = e.createProgram(), i = e.createShader(e.FRAGMENT_SHADER), s = e.createShader(e.VERTEX_SHADER),
            o = "precision " + n + " float;\n";
        return e.shaderSource(i, o + t.fragmentShader), e.shaderSource(s, o + t.vertexShader), e.compileShader(i), e.compileShader(s), e.attachShader(r, i), e.attachShader(r, s), e.linkProgram(r), r
    }

    var e, t, n, r = {};
    this.init = function (s) {
        e = s.context, t = s, n = s.getPrecision(), r.vertices = new Float32Array(16), r.faces = new Uint16Array(6);
        var o = 0;
        r.vertices[o++] = -1, r.vertices[o++] = -1, r.vertices[o++] = 0, r.vertices[o++] = 0, r.vertices[o++] = 1, r.vertices[o++] = -1, r.vertices[o++] = 1, r.vertices[o++] = 0, r.vertices[o++] = 1, r.vertices[o++] = 1, r.vertices[o++] = 1, r.vertices[o++] = 1, r.vertices[o++] = -1, r.vertices[o++] = 1, r.vertices[o++] = 0, r.vertices[o++] = 1, o = 0, r.faces[o++] = 0, r.faces[o++] = 1, r.faces[o++] = 2, r.faces[o++] = 0, r.faces[o++] = 2, r.faces[o++] = 3, r.vertexBuffer = e.createBuffer(), r.elementBuffer = e.createBuffer(), e.bindBuffer(e.ARRAY_BUFFER, r.vertexBuffer), e.bufferData(e.ARRAY_BUFFER, r.vertices, e.STATIC_DRAW), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, r.elementBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, r.faces, e.STATIC_DRAW), r.tempTexture = e.createTexture(), r.occlusionTexture = e.createTexture(), e.bindTexture(e.TEXTURE_2D, r.tempTexture), e.texImage2D(e.TEXTURE_2D, 0, e.RGB, 16, 16, 0, e.RGB, e.UNSIGNED_BYTE, null), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST), e.bindTexture(e.TEXTURE_2D, r.occlusionTexture), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, 16, 16, 0, e.RGBA, e.UNSIGNED_BYTE, null), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST), e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS) <= 0 ? (r.hasVertexTexture = !1, r.program = i(THREE.ShaderFlares.lensFlare, n)) : (r.hasVertexTexture = !0, r.program = i(THREE.ShaderFlares.lensFlareVertexTexture, n)), r.attributes = {}, r.uniforms = {}, r.attributes.vertex = e.getAttribLocation(r.program, "position"), r.attributes.uv = e.getAttribLocation(r.program, "uv"), r.uniforms.renderType = e.getUniformLocation(r.program, "renderType"), r.uniforms.map = e.getUniformLocation(r.program, "map"), r.uniforms.occlusionMap = e.getUniformLocation(r.program, "occlusionMap"), r.uniforms.opacity = e.getUniformLocation(r.program, "opacity"), r.uniforms.color = e.getUniformLocation(r.program, "color"), r.uniforms.scale = e.getUniformLocation(r.program, "scale"), r.uniforms.rotation = e.getUniformLocation(r.program, "rotation"), r.uniforms.screenPosition = e.getUniformLocation(r.program, "screenPosition")
    }, this.render = function (n, i, s, o) {
        var u = n.__webglFlares, a = u.length;
        if (!a)return;
        var f = new THREE.Vector3, l = o / s, c = s * .5, h = o * .5, p = 16 / o, d = new THREE.Vector2(p * l, p),
            v = new THREE.Vector3(1, 1, 0), m = new THREE.Vector2(1, 1), g = r.uniforms, y = r.attributes;
        e.useProgram(r.program), e.enableVertexAttribArray(r.attributes.vertex), e.enableVertexAttribArray(r.attributes.uv), e.uniform1i(g.occlusionMap, 0), e.uniform1i(g.map, 1), e.bindBuffer(e.ARRAY_BUFFER, r.vertexBuffer), e.vertexAttribPointer(y.vertex, 2, e.FLOAT, !1, 16, 0), e.vertexAttribPointer(y.uv, 2, e.FLOAT, !1, 16, 8), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, r.elementBuffer), e.disable(e.CULL_FACE), e.depthMask(!1);
        var b, w, E, S, x;
        for (b = 0; b < a; b++) {
            p = 16 / o, d.set(p * l, p), S = u[b], f.set(S.matrixWorld.elements[12], S.matrixWorld.elements[13], S.matrixWorld.elements[14]), f.applyMatrix4(i.matrixWorldInverse), f.applyProjection(i.projectionMatrix), v.copy(f), m.x = v.x * c + c, m.y = v.y * h + h;
            if (r.hasVertexTexture || m.x > 0 && m.x < s && m.y > 0 && m.y < o) {
                e.activeTexture(e.TEXTURE1), e.bindTexture(e.TEXTURE_2D, r.tempTexture), e.copyTexImage2D(e.TEXTURE_2D, 0, e.RGB, m.x - 8, m.y - 8, 16, 16, 0), e.uniform1i(g.renderType, 0), e.uniform2f(g.scale, d.x, d.y), e.uniform3f(g.screenPosition, v.x, v.y, v.z), e.disable(e.BLEND), e.enable(e.DEPTH_TEST), e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0), e.activeTexture(e.TEXTURE0), e.bindTexture(e.TEXTURE_2D, r.occlusionTexture), e.copyTexImage2D(e.TEXTURE_2D, 0, e.RGBA, m.x - 8, m.y - 8, 16, 16, 0), e.uniform1i(g.renderType, 1), e.disable(e.DEPTH_TEST), e.activeTexture(e.TEXTURE1), e.bindTexture(e.TEXTURE_2D, r.tempTexture), e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0), S.positionScreen.copy(v), S.customUpdateCallback ? S.customUpdateCallback(S) : S.updateLensFlares(), e.uniform1i(g.renderType, 2), e.enable(e.BLEND);
                for (w = 0, E = S.lensFlares.length; w < E; w++)x = S.lensFlares[w], x.opacity > .001 && x.scale > .001 && (v.x = x.x, v.y = x.y, v.z = x.z, p = x.size * x.scale / o, d.x = p * l, d.y = p, e.uniform3f(g.screenPosition, v.x, v.y, v.z), e.uniform2f(g.scale, d.x, d.y), e.uniform1f(g.rotation, x.rotation), e.uniform1f(g.opacity, x.opacity), e.uniform3f(g.color, x.color.r, x.color.g, x.color.b), t.setBlending(x.blending, x.blendEquation, x.blendSrc, x.blendDst), t.setTexture(x.texture, 1), e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0))
            }
        }
        e.enable(e.CULL_FACE), e.enable(e.DEPTH_TEST), e.depthMask(!0)
    }
},THREE.ShadowMapPlugin = function () {
    function c(e, t) {
        var n = new THREE.DirectionalLight;
        n.isVirtual = !0, n.onlyShadow = !0, n.castShadow = !0, n.shadowCameraNear = e.shadowCameraNear, n.shadowCameraFar = e.shadowCameraFar, n.shadowCameraLeft = e.shadowCameraLeft, n.shadowCameraRight = e.shadowCameraRight, n.shadowCameraBottom = e.shadowCameraBottom, n.shadowCameraTop = e.shadowCameraTop, n.shadowCameraVisible = e.shadowCameraVisible, n.shadowDarkness = e.shadowDarkness, n.shadowBias = e.shadowCascadeBias[t], n.shadowMapWidth = e.shadowCascadeWidth[t], n.shadowMapHeight = e.shadowCascadeHeight[t], n.pointsWorld = [], n.pointsFrustum = [];
        var r = n.pointsWorld, i = n.pointsFrustum;
        for (var s = 0; s < 8; s++)r[s] = new THREE.Vector3, i[s] = new THREE.Vector3;
        var o = e.shadowCascadeNearZ[t], u = e.shadowCascadeFarZ[t];
        return i[0].set(-1, -1, o), i[1].set(1, -1, o), i[2].set(-1, 1, o), i[3].set(1, 1, o), i[4].set(-1, -1, u), i[5].set(1, -1, u), i[6].set(-1, 1, u), i[7].set(1, 1, u), n
    }

    function h(e, t) {
        var n = e.shadowCascadeArray[t];
        n.position.copy(e.position), n.target.position.copy(e.target.position), n.lookAt(n.target), n.shadowCameraVisible = e.shadowCameraVisible, n.shadowDarkness = e.shadowDarkness, n.shadowBias = e.shadowCascadeBias[t];
        var r = e.shadowCascadeNearZ[t], i = e.shadowCascadeFarZ[t], s = n.pointsFrustum;
        s[0].z = r, s[1].z = r, s[2].z = r, s[3].z = r, s[4].z = i, s[5].z = i, s[6].z = i, s[7].z = i
    }

    function p(e, t) {
        var n = t.shadowCamera, r = t.pointsFrustum, i = t.pointsWorld;
        a.set(Infinity, Infinity, Infinity), f.set(-Infinity, -Infinity, -Infinity);
        for (var s = 0; s < 8; s++) {
            var o = i[s];
            o.copy(r[s]), THREE.ShadowMapPlugin.__projector.unprojectVector(o, e), o.applyMatrix4(n.matrixWorldInverse), o.x < a.x && (a.x = o.x), o.x > f.x && (f.x = o.x), o.y < a.y && (a.y = o.y), o.y > f.y && (f.y = o.y), o.z < a.z && (a.z = o.z), o.z > f.z && (f.z = o.z)
        }
        n.left = a.x, n.right = f.x, n.top = f.y, n.bottom = a.y, n.updateProjectionMatrix()
    }

    function d(e) {
        return e.material instanceof THREE.MeshFaceMaterial ? e.material.materials[0] : e.material
    }

    var e, t, n, r, i, s, o = new THREE.Frustum, u = new THREE.Matrix4, a = new THREE.Vector3, f = new THREE.Vector3,
        l = new THREE.Vector3;
    this.init = function (o) {
        e = o.context, t = o;
        var u = THREE.ShaderLib.depthRGBA, a = THREE.UniformsUtils.clone(u.uniforms);
        n = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a
        }), r = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a,
            morphTargets: !0
        }), i = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a,
            skinning: !0
        }), s = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a,
            morphTargets: !0,
            skinning: !0
        }), n._shadowPass = !0, r._shadowPass = !0, i._shadowPass = !0, s._shadowPass = !0
    }, this.render = function (e, n) {
        if (!t.shadowMapEnabled || !t.shadowMapAutoUpdate)return;
        this.update(e, n)
    }, this.update = function (a, f) {
        var v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O = [], M = 0, _ = null;
        e.clearColor(1, 1, 1, 1), e.disable(e.BLEND), e.enable(e.CULL_FACE), e.frontFace(e.CCW), t.shadowMapCullFace === THREE.CullFaceFront ? e.cullFace(e.FRONT) : e.cullFace(e.BACK), t.setDepthTest(!0);
        for (v = 0, m = a.__lights.length; v < m; v++) {
            L = a.__lights[v];
            if (!L.castShadow)continue;
            if (L instanceof THREE.DirectionalLight && L.shadowCascade)for (b = 0; b < L.shadowCascadeCount; b++) {
                var D;
                if (!L.shadowCascadeArray[b]) {
                    D = c(L, b), D.originalCamera = f;
                    var P = new THREE.Gyroscope;
                    P.position = L.shadowCascadeOffset, P.add(D), P.add(D.target), f.add(P), L.shadowCascadeArray[b] = D, 0
                } else D = L.shadowCascadeArray[b];
                h(L, b), O[M] = D, M++
            } else O[M] = L, M++
        }
        for (v = 0, m = O.length; v < m; v++) {
            L = O[v];
            if (!L.shadowMap) {
                var H = THREE.LinearFilter;
                t.shadowMapType === THREE.PCFSoftShadowMap && (H = THREE.NearestFilter);
                var B = {minFilter: H, magFilter: H, format: THREE.RGBAFormat};
                L.shadowMap = new THREE.WebGLRenderTarget(L.shadowMapWidth, L.shadowMapHeight, B), L.shadowMapSize = new THREE.Vector2(L.shadowMapWidth, L.shadowMapHeight), L.shadowMatrix = new THREE.Matrix4
            }
            if (!L.shadowCamera) {
                if (L instanceof THREE.SpotLight) L.shadowCamera = new THREE.PerspectiveCamera(L.shadowCameraFov, L.shadowMapWidth / L.shadowMapHeight, L.shadowCameraNear, L.shadowCameraFar); else {
                    if (!(L instanceof THREE.DirectionalLight)) {
                        0;
                        continue
                    }
                    L.shadowCamera = new THREE.OrthographicCamera(L.shadowCameraLeft, L.shadowCameraRight, L.shadowCameraTop, L.shadowCameraBottom, L.shadowCameraNear, L.shadowCameraFar)
                }
                a.add(L.shadowCamera), a.autoUpdate === !0 && a.updateMatrixWorld()
            }
            L.shadowCameraVisible && !L.cameraHelper && (L.cameraHelper = new THREE.CameraHelper(L.shadowCamera), L.shadowCamera.add(L.cameraHelper)), L.isVirtual && D.originalCamera == f && p(f, L), w = L.shadowMap, E = L.shadowMatrix, S = L.shadowCamera, S.position.getPositionFromMatrix(L.matrixWorld), l.getPositionFromMatrix(L.target.matrixWorld), S.lookAt(l), S.updateMatrixWorld(), S.matrixWorldInverse.getInverse(S.matrixWorld), L.cameraHelper && (L.cameraHelper.visible = L.shadowCameraVisible), L.shadowCameraVisible && L.cameraHelper.update(), E.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), E.multiply(S.projectionMatrix), E.multiply(S.matrixWorldInverse), u.multiplyMatrices(S.projectionMatrix, S.matrixWorldInverse), o.setFromMatrix(u), t.setRenderTarget(w), t.clear(), A = a.__webglObjects;
            for (g = 0, y = A.length; g < y; g++)C = A[g], k = C.object, C.render = !1, k.visible && k.castShadow && (!(k instanceof THREE.Mesh || k instanceof THREE.ParticleSystem) || !k.frustumCulled || o.intersectsObject(k)) && (k._modelViewMatrix.multiplyMatrices(S.matrixWorldInverse, k.matrixWorld), C.render = !0);
            var j, F, I;
            for (g = 0, y = A.length; g < y; g++)C = A[g], C.render && (k = C.object, T = C.buffer, j = d(k), F = k.geometry.morphTargets.length > 0 && j.morphTargets, I = k instanceof THREE.SkinnedMesh && j.skinning, k.customDepthMaterial ? N = k.customDepthMaterial : I ? N = F ? s : i : F ? N = r : N = n, T instanceof THREE.BufferGeometry ? t.renderBufferDirect(S, a.__lights, _, N, T, k) : t.renderBuffer(S, a.__lights, _, N, T, k));
            A = a.__webglObjectsImmediate;
            for (g = 0, y = A.length; g < y; g++)C = A[g], k = C.object, k.visible && k.castShadow && (k._modelViewMatrix.multiplyMatrices(S.matrixWorldInverse, k.matrixWorld), t.renderImmediateObject(S, a.__lights, _, n, k))
        }
        var q = t.getClearColor(), R = t.getClearAlpha();
        e.clearColor(q.r, q.g, q.b, R), e.enable(e.BLEND), t.shadowMapCullFace === THREE.CullFaceFront && e.cullFace(e.BACK)
    }
},THREE.ShadowMapPlugin.__projector = new THREE.Projector,THREE.SpritePlugin = function () {
    function i(t, n) {
        var r = e.createProgram(), i = e.createShader(e.FRAGMENT_SHADER), s = e.createShader(e.VERTEX_SHADER),
            o = "precision " + n + " float;\n";
        return e.shaderSource(i, o + t.fragmentShader), e.shaderSource(s, o + t.vertexShader), e.compileShader(i), e.compileShader(s), e.attachShader(r, i), e.attachShader(r, s), e.linkProgram(r), r
    }

    function s(e, t) {
        return e.z !== t.z ? t.z - e.z : t.id - e.id
    }

    var e, t, n, r = {};
    this.init = function (s) {
        e = s.context, t = s, n = s.getPrecision(), r.vertices = new Float32Array(16), r.faces = new Uint16Array(6);
        var o = 0;
        r.vertices[o++] = -1, r.vertices[o++] = -1, r.vertices[o++] = 0, r.vertices[o++] = 0, r.vertices[o++] = 1, r.vertices[o++] = -1, r.vertices[o++] = 1, r.vertices[o++] = 0, r.vertices[o++] = 1, r.vertices[o++] = 1, r.vertices[o++] = 1, r.vertices[o++] = 1, r.vertices[o++] = -1, r.vertices[o++] = 1, r.vertices[o++] = 0, r.vertices[o++] = 1, o = 0, r.faces[o++] = 0, r.faces[o++] = 1, r.faces[o++] = 2, r.faces[o++] = 0, r.faces[o++] = 2, r.faces[o++] = 3, r.vertexBuffer = e.createBuffer(), r.elementBuffer = e.createBuffer(), e.bindBuffer(e.ARRAY_BUFFER, r.vertexBuffer), e.bufferData(e.ARRAY_BUFFER, r.vertices, e.STATIC_DRAW), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, r.elementBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, r.faces, e.STATIC_DRAW), r.program = i(THREE.ShaderSprite.sprite, n), r.attributes = {}, r.uniforms = {}, r.attributes.position = e.getAttribLocation(r.program, "position"), r.attributes.uv = e.getAttribLocation(r.program, "uv"), r.uniforms.uvOffset = e.getUniformLocation(r.program, "uvOffset"), r.uniforms.uvScale = e.getUniformLocation(r.program, "uvScale"), r.uniforms.rotation = e.getUniformLocation(r.program, "rotation"), r.uniforms.scale = e.getUniformLocation(r.program, "scale"), r.uniforms.alignment = e.getUniformLocation(r.program, "alignment"), r.uniforms.color = e.getUniformLocation(r.program, "color"), r.uniforms.map = e.getUniformLocation(r.program, "map"), r.uniforms.opacity = e.getUniformLocation(r.program, "opacity"), r.uniforms.useScreenCoordinates = e.getUniformLocation(r.program, "useScreenCoordinates"), r.uniforms.sizeAttenuation = e.getUniformLocation(r.program, "sizeAttenuation"), r.uniforms.screenPosition = e.getUniformLocation(r.program, "screenPosition"), r.uniforms.modelViewMatrix = e.getUniformLocation(r.program, "modelViewMatrix"), r.uniforms.projectionMatrix = e.getUniformLocation(r.program, "projectionMatrix"), r.uniforms.fogType = e.getUniformLocation(r.program, "fogType"), r.uniforms.fogDensity = e.getUniformLocation(r.program, "fogDensity"), r.uniforms.fogNear = e.getUniformLocation(r.program, "fogNear"), r.uniforms.fogFar = e.getUniformLocation(r.program, "fogFar"), r.uniforms.fogColor = e.getUniformLocation(r.program, "fogColor"), r.uniforms.alphaTest = e.getUniformLocation(r.program, "alphaTest")
    }, this.render = function (n, i, o, u) {
        var a = n.__webglSprites, f = a.length;
        if (!f)return;
        var l = r.attributes, c = r.uniforms, h = u / o, p = o * .5, d = u * .5;
        e.useProgram(r.program), e.enableVertexAttribArray(l.position), e.enableVertexAttribArray(l.uv), e.disable(e.CULL_FACE), e.enable(e.BLEND), e.bindBuffer(e.ARRAY_BUFFER, r.vertexBuffer), e.vertexAttribPointer(l.position, 2, e.FLOAT, !1, 16, 0), e.vertexAttribPointer(l.uv, 2, e.FLOAT, !1, 16, 8), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, r.elementBuffer), e.uniformMatrix4fv(c.projectionMatrix, !1, i.projectionMatrix.elements), e.activeTexture(e.TEXTURE0), e.uniform1i(c.map, 0);
        var v = 0, m = 0, g = n.fog;
        g ? (e.uniform3f(c.fogColor, g.color.r, g.color.g, g.color.b), g instanceof THREE.Fog ? (e.uniform1f(c.fogNear, g.near), e.uniform1f(c.fogFar, g.far), e.uniform1i(c.fogType, 1), v = 1, m = 1) : g instanceof THREE.FogExp2 && (e.uniform1f(c.fogDensity, g.density), e.uniform1i(c.fogType, 2), v = 2, m = 2)) : (e.uniform1i(c.fogType, 0), v = 0, m = 0);
        var y, b, w, E, S, x, T = [];
        for (y = 0; y < f; y++) {
            b = a[y], w = b.material;
            if (!b.visible || w.opacity === 0)continue;
            w.useScreenCoordinates ? b.z = -b.position.z : (b._modelViewMatrix.multiplyMatrices(i.matrixWorldInverse, b.matrixWorld), b.z = -b._modelViewMatrix.elements[14])
        }
        a.sort(s);
        for (y = 0; y < f; y++) {
            b = a[y], w = b.material;
            if (!b.visible || w.opacity === 0)continue;
            w.map && w.map.image && w.map.image.width && (e.uniform1f(c.alphaTest, w.alphaTest), w.useScreenCoordinates === !0 ? (e.uniform1i(c.useScreenCoordinates, 1), e.uniform3f(c.screenPosition, (b.position.x * t.devicePixelRatio - p) / p, (d - b.position.y * t.devicePixelRatio) / d, Math.max(0, Math.min(1, b.position.z))), T[0] = t.devicePixelRatio, T[1] = t.devicePixelRatio) : (e.uniform1i(c.useScreenCoordinates, 0), e.uniform1i(c.sizeAttenuation, w.sizeAttenuation ? 1 : 0), e.uniformMatrix4fv(c.modelViewMatrix, !1, b._modelViewMatrix.elements), T[0] = 1, T[1] = 1), n.fog && w.fog ? x = m : x = 0, v !== x && (e.uniform1i(c.fogType, x), v = x), S = 1 / (w.scaleByViewport ? u : 1), T[0] *= S * h * b.scale.x, T[1] *= S * b.scale.y, e.uniform2f(c.uvScale, w.uvScale.x, w.uvScale.y), e.uniform2f(c.uvOffset, w.uvOffset.x, w.uvOffset.y), e.uniform2f(c.alignment, w.alignment.x, w.alignment.y), e.uniform1f(c.opacity, w.opacity), e.uniform3f(c.color, w.color.r, w.color.g, w.color.b), e.uniform1f(c.rotation, b.rotation), e.uniform2fv(c.scale, T), t.setBlending(w.blending, w.blendEquation, w.blendSrc, w.blendDst), t.setDepthTest(w.depthTest), t.setDepthWrite(w.depthWrite), t.setTexture(w.map, 0), e.drawElements(e.TRIANGLES, 6, e.UNSIGNED_SHORT, 0))
        }
        e.enable(e.CULL_FACE)
    }
},THREE.DepthPassPlugin = function () {
    function a(e) {
        return e.material instanceof THREE.MeshFaceMaterial ? e.material.materials[0] : e.material
    }

    this.enabled = !1, this.renderTarget = null;
    var e, t, n, r, i, s, o = new THREE.Frustum, u = new THREE.Matrix4;
    this.init = function (o) {
        e = o.context, t = o;
        var u = THREE.ShaderLib.depthRGBA, a = THREE.UniformsUtils.clone(u.uniforms);
        n = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a
        }), r = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a,
            morphTargets: !0
        }), i = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a,
            skinning: !0
        }), s = new THREE.ShaderMaterial({
            fragmentShader: u.fragmentShader,
            vertexShader: u.vertexShader,
            uniforms: a,
            morphTargets: !0,
            skinning: !0
        }), n._shadowPass = !0, r._shadowPass = !0, i._shadowPass = !0, s._shadowPass = !0
    }, this.render = function (e, t) {
        if (!this.enabled)return;
        this.update(e, t)
    }, this.update = function (f, l) {
        var c, h, p, d, v, m, g, y, b, w, E, S, x = null;
        e.clearColor(1, 1, 1, 1), e.disable(e.BLEND), t.setDepthTest(!0), f.autoUpdate === !0 && f.updateMatrixWorld(), l.matrixWorldInverse.getInverse(l.matrixWorld), u.multiplyMatrices(l.projectionMatrix, l.matrixWorldInverse), o.setFromMatrix(u), t.setRenderTarget(this.renderTarget), t.clear(), S = f.__webglObjects;
        for (p = 0, d = S.length; p < d; p++)b = S[p], w = b.object, b.render = !1, w.visible && (!(w instanceof THREE.Mesh || w instanceof THREE.ParticleSystem) || !w.frustumCulled || o.intersectsObject(w)) && (w._modelViewMatrix.multiplyMatrices(l.matrixWorldInverse, w.matrixWorld), b.render = !0);
        var T, N, C;
        for (p = 0, d = S.length; p < d; p++) {
            b = S[p];
            if (b.render) {
                w = b.object, g = b.buffer;
                if (w instanceof THREE.ParticleSystem && !w.customDepthMaterial)continue;
                T = a(w), T && t.setMaterialFaces(w.material), N = w.geometry.morphTargets.length > 0 && T.morphTargets, C = w instanceof THREE.SkinnedMesh && T.skinning, w.customDepthMaterial ? y = w.customDepthMaterial : C ? y = N ? s : i : N ? y = r : y = n, g instanceof THREE.BufferGeometry ? t.renderBufferDirect(l, f.__lights, x, y, g, w) : t.renderBuffer(l, f.__lights, x, y, g, w)
            }
        }
        S = f.__webglObjectsImmediate;
        for (p = 0, d = S.length; p < d; p++)b = S[p], w = b.object, w.visible && (w._modelViewMatrix.multiplyMatrices(l.matrixWorldInverse, w.matrixWorld), t.renderImmediateObject(l, f.__lights, x, n, w));
        var k = t.getClearColor(), L = t.getClearAlpha();
        e.clearColor(k.r, k.g, k.b, L), e.enable(e.BLEND)
    }
},THREE.ShaderFlares = {
    lensFlareVertexTexture: {
        vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
    },
    lensFlare: {
        vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
        fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
    }
},THREE.ShaderSprite = {
    sprite: {
        vertexShader: ["uniform int useScreenCoordinates;", "uniform int sizeAttenuation;", "uniform vec3 screenPosition;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 alignment;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position + alignment;", "vec2 rotatedPosition;", "rotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;", "rotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;", "vec4 finalPosition;", "if( useScreenCoordinates != 0 ) {", "finalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );", "} else {", "finalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition * ( sizeAttenuation == 1 ? 1.0 : finalPosition.z );", "}", "gl_Position = finalPosition;", "}"].join("\n"),
        fragmentShader: ["uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")
    }
},define("three", function (e) {
    return function () {
        var t, n;
        return t || e.THREE
    }
}(this)),define("core/BaseObject", ["Class", "three"], function (e, t) {
    var n = new e({
        doNotEncapsulate: !0, initialize: function (e) {
            this.setParams(e)
        }, setParams: function (e) {
            if (e === undefined)return;
            for (var n in e) {
                var r = e[n];
                if (r === undefined)continue;
                if (n in this) {
                    var i = this[n];
                    i instanceof t.Color ? i.set(r) : i instanceof t.Vector3 && r instanceof t.Vector3 ? i.copy(r) : this[n] = r
                }
            }
        }
    });
    return n
});
var datCustom = datCustom || {};
datCustom.gui = datCustom.gui || {}, datCustom.utils = datCustom.utils || {}, datCustom.controllers = datCustom.controllers || {}, datCustom.dom = datCustom.dom || {}, datCustom.color = datCustom.color || {}, datCustom.utils.css = function () {
    return {
        load: function (e, t) {
            t = t || document;
            var n = t.createElement("link");
            n.type = "text/css", n.rel = "stylesheet", n.href = e, t.getElementsByTagName("head")[0].appendChild(n)
        }, inject: function (e, t) {
            t = t || document;
            var n = document.createElement("style");
            n.type = "text/css", n.innerHTML = e, t.getElementsByTagName("head")[0].appendChild(n)
        }
    }
}(),
datCustom.utils.common = function () {
    var e = Array.prototype.forEach, t = Array.prototype.slice;
    return {
        BREAK: {}, extend: function (e) {
            return this.each(t.call(arguments, 1), function (t) {
                for (var n in t)this.isUndefined(t[n]) || (e[n] = t[n])
            }, this), e
        }, defaults: function (e) {
            return this.each(t.call(arguments, 1), function (t) {
                for (var n in t)this.isUndefined(e[n]) && (e[n] = t[n])
            }, this), e
        }, compose: function () {
            var e = t.call(arguments);
            return function () {
                var n = t.call(arguments);
                for (var r = e.length - 1; r >= 0; r--)n = [e[r].apply(this, n)];
                return n[0]
            }
        }, each: function (t, n, r) {
            if (e && t.forEach === e) t.forEach(n, r); else if (t.length === t.length + 0) {
                for (var i = 0, s = t.length; i < s; i++)if (i in t && n.call(r, t[i], i) === this.BREAK)return
            } else for (var i in t)if (n.call(r, t[i], i) === this.BREAK)return
        }, defer: function (e) {
            setTimeout(e, 0)
        }, toArray: function (e) {
            return e.toArray ? e.toArray() : t.call(e)
        }, isUndefined: function (e) {
            return e === undefined
        }, isNull: function (e) {
            return e === null
        }, isNaN: function (e) {
            return e !== e
        }, isArray: Array.isArray || function (e) {
            return e.constructor === Array
        }, isObject: function (e) {
            return e === Object(e)
        }, isNumber: function (e) {
            return e === e + 0
        }, isString: function (e) {
            return e === e + ""
        }, isBoolean: function (e) {
            return e === !1 || e === !0
        }, isFunction: function (e) {
            return Object.prototype.toString.call(e) === "[object Function]"
        }
    }
}(),
datCustom.controllers.Controller = function (e) {
    var t = function (e, t) {
        this.initialValue = e[t], this.domElement = document.createElement("div"), this.object = e, this.property = t, this.__onChange = undefined, this.__onFinishChange = undefined
    };
    return e.extend(t.prototype, {
        onChange: function (e) {
            return this.__onChange = e, this
        }, onFinishChange: function (e) {
            return this.__onFinishChange = e, this
        }, setValue: function (e) {
            return this.object[this.property] = e, this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this
        }, getValue: function () {
            return this.object[this.property]
        }, updateDisplay: function () {
            return this
        }, isModified: function () {
            return this.initialValue !== this.getValue()
        }
    }), t
}(datCustom.utils.common),
datCustom.dom.dom = function (e) {
    function i(t) {
        if (t === "0" || e.isUndefined(t))return 0;
        var n = t.match(r);
        return e.isNull(n) ? 0 : parseFloat(n[1])
    }

    var t = {
        HTMLEvents: ["change"],
        MouseEvents: ["click","mousedown", "mouseup", "mouseover"],
        KeyboardEvents: ["keydown"]
    }, n = {};
    e.each(t, function (t, r) {
        e.each(t, function (e) {
            n[e] = r
        })
    });
    var r = /(\d+(\.\d+)?)px/, s = {
        makeSelectable: function (e, t) {
            if (e === undefined || e.style === undefined)return;
            e.onselectstart = t ? function () {
                return !1
            } : function () {
            }, e.style.MozUserSelect = t ? "auto" : "none", e.style.KhtmlUserSelect = t ? "auto" : "none", e.unselectable = t ? "on" : "off"
        }, makeFullscreen: function (t, n, r) {
            e.isUndefined(n) && (n = !0), e.isUndefined(r) && (r = !0), t.style.position = "absolute", n && (t.style.left = 0, t.style.right = 0), r && (t.style.top = 0, t.style.bottom = 0)
        }, fakeEvent: function (t, r, i, s) {
            i = i || {};
            var o = n[r];
            if (!o)throw new Error("Event type " + r + " not supported.");
            var u = document.createEvent(o);
            switch (o) {
                case"MouseEvents":
                    var a = i.x || i.clientX || 0, f = i.y || i.clientY || 0;
                    u.initMouseEvent(r, i.bubbles || !1, i.cancelable || !0, window, i.clickCount || 1, 0, 0, a, f, !1, !1, !1, !1, 0, null);
                    break;
                case"KeyboardEvents":
                    var l = u.initKeyboardEvent || u.initKeyEvent;
                    e.defaults(i, {
                        cancelable: !0,
                        ctrlKey: !1,
                        altKey: !1,
                        shiftKey: !1,
                        metaKey: !1,
                        keyCode: undefined,
                        charCode: undefined
                    }), l(r, i.bubbles || !1, i.cancelable, window, i.ctrlKey, i.altKey, i.shiftKey, i.metaKey, i.keyCode, i.charCode);
                    break;
                default:
                    u.initEvent(r, i.bubbles || !1, i.cancelable || !0)
            }
            e.defaults(u, s), t.dispatchEvent(u)
        }, bind: function (e, t, n, r) {
            return r = r || !1, e.addEventListener ? e.addEventListener(t, n, r) : e.attachEvent && e.attachEvent("on" + t, n), s
        }, unbind: function (e, t, n, r) {
            return r = r || !1, e.removeEventListener ? e.removeEventListener(t, n, r) : e.detachEvent && e.detachEvent("on" + t, n), s
        }, addClass: function (e, t) {
            if (e.className === undefined) e.className = t; else if (e.className !== t) {
                var n = e.className.split(/ +/);
                n.indexOf(t) == -1 && (n.push(t), e.className = n.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
            }
            return s
        }, removeClass: function (e, t) {
            if (t) {
                if (e.className !== undefined)if (e.className === t) e.removeAttribute("class"); else {
                    var n = e.className.split(/ +/), r = n.indexOf(t);
                    r != -1 && (n.splice(r, 1), e.className = n.join(" "))
                }
            } else e.className = undefined;
            return s
        }, hasClass: function (e, t) {
            return (new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)")).test(e.className) || !1
        }, getWidth: function (e) {
            var t = getComputedStyle(e);
            return i(t["border-left-width"]) + i(t["border-right-width"]) + i(t["padding-left"]) + i(t["padding-right"]) + i(t.width)
        }, getHeight: function (e) {
            var t = getComputedStyle(e);
            return i(t["border-top-width"]) + i(t["border-bottom-width"]) + i(t["padding-top"]) + i(t["padding-bottom"]) + i(t.height)
        }, getOffset: function (e) {
            var t = {left: 0, top: 0};
            if (e.offsetParent)do t.left += e.offsetLeft, t.top += e.offsetTop; while (e = e.offsetParent);
            return t
        }, isActive: function (e) {
            return e === document.activeElement && (e.type || e.href)
        }
    };
    return s
}(datCustom.utils.common),
datCustom.controllers.OptionController = function (e, t, n) {
    var r = function (e, i, s) {
        r.superclass.call(this, e, i);
        var o = this;
        this.__select = document.createElement("select");
        if (n.isArray(s)) {
            var u = {};
            n.each(s, function (e) {
                u[e] = e
            }), s = u
        }
        n.each(s, function (e, t) {
            var n = document.createElement("option");
            n.innerHTML = t, n.setAttribute("value", e), o.__select.appendChild(n)
        }), this.updateDisplay(), t.bind(this.__select, "change", function () {
            var e = this.options[this.selectedIndex].value;
            o.setValue(e)
        }), this.domElement.appendChild(this.__select)
    };
    return r.superclass = e, n.extend(r.prototype, e.prototype, {
        setValue: function (e) {
            var t = r.superclass.prototype.setValue.call(this, e);
            return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), t
        }, updateDisplay: function () {
            return this.__select.value = this.getValue(), r.superclass.prototype.updateDisplay.call(this)
        }
    }), r
}(datCustom.controllers.Controller, datCustom.dom.dom, datCustom.utils.common),
datCustom.controllers.NumberController = function (e, t) {
    function r(e) {
        return e = e.toString(), e.indexOf(".") > -1 ? e.length - e.indexOf(".") - 1 : 0
    }

    var n = function (e, i, s) {
        n.superclass.call(this, e, i), s = s || {}, this.__min = s.min, this.__max = s.max, this.__step = s.step, t.isUndefined(this.__step) ? this.initialValue == 0 ? this.__impliedStep = 1 : this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(this.initialValue)) / Math.LN10)) / 10 : this.__impliedStep = this.__step, this.__precision = r(this.__impliedStep)
    };
    return n.superclass = e, t.extend(n.prototype, e.prototype, {
        setValue: function (e) {
            return this.__min !== undefined && e < this.__min ? e = this.__min : this.__max !== undefined && e > this.__max && (e = this.__max), this.__step !== undefined && e % this.__step != 0 && (e = Math.round(e / this.__step) * this.__step), n.superclass.prototype.setValue.call(this, e)
        }, min: function (e) {
            return this.__min = e, this
        }, max: function (e) {
            return this.__max = e, this
        }, step: function (e) {
            return this.__step = e, this.__impliedStep = e, this.__precision = r(e), this
        }
    }), n
}(datCustom.controllers.Controller, datCustom.utils.common),
datCustom.controllers.NumberControllerBox = function (e, t, n) {
    function i(e, t) {
        var n = Math.pow(10, t);
        return Math.round(e * n) / n
    }

    var r = function (e, i, s) {
        function a() {
            var e = parseFloat(o.__input.value);
            n.isNaN(e) || o.setValue(e)
        }

        function f() {
            a(), o.__onFinishChange && o.__onFinishChange.call(o, o.getValue())
        }

        function l(e) {

        }

        function c(e) {
            var t = u - e.clientY;
            o.setValue(o.getValue() + t * o.__impliedStep), u = e.clientY
        }

        function h() {

        }

        this.__truncationSuspended = !1, r.superclass.call(this, e, i, s);
        var o = this, u;
        this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), t.bind(this.__input, "change", a), t.bind(this.__input, "blur", f), t.bind(this.__input, "mousedown", l), t.bind(this.__input, "keydown", function (e) {
            e.keyCode === 13 && (o.__truncationSuspended = !0, this.blur(), o.__truncationSuspended = !1)
        }), this.updateDisplay(), this.domElement.appendChild(this.__input)
    };
    return r.superclass = e, n.extend(r.prototype, e.prototype, {
        updateDisplay: function () {
            return this.__input.value = this.__truncationSuspended ? this.getValue() : i(this.getValue(), this.__precision), r.superclass.prototype.updateDisplay.call(this)
        }
    }), r
}(datCustom.controllers.NumberController, datCustom.dom.dom, datCustom.utils.common),
datCustom.controllers.NumberControllerSlider = function (e, t, n, r, i) {
    function o(e, t, n, r, i) {
        return r + (i - r) * ((e - t) / (n - t))
    }

    var s = function (e, n, r, i, u) {


        s.superclass.call(this, e, n, {min: r, max: i, step: u});
        var a = this;
        this.__background = document.createElement("div"), this.__foreground = document.createElement("div"), t.bind(this.__background, "mousedown", f), t.addClass(this.__background, "slider"), t.addClass(this.__foreground, "slider-fg"), this.updateDisplay(), this.__background.appendChild(this.__foreground), this.domElement.appendChild(this.__background)
    };
    return s.superclass = e, s.useDefaultStyles = function () {
        n.inject(i)
    }, r.extend(s.prototype, e.prototype, {
        updateDisplay: function () {
            var e = (this.getValue() - this.__min) / (this.__max - this.__min);
            return this.__foreground.style.width = e * 100 + "%", s.superclass.prototype.updateDisplay.call(this)
        }
    }), s
}(datCustom.controllers.NumberController, datCustom.dom.dom, datCustom.utils.css, datCustom.utils.common, ".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),
 datCustom.controllers.FunctionController = function (e, t, n) {
    var r = function (e, n, i) {
        r.superclass.call(this, e, n);
        var s = this;
        this.__button = document.createElement("div"), this.__button.innerHTML = i === undefined ? "Fire" : i, t.bind(this.__button, "click", function (e) {
            return e.preventDefault(), s.fire(), !1
        }), t.addClass(this.__button, "button"), this.domElement.appendChild(this.__button)
    };
    return r.superclass = e, n.extend(r.prototype, e.prototype, {
        fire: function () {
            this.__onChange && this.__onChange.call(this), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.getValue().call(this.object)
        }
    }), r
}(datCustom.controllers.Controller, datCustom.dom.dom, datCustom.utils.common),
datCustom.controllers.BooleanController = function (e, t, n) {
    var r = function (e, n) {
        function s() {
            i.setValue(!i.__prev)
        }

        r.superclass.call(this, e, n);
        var i = this;
        this.__prev = this.getValue(), this.__checkbox = document.createElement("input"), this.__checkbox.setAttribute("type", "checkbox"), t.bind(this.__checkbox, "change", s, !1), this.domElement.appendChild(this.__checkbox), this.updateDisplay()
    };
    return r.superclass = e, n.extend(r.prototype, e.prototype, {
        setValue: function (e) {
            var t = r.superclass.prototype.setValue.call(this, e);
            return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), t
        }, updateDisplay: function () {
            return this.getValue() === !0 ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0) : this.__checkbox.checked = !1, r.superclass.prototype.updateDisplay.call(this)
        }
    }), r
}(datCustom.controllers.Controller, datCustom.dom.dom, datCustom.utils.common),
 datCustom.color.toString = function (e) {
    return function (t) {
        if (t.a == 1 || e.isUndefined(t.a)) {
            var n = t.hex.toString(16);
            while (n.length < 6)n = "0" + n;
            return "#" + n
        }
        return "rgba(" + Math.round(t.r) + "," + Math.round(t.g) + "," + Math.round(t.b) + "," + t.a + ")"
    }
}(datCustom.utils.common),
datCustom.color.interpret = function (e, t) {
    var n, r, i = function () {
        r = !1;
        var e = arguments.length > 1 ? t.toArray(arguments) : arguments[0];
        return t.each(s, function (i) {
            if (i.litmus(e))return t.each(i.conversions, function (i, s) {
                n = i.read(e);
                if (r === !1 && n !== !1)return r = n, n.conversionName = s, n.conversion = i, t.BREAK
            }), t.BREAK
        }), r
    }, s = [{
        litmus: t.isString, conversions: {
            THREE_CHAR_HEX: {
                read: function (e) {
                    var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                    return t === null ? !1 : {
                        space: "HEX",
                        hex: parseInt("0x" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString())
                    }
                }, write: e
            }, SIX_CHAR_HEX: {
                read: function (e) {
                    var t = e.match(/^#([A-F0-9]{6})$/i);
                    return t === null ? !1 : {space: "HEX", hex: parseInt("0x" + t[1].toString())}
                }, write: e
            }, CSS_RGB: {
                read: function (e) {
                    var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                    return t === null ? !1 : {
                        space: "RGB",
                        r: parseFloat(t[1]),
                        g: parseFloat(t[2]),
                        b: parseFloat(t[3])
                    }
                }, write: e
            }, CSS_RGBA: {
                read: function (e) {
                    var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                    return t === null ? !1 : {
                        space: "RGB",
                        r: parseFloat(t[1]),
                        g: parseFloat(t[2]),
                        b: parseFloat(t[3]),
                        a: parseFloat(t[4])
                    }
                }, write: e
            }
        }
    }, {
        litmus: t.isNumber, conversions: {
            HEX: {
                read: function (e) {
                    return {space: "HEX", hex: e, conversionName: "HEX"}
                }, write: function (e) {
                    return e.hex
                }
            }
        }
    }, {
        litmus: t.isArray, conversions: {
            RGB_ARRAY: {
                read: function (e) {
                    return e.length != 3 ? !1 : {space: "RGB", r: e[0], g: e[1], b: e[2]}
                }, write: function (e) {
                    return [e.r, e.g, e.b]
                }
            }, RGBA_ARRAY: {
                read: function (e) {
                    return e.length != 4 ? !1 : {space: "RGB", r: e[0], g: e[1], b: e[2], a: e[3]}
                }, write: function (e) {
                    return [e.r, e.g, e.b, e.a]
                }
            }
        }
    }, {
        litmus: t.isObject, conversions: {
            RGBA_OBJ: {
                read: function (e) {
                    return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) && t.isNumber(e.a) ? {
                        space: "RGB",
                        r: e.r,
                        g: e.g,
                        b: e.b,
                        a: e.a
                    } : !1
                }, write: function (e) {
                    return {r: e.r, g: e.g, b: e.b, a: e.a}
                }
            }, RGB_OBJ: {
                read: function (e) {
                    return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) ? {
                        space: "RGB",
                        r: e.r,
                        g: e.g,
                        b: e.b
                    } : !1
                }, write: function (e) {
                    return {r: e.r, g: e.g, b: e.b}
                }
            }, HSVA_OBJ: {
                read: function (e) {
                    return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) && t.isNumber(e.a) ? {
                        space: "HSV",
                        h: e.h,
                        s: e.s,
                        v: e.v,
                        a: e.a
                    } : !1
                }, write: function (e) {
                    return {h: e.h, s: e.s, v: e.v, a: e.a}
                }
            }, HSV_OBJ: {
                read: function (e) {
                    return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) ? {
                        space: "HSV",
                        h: e.h,
                        s: e.s,
                        v: e.v
                    } : !1
                }, write: function (e) {
                    return {h: e.h, s: e.s, v: e.v}
                }
            }
        }
    }];
    return i
}(datCustom.color.toString, datCustom.utils.common),
datCustom.GUI = datCustom.gui.GUI = function (e, t, n, r, i, s, o, u, a, f, l, c, h, p, d) {
    function C(e, t, n, s) {
        if (t[n] === undefined)throw new Error("Object " + t + ' has no property "' + n + '"');
        var o;
        if (s.color) o = new l(t, n); else {
            var u = [t, n].concat(s.factoryArgs);
            o = r.apply(e, u)
        }
        s.before instanceof i && (s.before = s.before.__li), A(e, o), p.addClass(o.domElement, "c");
        var a = document.createElement("span");
        p.addClass(a, "property-name"), a.innerHTML = o.property;
        var f = document.createElement("div");
        f.appendChild(a), f.appendChild(o.domElement);
        var c = k(e, f, s.before);
        return p.addClass(c, N.CLASS_CONTROLLER_ROW), p.addClass(c, typeof o.getValue()), L(e, c, o), e.__controllers.push(o), o
    }

    function k(e, t, n) {
        var r = document.createElement("li");
        return t && r.appendChild(t), n ? e.__ul.insertBefore(r, params.before) : e.__ul.appendChild(r), e.onResize(), r
    }

    function L(e, t, n) {

    }

    function A(e, t) {
        var n = e.getRoot(), r = n.__rememberedObjects.indexOf(t.object);
        if (r != -1) {
            var i = n.__rememberedObjectIndecesToControllers[r];
            i === undefined && (i = {}, n.__rememberedObjectIndecesToControllers[r] = i), i[t.property] = t;
            if (n.load && n.load.remembered) {
                var s = n.load.remembered, o;
                if (s[e.preset]) o = s[e.preset]; else {
                    if (!s[y])return;
                    o = s[y]
                }
                if (o[r] && o[r][t.property] !== undefined) {
                    var u = o[r][t.property];
                    t.initialValue = u, t.setValue(u)
                }
            }
        }
    }

    function O(e, t) {
        return document.location.href + "." + t
    }

    function M(e) {

    }

    function _(e) {

    }

    function D(e, t) {
        e.domElement.style.width = t + "px", e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"), e.__closeButton && (e.__closeButton.style.width = t + "px")
    }

    function P(e, t) {
        var n = {};
        return d.each(e.__rememberedObjects, function (r, i) {
            var s = {}, o = e.__rememberedObjectIndecesToControllers[i];
            d.each(o, function (e, n) {
                s[n] = t ? e.initialValue : e.getValue()
            }), n[i] = s
        }), n
    }

    function H(e, t, n) {
        var r = document.createElement("option");
        r.innerHTML = t, r.value = t, e.__preset_select.appendChild(r), n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1)
    }

    function B(e) {
        for (var t = 0; t < e.__preset_select.length; t++)e.__preset_select[t].value == e.preset && (e.__preset_select.selectedIndex = t)
    }

    function j(e, t) {
        var n = e.__preset_select[e.__preset_select.selectedIndex];
        t ? n.innerHTML = n.value + "*" : n.innerHTML = n.value
    }

    function F(e) {
        e.length != 0 && c(function () {
            F(e)
        }), d.each(e, function (e) {
            e.updateDisplay()
        })
    }

    e.inject(n);
    var v = "dg", m = 72, g = 20, y = "Default", b = function () {
        try {
            return "localStorage" in window && window.localStorage !== null
        } catch (e) {
            return !1
        }
    }(), w, E = !0, S, x = !1, T = [], N = function (e) {
        function u() {
            localStorage.setItem(O(t, "gui"), JSON.stringify(t.getSaveObject()))
        }

        function f() {
            var e = t.getRoot();
            e.width += 1, d.defer(function () {
                e.width -= 1
            })
        }

        var t = this;
        this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), p.addClass(this.domElement, v), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], e = e || {}, e = d.defaults(e, {
            autoPlace: !0,
            width: N.DEFAULT_WIDTH
        }), e = d.defaults(e, {
            resizable: e.autoPlace,
            hideable: e.autoPlace
        }), d.isUndefined(e.load) ? e.load = {preset: y} : e.preset && (e.load.preset = e.preset), d.isUndefined(e.parent) && e.hideable && T.push(this), e.resizable = d.isUndefined(e.parent) && e.resizable, e.autoPlace && d.isUndefined(e.scrollable) && (e.scrollable = !0);
        var n = b && localStorage.getItem(O(this, "isLocal")) === "true";
        Object.defineProperties(this, {
            parent: {
                get: function () {
                    return e.parent
                }
            }, scrollable: {
                get: function () {
                    return e.scrollable
                }
            }, autoPlace: {
                get: function () {
                    return e.autoPlace
                }
            }, preset: {
                get: function () {
                    return t.parent ? t.getRoot().preset : e.load.preset
                }, set: function (n) {
                    t.parent ? t.getRoot().preset = n : e.load.preset = n, B(this), t.revert()
                }
            }, width: {
                get: function () {
                    return e.width
                }, set: function (n) {
                    e.width = n, D(t, n)
                }
            }, name: {
                get: function () {
                    return e.name
                }, set: function (t) {
                    e.name = t, i && (i.innerHTML = e.name)
                }
            }, closed: {
                get: function () {
                    return e.closed
                }, set: function (n) {
                    e.closed = n, e.closed ? p.addClass(t.__ul, N.CLASS_CLOSED) : p.removeClass(t.__ul, N.CLASS_CLOSED), this.onResize(), t.__closeButton && (t.__closeButton.innerHTML = n ? N.TEXT_OPEN : N.TEXT_CLOSED)
                }
            }, load: {
                get: function () {
                    return e.load
                }
            }, useLocalStorage: {
                get: function () {
                    return n
                }, set: function (e) {
                    b && (n = e, e ? p.bind(window, "unload", u) : p.unbind(window, "unload", u), localStorage.setItem(O(t, "isLocal"), e))
                }
            }
        });
        if (d.isUndefined(e.parent)) {
            e.closed = !1, p.addClass(this.domElement, N.CLASS_MAIN), p.makeSelectable(this.domElement, !1);
            if (b && n) {
                t.useLocalStorage = !0;
                var r = localStorage.getItem(O(this, "gui"));
                r && (e.load = JSON.parse(r))
            }
            this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = N.TEXT_CLOSED, p.addClass(this.__closeButton, N.CLASS_CLOSE_BUTTON), this.domElement.appendChild(this.__closeButton), p.bind(this.__closeButton, "click", function () {
                t.closed = !t.closed
            })
        } else {
            e.closed === undefined && (e.closed = !0);
            var i = document.createTextNode(e.name);
            p.addClass(i, "controller-name");
            var s = k(t, i), o = function (e) {
                return e.preventDefault(), t.closed = !t.closed, !1
            };
            p.addClass(this.__ul, N.CLASS_CLOSED), p.addClass(s, "title"), p.bind(s, "click", o), e.closed || (this.closed = !1)
        }
        e.autoPlace && (d.isUndefined(e.parent) && (E && (S = document.createElement("div"), p.addClass(S, v), p.addClass(S, N.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(S), E = !1), S.appendChild(this.domElement), p.addClass(this.domElement, N.CLASS_AUTO_PLACE)), this.parent || D(t, e.width)), p.bind(window, "resize", function () {
            t.onResize()
        }), p.bind(this.__ul, "webkitTransitionEnd", function () {
            t.onResize()
        }), p.bind(this.__ul, "transitionend", function () {
            t.onResize()
        }), p.bind(this.__ul, "oTransitionEnd", function () {
            t.onResize()
        }), this.onResize(), e.resizable && _(this);
        var a = t.getRoot();
        e.parent || f()
    };
    return N.toggleHide = function () {
        x = !x, d.each(T, function (e) {
            e.domElement.style.zIndex = x ? -999 : 999, e.domElement.style.opacity = x ? 0 : 1
        })
    }, N.CLASS_AUTO_PLACE = "a", N.CLASS_AUTO_PLACE_CONTAINER = "ac", N.CLASS_MAIN = "main", N.CLASS_CONTROLLER_ROW = "cr", N.CLASS_TOO_TALL = "taller-than-window", N.CLASS_CLOSED = "closed", N.CLASS_CLOSE_BUTTON = "close-button", N.CLASS_DRAG = "drag", N.DEFAULT_WIDTH = 245, N.TEXT_CLOSED = "Close Controls", N.TEXT_OPEN = "Open Controls", p.bind(window, "keydown", function (e) {
        document.activeElement.type !== "text" && (e.which === m || e.keyCode == m) && N.toggleHide()
    }, !1), d.extend(N.prototype, {
        add: function (e, t) {
            return C(this, e, t, {factoryArgs: Array.prototype.slice.call(arguments, 2)})
        }, addColor: function (e, t) {
            return C(this, e, t, {color: !0})
        }, remove: function (e) {
            this.__ul.removeChild(e.__li), this.__controllers.slice(this.__controllers.indexOf(e), 1);
            var t = this;
            d.defer(function () {
                t.onResize()
            })
        }, destroy: function () {
            this.autoPlace && S.removeChild(this.domElement)
        }, addFolder: function (e) {
            if (this.__folders[e] !== undefined)throw new Error('You already have a folder in this GUI by the name "' + e + '"');
            var t = {name: e, parent: this};
            t.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]);
            var n = new N(t);
            this.__folders[e] = n;
            var r = k(this, n.domElement);
            return p.addClass(r, "folder"), n.li = r, n
        }, removeFolder: function (e, t) {
            var n = this.__folders[e];
            if (!n) {
                if (t)return;
                throw"no folder child to remove!", e
            }
            n.open();
            if (n.hasOwnProperty("__controllers"))for (var r = n.__controllers.length - 1; r >= 0; r--) {
                var i = n.__controllers[r];
                i.label && n.remove(i)
            }
            if (n.hasOwnProperty("__folders"))for (key in n.__folders)try {
                n.removeFolder(n.__folders[key].name)
            } catch (s) {
                0
            }
            n.close(), this.__ul.removeChild(n.li), p.removeClass(n.li, "folder"), this.__folders[e] = undefined, this.onResize()
        }, open: function () {
            this.closed = !1
        }, close: function () {
            this.closed = !0
        }, onResize: function () {
            var e = this.getRoot();
            if (e.scrollable) {
                var t = p.getOffset(e.__ul).top, n = 0;
                d.each(e.__ul.childNodes, function (t) {
                    if (!e.autoPlace || t !== e.__save_row) n += p.getHeight(t)
                }), window.innerHeight - t - g < n ? (p.addClass(e.domElement, N.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - g + "px") : (p.removeClass(e.domElement, N.CLASS_TOO_TALL), e.__ul.style.height = "auto")
            }
            e.__resize_handle && d.defer(function () {
                e.__resize_handle.style.height = e.__ul.offsetHeight + "px"
            }), e.__closeButton && (e.__closeButton.style.width = e.width + "px")
        }, remember: function () {
            d.isUndefined(w) && (w = new h, w.domElement.innerHTML = t);
            if (this.parent)throw new Error("You can only call remember on a top level GUI.");
            var e = this;
            d.each(Array.prototype.slice.call(arguments), function (t) {
                e.__rememberedObjects.length == 0 && M(e), e.__rememberedObjects.indexOf(t) == -1 && e.__rememberedObjects.push(t)
            }), this.autoPlace && D(this, this.width)
        }, getRoot: function () {
            var e = this;
            while (e.parent)e = e.parent;
            return e
        }, getSaveObject: function () {
            var e = this.load;
            return e.closed = this.closed, this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {}), e.remembered[this.preset] = P(this)), e.folders = {}, d.each(this.__folders, function (t, n) {
                e.folders[n] = t.getSaveObject()
            }), e
        }, save: function () {
            this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = P(this), j(this, !1)
        }, saveAs: function (e) {
            this.load.remembered || (this.load.remembered = {}, this.load.remembered[y] = P(this, !0)), this.load.remembered[e] = P(this), this.preset = e, H(this, e, !0)
        }, revert: function (e) {
            d.each(this.__controllers, function (t) {
                this.getRoot().load.remembered ? A(e || this.getRoot(), t) : t.setValue(t.initialValue)
            }, this), d.each(this.__folders, function (e) {
                e.revert(e)
            }), e || j(this.getRoot(), !1)
        }, listen: function (e) {
            var t = this.__listening.length == 0;
            this.__listening.push(e), t && F(this.__listening)
        }
    }), N
}(datCustom.utils.css, '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>datCustom.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>', ".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:2000}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#dd3a20}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#dd3a20 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n", datCustom.controllers.factory = function (e, t, n, r, i, s, o) {
    return function (u, a) {
        var f = u[a];
        if (o.isArray(arguments[2]) || o.isObject(arguments[2]))return new e(u, a, arguments[2]);
        if (o.isNumber(f))return o.isNumber(arguments[2]) && o.isNumber(arguments[3]) ? new n(u, a, arguments[2], arguments[3], arguments[4]) : new t(u, a, {
            min: arguments[2],
            max: arguments[3],
            step: arguments[4]
        });
        if (o.isString(f))return new r(u, a);
        if (o.isFunction(f))return new i(u, a, "");
        if (o.isBoolean(f))return new s(u, a)
    }
}(datCustom.controllers.OptionController, datCustom.controllers.NumberControllerBox, datCustom.controllers.NumberControllerSlider, datCustom.controllers.StringController = function (e, t, n) {
    var r = function (e, n) {
        function s() {
            i.setValue(i.__input.value)
        }

        function o() {
            i.__onFinishChange && i.__onFinishChange.call(i, i.getValue())
        }

        r.superclass.call(this, e, n);
        var i = this;
        this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), t.bind(this.__input, "keyup", s), t.bind(this.__input, "change", s), t.bind(this.__input, "blur", o), t.bind(this.__input, "keydown", function (e) {
            e.keyCode === 13 && this.blur()
        }), this.updateDisplay(), this.domElement.appendChild(this.__input)
    };
    return r.superclass = e, n.extend(r.prototype, e.prototype, {
        updateDisplay: function () {
            return t.isActive(this.__input) || (this.__input.value = this.getValue()), r.superclass.prototype.updateDisplay.call(this)
        }
    }), r
}(datCustom.controllers.Controller, datCustom.dom.dom, datCustom.utils.common), datCustom.controllers.FunctionController, datCustom.controllers.BooleanController, datCustom.utils.common), datCustom.controllers.Controller, datCustom.controllers.BooleanController, datCustom.controllers.FunctionController, datCustom.controllers.NumberControllerBox, datCustom.controllers.NumberControllerSlider, datCustom.controllers.OptionController, datCustom.controllers.ColorController = function (e, t, n, r, i) {
    function u(e, t, n, r) {
        e.style.background = "", i.each(o, function (i) {
            e.style.cssText += "background: " + i + "linear-gradient(" + t + ", " + n + " 0%, " + r + " 100%); "
        })
    }

    function a(e) {
        e.style.background = "", e.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", e.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"
    }

    var s = function (e, o) {
	}
    return s
}(datCustom.controllers.Controller, datCustom.dom.dom, datCustom.color.Color = function (e, t, n, r) {
    function s(e, t, n) {
        Object.defineProperty(e, t, {
            get: function () {
                return this.__state.space === "RGB" ? this.__state[t] : (u(this, t, n), this.__state[t])
            }, set: function (e) {
                this.__state.space !== "RGB" && (u(this, t, n), this.__state.space = "RGB"), this.__state[t] = e
            }
        })
    }

    function o(e, t) {
        Object.defineProperty(e, t, {
            get: function () {
                return this.__state.space === "HSV" ? this.__state[t] : (a(this), this.__state[t])
            }, set: function (e) {
                this.__state.space !== "HSV" && (a(this), this.__state.space = "HSV"), this.__state[t] = e
            }
        })
    }

    function u(e, n, i) {
        if (e.__state.space === "HEX") e.__state[n] = t.component_from_hex(e.__state.hex, i); else {
            if (e.__state.space !== "HSV")throw"Corrupted color state";
            r.extend(e.__state, t.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v))
        }
    }

    function a(e) {
        var n = t.rgb_to_hsv(e.r, e.g, e.b);
        r.extend(e.__state, {
            s: n.s,
            v: n.v
        }), r.isNaN(n.h) ? r.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = n.h
    }

    var i = function () {
        this.__state = e.apply(this, arguments);
        if (this.__state === !1)throw"Failed to interpret color arguments";
        this.__state.a = this.__state.a || 1
    };
    return i.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], r.extend(i.prototype, {
        toString: function () {
            return n(this)
        }, toOriginal: function () {
            return this.__state.conversion.write(this)
        }
    }), s(i.prototype, "r", 2), s(i.prototype, "g", 1), s(i.prototype, "b", 0), o(i.prototype, "h"), o(i.prototype, "s"), o(i.prototype, "v"), Object.defineProperty(i.prototype, "a", {
        get: function () {
            return this.__state.a
        }, set: function (e) {
            this.__state.a = e
        }
    }), Object.defineProperty(i.prototype, "hex", {
        get: function () {
            return !this.__state.space !== "HEX" && (this.__state.hex = t.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
        }, set: function (e) {
            this.__state.space = "HEX", this.__state.hex = e
        }
    }), i
}(datCustom.color.interpret, datCustom.color.math = function () {
    var e;
    return {
        hsv_to_rgb: function (e, t, n) {
            var r = Math.floor(e / 60) % 6, i = e / 60 - Math.floor(e / 60), s = n * (1 - t), o = n * (1 - i * t),
                u = n * (1 - (1 - i) * t), a = [[n, u, s], [o, n, s], [s, n, u], [s, o, n], [u, s, n], [n, s, o]][r];
            return {r: a[0] * 255, g: a[1] * 255, b: a[2] * 255}
        }, rgb_to_hsv: function (e, t, n) {
            var r = Math.min(e, t, n), i = Math.max(e, t, n), s = i - r, o, u;
            return i == 0 ? {
                h: NaN,
                s: 0,
                v: 0
            } : (u = s / i, e == i ? o = (t - n) / s : t == i ? o = 2 + (n - e) / s : o = 4 + (e - t) / s, o /= 6, o < 0 && (o += 1), {
                h: o * 360,
                s: u,
                v: i / 255
            })
        }, rgb_to_hex: function (e, t, n) {
            var r = this.hex_with_component(0, 2, e);
            return r = this.hex_with_component(r, 1, t), r = this.hex_with_component(r, 0, n), r
        }, component_from_hex: function (e, t) {
            return e >> t * 8 & 255
        }, hex_with_component: function (t, n, r) {
            return r << (e = n * 8) | t & ~(255 << e)
        }
    }
}(), datCustom.color.toString, datCustom.utils.common), datCustom.color.interpret, datCustom.utils.common), datCustom.utils.requestAnimationFrame = function () {
    return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e, t) {
            window.setTimeout(e, 1e3 / 60)
        }
}(), datCustom.dom.CenteredDiv = function (e, t) {
    function r(e) {
        0
    }

    var n = function () {
        this.backgroundElement = document.createElement("div"), t.extend(this.backgroundElement.style, {
            backgroundColor: "rgba(0,0,0,0.8)",
            top: 0,
            left: 0,
            display: "none",
            zIndex: "1000",
            opacity: 0,
            WebkitTransition: "opacity 0.2s linear"
        }), e.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), t.extend(this.domElement.style, {
            position: "fixed",
            display: "none",
            zIndex: "1001",
            opacity: 0,
            WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
        }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
        var n = this;
        e.bind(this.backgroundElement, "click", function () {
            n.hide()
        })
    };
    return n.prototype.show = function () {
        var e = this;
        this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), t.defer(function () {
            e.backgroundElement.style.opacity = 1, e.domElement.style.opacity = 1, e.domElement.style.webkitTransform = "scale(1)"
        })
    }, n.prototype.hide = function () {
        var t = this, n = function () {
            t.domElement.style.display = "none", t.backgroundElement.style.display = "none", e.unbind(t.domElement, "webkitTransitionEnd", n), e.unbind(t.domElement, "transitionend", n), e.unbind(t.domElement, "oTransitionEnd", n)
        };
        e.bind(this.domElement, "webkitTransitionEnd", n), e.bind(this.domElement, "transitionend", n), e.bind(this.domElement, "oTransitionEnd", n), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"
    }, n.prototype.layout = function () {
        this.domElement.style.left = window.innerWidth / 2 - e.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - e.getHeight(this.domElement) / 2 + "px"
    }, n
}(datCustom.dom.dom, datCustom.utils.common), datCustom.dom.dom, datCustom.utils.common), define("GUI", function (e) {
    return function () {
        var t, n;
        return t || e.datCustom
    }
}(this)), define("utils/ColorUtils", ["Class", "three"], function (e, t) {
    var n = new e({});
    return n.hexToR = function (e) {
        return parseInt(n.cutHex(e).substring(0, 2), 16)
    }, n.hexToG = function (e) {
        return parseInt(n.cutHex(e).substring(2, 4), 16)
    }, n.hexToB = function (e) {
        return parseInt(n.cutHex(e).substring(4, 6), 16)
    }, n.cutHex = function (e) {
        return e.charAt(0) == "#" ? e.substring(1, 7) : e
    }, n.isHex = function (e) {
        if (typeof e == "string" || e instanceof String)return e.charAt(0) == "#" && e.length == 7
    }, n.getHexNumber = function (e) {
        var n = new t.Color(e);
        return n.getHex()
    }, n.incrementH = function (e, t) {
        n.incrementHSL(e, "h", t)
    }, n.incrementS = function (e, t) {
        n.incrementHSL(e, "s", t)
    }, n.incrementL = function (e, t) {
        n.incrementHSL(e, "l", t)
    }, n.incrementHSL = function (e, t, n) {
        var r = e.getHSL();
        r[t] += n, e.setHSL(r.h, r.s, r.l)
    }, n
}), define("utils/ModelUtils", ["Class", "Signal", "utils/ColorUtils"], function (e, t, n) {
    var r = new e({});
    return r.debug = !1, r.encapsulate = function (e, t) {
        if (e.hasOwnProperty(t)) {
            var n = {value: e[t]};
            return e[t] = n, n
        }
        throw 0, "bad encapsulation attempt: object does not have value called: " + t
    }, r.activate = function (e) {
        e.hasOwnProperty("value") && !e.hasOwnProperty("_value") && (e.onChangedSignal = new t, e._value = e.value, Object.defineProperty(e, "value", {
            set: function (e) {
                this._value = e, this.onChangedSignal.dispatch(e)
            }, get: function () {
                return this._value
            }
        }))
    }, r.encapsulateAndActivate = function (e, t) {
        r.debug && 0;
        var n = r.encapsulate(e, t);
        return r.activate(n), r.debug && 0, n
    }, r.recursiveEncapsulateAndActivate = function (e) {
        var t = [];
        for (var n in e)t.push(n);
        for (var i = t.length - 1; i >= 0; i--) {
            var n = t[i], s = e[n], o = !1, u = !1;
            s instanceof Object && (s.hasOwnProperty("value") ? (o = !0, s.hasOwnProperty("onChangedSignal") && (u = !0), r.debug && 0) : s instanceof Function ? (o = u = !0, r.debug && 0) : s.hasOwnProperty("doNotEncapsulate") ? (o = u = !0, r.debug && 0) : n == "collectionSignals" ? (o = u = !0, r.debug && 0) : (r.debug && 0, r.recursiveEncapsulateAndActivate(s), o = u = !0)), !o && !u ? r.encapsulateAndActivate(e, n) : u || r.activate(e[n])
        }
    }, r.decapsulate = function (e, t) {
        return e[t].hasOwnProperty("value") ? (e[t] = e[t].value, !0) : !1
    }, r.deactivate = function (e) {
        return e.hasOwnProperty("_gsTweenID") && delete e._gsTweenID, e.hasOwnProperty("onChangedSignal") && e.hasOwnProperty("_value") ? (e.value = undefined, delete e.value, e.onChangedSignal = undefined, delete e.onChangedSignal, e.value = e._value, e._value = undefined, delete e._value, !0) : !1
    }, r.deactivateAndDecapsulate = function (e, t) {
        r.deactivate(e[t]) ? r.debug && 0 : r.debug && 0, r.decapsulate(e, t) ? r.debug && 0 : r.debug && 0
    }, r.recursiveDeactivateAndDecapsulate = function (e, t) {
        var n = [];
        for (var i in e)n.push(i);
        0;
        for (var s = n.length - 1; s >= 0; s--) {
            var i = n[s], o = e[i], u = !0, a = !0;
            if (o instanceof Object)if (o.hasOwnProperty("value")) {
                o.hasOwnProperty("onChangedSignal") && (u = !1);
                if (t || !o.hasOwnProperty("min") && !o.hasOwnProperty("max") && !o.hasOwnProperty("step") && !o.hasOwnProperty("choicesSource") && !o.hasOwnProperty("doNotGUI")) a = !1, r.debug && 0
            } else o instanceof Function ? (u = a = !0, r.debug && 0) : i == "collectionSignals" ? (u = a = !0, r.debug && 0, delete e[i]) : o.hasOwnProperty("doNotEncapsulate") ? (u = a = !0, r.debug && 0) : (r.debug && 0, r.recursiveDeactivateAndDecapsulate(o, t), u = a = !0);
            !u && !a ? r.deactivateAndDecapsulate(e, i) : u || (r.deactivate(e[i]) ? r.debug && 0 : r.debug && 0)
        }
    }, r.validate = function (e) {
        var t = {};
        return e.hasOwnProperty("value") ? (t.isValue = !0, e.hasOwnProperty("onChangedSignal") && (t.isActivated = !0)) : e instanceof Function || (t.isNested = !0), t
    }, r.recursiveCopy = function (e, t, i, s, o, u) {
        r.debug && 0;
        for (var a in t)if (e.hasOwnProperty(a)) {
            var f = t[a], l = e[a], c = r.validate(f), h = r.validate(l);
            c.isNested ? u = r.recursiveCopy(e[a], t[a], i, s, o, u) : c.isValue && e[a].value != t[a].value && (i ? (n.isHex(e[a].value) ? (r.debug && 0, TweenLite.to(e[a], o, {
                    colorProps: {value: t[a].value},
                    delay: u
                })) : !isNaN(e[a].value) && e[a].value != "" && e[a].value !== !0 && e[a].value !== !1 ? (r.debug && 0, TweenLite.to(e[a], o, {
                    value: t[a].value,
                    delay: u
                })) : (r.debug && 0, e[a].value = t[a].value), u += s) : (r.debug && 0, e[a].value = t[a].value))
        }
        return u
    }, r
}), define("core/BaseObjectActive", ["Class", "three", "utils/ModelUtils"], function (e, t, n) {
    var r = new e({
        doNotEncapsulate: !0, initialize: function (e) {
            this.setParams(e)
        }, setParams: function (e) {
            if (e === undefined)return;
            n.recursiveEncapsulateAndActivate(e);
            var r = [];
            for (var i in e)r.push(i);
            for (var s = r.length - 1; s >= 0; s--) {
                var i = r[s], o = e[i];
                if (o === undefined) {
                    0;
                    continue
                }
                if (i in this) {
                    var u = this[i];
                    u instanceof t.Color ? u.set(o) : u instanceof t.Vector3 && o instanceof t.Vector3 ? u.copy(o) : (this[i] = o, this["_" + i] = o)
                }
            }
        }, transition: function (e) {
            if (e === undefined)return;
            n.recursiveCopy(this, e)
        }
    });
    return r
}), define("managers/TiltManager", ["Class", "core/BaseObject", "Global"], function (e, t, n) {
    var r = new e({
        Extends: t,
        speed: {value: .1, min: 0, max: 1, step: .001},
        panRange: {value: 1.2, min: 0, max: 5, step: .001},
        angleRange: {value: 2, min: 0, max: 5, step: .001},
        rangeScaleX: {value: 1, min: 0, max: 1, step: .001},
        rangeScaleY: {value: .5, min: 0, max: 1, step: .001},
        angleX: 0,
        angleY: 0,
        targetAngleX: 0,
        targetAngleY: 0,
        initialize: function (e) {
            if (r.instance)throw"Singleton enforcer!";
            r.instance = this, this.parent(e)
        },
        onMouseMove: function (e) {
            this.targetAngleY = (e.clientX - n.widthHalf) / n.width * this.angleRange.value, this.targetAngleX = (e.clientY - n.heightHalf) / n.height * this.angleRange.value
        },
        update: function () {
            this.angleX -= (this.angleX - this.targetAngleX) * this.speed.value * this.rangeScaleY.value, this.angleY -= (this.angleY - this.targetAngleY) * this.speed.value * this.rangeScaleX.value
        }
    });
    return r
}), define("controllers/CameraControllerMouseParallax", ["Class", "core/BaseObject", "managers/TiltManager", "Global", "three"], function (e, t, n, r, i) {
    var s = new e({
        Extends: t,
        camera: undefined,
        scene: undefined,
        debugFPSControls: !1,
        defaultPosition: undefined,
        defaultRotation: undefined,
        camMoveSpeed: 10,
        camStrafeSpeed: 10,
        camTurnSpeed: .05,
        tiltCam: !0,
        targetPosition: undefined,
        tiltSpeed: .01,
        targetCameraDistance: 0,
        initialize: function (e) {
            this.parent(e),window.addEventListener("DOMMouseScroll", this.onMouseWheelHandler.bind(this), !1), this.targetPosition = new i.Vector2(0, 0), this.tiltCam = !0, this.identityCameraPosition = new i.Vector3(0, 0, 400), this.matrixAngleX = new i.Matrix4, this.matrixAngleY = new i.Matrix4
        },
        update: function () {
            var e = this.camera;
            if (this.debugFPSControls) {
                if (!r.keyboard.pressed("shift"))return;
                r.keyboard.pressed("W") && (e.translateZ(-this.camMoveSpeed), this.tiltCam = !1), r.keyboard.pressed("S") && (e.translateZ(this.camMoveSpeed), this.tiltCam = !1), r.keyboard.pressed("A") && (e.translateX(-this.camStrafeSpeed), this.tiltCam = !1), r.keyboard.pressed("D") && (e.translateX(this.camStrafeSpeed), this.tiltCam = !1), r.keyboard.pressed("C") && (e.translateY(-this.camStrafeSpeed), this.tiltCam = !1), r.keyboard.pressed("E") && (e.translateY(this.camStrafeSpeed), this.tiltCam = !1), r.keyboard.pressed("left") && (e.rotateY(this.camTurnSpeed), this.tiltCam = !1), r.keyboard.pressed("right") && (e.rotateY(-this.camTurnSpeed), this.tiltCam = !1), r.keyboard.pressed("up") && (e.rotateX(this.camTurnSpeed), this.tiltCam = !1), r.keyboard.pressed("down") && (e.rotateX(-this.camTurnSpeed), this.tiltCam = !1), r.keyboard.pressed("R") && (e.position = this.defaultPosition.clone(), e.rotation.x = this.defaultRotation.x, e.rotation.y = this.defaultRotation.y, e.rotation.z = this.defaultRotation.z, this.tiltCam = !0)
            }
            if (this.tiltCam) {
                this.matrixAngleX.makeRotationX(n.instance.angleX), this.matrixAngleY.makeRotationY(n.instance.angleY);
                var t = this.matrixAngleX.clone().multiply(this.matrixAngleY),
                    i = this.identityCameraPosition.clone().applyMatrix4(t);
                e.position.copy(i), e.lookAt(this.scene.position)
            }
        },
        onMouseMove: function (e) {
            this.targetAngleY = (e.clientX - r.widthHalf) / r.width * 2, this.targetAngleX = (e.clientY - r.heightHalf) / r.height * 2
        },
        onMouseWheelHandler: function (e) {
            if (!r.keyboard.pressed("shift"))return;
            var e = window.event || e, t = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));
            this.camera.fov -= t, this.camera.onFOVChangedSignal.dispatch(), r.cameraFOV = this.camera.fov, this.camera.updateProjectionMatrix(), this.camera.far = r.cameraDistanceFar
        }
    });
    return s
}), define("managers/SceneManager", ["Class", "core/BaseObjectActive", "three", "Global", "controllers/CameraControllerMouseParallax", "Signal", "utils/ColorUtils"], function (e, t, n, r, i, s, o) {
    var u = new e({
        Extends: t,
        scene: undefined,
        camera: undefined,
        cameraController: undefined,
        cameraFOV: 37,
        fog: undefined,
        distanceNear: 1,
        distanceFar: 3e3,
        emDoodle: undefined,
        camDefaultRotation: undefined,
        camDefaultPosition: undefined,
        bgColor: 16777215,
        mouseStrength: 1,
        lighting: "light",
        onEmDoodleRequestSignal: undefined,
        initialize: function (e) {
            if (u.instance)throw"Singleton enforcer!";
            u.instance = this, this.onEmDoodleRequestSignal = new s, this.parent(e)
        },
        setParams: function (e) {
            e.fog || (e.fog = {near: 1, far: 800}), e.emDoodle || (e.emDoodle = {
                choicesSource: "emDoodles",
                value: "planet"
            }), 0, e.bgColor || (e.bgColor = this.bgColor), e.mouseStrength || (e.mouseStrength = {
                value: 1,
                min: -10,
                max: 10,
                step: .01
            }), e.lighting || (e.lighting = {
                value: "light",
                choicesSource: "lighting"
            }), this.parent(e), this.scene || (this.scene = new n.Scene), this.scene.fog ? (this.scene.fog.color.setHex(o.getHexNumber(this.bgColor.value)), this.scene.fog.near = this.fog.near.value, this.scene.fog.far = this.fog.far.value) : this.scene.fog = new n.Fog(this.bgColor.value, this.fog.near.value, this.fog.far.value), r.cameraFOV = this.cameraFOV.value, r.cameraDistanceNear = this.distanceNear.value, r.cameraDistanceFar = this.distanceFar.value, this.onEmDoodleRequestSignal.dispatch(this.emDoodle.value), this.bgColor.onChangedSignal.add(function (e) {
                this.scene.fog.color.setHex(o.getHexNumber(e))
            }.bind(this)), this.fog.near.onChangedSignal.add(function (e) {
                this.scene.fog.near = e
            }.bind(this)), this.fog.far.onChangedSignal.add(function (e) {
                this.scene.fog.far = e
            }.bind(this)), this.camera || (this.camera = new n.PerspectiveCamera(this.cameraFOV.value, r.aspectRatio, this.distanceNear.value, this.distanceFar.value), this.camera.onFOVChangedSignal = new s, this.scene.add(this.camera)), this.cameraController || (this.cameraController = new i({
                camera: this.camera,
                scene: this.scene,
                defaultPosition: new n.Vector3(this.camDefaultPosition.x.value, this.camDefaultPosition.y.value, this.camDefaultPosition.z.value),
                defaultRotation: new n.Euler(this.camDefaultRotation.x.value, this.camDefaultRotation.y.value, this.camDefaultRotation.z.value)
            })), this.camera.position = new n.Vector3(this.camDefaultPosition.x.value, this.camDefaultPosition.y.value, this.camDefaultPosition.z.value), this.camera.far = r.cameraDistanceFar, r.mouseStrength = this.mouseStrength.value, this.mouseStrength.onChangedSignal.add(function (e) {
                r.mouseStrength = e
            }.bind(this)), this.emDoodle.onChangedSignal.add(function (e) {
                this.onEmDoodleRequestSignal.dispatch(e)
            }.bind(this))
        },
        update: function () {
            this.cameraController && this.cameraController.update()
        }
    });
    return u
}), define("text", ["module"], function (e) {
    "use strict";
    var t, n, r, i, s, o = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
        u = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im, a = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
        f = typeof location != "undefined" && location.href,
        l = f && location.protocol && location.protocol.replace(/\:/, ""), c = f && location.hostname,
        h = f && (location.port || undefined), p = {}, d = e.config && e.config() || {};
    t = {
        version: "2.0.10", strip: function (e) {
            if (e) {
                e = e.replace(u, "");
                var t = e.match(a);
                t && (e = t[1])
            } else e = "";
            return e
        }, jsEscape: function (e) {
            return e.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
        }, createXhr: d.createXhr || function () {
            var e, t, n;
            if (typeof XMLHttpRequest != "undefined")return new XMLHttpRequest;
            if (typeof ActiveXObject != "undefined")for (t = 0; t < 3; t += 1) {
                n = o[t];
                try {
                    e = new ActiveXObject(n)
                } catch (r) {
                }
                if (e) {
                    o = [n];
                    break
                }
            }
            return e
        }, parseName: function (e) {
            var t, n, r, i = !1, s = e.indexOf("."), o = e.indexOf("./") === 0 || e.indexOf("../") === 0;
            return s !== -1 && (!o || s > 1) ? (t = e.substring(0, s), n = e.substring(s + 1, e.length)) : t = e, r = n || t, s = r.indexOf("!"), s !== -1 && (i = r.substring(s + 1) === "strip", r = r.substring(0, s), n ? n = r : t = r), {
                moduleName: t,
                ext: n,
                strip: i
            }
        }, xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/, useXhr: function (e, n, r, i) {
            var s, o, u, a = t.xdRegExp.exec(e);
            return a ? (s = a[2], o = a[3], o = o.split(":"), u = o[1], o = o[0], (!s || s === n) && (!o || o.toLowerCase() === r.toLowerCase()) && (!u && !o || u === i)) : !0
        }, finishLoad: function (e, n, r, i) {
            r = n ? t.strip(r) : r, d.isBuild && (p[e] = r), i(r)
        }, load: function (e, n, r, i) {
            if (i.isBuild && !i.inlineText) {
                r();
                return
            }
            d.isBuild = i.isBuild;
            var s = t.parseName(e), o = s.moduleName + (s.ext ? "." + s.ext : ""), u = n.toUrl(o),
                a = d.useXhr || t.useXhr;
            if (u.indexOf("empty:") === 0) {
                r();
                return
            }
            !f || a(u, l, c, h) ? t.get(u, function (n) {
                t.finishLoad(e, s.strip, n, r)
            }, function (e) {
                r.error && r.error(e)
            }) : n([o], function (e) {
                t.finishLoad(s.moduleName + "." + s.ext, s.strip, e, r)
            })
        }, write: function (e, n, r, i) {
            if (p.hasOwnProperty(n)) {
                var s = t.jsEscape(p[n]);
                r.asModule(e + "!" + n, "define(function () { return '" + s + "';});\n")
            }
        }, writeFile: function (e, n, r, i, s) {
            var o = t.parseName(n), u = o.ext ? "." + o.ext : "", a = o.moduleName + u,
                f = r.toUrl(o.moduleName + u) + ".js";
            t.load(a, r, function (n) {
                var r = function (e) {
                    return i(f, e)
                };
                r.asModule = function (e, t) {
                    return i.asModule(e, f, t)
                }, t.write(e, a, r, s)
            }, s)
        }
    };
    if (d.env === "node" || !d.env && typeof process != "undefined" && process.versions && !!process.versions.node && !process.versions["node-webkit"]) n = require.nodeRequire("fs"), t.get = function (e, t, r) {
        try {
            var i = n.readFileSync(e, "utf8");
            i.indexOf("﻿") === 0 && (i = i.substring(1)), t(i)
        } catch (s) {
            r(s)
        }
    }; else if (d.env === "xhr" || !d.env && t.createXhr()) t.get = function (e, n, r, i) {
        var s = t.createXhr(), o;
        s.open("GET", e, !0);
        if (i)for (o in i)i.hasOwnProperty(o) && s.setRequestHeader(o.toLowerCase(), i[o]);
        d.onXhr && d.onXhr(s, e), s.onreadystatechange = function (t) {
            var i, o;
            s.readyState === 4 && (i = s.status, i > 399 && i < 600 ? (o = new Error(e + " HTTP status: " + i), o.xhr = s, r(o)) : n(s.responseText), d.onXhrComplete && d.onXhrComplete(s, e))
        }, s.send(null)
    }; else if (d.env === "rhino" || !d.env && typeof Packages != "undefined" && typeof java != "undefined") t.get = function (e, t) {
        var n, r, i = "utf-8", s = new java.io.File(e), o = java.lang.System.getProperty("line.separator"),
            u = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s), i)), a = "";
        try {
            n = new java.lang.StringBuffer, r = u.readLine(), r && r.length() && r.charAt(0) === 65279 && (r = r.substring(1)), r !== null && n.append(r);
            while ((r = u.readLine()) !== null)n.append(o), n.append(r);
            a = String(n.toString())
        } finally {
            u.close()
        }
        t(a)
    }; else if (d.env === "xpconnect" || !d.env && typeof Components != "undefined" && Components.classes && Components.interfaces) r = Components.classes, i = Components.interfaces, Components.utils["import"]("resource://gre/modules/FileUtils.jsm"), s = "@mozilla.org/windows-registry-key;1" in r, t.get = function (e, t) {
        var n, o, u, a = {};
        s && (e = e.replace(/\//g, "\\")), u = new FileUtils.File(e);
        try {
            n = r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream), n.init(u, 1, 0, !1), o = r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream), o.init(n, "utf-8", n.available(), i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER), o.readString(n.available(), a), o.close(), n.close(), t(a.value)
        } catch (f) {
            throw new Error((u && u.path || "") + ": " + f)
        }
    };
    return t
}), define("text!shaders/PhongTriangleSpriteParticles.vsh", [], function () {
    return "#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif\n#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif\n#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif\n#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nmat4 getBoneMatrix( const in float i ) {\n    float j = i * 4.0;\n    float x = mod( j, N_BONE_PIXEL_X );\n    float y = floor( j / N_BONE_PIXEL_X );\n    const float dx = 1.0 / N_BONE_PIXEL_X;\n    const float dy = 1.0 / N_BONE_PIXEL_Y;\n    y = dy * ( y + 0.5 );\n    vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n    vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n    vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n    vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n    mat4 bone = mat4( v1, v2, v3, v4 );\n    return bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\n    mat4 bone = boneGlobalMatrices[ int(i) ];\n    return bone;\n}\n#endif\n#endif\n#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif\n//begin injection\nmat4 rotationMatrix( const in vec3 axis, const in float angle)\n{\n    vec3 axisB = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    return mat4(oc * axisB.x * axisB.x + c, oc * axisB.x * axisB.y - axisB.z * s, oc * axisB.z * axisB.x + axisB.y * s, 0.0,\n                oc * axisB.x * axisB.y + axisB.z * s, oc * axisB.y * axisB.y + c, oc * axisB.y * axisB.z - axisB.x * s, 0.0,\n                oc * axisB.z * axisB.x - axisB.y * s, oc * axisB.y * axisB.z + axisB.x * s, oc * axisB.z * axisB.z + c, 0.0,\n                0.0, 0.0, 0.0, 1.0);\n}\nattribute vec3 motionPosition;\nattribute vec2 triangleOffset;\nattribute float spin;\nuniform float aspectRatio;\n//end injection\nvoid main() {\n    //begin injection\n    //mat4 spinMatrix = rotationMatrix(motionAxisAngle, spin);\n    vec3 myPosition = position.xyz;\n    //end injection\n    #if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\n    vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n    #endif\n    #ifdef USE_LIGHTMAP\n    vUv2 = uv2;\n    #endif\n    #ifdef USE_COLOR\n    #ifdef GAMMA_INPUT\n    vColor = color * color;\n    #else\n    vColor = color;\n    #endif\n    #endif\n    #ifdef USE_MORPHNORMALS\n    vec3 morphedNormal = vec3( 0.0 );\n    morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n    morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n    morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n    morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n    morphedNormal += normal;\n    #endif\n    #ifdef USE_SKINNING\n    mat4 boneMatX = getBoneMatrix( skinIndex.x );\n    mat4 boneMatY = getBoneMatrix( skinIndex.y );\n    #endif\n    #ifdef USE_SKINNING\n    mat4 skinMatrix = skinWeight.x * boneMatX;\n    skinMatrix  += skinWeight.y * boneMatY;\n    #ifdef USE_MORPHNORMALS\n    vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n    #else\n    vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n    #endif\n    #endif\n    vec3 objectNormal;\n    #ifdef USE_SKINNING\n    objectNormal = skinnedNormal.xyz;\n    #endif\n    #if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n    objectNormal = morphedNormal;\n    #endif\n    #if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n    objectNormal = normal;\n    #endif\n    #ifdef FLIP_SIDED\n    objectNormal = -objectNormal;\n    #endif\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vNormal = normalize( transformedNormal );\n    //begin injection\n    //vNormal = (spinMatrix * vec4(vNormal, 0)).xyz;\n    //end injection\n    #ifdef USE_MORPHTARGETS\n    vec3 morphed = vec3( 0.0 );\n    morphed += ( morphTarget0 - myPosition ) * morphTargetInfluences[ 0 ];\n    morphed += ( morphTarget1 - myPosition ) * morphTargetInfluences[ 1 ];\n    morphed += ( morphTarget2 - myPosition ) * morphTargetInfluences[ 2 ];\n    morphed += ( morphTarget3 - myPosition ) * morphTargetInfluences[ 3 ];\n    #ifndef USE_MORPHNORMALS\n    morphed += ( morphTarget4 - myPosition ) * morphTargetInfluences[ 4 ];\n    morphed += ( morphTarget5 - myPosition ) * morphTargetInfluences[ 5 ];\n    morphed += ( morphTarget6 - myPosition ) * morphTargetInfluences[ 6 ];\n    morphed += ( morphTarget7 - myPosition ) * morphTargetInfluences[ 7 ];\n    #endif\n    morphed += myPosition;\n    #endif\n    #ifdef USE_SKINNING\n    #ifdef USE_MORPHTARGETS\n    vec4 skinVertex = vec4( morphed, 1.0 );\n    #else\n    vec4 skinVertex = vec4( myPosition, 1.0 );\n    #endif\n    vec4 skinned  = boneMatX * skinVertex * skinWeight.x;\n    skinned       += boneMatY * skinVertex * skinWeight.y;\n    #endif\n    vec4 mvPosition;\n    #ifdef USE_SKINNING\n    mvPosition = modelViewMatrix * skinned;\n    #endif\n    #if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n    mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n    #endif\n    #if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n    mvPosition = modelViewMatrix * vec4( myPosition, 1.0 );\n    #endif\n\n    gl_Position = projectionMatrix * mvPosition;\n    //begin injection\n    gl_Position.xy += vec2(triangleOffset.x / aspectRatio, triangleOffset.y);\n    //end injection\n    vViewPosition = -mvPosition.xyz;\n    #if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n    #ifdef USE_SKINNING\n    vec4 worldPosition = modelMatrix * skinned;\n    #endif\n    #if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n    vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n    #endif\n    #if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n    vec4 worldPosition = modelMatrix * vec4( myPosition, 1.0 );\n    #endif\n    #endif\n    #if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n    vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n    worldNormal = normalize( worldNormal );\n    vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n    if ( useRefract ) {\n        vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n    } else {\n        vReflect = reflect( cameraToVertex, worldNormal );\n    }\n    #endif\n    #ifndef PHONG_PER_PIXEL\n    #if MAX_POINT_LIGHTS > 0\n    for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n        vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n        vec3 lVector = lPosition.xyz - mvPosition.xyz;\n        float lDistance = 1.0;\n        if ( pointLightDistance[ i ] > 0.0 )\n        lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n        vPointLight[ i ] = vec4( lVector, lDistance );\n    }\n    #endif\n    #if MAX_SPOT_LIGHTS > 0\n    for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n        vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n        vec3 lVector = lPosition.xyz - mvPosition.xyz;\n        float lDistance = 1.0;\n        if ( spotLightDistance[ i ] > 0.0 )\n        lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n        vSpotLight[ i ] = vec4( lVector, lDistance );\n    }\n    #endif\n    #endif\n    #if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\n    vWorldPosition = worldPosition.xyz;\n    #endif\n    #ifdef USE_SHADOWMAP\n    for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n        vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n    }\n    #endif\n}"
}), define("utils/FileUtils", ["Class", "Global"], function (e, t) {
    var n = new e({});
    return n.debug = !1, n.fileExists = function (e) {
        var n = new XMLHttpRequest;
        n.open("HEAD", t.assetsPath + e, !1);
        try {
            n.send()
        } catch (r) {
            0
        }
        return n.status != 404
    }, n._textureURLs = {}, n.verifyAndLoadTexture = function (e, r, i, s, o) {
        var u = r.uuid + "_" + i, a;
        n.debug && 0;
        if (e.indexOf(".jpg") != e.length - 4 && e.indexOf(".jpeg") != e.length - 5 && e.indexOf(".png") != e.length - 4 || n._textureURLs[u] == e) {
            if (e == "" && n._textureURLs[u] != e)return n._textureURLs[u] = e, n.debug && 0, a = null, o || (r[i] && r[i].dispose(), r[i] = a, r.needsUpdate = !0), s && s(), a;
            if (n._textureURLs[u] != e)return n._textureURLs[u] = e, n.loadPlaceHolderTexture(r, i, s, o)
        } else {
            n._textureURLs[u] = e;
            if (!n.fileExists(e))return n.loadPlaceHolderTexture(r, i, s, o);
            if (!r[i] || r[i].sourceFile != e)return n.debug && 0, a = THREE.ImageUtils.loadTexture(t.assetsPath + e), o || (r[i] && r[i].dispose(), r[i] = a, r.needsUpdate = !0), s && s(), a;
            n.debug && 0
        }
    }, n.loadPlaceHolderTexture = function (e, r, i, s) {
        var o = t.assetsPath + t.textureNotFound, u;
        return !e[r] || e[r].sourceFile != o ? (n.debug && 0, u = THREE.ImageUtils.loadTexture(o), s || (e[r] && e[r].dispose(), e[r] = u, e.needsUpdate = !0), i && i(), u) : undefined
    }, n
}), define("objects/Layer", ["Class", "three", "core/BaseObjectActive", "Global", "utils/ColorUtils", "utils/FileUtils"], function (e, t, n, r, i, s) {
    var o = new e({
        Extends: n,
        material: undefined,
        geometry: undefined,
        display: undefined,
        materialObject: null,
        initialize: function (e) {
            this.parent(e)
        },
        initHooks: function () {
        },
        hide: function () {
            this.display.visible = !1
        },
        show: function () {
            this.display.visible = !0
        },
        destroy: function () {
            throw"Override destroy method"
        }
    });
    return o
}), define("objects/ParticleLayer", ["Class", "three", "core/BaseObjectActive", "Global", "utils/ColorUtils", "utils/FileUtils", "objects/Layer"], function (e, t, n, r, i, s, o) {
    var o = new e({
        Extends: o,
        total: 500,
        _desiredTotal: 0,
        _actualTotal: 0,
        bounds: null,
        boundsHalf: null,
        boundsOffset: undefined,
        physics: undefined,
        motionVectors: undefined,
        spins: undefined,
        initialize: function (e) {
            this.bounds = new t.Vector3(400, 250, 0), this.boundsOffset = new t.Vector3(0, 0, -390), this.parent(e), this.boundsHalf = new t.Vector3(this.bounds.x * .5, this.bounds.y * .5, this.bounds.z * .5), this.motionVectors = [], this._desiredTotal = ~~this.total.value, this.total.value = 0, this._actualTotal = 0, this.initMaterial(), this.initHooks()
        },
        initHooks: function () {
            this.parent(), this.total.onChangedSignal.add(function (e) {
                e = ~~e, _desiredTotal = e;
                var t = e - this._actualTotal;
                t > 0 ? this.addParticles(~~t) : t < 0 && this.removeParticles(-~~t)
            }.bind(this))
        },
        addParticles: function (e) {
            this._actualTotal = ~~this.total.value
        },
        removeParticles: function (e) {
            this._actualTotal = ~~this.total.value
        },
        showOne: function () {
            this.display.visible = !0
        }
    });
    return o
}), define("objects/SpriteParticles2", ["Class", "core/BaseObjectActive", "three", "text", "text!shaders/PhongTriangleSpriteParticles.vsh", "utils/ColorUtils", "Global", "objects/ParticleLayer", "utils/FileUtils"], function (e, t, n, r, i, s, o, u, a) {
    var f = new e({
        Extends: u,
        blendMode: null,
        size: 10,
        motionVectors: null,
        physics: undefined,
        renderOnTop: !0,
        fog: !0,
        offsetZ: 0,
        initialize: function (e) {
            this.parent(e), this.initMaterial(), this.total.value = ~~this._desiredTotal
        },
        initHooks: function () {
            this.parent(), this.size.onChangedSignal.add(function (e) {
                this.materialObject.size = e
            }.bind(this)), this.material.color.onChangedSignal.add(function (e) {
                this.materialObject.color.setHex(s.getHexNumber(e))
            }.bind(this)), this.material.image.onChangedSignal.add(function (e) {
                a.verifyAndLoadTexture(e, this.materialObject, "map")
            }.bind(this)), this.renderOnTop.onChangedSignal.add(function (e) {
                this.materialObject.depthTest = !e, this.materialObject.needsUpdate = !0
            }.bind(this)), this.fog.onChangedSignal.add(function (e) {
                this.materialObject.fog = e, this.materialObject.needsUpdate = !0
            }.bind(this)), this.blendMode.blendSrc.onChangedSignal.add(function (e) {
                this.display.material.blendSrc = n[e + "Factor"]
            }.bind(this)), this.blendMode.blendDst.onChangedSignal.add(function (e) {
                this.display.material.blendDst = n[e + "Factor"]
            }.bind(this)), this.blendMode.blendEquation.onChangedSignal.add(function (e) {
                this.display.material.blendEquation = n[e + "Equation"]
            }.bind(this))
        },
        addParticles: function (e) {
            this.parent(e);
            var t = this.initGeometry();
            this.initPhysics(), this.resetDisplayObject(t)
        },
        removeParticles: function (e) {
            this.parent(e);
            var t = this.initGeometry();
            this.initPhysics(), this.resetDisplayObject(t)
        },
        initMaterial: function () {
            this.materialObject = new n.ParticleBasicMaterial({
                color: this.material.color.value,
                size: this.size.value,
                transparent: !0,
                depthTest: !this.renderOnTop.value,
                blending: n.CustomBlending,
                blendSrc: n[this.blendMode.blendSrc.value + "Factor"],
                blendDst: n[this.blendMode.blendDst.value + "Factor"],
                blendEquation: n[this.blendMode.blendEquation.value + "Equation"],
                fog: this.fog.value
            }), a.verifyAndLoadTexture(this.material.image.value, this.materialObject, "map")
        },
        initGeometry: function () {
            var e;
            this.display && (e = this.display.parent, e.remove(this.display), this.display = undefined), this.geometry && this.geometry.dispose(), this.geometry = new n.Geometry;
            for (var t = this._actualTotal - 1; t >= 0; t--)this.geometry.vertices.push(new n.Vector3(Math.random() * this.bounds.x - this.boundsHalf.x, Math.random() * this.bounds.y - this.boundsHalf.y, Math.random() * this.bounds.z));
            return e
        },
        initPhysics: function () {
            this.motionVectors = new Float32Array(this._actualTotal * 3);
            for (var e = this._actualTotal - 1; e >= 0; e--) {
                var t = e * 3;
                this.motionVectors[t] = 0, this.motionVectors[t + 1] = 0, this.motionVectors[t + 2] = 0
            }
        },
        resetDisplayObject: function (e) {
            this.display && (e = this.display.parent, e.remove(this.display)), this.display = new n.ParticleSystem(this.geometry, this.materialObject), this.display.sortParticles = !0, this.display.position.z = this.boundsHalf.z, e && (e.add(this.display), this._scene = e)
        },
        applyVectorField: function (e, t, r, i, s, o, u, a, f, l) {
            var c = .01, h = new n.Vector3(0, 0, 0), p = this.motionVectors, d = this.geometry.vertices,
                v = this._actualTotal, m = this.physics.responsiveness.value, g = this.physics.drag.value,
                y = ~~(Math.random() * a), b = this.boundsHalf.z;
            for (var w = v - 1; w >= 0; w--) {
                var E = d[w], S = w * 3,
                    x = (Math.max(0, Math.min(r.x, ~~(E.x * i.x + s.x))) + Math.max(0, Math.min(r.y, ~~(E.y * i.y + s.y))) * t.x + Math.max(0, Math.min(r.z, ~~((E.z + b) * i.z + s.z))) * t.xy) * o;
                h.x = (e[x] - p[S]) * m, h.y = (e[x + 1] - p[S + 1]) * m, h.z = (e[x + 2] - p[S + 2]) * m, e[x] -= h.x, e[x + 1] -= h.y, e[x + 2] -= h.z, p[S] += h.x, p[S + 1] += h.y, p[S + 2] += h.z, p[S] *= g, p[S + 1] *= g, p[S + 2] *= g, E.x += p[S], E.y += p[S + 1], E.z += p[S + 2], p[S] += u[y], p[S + 1] += u[y + 1], p[S + 2] += u[y + 2];
                while (E.x > l.x)E.x -= f.x;
                while (E.x < -l.x)E.x += f.x;
                while (E.y > l.y)E.y -= f.y;
                while (E.y < -l.y)E.y += f.y;
                while (E.z > 0)E.z -= f.z;
                while (E.z < -f.z)E.z += f.z;
                y += o
            }
            return this.geometry.__dirtyVertices = !0, this._actualTotal
        },
        destroy: function () {
            this.geometry.dispose(), this.materialObject.map && this.materialObject.map.dispose(), this.materialObject.normalMap && this.materialObject.normalMap.dispose(), this.materialObject.specularMap && this.materialObject.specularMap.dispose(), this.materialObject.dispose()
        }
    });
    return f
}), define("objects/CanvasParticles", ["Class", "three", "core/BaseObjectActive", "Global", "utils/ColorUtils", "utils/FileUtils", "objects/ParticleLayer", "managers/SceneManager"], function (e, t, n, r, i, s, o, u) {
    var a = new e({
        Extends: o,
        scale: undefined,
        image: undefined,
        children: undefined,
        blendMode: "No",
        opacity: 1,
        initialize: function (e) {
            e.opacity === undefined && (e.opacity = {value: 1, min: 0, max: 1, step: .01}), this.children = [];
            while (e.image._value.indexOf(" ") != -1)e.image._value = e.image._value.replace(" ", "_");
            this.parent(e), this.display = new t.Object3D, this.total.value = this._desiredTotal
        },
        initHooks: function () {
            this.parent(), this.scale.min.onChangedSignal.add(function (e) {
                this.reScale()
            }.bind(this)), this.scale.max.onChangedSignal.add(function (e) {
                this.reScale()
            }.bind(this)), this.image.onChangedSignal.add(function (e) {
                if (!this.materialObject)return;
                s.verifyAndLoadTexture(e, this.materialObject, "map"), this.cloneMaterials()
            }.bind(this)), this.opacity.onChangedSignal.add(function (e) {
                this.materialObject.opacity = e
            }.bind(this)), this.blendMode.onChangedSignal.add(function (e) {
                this.materialObject.blending = t[e + "Blending"]
            }.bind(this))
        },
        reScale: function () {
            var e = this.scale.max.value - this.scale.min.value;
            for (var t = this.children.length - 1; t >= 0; t--) {
                var n = this.children[t];
                n.scale.x = n.scale.y = n.scale.z = this.scale.min.value + n.scale.global * e
            }
        },
        initMaterial: function () {
            this.materialObject = new t.ParticleBasicMaterial({
                blending: t[this.blendMode.value + "Blending"],
                opacity: this.opacity.value
            }), s.verifyAndLoadTexture(this.image.value, this.materialObject, "map"), this.cloneMaterials()
        },
        cloneMaterials: function () {
            for (var e = this.children.length - 1; e >= 0; e--)this.children[e].material = this.materialObject.clone()
        },
        addParticles: function (e) {
            var n = this.scale.max.value - this.scale.min.value;
            for (var r = ~~this.total.value - 1; r >= this._actualTotal; r--) {
                var i = r * 3;
                this.motionVectors[r] = new t.Vector3;
                var s = new t.Particle(this.materialObject.clone());
                s.name = this.model, s.scale.global = Math.random(), s.scale.x = s.scale.y = this.scale.min.value + s.scale.global * n;
                var o = Math.random() * this.bounds.x - this.boundsHalf.x,
                    u = Math.random() * this.bounds.y - this.boundsHalf.y, a = Math.sqrt(o * o + u * u),
                    f = 50 + Math.random() * 100;
                while (a < f)o = Math.random() * this.bounds.x - this.boundsHalf.x, u = Math.random() * this.bounds.y - this.boundsHalf.y, a = Math.sqrt(o * o + u * u), f = 50 + Math.random() * 100;
                s.position.x = o, s.position.y = u, s.position.z = Math.random() * this.bounds.z - this.boundsHalf.z - this.boundsOffset.z, this.children[r] = s, this.display.add(s)
            }
            this.parent(e)
        },
        removeParticles: function (e) {
            e = e > this._actualTotal ? this._actualTotal : e;
            var t = this._actualTotal - e;
            for (var n = this._actualTotal - 1; n >= t; n--)this.display.remove(this.children[n]);
            this.children.splice(t, e), this.parent(e)
        },
        applyVectorField: function (e, n, r, i, s, o, a, f, l, c) {
            var h = ~~(Math.random() * f), p = new t.Vector3(0, 0, 0), d = this.physics.responsiveness.value,
                v = this.physics.drag.value, m = u.instance.fog, g = m.far.value - m.near.value, y = m.far.value,
                b = u.instance.camera.position.z, w = this.opacity.value;
            for (var E = this._actualTotal - 1; E >= 0; E--) {
                var S = E * 3, x = this.children[E], T = x.position;
                T.x > c.x && (T.x -= l.x), T.x < -c.x && (T.x += l.x), T.y > c.y && (T.y -= l.y), T.y < -c.y && (T.y += l.y), T.z > c.z && (T.z -= l.z), T.z < -c.z && (T.z += l.z);
                var N = x.position.z - b + y;
                x.material.opacity = Math.min(1, Math.max(N / g)) * w;
                var C = this.motionVectors[E],
                    k = (Math.max(0, Math.min(r.x, ~~(T.x * i.x + s.x))) + Math.max(0, Math.min(r.y, ~~(T.y * i.y + s.y))) * n.x + Math.max(0, Math.min(r.z, ~~(T.z * i.z + s.z))) * n.xy) * o;
                p.x = (e[k] - C.x) * d, p.y = (e[k + 1] - C.y) * d, p.z = (e[k + 2] - C.z) * d, e[k] -= p.x, e[k + 1] -= p.y, e[k + 2] -= p.z, C.x += p.x, C.y += p.y, C.z += p.z, C.x *= v, C.y *= v, C.z *= v, T.x += C.x, T.y += C.y, T.z += C.z, C.x += a[h], C.y += a[h + 1], C.z += a[h + 2]
            }
            return this._actualTotal
        },
        destroy: function () {
            for (var e = this._actualTotal - 1; e >= 0; e--) {
                var t = this.children[e];
                t.material.dispose(), this.display.remove(t)
            }
        }
    });
    return a
}), define("text!shaders/PhongShardParticles.vsh", [], function () {
    return "#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif\n#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif\n#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif\n#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif\n#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nmat4 getBoneMatrix( const in float i ) {\n    float j = i * 4.0;\n    float x = mod( j, N_BONE_PIXEL_X );\n    float y = floor( j / N_BONE_PIXEL_X );\n    const float dx = 1.0 / N_BONE_PIXEL_X;\n    const float dy = 1.0 / N_BONE_PIXEL_Y;\n    y = dy * ( y + 0.5 );\n    vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n    vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n    vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n    vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n    mat4 bone = mat4( v1, v2, v3, v4 );\n    return bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\n    mat4 bone = boneGlobalMatrices[ int(i) ];\n    return bone;\n}\n#endif\n#endif\n#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif\n//begin injection\nmat4 rotationMatrix( const in vec3 axis, const in float angle)\n{\n    vec3 axisB = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    return mat4(oc * axisB.x * axisB.x + c, oc * axisB.x * axisB.y - axisB.z * s, oc * axisB.z * axisB.x + axisB.y * s, 0.0,\n                oc * axisB.x * axisB.y + axisB.z * s, oc * axisB.y * axisB.y + c, oc * axisB.y * axisB.z - axisB.x * s, 0.0,\n                oc * axisB.z * axisB.x - axisB.y * s, oc * axisB.y * axisB.z + axisB.x * s, oc * axisB.z * axisB.z + c, 0.0,\n                0.0, 0.0, 0.0, 1.0);\n}\nattribute vec3 motionPosition;\nattribute vec3 motionAxisAngle;\nattribute float spin;\n//end injection\nvoid main() {\n    //begin injection\n    mat4 spinMatrix = rotationMatrix(motionAxisAngle, spin);\n    vec3 myPosition = (spinMatrix * vec4(position, 0)).xyz;\n    myPosition.xyz += motionPosition;\n    //end injection\n    #if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\n    vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n    #endif\n    #ifdef USE_LIGHTMAP\n    vUv2 = uv2;\n    #endif\n    #ifdef USE_COLOR\n    #ifdef GAMMA_INPUT\n    vColor = color * color;\n    #else\n    vColor = color;\n    #endif\n    #endif\n    #ifdef USE_MORPHNORMALS\n    vec3 morphedNormal = vec3( 0.0 );\n    morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n    morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n    morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n    morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n    morphedNormal += normal;\n    #endif\n    #ifdef USE_SKINNING\n    mat4 boneMatX = getBoneMatrix( skinIndex.x );\n    mat4 boneMatY = getBoneMatrix( skinIndex.y );\n    #endif\n    #ifdef USE_SKINNING\n    mat4 skinMatrix = skinWeight.x * boneMatX;\n    skinMatrix  += skinWeight.y * boneMatY;\n    #ifdef USE_MORPHNORMALS\n    vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n    #else\n    vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n    #endif\n    #endif\n    vec3 objectNormal;\n    #ifdef USE_SKINNING\n    objectNormal = skinnedNormal.xyz;\n    #endif\n    #if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n    objectNormal = morphedNormal;\n    #endif\n    #if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n    objectNormal = normal;\n    #endif\n    #ifdef FLIP_SIDED\n    objectNormal = -objectNormal;\n    #endif\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vNormal = normalize( transformedNormal );\n    //begin injection\n    vNormal = (spinMatrix * vec4(vNormal, 0)).xyz;\n    //end injection\n    #ifdef USE_MORPHTARGETS\n    vec3 morphed = vec3( 0.0 );\n    morphed += ( morphTarget0 - myPosition ) * morphTargetInfluences[ 0 ];\n    morphed += ( morphTarget1 - myPosition ) * morphTargetInfluences[ 1 ];\n    morphed += ( morphTarget2 - myPosition ) * morphTargetInfluences[ 2 ];\n    morphed += ( morphTarget3 - myPosition ) * morphTargetInfluences[ 3 ];\n    #ifndef USE_MORPHNORMALS\n    morphed += ( morphTarget4 - myPosition ) * morphTargetInfluences[ 4 ];\n    morphed += ( morphTarget5 - myPosition ) * morphTargetInfluences[ 5 ];\n    morphed += ( morphTarget6 - myPosition ) * morphTargetInfluences[ 6 ];\n    morphed += ( morphTarget7 - myPosition ) * morphTargetInfluences[ 7 ];\n    #endif\n    morphed += myPosition;\n    #endif\n    #ifdef USE_SKINNING\n    #ifdef USE_MORPHTARGETS\n    vec4 skinVertex = vec4( morphed, 1.0 );\n    #else\n    vec4 skinVertex = vec4( myPosition, 1.0 );\n    #endif\n    vec4 skinned  = boneMatX * skinVertex * skinWeight.x;\n    skinned       += boneMatY * skinVertex * skinWeight.y;\n    #endif\n    vec4 mvPosition;\n    #ifdef USE_SKINNING\n    mvPosition = modelViewMatrix * skinned;\n    #endif\n    #if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n    mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n    #endif\n    #if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n    mvPosition = modelViewMatrix * vec4( myPosition, 1.0 );\n    #endif\n    gl_Position = projectionMatrix * mvPosition;\n    vViewPosition = -mvPosition.xyz;\n    #if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n    #ifdef USE_SKINNING\n    vec4 worldPosition = modelMatrix * skinned;\n    #endif\n    #if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n    vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n    #endif\n    #if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n    vec4 worldPosition = modelMatrix * vec4( myPosition, 1.0 );\n    #endif\n    #endif\n    #if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n    vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n    worldNormal = normalize( worldNormal );\n    vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n    if ( useRefract ) {\n        vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n    } else {\n        vReflect = reflect( cameraToVertex, worldNormal );\n    }\n    #endif\n    #ifndef PHONG_PER_PIXEL\n    #if MAX_POINT_LIGHTS > 0\n    for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n        vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n        vec3 lVector = lPosition.xyz - mvPosition.xyz;\n        float lDistance = 1.0;\n        if ( pointLightDistance[ i ] > 0.0 )\n        lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n        vPointLight[ i ] = vec4( lVector, lDistance );\n    }\n    #endif\n    #if MAX_SPOT_LIGHTS > 0\n    for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n        vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n        vec3 lVector = lPosition.xyz - mvPosition.xyz;\n        float lDistance = 1.0;\n        if ( spotLightDistance[ i ] > 0.0 )\n        lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n        vSpotLight[ i ] = vec4( lVector, lDistance );\n    }\n    #endif\n    #endif\n    #if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\n    vWorldPosition = worldPosition.xyz;\n    #endif\n    #ifdef USE_SHADOWMAP\n    for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n        vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n    }\n    #endif\n}"
}), define("objects/ShardParticles", ["Class", "core/BaseObjectActive", "three", "text", "text!shaders/PhongShardParticles.vsh", "utils/ColorUtils"], function (e, t, n, r, i, s) {
    var o = new e({
        Extends: t,
        display: undefined,
        geometry: undefined,
        material: undefined,
        materialObject: undefined,
        initd: !1,
        total: 0,
        bounds: undefined,
        boundsOffset: undefined,
        boundsHalf: undefined,
        triangleSize: 10,
        motionVectors: undefined,
        physics: undefined,
        initialize: function (e) {
            this.bounds = new n.Vector3(400, 250, 0), this.boundsOffset = new n.Vector3(0, 0, -390), this.parent(e), this.initd = !0, this.boundsHalf = new n.Vector3(this.bounds.x * .5, this.bounds.y * .5, this.bounds.z * .5), this.initMaterial(), this.initGeometry(), this.resetDisplayObject(), this.total.onChangedSignal.add(function (e) {
                this.initGeometry(), this.resetDisplayObject()
            }.bind(this)), this.triangleSize.onChangedSignal.add(function (e) {
                this._sizeChanged = !0, this.initGeometry(), this.resetDisplayObject()
            }.bind(this)), this.material.color.onChangedSignal.add(function (e) {
                this.materialObject.uniforms.diffuse.value.r = s.hexToR(e) / 255, this.materialObject.uniforms.diffuse.value.g = s.hexToG(e) / 255, this.materialObject.uniforms.diffuse.value.b = s.hexToB(e) / 255
            }.bind(this)), this.material.ambient.onChangedSignal.add(function (e) {
                this.materialObject.uniforms.ambient.value.r = s.hexToR(e) / 255, this.materialObject.uniforms.ambient.value.g = s.hexToG(e) / 255, this.materialObject.uniforms.ambient.value.b = s.hexToB(e) / 255
            }.bind(this)), this.material.specular.onChangedSignal.add(function (e) {
                this.materialObject.uniforms.specular.value.r = s.hexToR(e) / 255, this.materialObject.uniforms.specular.value.g = s.hexToG(e) / 255, this.materialObject.uniforms.specular.value.b = s.hexToB(e) / 255
            }.bind(this)), this.material.shininess.onChangedSignal.add(function (e) {
                this.materialObject.uniforms.shininess.value = e
            }.bind(this))
        },
        onLightReset: function () {
            this.materialObject.needsUpdate = !0
        },
        initMaterial: function () {
            var e = n.ShaderLib.phong, t = n.UniformsUtils.clone(e.uniforms), r = {
                motionPosition: {type: "v3", value: []},
                motionAxisAngle: {type: "v3", value: []},
                spin: {type: "f", value: []}
            };
            this.materialObject = new n.ShaderMaterial({
                uniforms: t,
                vertexShader: i,
                fragmentShader: e.fragmentShader,
                attributes: r,
                lights: !0,
                fog: !0,
                side: n.DoubleSide
            }), this.materialObject.uniforms.diffuse.value.r = s.hexToR(this.material.color.value) / 255, this.materialObject.uniforms.diffuse.value.g = s.hexToG(this.material.color.value) / 255, this.materialObject.uniforms.diffuse.value.b = s.hexToB(this.material.color.value) / 255, this.materialObject.uniforms.ambient.value.r = s.hexToR(this.material.ambient.value) / 255, this.materialObject.uniforms.ambient.value.g = s.hexToG(this.material.ambient.value) / 255, this.materialObject.uniforms.ambient.value.b = s.hexToB(this.material.ambient.value) / 255, this.materialObject.uniforms.specular.value.r = s.hexToR(this.material.specular.value) / 255, this.materialObject.uniforms.specular.value.g = s.hexToG(this.material.specular.value) / 255, this.materialObject.uniforms.specular.value.b = s.hexToB(this.material.specular.value) / 255, this.materialObject.uniforms.shininess.value = this.material.shininess.value
        },
        initGeometry: function () {
            var e = this.geometry, t = 0;
            e && !this.forceRegenerate && (this.forceRegenerate = !1, t = this.geometry.attributes.index.numItems / 3), this._sizeChanged && (t = 0, this._sizeChanged = !1), this.geometry = new n.BufferGeometry, this.geometry.dynamic = !0, this.geometry.attributes = {
                index: {
                    itemSize: 1,
                    array: new Uint16Array(~~this.total.value * 3),
                    numItems: ~~this.total.value * 3
                },
                position: {
                    itemSize: 3,
                    array: new Float32Array(~~this.total.value * 3 * 3),
                    numItems: ~~this.total.value * 3 * 3
                },
                normal: {
                    itemSize: 3,
                    array: new Float32Array(~~this.total.value * 3 * 3),
                    numItems: ~~this.total.value * 3 * 3
                },
                color: {
                    itemSize: 3,
                    array: new Float32Array(~~this.total.value * 3 * 3),
                    numItems: ~~this.total.value * 3 * 3
                },
                motionPosition: {
                    itemSize: 3,
                    array: new Float32Array(~~this.total.value * 3 * 3),
                    numItems: ~~this.total.value * 3 * 3
                },
                motionAxisAngle: {
                    itemSize: 3,
                    array: new Float32Array(~~this.total.value * 3 * 3),
                    numItems: ~~this.total.value * 3 * 3
                },
                spin: {itemSize: 1, array: new Float32Array(~~this.total.value * 3), numItems: ~~this.total.value * 3}
            };
            var r = 21845, i = this.geometry.attributes.index.array;
            for (var s = 0; s < i.length; s++)i[s] = s % (3 * r);
            var o = this.geometry.attributes.position.array, u = this.geometry.attributes.normal.array,
                a = this.geometry.attributes.color.array, f = this.geometry.attributes.motionPosition.array,
                l = this.geometry.attributes.motionAxisAngle.array, c = this.geometry.attributes.spin.array, h;
            e && (h = this.motionVectors), this.motionVectors = new Float32Array(~~this.total.value * 3);
            for (var s = ~~this.total.value - 1; s >= t; --s) {
                var p = s * 3;
                this.motionVectors[p] = 0, this.motionVectors[p + 1] = 0, this.motionVectors[p + 2] = 0
            }
            for (var s = t - 1; s >= 0; --s) {
                var p = s * 3;
                this.motionVectors[p] = h[p], this.motionVectors[p + 1] = h[p + 1], this.motionVectors[p + 2] = h[p + 2]
            }
            var d = this.bounds.x, v = d / 2, m = this.bounds.y, g = m / 2, y = this.bounds.z, b = y / 2,
                w = 1 + Math.random() * this.triangleSize.value, E = w / 2, S = new n.Vector3, x = new n.Vector3,
                T = new n.Vector3, N = new n.Vector3, C = new n.Vector3, S = new n.Vector3, x = new n.Vector3,
                T = new n.Vector3, N = new n.Vector3, C = new n.Vector3, k = this.boundsOffset.z;
            for (var s = ~~this.total.value - 1; s >= t; --s) {
                var p = s * 3, L = s * 9;
                w = Math.random() * this.triangleSize.value * .5 + this.triangleSize.value * .5, E = w / 2;
                var A = Math.random() * d - v, O = Math.random() * m - g, M = Math.sqrt(A * A + O * O),
                    _ = 50 + Math.random() * 100;
                while (M < _)A = Math.random() * d - v, O = Math.random() * m - g, M = Math.sqrt(A * A + O * O), _ = 50 + Math.random() * 100;
                var D = Math.random() * y - b - k, P = Math.random() * w - E, H = Math.random() * w - E,
                    B = Math.random() * w - E, j = Math.random() * w - E, F = Math.random() * w - E,
                    I = Math.random() * w - E, q = Math.random() * w - E, R = Math.random() * w - E,
                    U = Math.random() * w - E;
                o[L] = P, o[L + 1] = H, o[L + 2] = B, o[L + 3] = j, o[L + 4] = F, o[L + 5] = I, o[L + 6] = q, o[L + 7] = R, o[L + 8] = U, f[L] = A, f[L + 1] = O, f[L + 2] = D, f[L + 3] = A, f[L + 4] = O, f[L + 5] = D, f[L + 6] = A, f[L + 7] = O, f[L + 8] = D, S.set(P, H, B), x.set(j, F, I), T.set(q, R, U), N.subVectors(T, x), C.subVectors(S, x), N.cross(C), N.normalize();
                var z = N.x, W = N.y, X = N.z;
                u[L] = z, u[L + 1] = W, u[L + 2] = X, u[L + 3] = z, u[L + 4] = W, u[L + 5] = X, u[L + 6] = z, u[L + 7] = W, u[L + 8] = X, a[L] = Math.random(), a[L + 1] = Math.random(), a[L + 2] = Math.random(), a[L + 3] = Math.random(), a[L + 4] = Math.random(), a[L + 5] = Math.random(), a[L + 6] = Math.random(), a[L + 7] = Math.random(), a[L + 8] = Math.random();
                var V = Math.random(), $ = Math.random(), J = Math.random();
                l[L] = V, l[L + 1] = $, l[L + 2] = J, l[L + 3] = V, l[L + 4] = $, l[L + 5] = J, l[L + 6] = V, l[L + 7] = $, l[L + 8] = J, c[p] = c[p + 1] = c[p + 2] = 0
            }
            if (e) {
                var K = e.attributes.position.array, Q = e.attributes.normal.array, G = e.attributes.color.array,
                    Y = e.attributes.motionPosition.array, Z = e.attributes.motionAxisAngle.array,
                    et = e.attributes.spin.array;
                for (var s = t - 1; s >= 0; --s) {
                    var p = s * 3;
                    for (var tt = 8; tt >= 0; --tt) {
                        var L = s * 9 + tt;
                        o[L] = K[L], f[L] = Y[L], u[L] = Q[L], a[L] = G[L], l[L] = Z[L]
                    }
                    c[p] = c[p + 1] = c[p + 2] = et[p]
                }
                e.dispose()
            }
            this.geometry.offsets = [];
            var nt = ~~this.total.value / r;
            for (var s = 0; s < nt; s++) {
                var rt = {start: s * r * 3, index: s * r * 3, count: Math.min(~~this.total.value - s * r, r) * 3};
                this.geometry.offsets.push(rt)
            }
            this.geometry.computeBoundingSphere()
        },
        resetDisplayObject: function () {
            var e;
            this.display && (e = this.display.parent, e.remove(this.display)), this.display = new n.Mesh(this.geometry, this.materialObject), e && e.add(this.display)
        },
        applyVectorField: function (e, t, r, i, s, o, u, a, f, l) {
            var c = .03, h = this.geometry.attributes.motionPosition, p = h.array, d = this.geometry.attributes.spin,
                v = d.array, m = new n.Vector3(0, 0, 0), g = this.motionVectors, y = ~~this.total.value,
                b = this.physics.responsiveness.value, w = this.physics.drag.value, E = ~~(Math.random() * a);
            for (var S = y - 1; S >= 0; S--) {
                var x = S * 3, T = x * 3, N = T + 3, C = T + 6,
                    k = (Math.max(0, Math.min(r.x, ~~(p[T] * i.x + s.x))) + Math.max(0, Math.min(r.y, ~~(p[T + 1] * i.y + s.y))) * t.x + Math.max(0, Math.min(r.z, ~~(p[T + 2] * i.z + s.z))) * t.xy) * o;
                m.x = (e[k] - g[x]) * b, m.y = (e[k + 1] - g[x + 1]) * b, m.z = (e[k + 2] - g[x + 2]) * b, e[k] -= m.x, e[k + 1] -= m.y, e[k + 2] -= m.z, g[x] += m.x, g[x + 1] += m.y, g[x + 2] += m.z, g[x] *= w, g[x + 1] *= w, g[x + 2] *= w, p[T] += g[x], p[T + 1] += g[x + 1], p[T + 2] += g[x + 2], g[x] += u[E], g[x + 1] += u[E + 1], g[x + 2] += u[E + 2];
                while (p[T] > l.x)p[T] -= f.x;
                while (p[T] < -l.x)p[T] += f.x;
                while (p[T + 1] > l.y)p[T + 1] -= f.y;
                while (p[T + 1] < -l.y)p[T + 1] += f.y;
                while (p[T + 2] > l.z)p[T + 2] -= f.z;
                while (p[T + 2] < -l.z)p[T + 2] += f.z;
                p[N] = p[C] = p[T], p[N + 1] = p[C + 1] = p[T + 1], p[N + 2] = p[C + 2] = p[T + 2], v[x] = v[x + 1] = v[x + 2] += c, E += o
            }
            return d.needsUpdate = !0, h.needsUpdate = !0, ~~this.total.value
        },
        destroy: function () {
            this.materialObject.map && this.materialObject.map.dispose(), this.materialObject.normalMap && this.materialObject.normalMap.dispose(), this.materialObject.specularMap && this.materialObject.specularMap.dispose(), this.materialObject.dispose(), this.geometry.dispose()
        },
        hide: function () {
            this.display.visible = !1
        },
        show: function () {
            this.display.visible = !0
        },
        showOne: function () {
            this.totalBackup = ~~this.total.value, this.forceRegenerate = !0, this.total.value = 1, this.display.visible = !0;
            var e = this.geometry.attributes.motionPosition.array;
            e[0] = e[1] = e[2] = e[3] = e[4] = e[5] = e[6] = e[7] = e[8] = 0;
            var t = this.geometry.attributes.spin.array;
            t[0] = t[1] = t[2] = Math.random() * 100
        }
    });
    return o
}), define("objects/MeshParticles", ["Class", "three", "core/BaseObjectActive", "Global", "utils/ColorUtils", "utils/FileUtils", "objects/ParticleLayer"], function (e, t, n, r, i, s, o) {
    var u = new e({
        Extends: o,
        scale: undefined,
        mesh: undefined,
        shouldRememberPreviousPositions: !1,
        previousPositions: undefined,
        spinsCached: undefined,
        children: undefined,
        onLoadCallback: undefined,
        loaded: !1,
        universalScale: .01,
        initialize: function (e) {
            this.parent(e), this.children = [], this.spins = [], this.spinsCached = [];
            switch (this.physics.spin.mode.value) {
                case"upright":
                    this.spinFunc = this.spinFuncUpright, this.shouldRememberPreviousPositions = !0, this.previousPositions = [];
                    break;
                default:
                    this.spinFunc = this.spinFuncNormal
            }
            this.display = new t.Object3D
        },
        onLightReset: function () {
            this.materialObject.needsUpdate = !0
        },
        initHooks: function () {
            this.parent(), this.scale.min.onChangedSignal.add(function (e) {
                this.reScale()
            }.bind(this)), this.scale.max.onChangedSignal.add(function (e) {
                this.reScale()
            }.bind(this)), this.physics.spin.strength.onChangedSignal.add(function (e) {
                this.reSpin(e)
            }.bind(this)), this.material.color.onChangedSignal.add(function (e) {
                this.materialObject.color.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.ambient.onChangedSignal.add(function (e) {
                this.materialObject.ambient.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.specular.onChangedSignal.add(function (e) {
                this.materialObject.specular.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.emissive.onChangedSignal.add(function (e) {
                this.materialObject.emissive.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.shininess.onChangedSignal.add(function (e) {
                this.materialObject.shininess = e
            }.bind(this)), this.mesh.onChangedSignal.add(function (e) {
                this.verifyAndLoadMesh(e)
            }.bind(this)), this.material.shading.onChangedSignal.add(function (e) {
                this.materialObject.shading = t[e + "Shading"]
            }.bind(this)), this.material.textures.diffuse.onChangedSignal.add(function (e) {
                s.verifyAndLoadTexture(e, this.materialObject, "map", this.updateGeometry.bind(this))
            }.bind(this)), this.material.textures.normal.onChangedSignal.add(function (e) {
                s.verifyAndLoadTexture(e, this.materialObject, "normalMap", this.updateGeometry.bind(this))
            }.bind(this)), this.material.textures.specular.onChangedSignal.add(function (e) {
                s.verifyAndLoadTexture(e, this.materialObject, "specularMap", this.updateGeometry.bind(this))
            }.bind(this))
        },
        verifyAndLoadMesh: function (e) {
            this.loaded = !1, e.indexOf(".json") == e.length - 5 && this._meshURL != e && (this._meshURL = e, s.fileExists(e) && this.load())
        },
        reSpin: function (e) {
            for (var t = this._actualTotal - 1; t >= 0; t--) {
                var n = t * 3;
                this.spinsCached[n] = this.spins[n] * e, this.spinsCached[n + 1] = this.spins[n + 1] * e
            }
        },
        reScale: function () {
            var e = this.scale.max.value - this.scale.min.value;
            for (var t = this.children.length - 1; t >= 0; t--) {
                var n = this.children[t];
                n.scale.x = n.scale.y = n.scale.z = (this.scale.min.value + n.scale.global * e) * this.universalScale
            }
        },
        initMaterial: function () {
            this.materialObject = new t.MeshPhongMaterial({
                shininess: this.material.shininess.value,
                lights: !0,
                fog: !0,
                color: this.material.color.value,
                shininess: this.material.shininess.value,
                ambient: this.material.ambient.value,
                specular: this.material.specular.value,
                emissive: this.material.emissive.value,
                overdraw: !0,
                shading: t[this.material.shading.value + "Shading"]
            }), s.verifyAndLoadTexture(this.material.textures.diffuse.value, this.materialObject, "map", this.updateGeometry.bind(this)), s.verifyAndLoadTexture(this.material.textures.normal.value, this.materialObject, "normalMap", this.updateGeometry.bind(this)), s.verifyAndLoadTexture(this.material.textures.specular.value, this.materialObject, "specularMap", this.updateGeometry.bind(this))
        },
        load: function (e) {
            this.onLoadCallback = e;
            var n = new t.JSONLoader;
            n.load(r.assetsPath + this.mesh.value, this.modelLoadComplete.bind(this)), this.loaded = !1
        },
        modelLoadComplete: function (e, n) {
            this.loaded = !0, this.geometry && this.geometry.dispose(), this.geometry = e, e.computeFaceNormals(), e.computeVertexNormals();
            for (var r = this.children.length - 1; r >= 0; r--) {
                var i = this.children[r];
                this.display.remove(i);
                var s = new t.Mesh(e, i.material);
                s.position.copy(i.position), s.scale.copy(i.scale), s.scale.global = i.scale.global, this.display.add(s), this.children[r] = s
            }
            this.total.value = this._desiredTotal, this.onLoadCallback && this.onLoadCallback(this)
        },
        addParticles: function (e) {
            if (!this.loaded)return;
            var n = this.scale.max.value - this.scale.min.value;
            for (var r = ~~this.total.value - 1; r >= this._actualTotal; r--) {
                var i = r * 3;
                this.motionVectors[r] = new t.Vector3;
                var s = new t.Mesh(this.geometry, this.materialObject);
                s.name = this.model, s.rotation.x = Math.random() * 1e3, s.rotation.y = Math.random() * 1e3, s.rotation.z = Math.random() * 1e3, s.scale.global = Math.random(), s.scale.x = s.scale.y = s.scale.z = (this.scale.min.value + s.scale.global * n) * this.universalScale, s.position.x = Math.random() * this.bounds.x - this.boundsHalf.x, s.position.y = Math.random() * this.bounds.y - this.boundsHalf.y, s.position.z = Math.random() * this.bounds.z - this.boundsHalf.z, this.children[r] = s, this.spins[i] = Math.random() - .5, this.spins[i + 1] = Math.random() - .5, this.spinsCached[i] = this.spins[i] * this.physics.spin.strength.value, this.spinsCached[i + 1] = this.spins[i + 1] * this.physics.spin.strength.value, this.shouldRememberPreviousPositions && (this.previousPositions[r] = s.position.clone()), this.display.add(s)
            }
            this.parent(e)
        },
        removeParticles: function (e) {
            if (!this.loaded)return;
            e = e > this._actualTotal ? this._actualTotal : e;
            var t = this._actualTotal - e;
            for (var n = this._actualTotal - 1; n >= t; n--)this.display.remove(this.children[n]);
            this.children.splice(t, e), this.parent(e)
        },
        rememberPreviousPositions: function () {
            for (var e = this._actualTotal - 1; e >= 0; e--) {
                var t = this.previousPositions[e], n = this.children[e], r = n.position;
                t.x -= (t.x - r.x) * this.physics.spin.strength.value, t.y -= (t.y - r.y) * this.physics.spin.strength.value, t.z -= (t.z - r.z) * this.physics.spin.strength.value
            }
        },
        applyVectorField: function (e, n, r, i, s, o, u, a, f, l) {
            if (!this.loaded)return;
            var c = ~~(Math.random() * a), h = new t.Vector3(0, 0, 0), p = this.physics.responsiveness.value,
                d = this.physics.drag.value, v = this.spins;
            this.shouldRememberPreviousPositions && this.rememberPreviousPositions();
            for (var m = this._actualTotal - 1; m >= 0; m--) {
                var g = m * 3, y = this.children[m], b = this.motionVectors[m], w = y.position,
                    E = (Math.max(0, Math.min(r.x, ~~(w.x * i.x + s.x))) + Math.max(0, Math.min(r.y, ~~(w.y * i.y + s.y))) * n.x + Math.max(0, Math.min(r.z, ~~(w.z * i.z + s.z))) * n.xy) * o;
                h.x = (e[E] - b.x) * p, h.y = (e[E + 1] - b.y) * p, h.z = (e[E + 2] - b.z) * p, e[E] -= h.x, e[E + 1] -= h.y, e[E + 2] -= h.z, b.x += h.x, b.y += h.y, b.z += h.z, b.x *= d, b.y *= d, b.z *= d, w.x += b.x, w.y += b.y, w.z += b.z, b.x += u[c], b.y += u[c + 1], b.z += u[c + 2], w.x > l.x && (w.x -= f.x, this.shouldRememberPreviousPositions && (this.previousPositions[m].x -= f.x)), w.x < -l.x && (w.x += f.x, this.shouldRememberPreviousPositions && (this.previousPositions[m].x += f.x)), w.y > l.y && (w.y -= f.y, this.shouldRememberPreviousPositions && (this.previousPositions[m].y -= f.y)), w.y < -l.y && (w.y += f.y, this.shouldRememberPreviousPositions && (this.previousPositions[m].y += f.y)), w.z > l.z && (w.z -= f.z, this.shouldRememberPreviousPositions && (this.previousPositions[m].z -= f.z)), w.z < -l.z && (w.z += f.z, this.shouldRememberPreviousPositions && (this.previousPositions[m].z += f.z)), this.spinFunc(y, m)
            }
            return this._actualTotal
        },
        updateGeometry: function () {
            if (!this.geometry)return;
            this.geometry.buffersNeedUpdate = !0, this.geometry.uvsNeedUpdate = !0
        },
        spinFuncNormal: function (e, t) {
            var n = t * 3;
            e.rotation.x += this.spinsCached[n], e.rotation.y += this.spinsCached[n + 1]
        },
        spinFuncUpright: function (e, t) {
            var n = t * 3, r = this.previousPositions[t].y;
            this.previousPositions[t].y -= (this.previousPositions[t].y - e.position.y) * 2, e.lookAt(this.previousPositions[t]), this.previousPositions[t].y = r
        },
        hide: function () {
            for (var e = this.children.length - 1; e >= 0; e--)this.children[e].visible = !1;
            this.parent()
        },
        show: function () {
            for (var e = this.children.length - 1; e >= 0; e--)this.children[e].visible = !0;
            this.parent()
        },
        showOne: function () {
            if (~~this.total.value < 1) {
                0;
                return
            }
            var e = this.children[~~(Math.random() * this._actualTotal)];
            e.visible = !0, e.position.x = e.position.y = e.position.z = 0, e.scale.x = e.scale.y = e.scale.z = this.scale.max.value * this.universalScale
        },
        destroy: function () {
            this.materialObject.map && this.materialObject.map.dispose(), this.materialObject.normalMap && this.materialObject.normalMap.dispose(), this.materialObject.specularMap && this.materialObject.specularMap.dispose(), this.materialObject && this.materialObject.dispose(), this.geometry && this.geometry.dispose()
        }
    });
    return u
}), define("objects/MeshObject", ["Class", "three", "Global", "utils/FileUtils", "utils/ColorUtils", "objects/Layer"], function (e, t, n, r, i, s) {
    var o = new e({
        Extends: s,
        transform: null,
        mesh: undefined,
        onLoadCallback: undefined,
        loaded: !1,
        universalScale: .01,
        initialize: function (e) {
            e.transform.position === undefined && (e.transform.position = {
                x: {
                    value: 0,
                    min: -500,
                    max: 500,
                    step: .01
                }, y: {value: 0, min: -500, max: 500, step: .01}, z: {value: 0, min: -500, max: 500, step: .01}
            }), e.transform.rotation === undefined && (e.transform.rotation = {
                x: {
                    value: 0,
                    min: -180,
                    max: 180,
                    step: .01
                }, y: {value: 0, min: -180, max: 180, step: .01}, z: {value: 0, min: -180, max: 180, step: .01}
            }), this.parent(e), this.initMaterial(), this.initHooks()
        },
        onLightReset: function () {
            this.materialObject.needsUpdate = !0
        },
        initMaterial: function () {
            this.materialObject = new t.MeshPhongMaterial({
                shininess: this.material.shininess.value,
                lights: !0,
                fog: !0,
                color: this.material.color.value,
                shininess: this.material.shininess.value,
                ambient: this.material.ambient.value,
                specular: this.material.specular.value,
                emissive: this.material.emissive.value,
                overdraw: !0,
                shading: t[this.material.shading.value + "Shading"]
            }), r.verifyAndLoadTexture(this.material.textures.diffuse.value, this.materialObject, "map", this.updateGeometry.bind(this)), r.verifyAndLoadTexture(this.material.textures.normal.value, this.materialObject, "normalMap", this.updateGeometry.bind(this)), r.verifyAndLoadTexture(this.material.textures.specular.value, this.materialObject, "specularMap", this.updateGeometry.bind(this))
        },
        load: function (e) {
            this.onLoadCallback = e;
            var r = new t.JSONLoader;
            r.load(n.assetsPath + this.mesh.value, this.modelLoadComplete.bind(this)), this.loaded = !1
        },
        modelLoadComplete: function (e, n) {
            this.loaded = !0, this.geometry && this.geometry.dispose(), this.geometry = e, e.computeFaceNormals(), e.computeVertexNormals();
            if (this.display && this.display.parent) {
                var r = this.display, i = this.display.parent;
                i.remove(this.display);
                var s = new t.Mesh(e, r.material);
                s.position.copy(r.position), s.scale.copy(r.scale), i.add(s)
            } else this.display = new t.Mesh(e, this.materialObject), this.display.scale.x = this.display.scale.y = this.display.scale.z = this.transform.scale.value * this.universalScale, this.display.position.x = this.transform.position.x.value, this.display.position.y = this.transform.position.y.value, this.display.position.z = this.transform.position.z.value, this.display.rotation.x = this.transform.rotation.x.value * Math.PI / 180, this.display.rotation.y = this.transform.rotation.y.value * Math.PI / 180, this.display.rotation.z = this.transform.rotation.z.value * Math.PI / 180;
            this.onLoadCallback && this.onLoadCallback(this)
        },
        initHooks: function () {
            this.parent(), this.transform.scale.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.scale.x = this.display.scale.y = this.display.scale.z = e * this.universalScale
            }.bind(this)), this.transform.position.x.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.position.x = e
            }.bind(this)), this.transform.position.y.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.position.y = e
            }.bind(this)), this.transform.position.z.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.position.z = e
            }.bind(this)), this.transform.rotation.x.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.rotation.x = e * Math.PI / 180
            }.bind(this)), this.transform.rotation.y.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.rotation.y = e * Math.PI / 180
            }.bind(this)), this.transform.rotation.z.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.rotation.z = e * Math.PI / 180
            }.bind(this)), this.transform.scale.onChangedSignal.add(function (e) {
                if (!this.display)return;
                this.display.scale.x = this.display.scale.y = this.display.scale.z = e * this.universalScale
            }.bind(this)), this.material.color.onChangedSignal.add(function (e) {
                this.materialObject.color.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.ambient.onChangedSignal.add(function (e) {
                this.materialObject.ambient.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.specular.onChangedSignal.add(function (e) {
                this.materialObject.specular.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.emissive.onChangedSignal.add(function (e) {
                this.materialObject.emissive.setHex(i.getHexNumber(e))
            }.bind(this)), this.material.shininess.onChangedSignal.add(function (e) {
                this.materialObject.shininess = e
            }.bind(this)), this.mesh.onChangedSignal.add(function (e) {
                this.verifyAndLoadMesh(e)
            }.bind(this)), this.material.shading.onChangedSignal.add(function (e) {
                this.materialObject.shading = t[e + "Shading"]
            }.bind(this)), this.material.textures.diffuse.onChangedSignal.add(function (e) {
                r.verifyAndLoadTexture(e, this.materialObject, "map", this.updateGeometry.bind(this))
            }.bind(this)), this.material.textures.normal.onChangedSignal.add(function (e) {
                r.verifyAndLoadTexture(e, this.materialObject, "normalMap", this.updateGeometry.bind(this))
            }.bind(this)), this.material.textures.specular.onChangedSignal.add(function (e) {
                r.verifyAndLoadTexture(e, this.materialObject, "specularMap", this.updateGeometry.bind(this))
            }.bind(this))
        },
        verifyAndLoadMesh: function (e) {
            this.loaded = !1, e.indexOf(".json") == e.length - 5 && this._meshURL != e && (this._meshURL = e, r.fileExists(e) && this.load())
        },
        updateGeometry: function () {
            if (!this.geometry)return;
            this.geometry.buffersNeedUpdate = !0, this.geometry.uvsNeedUpdate = !0
        },
        destroy: function () {
            this.materialObject.map && this.materialObject.map.dispose(), this.materialObject.normalMap && this.materialObject.normalMap.dispose(), this.materialObject.specularMap && this.materialObject.specularMap.dispose(), this.materialObject && this.materialObject.dispose(), this.geometry && this.geometry.dispose()
        }
    });
    return o
}),
define("objects/SphereObject", ["Class", "three", "core/BaseObject"], function (e, t, n) {

}), define("objects/SphereParticles", ["Class", "three", "core/BaseObject"], function (e, t, n) {

}), define("objects/WireCloud", ["Class", "three", "core/BaseObject"], function (e, t, n) {

}), define("physics/VectorField", ["Class", "core/BaseObjectActive", "three", "objects/CanvasParticles", "objects/ShardParticles", "objects/SpriteParticles2", "objects/SphereObject", "objects/SphereParticles", "objects/MeshParticles", "objects/WireCloud", "Global"], function (e, t, n, r, i, s, o, u, a, f, l) {

}), define("physics/PhysicsController", ["Class", "core/BaseObject", "three", "Global", "managers/SceneManager"], function (e, t, n, r, i) {
    var s = new e({
        Extends: t,
        manager: undefined,
        interactivePlane: undefined,
        position: null,
        motionVector: null,
        projector: undefined,
        camera: undefined,
        name: undefined,
        motionPackets: undefined,
        packetLife: .05,
        initialize: function (e) {
            this.parent(e), this.vectorFields = [], this.motionPackets = [], this.projector = new n.Projector, this.attemptToActivate(), this.position = new n.Vector2(0, 0), this.lastPosition = new n.Vector2(0, 0), this.motionVector = new n.Vector2(0, 0)
        },
        attemptToActivate: function () {
            var e = !1;
            this.camera || (this.camera = i.instance.camera, this.camera || (e = !0)), this.interactivePlane || (this.interactivePlane = this.manager.interactivePlane, this.interactivePlane || (e = !0)), e ? setTimeout(this.attemptToActivate.bind(this), 1e3) : this.connect()
        },
        connect: function () {
            throw"Override this."
        },
        addVectorField: function (e) {
            this.vectorFields.push(e)
        },
        removeVectorField: function (e) {
            this.vectorFields.splice(this.vectorFields.indexOf(e), 1)
        },
        attemptMovement: function (e) {
            if (!this.detectMovement())return;
            this.lastPosition.x = this.position.x, this.lastPosition.y = this.position.y;
            var t = this.position.x / r.width * 2, i = this.position.y / r.height * 2, s = new n.Vector3(-t, i, .5);
            this.projector.unprojectVector(s, this.camera);
            var o = new n.Raycaster(this.camera.position, s.sub(this.camera.position).normalize()),
                u = o.intersectObjects([this.interactivePlane]);
            if (u.length > 0) {
                var a = u[0].point;
                this.position.x = a.x, this.position.y = a.y;
                for (var f = this.vectorFields.length - 1; f >= 0; f--) {
                    var l = {
                        time: e,
                        position: {x: this.position.x, y: this.position.y},
                        vector: {x: this.motionVector.x, y: this.motionVector.y}
                    };
                    this.motionPackets.push(l)
                }
            }
        },
        detectMovement: function () {
            return this.motionVector.x = this.lastPosition.x - this.position.x, this.motionVector.y = this.lastPosition.y - this.position.y, this.motionVector.x != 0 || this.motionVector.y != 0 ? !0 : !1
        },
        update: function () {
            for (var e = this.motionPackets.length - 1; e >= 0; e--) {
                var t = this.motionPackets[e];
                t.time -= r.timeSinceLastFrame;
                if (t.time <= 0)for (var n = this.vectorFields.length - 1; n >= 0; n--)this.vectorFields[n].applyMotionPacket(t.position, t.vector);
                t.time < -this.packetLife && this.motionPackets.splice(e, 1)
            }
        }
    });
    return s
}),
define("physics/PhysicsMouseController", ["Class", "core/BaseObject", "three", "Global", "managers/SceneManager", "physics/PhysicsController"], function (e, t, n, r, i, s) {
    var o = new e({
        Extends: s,
        mouseSpeed: 0,
        lastMouseMovementTime: Date.now() * .001,
        mouseInactiveTimeThreshold: .25,
        initialize: function (e) {
            this.name = "mouse", this.parent(e)
        },
        connect: function () {

        },
        onDocumentMouseMove: function (e) {

        },
        update: function () {
            this.parent(), r.now - this.lastMouseMovementTime > this.mouseInactiveTimeThreshold && (this.lastMouseMovementTime = r.now, this.motionVector.x = 0, this.motionVector.y = 0, this.mouseSpeed = 0)
        }
    });
    return o
}), define("managers/CollectionManager", ["Class", "three", "core/BaseObject", "Global", "objects/SpriteParticles2", "objects/CanvasParticles", "objects/ShardParticles", "objects/MeshParticles", "objects/MeshObject", "managers/SceneManager", "managers/VectorFieldManager"], function (e, t, n, r, i, s, o, u, a, f, l) {
    var c = new e({
        Extends: n, collection: undefined, data: undefined, transitions: !1, initialize: function (e) {
            this.parent(e), this.collection = {}
        }, addMany: function (e) {
            if (!this.data) {
                this.data = e, this.data.collectionSignals.add.add(this.add.bind(this)), this.data.collectionSignals.remove.add(this.remove.bind(this));
                for (var t in e) {
                    if (t == "collectionSignals")continue;
                    this.add(t, e[t])
                }
            } else if (this.transitions) {
                for (var t in e) {
                    if (t == "collectionSignals")continue;
                    this.collection.hasOwnProperty(t) ? this.collection[t].transition(this.data[t]) : this.add(t, e[t])
                }
                for (var t in this.collection)e.hasOwnProperty(t) || this.remove(t)
            } else {
                for (var t in this.collection)this.remove(t);
                for (var t in e) {
                    if (t == "collectionSignals")continue;
                    this.add(t, e[t])
                }
            }
        }, add: function (e, t) {
            this.collection[e] && this.remove(e);
            var n = this.newObjectFromData(t);
            return n.name = e, this.collection[e] = n, this.data[e] = t, n
        }, remove: function (e) {
            delete this.collection[e], delete this.data[e]
        }, newObjectFromData: function (e) {
            throw"override this!"
        }
    });
    return c
}),

define("managers/VectorFieldManager", ["Class", "three", "physics/VectorField", "physics/PhysicsMouseController", "Global", "managers/SceneManager", "managers/CollectionManager", "utils/ModelUtils"], function (e, t, n, r, i, s, o, u) {
    var a = new e({
        Extends: o,
        interactivePlane: null,
        controllers: null,
        debugInteraction: !1,
        initialize: function (e) {
            if (a.instance)throw"Singleton enforcer!";
            a.instance = this, this.parent(e), this.controllers = [], this.addController(new r({manager: this}))
        },
        update: function () {
            var e = 0;
            for (var t in this.collection)e += this.collection[t].update();
            for (var n = this.controllers.length - 1; n >= 0; n--)this.controllers[n].update()
        },
        add: function (e, n) {
            var r = this.parent(e, n);
            r.name = e, this.interactivePlane || (this.interactivePlane = new t.Mesh(new t.PlaneGeometry(r.size.x, r.size.y, this.debugInteraction ? r.resolution.x : 1, this.debugInteraction ? r.resolution.y : 1), new t.MeshBasicMaterial({
                color: "#00ff00",
                wireframe: !0
            })), this.interactivePlane.visible = this.debugInteraction, s.instance.scene.add(this.interactivePlane));
            for (var i = this.controllers.length - 1; i >= 0; i--)this.controllers[i].addVectorField(r);
            return r
        },
        newObjectFromData: function (e) {
            return new n(e)
        },
        addObject: function (e, t) {
            if (t == "every")for (var n in this.collection)this.collection[n].add(e); else this.collection[t] ? this.collection[t].add(e) : 0
        },
        removeObject: function (e, t) {
            if (t == "every")for (var n in this.collection)this.collection[n].remove(e); else this.collection[t] ? this.collection[t].remove(e) : 0
        },
        addManyObjects: function (e, t) {
            this.collection[t] ? this.collection[t].addMany(e) : 0
        },
        addController: function (e, t) {
            this.controllers.push(e);
            for (var n in this.collection)e.addVectorField(this.collection[n])
        },
        remove: function (e, t) {
            for (var n = this.controllers.length - 1; n >= 0; n--)this.controllers[n].removeVectorField(this.collection[e]);
            this.collection[e].destroy(), this.parent(e)
        },
        override: function (e) {
            var t = $.extend(!0, {}, e);
            u.recursiveEncapsulateAndActivate(t);
            for (var n in this.collection)u.recursiveCopy(this.collection[n], t, !1)
        }
    });
    return a
}),
define("physics/Collider", ["Class", "core/BaseObjectActive", "three", "objects/CanvasParticles", "objects/ShardParticles", "objects/SpriteParticles2", "objects/SphereObject", "objects/SphereParticles", "objects/MeshParticles", "objects/WireCloud", "Global"], function (e, t, n, r, i, s, o, u, a, f, l) {
    var c = new e({
        Extends: t, position: null, radius: 10, initialize: function (e) {
            this.objects = [], this.parent(e)
        }, setParams: function (e) {
            this.parent(e)
        }, applyCollision: function (e) {
            e instanceof i || e instanceof ParticleLayer
        }
    });
    return c
}),
define("managers/ColliderManager", ["Class", "three", "physics/Collider", "Global", "managers/CollectionManager"], function (e, t, n, r, i) {
    var s = new e({
        Extends: i, debugInteraction: !0, initialize: function (e) {
            if (s.instance)throw"Singleton enforcer!";
            s.instance = this, this.parent(e)
        }, update: function () {
            var e = 0;
            for (var t in this.collection)e += this.collection[t].update()
        }, add: function (e, t) {
            var n = this.parent(e, t);
            return n.name = e, n
        }, newObjectFromData: function (e) {
            return new n(e)
        }, remove: function (e, t) {
            this.collection[e].destroy(), this.parent(e)
        }, update: function () {
            var e = LayerManager.instance.collection;
            for (var t = e.length - 1; t >= 0; t--) {
                var n = e[t];
                if (n instanceof ShardParticles || n instanceof ParticleLayer)for (var r = this.collection.length - 1; r >= 0; r--)this.collection[r].applyCollision(n)
            }
            return processedParticles
        }
    });
    return s
}),
define("managers/LayerManager", ["Class", "three", "core/BaseObject", "Global", "objects/SpriteParticles2", "objects/CanvasParticles", "objects/ShardParticles", "objects/MeshParticles", "objects/MeshObject", "managers/SceneManager", "managers/VectorFieldManager", "managers/ColliderManager", "managers/CollectionManager", "utils/ModelUtils"], function (e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
    var d = new e({
        Extends: h,
        camera: undefined,
        scene: undefined,
        queue: undefined,
        extraCanvasLayers: undefined,
        initialize: function (e) {
            if (d.instance)throw"Singleton enforcer!";
            d.instance = this, this.parent(e), this.queue = [], this.camera = f.instance.camera, this.scene = f.instance.scene, this.extraCanvasLayers = []
        },
        add: function (e, t) {
            var n = this.parent(e, t);
            return n.queued || this.scene.add(n.display), n
        },
        newObjectFromData: function (e) {
            var t;
            switch (e.type.value) {
                case"shardParticles":
                    t = new o(e), l.instance.addObject(t, t.physics.vectorField.value);
                    break;
                case"meshParticles":
                    t = new u(e), this.addToQueue(t), t.queued = !0;
                    break;
                case"meshObject":
                    t = new a(e), this.addToQueue(t), t.queued = !0;
                    break;
                case"spriteParticles":
                    t = new i(e), l.instance.addObject(t, t.physics.vectorField.value);
                    break;
                case"canvasParticles":
                    t = new s(e), l.instance.addObject(t, t.physics.vectorField.value);
                    break;
                default:
                    0;
                    return
            }
            return t.birthTime = r.now, t
        },
        remove: function (e) {
            var t = this.collection[e];
            this.scene.remove(t.display), l.instance.removeObject(t, t.physics.vectorField.value), t.destroy(), this.parent(e)
        },
        addToQueue: function (e) {
            this.queue.push(e), this.bumpQueue()
        },
        bumpQueue: function () {
            if (this.queue.length > 0) {
                var e = this.queue.splice(0, 1)[0];
                e.load(this.onModelLayerLoadComplete.bind(this))
            }
        },
        onModelLayerLoadComplete: function (e) {
            e.display && this.scene.add(e.display), e.physics && e.physics.vectorField && l.instance.addObject(e, e.physics.vectorField.value), this.bumpQueue()
        },
        onLightReset: function () {
            for (var e in this.collection) {
                var t = this.collection[e];
                t.hasOwnProperty("materialObject")
            }
        },
        hideAll: function () {
            for (var e in this.collection)this.collection[e].hide()
        },
        showAll: function () {
            for (var e in this.collection)this.collection[e].show()
        },
        overrideColor: function (e) {
            for (var t in this.collection) {
                var n = this.collection[t];
                n instanceof o || n instanceof u ? (TweenLite.to(n.material.color, 1, {colorProps: {value: e}}), TweenLite.to(n.material.ambient, 1, {colorProps: {value: e}})) : n instanceof i && TweenLite.to(n.material.color, 1, {colorProps: {value: e}})
            }
        },
        overrideLayer: function (e, t) {
            if (t.hasOwnProperty("physics")) {
                if (this.collection[e])return;
                var n = $.extend(!0, {}, t);
                n.physics.vectorField = "every", p.recursiveEncapsulateAndActivate(n);
                var r = [];
                for (var i in this.collection) {
                    var s = this.collection[i];
                    s instanceof u && r.push(s)
                }
                r.sort(function (e, t) {
                    return e.birthTime - t.birthTime
                }), r.length >= 2 && this.remove(r[0].name), this.add(e, n)
            } else {
                for (var i in t) {
                    if (this.collection[i])return;
                    var n = $.extend(!0, {}, t[i]);
                    n.physics.vectorField = "every", p.recursiveEncapsulateAndActivate(n), this.extraCanvasLayers.push(this.add(i, n))
                }
                this.extraCanvasLayers.sort(function (e, t) {
                    return e.birthTime - t.birthTime
                });
                while (this.extraCanvasLayers.length > 12)this.remove(this.extraCanvasLayers.shift().name)
            }
        }
    });
    return d
}), define("objects/LensOverlay", ["Class", "three", "core/BaseObjectActive", "Global", "utils/ColorUtils", "managers/SceneManager", "utils/FileUtils"], function (e, t, n, r, i, s, o) {
    var u = new e({
        Extends: n,
        camera: undefined,
        position: undefined,
        z: -10,
        scale: undefined,
        image: undefined,
        geometry: undefined,
        display: undefined,
        blendMode: undefined,
        spinSpeed: 0,
        texture: undefined,
        nextTexture: undefined,
        nextBlendSrc: undefined,
        nextBlendDst: undefined,
        nextBlendEquation: undefined,
        textureWrapS: t.RepeatWrapping,
        textureWrapT: t.RepeatWrapping,
        textureRepeatX: 1,
        textureRepeatY: 1,
        color: "#ffffff",
        colorToUse: "#ffffff",
        invertColorToUse: !1,
        invertColor: !1,
        nextInvertColor: !1,
        fitToScreen: !1,
        fitToScreenKeepAspect: !1,
        fitToScreenTilePixels: !1,
        pixelsNoScale: !1,
        safetyRatio: 1,
        opacity: 1,
        visible: !0,
        dirty: !1,
        dirtyOpacity: 1,
        dirtyOpacityStepIn: .01,
        dirtyOpacityStepOut: .5,
        initialize: function (e) {
            this.parent(e), this.camera = s.instance.camera, this.pixelsNoScale.value && (this.fitToScreenTilePixels.value = !0), this.fitToScreenTilePixels.value && (this.fitToScreenKeepAspect.value = !0), this.spinSpeed.value && (this.safetyRatio = Math.pow(2, .5)), this.invertColorToUse = this.invertColor.value, this.generateColor(), this.materialObject = new t.MeshBasicMaterial({
                blending: t.CustomBlending,
                blendSrc: t[e.blendMode.blendSrc.value + "Factor"],
                blendDst: t[e.blendMode.blendDst.value + "Factor"],
                blendEquation: t[e.blendMode.blendEquation.value + "Equation"],
                transparent: !0,
                color: this.colorToUse,
                depthTest: !0,
                depthWrite: !1,
                opacity: this.opacity.value,
                fog: !1,
                lights: !1,
                overdraw: !0
            }), this.geometry = new t.PlaneGeometry(100, 100, 1, 1), this.display = new t.Mesh(this.geometry, this.materialObject), this.nextTexture = o.verifyAndLoadTexture(this.image.value, this.materialObject, "map", undefined, !0), this.display.position.x = this.position.x.value, this.display.position.y = this.position.y.value, this.display.position.z = this.z.value, this.display.scale.x = this.scale.x.value, this.display.scale.y = this.scale.y.value, this.display.visible = this.visible.value, this.image.onChangedSignal.add(function (e) {
                this.nextTexture = o.verifyAndLoadTexture(e, this.materialObject, "map", undefined, !0)
            }.bind(this)), this.position.x.onChangedSignal.add(function (e) {
                this.display.position.x = e
            }.bind(this)), this.position.y.onChangedSignal.add(function (e) {
                this.display.position.y = e
            }.bind(this)), this.z.onChangedSignal.add(function (e) {
                this.display.position.z = e, this.onWindowResize()
            }.bind(this)), this.visible.onChangedSignal.add(function (e) {
                this.display.visible = e
            }.bind(this)), this.blendMode.blendSrc.onChangedSignal.add(function (e) {
                this.nextBlendSrc = t[e + "Factor"]
            }.bind(this)), this.blendMode.blendDst.onChangedSignal.add(function (e) {
                this.nextBlendDst = t[e + "Factor"]
            }.bind(this)), this.blendMode.blendEquation.onChangedSignal.add(function (e) {
                this.nextBlendEquation = t[e + "Equation"]
            }.bind(this)), this.fitToScreen.onChangedSignal.add(function (e) {
                this.onWindowResize()
            }.bind(this)), this.fitToScreenKeepAspect.onChangedSignal.add(function (e) {
                this.onWindowResize()
            }.bind(this)), this.fitToScreenTilePixels.onChangedSignal.add(function (e) {
                this.onWindowResize()
            }.bind(this)), this.pixelsNoScale.onChangedSignal.add(function (e) {
                this.onWindowResize()
            }.bind(this)), this.opacity.onChangedSignal.add(function (e) {
                this.display.material.opacity = e
            }.bind(this)), this.spinSpeed.onChangedSignal.add(function (e) {
                this.safetyRatio = e ? Math.pow(2, .5) : 1, this.onWindowResize(), this.display.rotation.z = e ? r.now * this.spinSpeed.value : 0
            }.bind(this)), this.color.onChangedSignal.add(function (e) {
                this.generateColor(), this.display.material.color.setHex(this.colorToUse)
            }.bind(this)), this.invertColor.onChangedSignal.add(function (e) {
                this.nextInvertColor = e
            }.bind(this)), this.onWindowResize()
        },
        transitionTexture: function (e, t, n, r) {
            opacity > 0 && TweenLite.to(t, .5, {
                opacity: 0, onComplete: function () {
                    0
                }
            }), o.verifyAndLoadTexture(e, t, n, r)
        },
        generateColor: function () {
            if (!this.invertColorToUse) this.colorToUse = i.getHexNumber(this.color.value); else {
                var e = new t.Color(this.color.value), n = new t.Color;
                n.r = 1 - e.r, n.g = 1 - e.g, n.b = 1 - e.b, this.colorToUse = n.getHex()
            }
        },
        update: function () {
            this.nextTexture !== undefined || this.nextBlendSrc !== undefined || this.nextBlendDst !== undefined || this.nextBlendEquation !== undefined || this.nextInvertColor !== undefined ? this.dirtyOpacity > 0 ? (this.dirtyOpacity -= this.dirtyOpacityStepOut, this.materialObject.opacity = Math.max(0, Math.min(1, this.opacity.value * this.dirtyOpacity))) : (this.nextTexture !== undefined && (this.nextTexture !== null && !this.nextTexture.image.complete ? 0 : (this.texture = this.nextTexture, this.materialObject.map && this.materialObject.map.dispose(), this.materialObject.map = this.texture, this.materialObject.needsUpdate = !0, this.geometry.buffersNeedUpdate = !0, this.geometry.uvsNeedUpdate = !0, this.nextTexture = undefined)), this.nextBlendSrc !== undefined && (this.materialObject.blendSrc = this.nextBlendSrc, this.nextBlendSrc = undefined), this.nextBlendDst !== undefined && (this.materialObject.blendDst = this.nextBlendDst, this.nextBlendDst = undefined), this.nextBlendEquation !== undefined && (this.materialObject.blendEquation = this.nextBlendEquation, this.nextBlendEquation = undefined), this.nextInvertColor !== undefined && (this.invertColorToUse = this.nextInvertColor, this.generateColor(), this.materialObject.color.setHex(this.colorToUse), this.nextInvertColor = undefined)) : this.dirtyOpacity < 1 && (this.dirtyOpacity += this.dirtyOpacityStepIn, this.materialObject.opacity = Math.max(0, Math.min(1, this.opacity.value * this.dirtyOpacity))), this.spinSpeed.value != 0 ? this.display.rotation.z += r.timeSinceLastFrame * this.spinSpeed.value : this.display.rotation.z = 0;
            if (this.fitToScreenTilePixels.value) {
                var e = 1 * this.safetyRatio, t = 1 * this.safetyRatio;
                this.pixelsNoScale.value && (this.scale.y.value / this.scale.x.value > r.aspectRatio ? (e /= this.texture.image.height / r.height, t = e) : (e /= this.texture.image.width / r.width, t = e)), this.texture && (this.texture.offset.set(e * -0.5 + .5, t * -0.5 + .5), this.texture.repeat.set(e, t))
            }
        },
        onWindowResize: function () {
            if (!this.fitToScreen.value)return;
            var e = this.camera.fov / 360 * Math.PI, t = Math.sin(e) / Math.cos(e),
                n = -this.z.value / this.display.geometry.width * r.aspectRatio * t * 2 * this.safetyRatio,
                i = -this.z.value / this.display.geometry.height * t * 2 * this.safetyRatio;
            this.fitToScreenKeepAspect.value && (i / n > r.aspectRatio ? n /= r.aspectRatio : i = n), this.display.scale.x = n, this.display.scale.y = i
        },
        onCameraFOVChanged: function () {
            if (!this.fitToScreen.value)return;
            this.onWindowResize()
        },
        preventRotation: function () {
            this._safetyRatioBackup = this.safetyRatio, this.safetyRatio = 1, this.onWindowResize(), this.display.rotation.z = 0
        },
        allowRotation: function () {
            this.safetyRatio = this._safetyRatioBackup, this.onWindowResize(), this.display.rotation.z = r.now * this.spinSpeed.value
        },
        hide: function () {
            this.display.visible = !1
        },
        show: function () {
            this.display.visible = this.visible.value
        },
        destroy: function () {
            this.materialObject.map && this.materialObject.map.dispose(), this.materialObject.normalMap && this.materialObject.normalMap.dispose(), this.materialObject.specularMap && this.materialObject.specularMap.dispose(), this.materialObject.dispose(), this.geometry.dispose()
        }
    });
    return u
}), define("managers/LensOverlayManager", ["Class", "three", "core/BaseObject", "objects/LensOverlay", "Global", "managers/SceneManager", "managers/CollectionManager"], function (e, t, n, r, i, s, o) {
    var u = new e({
        Extends: o, camera: undefined, x: 0, y: 0, z: 0, display: undefined, initialize: function (e) {
            if (u.instance)throw"Singleton enforcer!";
            u.instance = this, this.parent(e), this.camera = s.instance.camera, this.display = new t.Object3D, this.camera.add(this.display), this.display.position.x = this.x, this.display.position.y = this.y, this.display.position.z = this.z, window.addEventListener("resize", this.onWindowResize.bind(this), !1), this.camera.onFOVChangedSignal.add(this.onCameraFOVChanged.bind(this)), this.onWindowResize()
        }, addMany: function (e) {
            this.parent(e), this.onWindowResize()
        }, add: function (e, t) {
            var n = this.parent(e, t);
            return this.display.add(n.display), n
        }, newObjectFromData: function (e) {
            return new r(e)
        }, remove: function (e) {
            this.display.remove(this.collection[e].display), this.collection[e].destroy(), this.parent(e)
        }, update: function () {
            for (var e in this.collection)this.collection[e].update()
        }, onCameraFOVChanged: function () {
            for (var e in this.collection)this.collection[e].onCameraFOVChanged()
        }, onWindowResize: function () {
            for (var e in this.collection)this.collection[e].onWindowResize()
        }, preventRotation: function () {
            for (var e in this.collection)this.collection[e].preventRotation()
        }, allowRotation: function () {
            for (var e in this.collection)this.collection[e].allowRotation()
        }, hideAll: function () {
            for (var e in this.collection)this.collection[e].hide()
        }, showAll: function () {
            for (var e in this.collection)this.collection[e].show()
        }, makeTransparent: function () {
            this.transparentMode = !0;
            for (var e in this.collection)this.collection[e].opacity.value == 1 && TweenLite.to(this.collection[e].opacity, 1, {value: .5})
        }
    });
    return u
}), define("objects/Light", ["Class", "core/BaseObjectActive", "three", "Global"], function (e, t, n, r) {
    var i = new e({
        Extends: t,
        type: "point",
        illuminate: !0,
        color: "#ffffff",
        intensity: 1,
        lensFlare: undefined,
        textureFlare0: undefined,
        textureFlare2: undefined,
        textureFlare3: undefined,
        lensFlareUpdateCallback: undefined,
        position: undefined,
        initialize: function (e) {
            e.type || (e.type = this.type), i.initdStatic || i.initStatic(), this.parent(e);
            var t = !0;
            switch (this.type.value) {
                case"point":
                    this.light = new n.PointLight(this.color.value, this.intensity.value, 4500);
                    break;
                case"directional":
                    this.light = new n.DirectionalLight(this.color.value, this.intensity.value);
                    break;
                case"ambient":
                    this.light = new n.AmbientLight(this.color.value), t = !1;
                    break;
                default:
                    0
            }
            t && this.light.position.set(this.position.x.value, this.position.y.value, this.position.z.value), this.color.onChangedSignal.add(function (e) {
                this.light.color = new n.Color(e)
            }.bind(this)), this.illuminate instanceof Object && this.illuminate.onChangedSignal.add(function (e) {
                this.light.visible = e
            }.bind(this)), this.intensity instanceof Object && this.intensity.onChangedSignal.add(function (e) {
                this.light.intensity = e
            }.bind(this)), t && (this.position.x.onChangedSignal.add(function (e) {
                this.light.position.x = e
            }.bind(this)), this.position.y.onChangedSignal.add(function (e) {
                this.light.position.y = e
            }.bind(this)), this.position.z.onChangedSignal.add(function (e) {
                this.light.position.z = e
            }.bind(this)))
        }
    });
    return i.initStatic = function () {
        i.initdStatic = !0
    }, i
}), define("managers/LightManager", ["Class", "three", "objects/Light", "Signal", "managers/SceneManager", "managers/CollectionManager"], function (e, t, n, r, i, s) {
    var o = new e({
        Extends: s, scene: undefined, onLightResetSignal: undefined, initialize: function (e) {
            if (o.instance)throw"Singleton enforcer!";
            o.instance = this, this.parent(e), this.scene = i.instance.scene, this.onLightResetSignal = new r
        }, newObjectFromData: function (e) {
            return new n(e)
        }, add: function (e, t) {
            var n = this.parent(e, t);
            n.illuminate.value && this.scene.add(n.light), this.onLightResetSignal.dispatch()
        }, remove: function (e) {
            var t = this.collection[e];
            t.illuminate.value && this.scene.remove(t.light), this.parent(e), this.onLightResetSignal.dispatch()
        }, overrideColor: function (e) {
            for (var t in this.collection) {
                var n = this.collection[t];
                TweenLite.to(n.color, 1, {colorProps: {value: e}})
            }
        }
    });
    return o
});

var Stats = function () {
    var e = Date.now(), t = e, n = 0, r = Infinity, i = 0, s = 0, o = Infinity, u = 0, a = 0, f = 0,
        l = document.createElement("div");
    l.id = "stats", l.addEventListener("mousedown", function (e) {
        e.preventDefault(), y(++f % 2)
    }, !1), l.style.cssText = "width:80px;opacity:0.9;cursor:pointer";
    var c = document.createElement("div");
    c.id = "fps", c.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#002", l.appendChild(c);
    var h = document.createElement("div");
    h.id = "fpsText", h.style.cssText = "color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", h.innerHTML = "FPS", c.appendChild(h);
    var p = document.createElement("div");
    p.id = "fpsGraph", p.style.cssText = "position:relative;width:74px;height:30px;background-color:#0ff";
    for (c.appendChild(p); 74 > p.children.length;) {
        var d = document.createElement("span");
        d.style.cssText = "width:1px;height:30px;float:left;background-color:#113", p.appendChild(d)
    }
    var v = document.createElement("div");
    v.id = "ms", v.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#020;display:none", l.appendChild(v);
    var m = document.createElement("div");
    m.id = "msText", m.style.cssText = "color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", m.innerHTML = "MS", v.appendChild(m);
    var g = document.createElement("div");
    g.id = "msGraph", g.style.cssText = "position:relative;width:74px;height:30px;background-color:#0f0";
    for (v.appendChild(g); 74 > g.children.length;)d = document.createElement("span"), d.style.cssText = "width:1px;height:30px;float:left;background-color:#131", g.appendChild(d);
    var y = function (e) {
        f = e;
        switch (f) {
            case 0:
                c.style.display = "block", v.style.display = "none";
                break;
            case 1:
                c.style.display = "none", v.style.display = "block"
        }
    };
    return {
        REVISION: 11, domElement: l, setMode: y, begin: function () {
            e = Date.now()
        }, end: function () {
            var f = Date.now();
            n = f - e, r = Math.min(r, n), i = Math.max(i, n), m.textContent = n + " MS (" + r + "-" + i + ")";
            var l = Math.min(30, 30 - 30 * (n / 200));
            return g.appendChild(g.firstChild).style.height = l + "px", a++, f > t + 1e3 && (s = Math.round(1e3 * a / (f - t)), o = Math.min(o, s), u = Math.max(u, s), h.textContent = s + " FPS (" + o + "-" + u + ")", l = Math.min(30, 30 - 30 * (s / 100)), p.appendChild(p.firstChild).style.height = l + "px", t = f, a = 0), f
        }, update: function () {
            e = this.end()
        }
    }
};
define("stats", function (e) {
    return function () {
        var t, n;
        return t || e.Stats
    }
}(this));
var THREEx = THREEx || {};
THREEx.RendererStats = function () {
    var e = 100, t = 0, n = document.createElement("div");
    n.style.cssText = "width:80px;opacity:0.9;cursor:pointer";
    var r = document.createElement("div");
    r.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#200;", n.appendChild(r);
    var i = document.createElement("div");
    i.style.cssText = "color:#f00;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", i.innerHTML = "WebGLRenderer", r.appendChild(i);
    var s = [], o = 9;
    for (var u = 0; u < o; u++)s[u] = document.createElement("div"), s[u].style.cssText = "color:#f00;background-color:#311;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", r.appendChild(s[u]), s[u].innerHTML = "-";
    var a = Date.now();
    return {
        domElement: n, update: function (e) {
            0;
            if (Date.now() - a < 1e3 / 30)return;
            a = Date.now();
            var t = 0;
            s[t++].textContent = "== Memory =====", s[t++].textContent = "Programs: " + e.info.memory.programs, s[t++].textContent = "Geometries: " + e.info.memory.geometries, s[t++].textContent = "Textures: " + e.info.memory.textures, s[t++].textContent = "== Render =====", s[t++].textContent = "Calls: " + e.info.render.calls, s[t++].textContent = "Vertices: " + e.info.render.vertices, s[t++].textContent = "Faces: " + e.info.render.faces, s[t++].textContent = "Points: " + e.info.render.points
        }
    }
}, define("RendererStats", function () {
});
var Detector = {
    canvas: !!window.CanvasRenderingContext2D,
    webgl: function () {
        try {
            return !!window.WebGLRenderingContext && !!document.createElement("canvas").getContext("experimental-webgl")
        } catch (e) {
            return !1
        }
    }(),

};
define("detector", function (e) {
    return function () {
        var t, n;
        return t || e.Detector
    }
}(this)), define("performance/FPS", ["Class", "core/BaseObject"], function (e, t) {
    var n = new e({
        Extends: t,
        filterStrength: 20,
        frameTime: 0,
        lastLoop: 0,
        thisLoop: 0,
        dirty: 0,
        fps: 0,
        initialize: function () {
            if (n.instance)throw"Singleton enforcer!";
            n.instance = this, this.lastLoop = new Date
        },
        update: function () {
            var e = (this.thisLoop = new Date) - this.lastLoop;
            this.frameTime += (e - this.frameTime) / this.filterStrength, this.lastLoop = this.thisLoop, this.fps = 1e3 / this.frameTime
        }
    });
    return n
}), define("performance/PerformanceTweaker", ["Class", "core/BaseObject", "Signal", "performance/FPS"], function (e, t, n, r) {
    var i = new e({
        Extends: t,
        denominator: 1,
        degradeWhen: 15,
        upgradeWhen: 26,
        denominatorMax: 8,
        minScale: .75,
        dirty: 0,
        updateFrequency: 5,
        changeFactor: 1.25,
        onChange: undefined,
        initialize: function (e) {
            this.parent(e), this.lastLoop = new Date, this.onChange = new n
        },
        update: function () {
            r.instance.update(), this.dirty == 0 && (r.instance.fps <= this.degradeWhen ? (this.denominator *= this.changeFactor, this.denominator <= this.denominatorMax ? this.makeDirty() : this.denominator = this.denominatorMax) : r.instance.fps >= this.upgradeWhen && (this.denominator /= this.changeFactor, this.denominator >= .99 ? this.makeDirty() : this.denominator = 1)), this.dirty > 0 && this.dirty--
        },
        makeDirty: function () {
            this.onChange.dispatch(Math.max(this.minScale, 1 / this.denominator)), this.dirty = this.updateFrequency
        }
    });
    return i
}), !function (e) {
    if ("object" == typeof exports) module.exports = e(); else if ("function" == typeof define && define.amd) define("TextManager", e); else {
        var t;
        "undefined" != typeof window ? t = window : "undefined" != typeof global ? t = global : "undefined" != typeof self && (t = self), t.TextManager = e()
    }
}(function () {
    var e, t, n;
    return function r(e, t, n) {
        function i(o, u) {
            if (!t[o]) {
                if (!e[o]) {
                    var a = typeof require == "function" && require;
                    if (!u && a)return a(o, !0);
                    if (s)return s(o, !0);
                    throw new Error("Cannot find module '" + o + "'")
                }
                var f = t[o] = {exports: {}};
                e[o][0].call(f.exports, function (t) {
                    var n = e[o][1][t];
                    return i(n ? n : t)
                }, f, f.exports, r, e, t, n)
            }
            return t[o].exports
        }

        var s = typeof require == "function" && require;
        for (var o = 0; o < n.length; o++)i(n[o]);
        return i
    }({
        1: [function (e, t, n) {
            var r = e("klasse"), i = e("vecmath").Vector3, s = new i, o = new r({
                initialize: function (e, t, n, r) {
                    this.p1 = e, this.p2 = t, typeof r != "number" && (r = e.position.distance(t.position)), this.restingDistance = r, this.originalRestingDistance = this.restingDistance, this.stiffness = typeof n == "number" ? n : .01, this.originalStiffness = n, this.tearDistance = Number.MAX_VALUE
                }, solve: function () {
                    var e = this.p1, t = this.p2, n = this.restingDistance, r = this.stiffness,
                        i = t.position.x - e.position.x, s = t.position.y - e.position.y,
                        o = t.position.z - e.position.z, u = Math.sqrt(i * i + s * s + o * o),
                        a = u === 0 ? n : (n - u) / u, f = 1 / e.mass, l = 1 / t.mass, c = f / (f + l) * r, h = r - c,
                        p = 1;
                    return e.velocity.x -= i * c * a * p, e.velocity.y -= s * c * a * p, e.velocity.z -= o * c * a * p, t.velocity.x += i * h * a * p, t.velocity.y += s * h * a * p, t.velocity.z += o * h * a * p, u
                }
            });
            t.exports = o
        }, {klasse: 34, vecmath: 61}],
        2: [function (e, t, n) {
            function A(e, t, n, r, i, s) {
                e.beginPath();
                var o = 0, u = r[0].alpha;
                for (var a = 0; a < t.length; a += 3) {
                    var f = t[a].position, l = t[a + 1].position, c = t[a + 2].position, h = t[a].word, p = r[h],
                        d = p.y;
                    h !== o && (e.globalAlpha = u, u = p.alpha, g = !0, e.closePath(), i ? e.fill() : e.stroke(), e.beginPath()), s && e.beginPath(), n.project(f, b);
                    var v = b.x, m = b.y;
                    e.moveTo(b.x, b.y + d), n.project(l, b), e.lineTo(b.x, b.y + d), n.project(c, b), e.lineTo(b.x, b.y + d);
                    var g = !1;
                    s ? (e.globalAlpha = u, e.closePath(), i ? e.fill() : e.stroke()) : e.lineTo(v, m + d), o = h
                }
                s || (e.globalAlpha = u, i ? e.fill() : e.stroke())
            }

            function O(e, t) {
                var n = 1;
                for (var r = 0; r < t.length; r++) {
                    var i = t[r], s = i.position;
                    b.set(s), e.fillRect(b.x - n / 2, b.y - n / 2, n, n)
                }
            }

            function M(e, t, n, r) {
                return e == r ? t + n : n * (-Math.pow(2, -10 * e / r) + 1) + t
            }

            var r = e("vecmath").Vector2, i = e("vecmath").Vector3, s = e("vecmath").Matrix4, o = e("./World"),
                u = e("./Constraint"), a = e("interpolation").smoothstep, f = e("interpolation").lerp,
                l = e("text3d").util, c = e("text3d").Glyph, h = e("text3d").Text3D, p = e("cam3d").OrthographicCamera,
                d = e("cam3d").PerspectiveCamera, v = e("klasse"), m = e("./typeface-stripped"),
                g = e("../vendor/uni_sans_bold_B.typeface");
            m.loadFace(g);
            var y = e("./WebGLRenderer"), b = new i, w = new i, E = new i, S = new i, x = new i, T = e("fs"),
                N = "attribute vec4 Position;\nattribute vec4 Color;\n// attribute vec2 TexCoord0;\n\nuniform mat4 u_projModelView;\n\nvarying vec4 v_col;\n// varying vec2 v_texCoord0;\n\nvoid main() {\n	gl_Position = u_projModelView * vec4(Position.xyz, 1.0);\n	v_col = Color;\n	// v_texCoord0 = TexCoord0;\n}",
                C = "#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec4 v_col;\n// varying vec2 v_texCoord0;\n// uniform sampler2D u_sampler0;\n\nvoid main() {\n	gl_FragColor = v_col; //* texture2D(u_sampler0, v_texCoord0);\n}",
                k = "#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform sampler2D u_texture0;\n\nvarying vec4 vColor;\nvarying vec2 vTexCoord0;\n\nvoid main() {\n	float dist = smoothstep(0.5, 0.35, length(vTexCoord0.xy - 0.5));\n	gl_FragColor = vColor * texture2D(u_texture0, vTexCoord0);\n	gl_FragColor.a *= dist;\n}",
                L = JSON.parse('{\n  "preset": "Default",\n  "closed": false,\n  "remembered": {\n    "Default": {\n      "0": {\n        "steps": 30,\n        "simplify": 0,\n        "letterSpacing": 2.352231604342581,\n        "spaceWidth": 0,\n        "lineOffset": -12,\n        "periodKerning": 14,\n        "align": "CENTER",\n        "spinStrength": 17.20489402033431,\n        "mouseStrength": 10.91849043598139,\n        "mouseRadius": 24.153024297777012,\n        "minMouseMotion": 5,\n        "rigidness": 0.2,\n        "resetDuration": 1,\n        "resetDelay": 1.191108047561606,\n        "resetLinear": false,\n        "resetWhileIdle": false,\n        "resetByDistance": true\n      }\n    },\n    "Crows": {\n      "0": {\n        "steps": 10.44442529726004,\n        "simplify": 50,\n        "letterSpacing": 0,\n        "spaceWidth": 0,\n        "lineOffset": -12,\n        "periodKerning": 14,\n        "align": "CENTER",\n        "spinStrength": 11.91108047561606,\n        "mouseStrength": 0.6617266930897812,\n        "mouseRadius": 27.461657763225915,\n        "minMouseMotion": 2,\n        "rigidness": 0,\n        "resetDuration": 1,\n        "resetDelay": 1.0146475960709977,\n        "resetLinear": false,\n        "resetWhileIdle": false,\n        "resetByDistance": true\n      }\n    },\n    "Fling": {\n      "0": {\n        "steps": 10,\n        "simplify": 50,\n        "letterSpacing": 0,\n        "spaceWidth": 0,\n        "lineOffset": -12,\n        "periodKerning": 14,\n        "align": "CENTER",\n        "spinStrength": 17.86662071342409,\n        "mouseStrength": 3.308633465448906,\n        "mouseRadius": 15,\n        "minMouseMotion": 0.38600723763570566,\n        "rigidness": 0.04632086851628468,\n        "resetDuration": 1.146992934688954,\n        "resetDelay": 1.191108047561606,\n        "resetLinear": false,\n        "resetWhileIdle": false,\n        "resetByDistance": true\n      }\n    }\n  },\n  "folders": {\n    "Text Mesh": {\n      "preset": "Default",\n      "closed": false,\n      "folders": {}\n    },\n    "Physics": {\n      "preset": "Default",\n      "closed": false,\n      "folders": {}\n    },\n    "Reset Animation": {\n      "preset": "Default",\n      "closed": false,\n      "folders": {}\n    }\n  }\n}\n'),
                _ = new v({
                    initialize: function (e, t, n, r, s) {
                        this.options = this.toDefaults(t), this.text = e.trim(), this.datGUI = r, this.TweenLite = n, this.world = new o, this.camera = new p, this.face = l.getFace("uni sans bold"), this.webGLRenderer = null, this.scale = 1, this.position = new i(0, 0, 0), this._finishTweenReset = this.finishTweenReset.bind(this), this._startTweenReset = this.startTweenReset.bind(this), this.glyphData = [], s && (L.remembered.Default[0].steps = 10, L.remembered.Default[0].simplify = 50), this.color = {
                            r: 0,
                            g: 0,
                            b: 0,
                            a: 1
                        }, this.create(), this.setupUI(), this.onCreated = null
                    }, animateOut: function (e) {
                        e = e || {};
                        var t = e.delay || 0, n = e.delayIncrement === 0 || e.delayIncrement ? e.delayIncrement : .05;
                        for (var r = this.tweens.length - 1; r >= 0; r--)this.TweenLite.to(this.tweens[r], e.duration || .5, {
                            alpha: 0,
                            y: e.yOff === 0 || e.yOff ? e.yOff : 100,
                            delay: t,
                            ease: e.ease || Expo.easeOut,
                            onStart: r === this.tweens.length - 1 ? e.onStart : undefined,
                            onComplete: r === 0 ? e.onComplete : undefined
                        }), t += n
                    }, animateIn: function (e, t) {
                        e = e || {}, t = t || e;
                        var n = e.delay || 0, r = t.delay || 0,
                            i = e.delayIncrement === 0 || e.delayIncrement ? e.delayIncrement : .15;
                        for (var s = 0; s < this.tweens.length; s++)this.TweenLite.fromTo(this.tweens[s], e.duration || 1, {y: e.yOff === 0 || e.yOff ? e.yOff : 100}, {
                            y: 0,
                            onStart: s === 0 ? e.onStart : undefined,
                            onComplete: s === this.tweens.length - 1 ? e.onComplete : undefined,
                            delay: n,
                            ease: e.ease || Expo.easeOut
                        }), this.TweenLite.fromTo(this.tweens[s], t.duration || 1, {alpha: 0}, {
                            alpha: 1,
                            delay: r,
                            ease: t.ease || Expo.easeOut
                        }), n += i, r += i
                    }, resetOptions: function () {
                        this.options = {}, this.toDefaults(this.options)
                    }, uiRecreate: function () {
                    }, setupUI: function () {
                        if (!this.datGUI)return;
                        var e = new this.datGUI.GUI({load: L});
                        e.remember(this.options), this.gui = e;
                        var t = e.addFolder("Text Mesh");
                        t.add(this.options, "steps", 3, 30), t.add(this.options, "simplify", 0, 50), t.add(this.options, "letterSpacing", -10, 10), t.add(this.options, "spaceWidth", 0, 100), t.add(this.options, "lineOffset", -20, 20), t.add(this.options, "periodKerning", -50, 50), t.add(this.options, "align", [h.Align.LEFT, h.Align.CENTER, h.Align.RIGHT]), t.add(this, "create"), t.add(this, "reset"), t.open(), this.guiMesh = t;
                        var n = e.addFolder("Physics");
                        n.add(this.options, "spinStrength", 0, 30), n.add(this.options, "mouseStrength", 0, 30), n.add(this.options, "mouseRadius", 0, 30), n.add(this.options, "minMouseMotion", 0, 5), n.add(this.options, "rigidness", 0, .2), n.open();
                        var r = e.addFolder("Reset Animation");
                        r.add(this.options, "resetDuration", 0, 4), r.add(this.options, "resetDelay", 0, 4), r.add(this.options, "resetLinear"), r.add(this.options, "resetWhileIdle"), r.add(this.options, "resetByDistance"), r.open(), document.querySelector(".ac").style.zIndex = 1e5, document.querySelector(".save-row").style.width = "260px", document.querySelector(".gears").style.width = "18px", document.querySelector(".gears").style.height = "18px"
                    }, toDefaults: function (e) {
                        e.text = typeof e.text == "string" ? e.text : "HEY."
						, e.style = typeof e.style == "number" ? e.style : 0
						, e.spinStrength = typeof e.spinStrength == "number" ? e.spinStrength : 10
						, e.mouseStrength = typeof e.mouseStrength == "number" ? e.mouseStrength : 5
						, e.mouseRadius = typeof e.mouseRadius == "number" ? e.mouseRadius : 15
						, e.minMouseMotion = typeof e.minMouseMotion == "number" ? e.minMouseMotion : 2
						, e.resetLinear = !!e.resetLinear
						, e.resetDuration = typeof e.resetDuration == "number" ? e.resetDuration : 1
						, e.resetDelay = typeof e.resetDelay == "number" ? e.resetDelay : .5
						, e.resetDelayIncrement = typeof e.resetDelayIncrement == "number" ? e.resetDelayIncrement : .05
						, e.resetWhileIdle = typeof e.resetWhileIdle == "boolean" ? e.resetWhileIdle : !0
						, e.resetByDistance = typeof e.resetByDistance == "boolean" ? e.resetByDistance : !0
						, e.rigidness = typeof e.rigidness == "number" ? e.rigidness : 0
						, e.align = e.align || h.Align.CENTER
						, e.letterSpacing = e.letterSpacing || 0
						, e.spaceWidth = typeof e.spaceWidth == "number" ? e.spaceWidth : 0
						, e.periodKerning = typeof e.periodKerning == "number" ? e.periodKerning : 14
						, e.lineOffset = typeof e.lineOffset == "number" ? e.lineOffset : -12
						, e.fill = typeof e.fill == "boolean" ? e.fill : !0
						, e.fontSize = document.documentElement.clientWidth<750? 60 : 30
						, this.fontSize = e.fontSize || 20
						, this.snap = typeof e.snap == "number" ? e.snap : .995
						, e.snap = this.snap, e.fontSize = this.fontSize
						, e.steps = typeof e.steps == "number" ? e.steps : 10
						, e.simplify = typeof e.simplify == "number" ? e.simplify : 50;
                        if (L && L.remembered && L.remembered.Default)for (var t in e)typeof L.remembered.Default["0"][t] != "undefined" && (e[t] = L.remembered.Default[0][t]);
                        return e
                    }, reset: function () {
                        var e = this.options;
                        e.text = undefined, e.align = undefined, e.letterSpacing = undefined, e.spaceWidth = undefined, e.lineOffset = undefined, e.fill = undefined, e.steps = undefined, e.simplify = undefined, e.periodKerning = undefined, this.toDefaults(e), this.create();
                        if (this.guiMesh)for (var t in this.guiMesh.__controllers)this.guiMesh.__controllers[t].updateDisplay()
                    }, create: function () {
                        var e = this.options.text || this.text;
                        e = e.replace("<br>", "\n");
                        var t = this.options;
                        this.toDefaults(this.options);
                        var n = ~~t.steps;
                        typeof t.simplify == "number" ? t.simplify === 0 ? simplify = 0 : simplify = this.fontSize / Math.max(10, ~~t.simplify) : simplify = this.fontSize / 50, c.SAVE_CONTOUR = !1;
                        var r = Math.round(t.spaceWidth || 0) || undefined, s = Math.round(t.letterSpacing || 0),
                            o = Math.round(t.lineOffset || 0) || undefined, u = t.align;
                        h.PERIOD_KERNING = t.periodKerning || 0, this.textMesh = new h(e, this.face, this.fontSize, n, simplify, u, r, s, o), this.tweens = [];
                        for (var a = 0; a < this.textMesh.wordCount; a++)this.tweens.push({y: 0, alpha: 1});
                        this.mouse = new i, this.lastMouse = new i, this.world.particles.length = 0, this.world.addText3D(this.textMesh), this.webGLRenderer && this.webGLRenderer.setup(this.world.particles), this.width = this.textMesh.bounds.maxX - this.textMesh.bounds.minX, this.height = this.textMesh.bounds.maxY - this.textMesh.bounds.minY, this.glyphData.length = 0;
                        for (var a = 0; a < this.textMesh.glyphs.length; a++)this.glyphData[a] = {
                            mouseOver: !1,
                            tween: 0,
                            resetting: !1
                        };
                        this.textMesh.destroy(), this._createRandomForces(), typeof this.onCreated == "function" && this.onCreated()
                    }, finishTweenReset: function (e) {
                        this.glyphData[e].resetting = !1, this.glyphData[e].tweening = !1, this.glyphData[e].tween = 0
                    }, startTweenReset: function (e) {
                        this.glyphData[e].resetting = !0, this.glyphData[e].tweening = !0, this.glyphData[e].tween = 0, this._saveGlyph(e)
                    }, update: function (e) {
                        var t = this.world;
                        t.step(e), this._resolveTweens(), this._updateKillTweens();
                        var n = this.options;
                        n.style === 0 ? this._updateMouseInteractions() : n.style === 1 ? this._updateMouseInteractions2() : n.style === 2 && this._updateMouseInteractions3()
                    }, _resolveTweens: function () {
                        var e = this.world;
                        for (var t = 0; t < e.particles.length; t++) {
                            var n = e.particles[t], r = n.glyphIndex, i = this.glyphData[r];
                            if (i.resetting) {
                                var s = i.tween;
                                n.position.copy(n.lastPosition).lerp(n.original, s), n.velocity.lerp(S, s), n.acceleration.lerp(S, s);
                                for (var o = 0; o < n.constraints.length; o++) {
                                    var u = n.constraints[o];
                                    u.restingDistance = f(u.restingDistance, u.originalRestingDistance, s), u.stiffness = f(u.stiffness, u.originalStiffness, s)
                                }
                            }
                        }
                    }, _createRandomForces: function () {
                        var e = this.world;
                        for (var t = 0; t < e.particles.length; t++) {
                            var n = this.options.spinStrength;
                            b.random(), b.z = 0, b.x *= n, b.y *= n, e.particles[t].finalPosition.add(b)
                        }
                    }, _updateKillTweens: function () {
                        var e = this.mouse, t = e.distance(this.lastMouse) > 2;
                        for (var n = 0; n < this.textMesh.glyphs.length; n++) {
                            var r = this.glyphData[n], i = this.textMesh.glyphs[n], s = i.bounds,
                                o = e.x > s.minX && e.x < s.maxX && e.y > s.minY && e.y < s.maxY;
                            if (!t && this.options.resetWhileIdle) {
                                r.mouseOver = !1, this._addTween(n, this.options.resetDelay);
                                continue
                            }
                            var u = e.distance(b.set(s.minX + (s.maxX - s.minX) / 2, s.minY + (s.maxY - s.minY) / 2));
                            u < this.options.mouseRadius ? (this.TweenLite.killTweensOf(r), r.mouseOver = !0, r.tweening = !1, r.resetting = !1, r.tween = 0) : r.mouseOver && (r.mouseOver = !1)
                        }
                    }, _addTween: function (e, t) {
                        t = t || 0;
                        var n = this.glyphData[e], r = this.options;
                        if (r.resetByDistance) {
                            var i = this.mouse, s = this.textMesh.glyphs[e], o = s.bounds,
                                u = i.distance(b.set(o.minX + (o.maxX - o.minX) / 2, o.minY + (o.maxY - o.minY) / 2));
                            t += u / this.screenLength
                        } else t += e * r.resetDelayIncrement;
                        !n.mouseOver && !n.tweening && (n.tweening = !0, n.resetting = !1, this.TweenLite.to(n, r.resetDuration, {
                            overwrite: 1,
                            tween: 1,
                            ease: r.resetLinear ? Linear.easeNone : Expo.easeOut,
                            delay: t + r.resetDelay,
                            onStart: this._startTweenReset,
                            onStartParams: [e],
                            onComplete: this._finishTweenReset,
                            onCompleteParams: [e]
                        }))
                    }, _updateGlyphHitTest: function () {
                        var e = this.options, t = 0;
                        for (var n = 0; n < this.textMesh.glyphs.length; n++)this._addTween(n, t);
                        this._updateKillTweens()
                    }, _updateMouseInteractions: function () {
                        var e = this.mouse, t = this.lastMouse, n = this.world, r = this.camera.viewportWidth,
                            i = this.camera.viewportHeight, s = this.options, o = s.mouseStrength, u = s.mouseRadius,
                            a = s.spinStrength;
                        E.copy(e), E.sub(t), E.normalize(), E.scale(o);
                        var l = e.distance(t) > s.minMouseMotion, c = !0;
                        for (var h = 0; h < n.particles.length; h++) {
                            var p = n.particles[h], d = p.position.distance(e);
                            d < u && l && p.velocity.add(E);
                            if (d < u / 2) {
                                x.random();
                                var v = this._normalizedDistanceFromMouse(p);
                                if (v < .5) {
                                    var m = f(a, 0, v);
                                    x.scale(m), x.z = 0, p.velocity.add(x)
                                } else v > 20
                            } else if (s.rigidness > 0) {
                                var g = s.rigidness;
                                p.position.lerp(p.original, g), p.velocity.lerp(S, g), p.acceleration.lerp(S, g)
                            }
                        }
                        t.copy(e)
                    }, _normalizedDistanceFromMouse: function (e) {
                        var t = .1, n = this.camera.viewportWidth, r = this.camera.viewportHeight;
                        b.copy(e.position), b.x /= n, b.y /= r, w.copy(this.mouse), w.x /= n, w.y /= r;
                        var i = b.distance(w);
                        return i = a(0, t, i), i
                    }, _updateMouseInteractions2: function () {
                        var e = this.mouse, t = this.lastMouse, n = this.world;
                        b.copy(e), b.sub(t), b.normalize(), b.scale(5);
                        if (e.distance(t) > 5)for (var r = 0; r < n.particles.length; r++) {
                            var i = n.particles[r];
                            i.position.distance(e) < 50 && i.velocity.add(b)
                        }
                        t.copy(e)
                    }, _updateMouseInteractions3: function () {
                        var e = this.mouse, t = this.lastMouse, n = this.world, r = this.camera.viewportWidth,
                            i = this.camera.viewportHeight;
                        for (var s = 0; s < n.particles.length; s++) {
                            var o = n.particles[s];
                            b.copy(o.position), b.x /= r, b.y /= i, w.copy(e), w.x /= r, w.y /= i;
                            var u = b.distance(w);
                            u = a(0, .1, u);
                            var l = 1, c = f(l, 0, u);
                            b.copy(o.original), b.lerp(o.finalPosition, u * c), o.position.copy(b)
                        }
                    }, _savePosition: function () {
                        var e = this.world;
                        for (var t = 0; t < e.particles.length; t++) {
                            var n = e.particles[t];
                            n.lastPosition.copy(n.position)
                        }
                    }, _saveGlyph: function (e) {
                        var t = this.world;
                        for (var n = 0; n < t.particles.length; n++) {
                            var r = t.particles[n];
                            r.glyphIndex === e && r.lastPosition.copy(r.position)
                        }
                    }, initWebGL: function (e, t) {
                        this.webGLRenderer = new y(e, N, C, t, k), this.webGLRenderer.setup(this.world.particles), this.resize(e.width, e.height)
                    }, resize: function (e, t) {
                        var n = !!this.webGLRenderer;
                        this.webGLRenderer && this.webGLRenderer.resize(e, t);
                        var r = 1 / this.scale;
                        this.camera.zoom = r, this.camera.setToOrtho(n, e, t), this.camera.translate(-this.position.x * r, -this.position.y * r, this.position.z), this.camera.update(), this.screenLength = Math.sqrt(e * e + t * t)
                    }, updateCamera: function () {
                        this.resize(this.camera.viewportWidth, this.camera.viewportHeight)
                    }, setPosition: function (e, t, n) {
                        this.position.set(e, t, n), this.resize(this.camera.viewportWidth, this.camera.viewportHeight)
                    }, setZoom: function (e) {
                        this.camera.zoom = e, this.camera.update()
                    }, onTouchMove: function (e, t) {
                        b.set(e, this.webGLRenderer ? t : this.camera.viewportHeight - t, 0), this.camera.unproject(b, w), this.mouse.set(w.x, w.y), this._updateGlyphHitTest()
                    }, onTouchStart: function (e, t) {
                        b.set(e, this.webGLRenderer ? t : this.camera.viewportHeight - t, 0), this.camera.unproject(b, w), this.mouse.set(w.x, w.y)
                    }, onTouchEnd: function (e, t) {
                        b.set(e, this.webGLRenderer ? t : this.camera.viewportHeight - t, 0), this.camera.unproject(b, w), this.mouse.set(w.x, w.y)
                    }, resetAll: function () {
                        this.resetTime = 0, this.resetting = !0, this._savePosition()
                    }, renderCanvas: function (e) {

                    }, destroy: function () {
                        this.world.particles.length = 0, this.text = null, this.world = null, this.webGLRenderer = null, this.camera = null, this.face = null
                    }, renderWebGL: function () {
                        var e = !this.options.fill;
                        if (this.color.a === 0)return;
                        this.webGLRenderer && this.webGLRenderer.render(this.width, this.height, this.world.particles, this.camera, this.tweens, this.color, e)
                    }
                });
            t.exports = _
        }, {
            "../vendor/uni_sans_bold_B.typeface": 6,
            "./Constraint": 1,
            "./WebGLRenderer": 3,
            "./World": 4,
            "./typeface-stripped": 5,
            cam3d: 17,
            fs: 62,
            interpolation: 19,
            klasse: 34,
            text3d: "bRhrlU",
            vecmath: 61
        }],
        3: [function (e, t, n) {
            var r = e("klasse"), i = e("kami").WebGLContext, s = e("kami-mesh").MeshRenderer,
                o = e("kami").ShaderProgram, u = e("kami").SpriteBatch, a = e("kami").FrameBuffer,
                f = e("kami").Texture, l = e("vecmath").Matrix4, c = e("cam3d").OrthographicCamera,
                h = e("cam3d").PerspectiveCamera, p = e("vecmath").Vector3, d = e("vecmath").Matrix3, v = new d,
                m = new p, g = new p, y = new p, b = 2048, w = new r({
                    initialize: function (e, t, n, r, s) {
                        this.context = new i(e.width, e.height, e), this.mesh = null, this.useAA = r, this.shader = new o(this.context, t, n), this.shader.log && 0, this.useAA && (u.DEFAULT_FRAG_SHADER = s, this.batch = new u(this.context, 1), this.aaBuffer = new a(this.context, b, b), this.aaBuffer.texture.setFilter(f.Filter.LINEAR))
                    }, resize: function (e, t) {
                        this.context.width = e, this.context.height = t
                    }, setup: function (e) {
                        this.mesh = new s(this.context, {
                            hasColors: !0,
                            maxVertices: e.length * 4,
                            hasNormals: !1,
                            numTexCoords: 0
                        })
                    }, destroy: function () {
                        this.aaBuffer && this.aaBuffer.destroy(), this.batch && this.batch.destroy(), this.shader.destroy(), this.mesh && this.mesh.destroy()
                    }, _renderNormal: function (e, t, n, r, i) {
                        var s = this.context.gl, o = this.mesh, u = this.shader;
                        o.shader = u, o.begin(t.combined, i ? s.LINES : s.TRIANGLES);
                        var a = r.r, f = r.g, l = r.b, c = r.a;
                        for (var h = 0; h < e.length; h++) {
                            var p = e[h], d = p.position, v = n[p.word];
                            o.color(a, f, l, c * v.alpha), o.vertex(d.x, d.y + v.y, d.z)
                        }
                        o.end()
                    }, render: function (e, t, n, r, i, s, o) {
                        var u = this.useAA, a = this.context.gl;
                        e *= 1 / r.zoom, t *= 1 / r.zoom;
                        var f = b * .8;
                        if (r.viewportWidth > f || r.viewportHeight > f || e > f / 2 || t > f / 2) u = !1;
                        a.blendEquation(a.FUNC_ADD), a.activeTexture(a.TEXTURE0), a.disable(a.DEPTH_TEST), a.enable(a.BLEND), a.blendFunc(a.ONE, a.ONE_MINUS_SRC_ALPHA), a.colorMask(!0, !0, !0, !0), a.depthMask(!1), a.disable(a.CULL_FACE);
                        if (u) {
                            var l = this.aaBuffer, c = this.fboCamera, h = r.viewportWidth, p = r.viewportHeight;
                            r.viewportWidth = l.width / 2, r.viewportHeight = -l.height / 2, r.update(), l.begin(), a.clearColor(0, 0, 0, 0), a.clear(a.COLOR_BUFFER_BIT), this._renderNormal(n, r, i, s, o), l.end();
                            var d = b / 2;
                            this.batch.resize(h, p), this.batch.begin(), this.batch.draw(l.texture, (h - d) / 2, (p - d) / 2, d, d), this.batch.end(), r.viewportWidth = h, r.viewportHeight = p, r.update()
                        } else this._renderNormal(n, r, i, s, o);
                        a.depthMask(!0), a.enable(a.DEPTH_TEST)
                    }
                });
            t.exports = w
        }, {cam3d: 17, kami: 31, "kami-mesh": 20, klasse: 34, vecmath: 61}],
        4: [function (e, t, n) {
            var r = e("klasse"), i = e("vecmath").Vector3, s = e("./Constraint"), o = new i, u = new r({
                initialize: function (e) {
                    this.particles = [], this.gravity = e || new i(0, 0, 0), this.floor = Number.MAX_VALUE, this.floorFriction = .98, this.accuracy = 1, this.defaultStiffness = .5, this.defaultRestingDistance = undefined
                }, clear: function () {
                    this.particles.length = 0
                }, addTriangleList: function (e, t, n, r, o) {
                    t = typeof t == "number" ? t : 1, n = typeof n == "number" ? n : -0.5;
                    var u = this.particles, a = this.defaultStiffness, f = this.defaultRestingDistance;
                    for (var l = 0; l < e.length; l++) {
                        var c = e[l], h = {
                            position: new i(c),
                            velocity: new i,
                            acceleration: new i,
                            original: new i(c),
                            lastPosition: new i(c),
                            finalPosition: new i(c),
                            glyphIndex: r,
                            word: o,
                            mass: t,
                            restitution: n,
                            restingDistance: 0,
                            constraints: []
                        };
                        u.push(h);
                        if ((l + 1) % 3 === 0) {
                            var p = u[u.length - 1], d = u[u.length - 2], v = u[u.length - 3];
                            v.constraints = [new s(v, d, a, f), new s(v, p, a, f)], d.constraints = [new s(d, v, a, f), new s(d, p, a, f)], p.constraints = [new s(p, v, a, f), new s(p, d, a, f)]
                        }
                    }
                }, addText3D: function (e, t, n) {
                    var r = this.particles, i = this.defaultStiffness, s = this.defaultRestingDistance, o = 0;
                    for (var u = 0; u < e.glyphs.length; u++) {
                        var a = e.glyphs[u];
                        this.addTriangleList(a.points, t, n, u, a.word)
                    }
                }, solveConstraints: function (e, t) {
                    var n = t.length;
                    while (n--)var r = t[n], i = r.solve()
                }, step: function (e) {
                    e = e || .16;
                    var t = this.particles, n = this.gravity, r = this.floor, i = this.floorFriction, s = this.accuracy;
                    while (s--)for (var o = 0; o < t.length; o++) {
                        var u = t[o], a = u.constraints;
                        this.solveConstraints(u, a)
                    }
                    for (var o = 0; o < t.length; o++) {
                        var u = t[o];
                        u.velocity.scale(.98), u.velocity.x += n.x, u.velocity.y += n.y, u.velocity.z += n.z, u.position.x += u.velocity.x * e, u.position.y += u.velocity.y * e, u.position.z += u.velocity.z * e, u.position.y >= this.floor && (u.velocity.x *= i, u.velocity.y *= i, u.velocity.z *= i, u.velocity.y *= u.restitution, u.position.y = this.floor - .1)
                    }
                }
            });
            t.exports = u
        }, {"./Constraint": 1, klasse: 34, vecmath: 61}],
        5: [function (e, t, n) {
            var r = {
                faces: {}, loadFace: function (e) {
                    var t = e.familyName.toLowerCase();
                    this.faces[t] || (this.faces[t] = {}), this.faces[t][e.cssFontWeight] || (this.faces[t][e.cssFontWeight] = {});
                    var n = this.faces[t][e.cssFontWeight][e.cssFontStyle] = e;
                    n.loaded = !0
                }, pixelsFromPoints: function (e, t, n, r) {
                    var i = n * parseInt(t.fontSize.toString(), 10) * 72 / (e.resolution * 100);
                    return r == "horizontal" && t.fontStretchPercent && (i *= t.fontStretchPercent), i
                }, pointsFromPixels: function (e, t, n, r) {
                    var i = n * e.resolution / (parseInt(t.fontSize.toString(), 10) * 72 / 100);
                    return r == "horizontal" && t.fontStretchPrecent && (i *= t.fontStretchPercent), i
                }
            };
            t.exports = r
        }, {}],
        6: [function (e, t, n) {
            t.exports = {
                glyphs: {
                    S: {
                        x_min: 25,
                        x_max: 740.6875,
                        ha: 808,
                        o: "m 25 173 b 366 -13 108 48 238 -13 b 740 270 545 -13 723 86 b 412 597 750 502 583 565 b 243 706 326 615 244 626 l 243 708 b 393 805 247 776 315 805 b 556 712 456 805 515 776 l 725 825 b 393 998 643 948 520 998 b 34 715 216 998 45 901 b 345 402 31 498 191 426 b 534 284 447 388 538 369 b 179 291 526 147 268 150 l 25 173 "
                    },
                    "/": {
                        x_min: -45.828125,
                        x_max: 559.71875,
                        ha: 528,
                        o: "m -45 -8 l 138 -75 l 559 994 l 377 1058 l -45 -8 "
                    },
                    K: {
                        x_min: 61.109375,
                        x_max: 863.890625,
                        ha: 858,
                        o: "m 61 983 l 61 0 l 265 0 l 265 327 l 304 365 l 611 0 l 863 0 l 441 501 l 863 983 l 615 983 l 265 573 l 265 983 l 61 983 "
                    },
                    7: {
                        x_min: -23.765625,
                        x_max: 672.0625,
                        ha: 685,
                        o: "m 402 788 l -19 0 l 201 0 l 672 870 l 615 984 l -23 984 l -23 788 l 402 788 "
                    },
                    d: {
                        x_min: 31.921875,
                        x_max: 611.109375,
                        ha: 701,
                        o: "m 416 982 l 416 700 b 31 481 259 772 29 680 l 31 232 b 330 -16 45 46 179 -16 b 611 38 420 -16 523 4 l 611 982 l 416 982 m 416 142 b 225 214 350 108 227 128 l 225 490 b 416 553 234 574 354 587 l 416 142 "
                    },
                    ",": {
                        x_min: -8.328125,
                        x_max: 315.28125,
                        ha: 392,
                        o: "m -8 -169 l 187 -169 l 315 154 l 98 154 l -8 -169 "
                    },
                    Y: {
                        x_min: -63.890625,
                        x_max: 825,
                        ha: 806,
                        o: "m 825 983 l 587 983 l 379 572 l 170 983 l -63 983 l 277 376 l 277 0 l 481 0 l 481 376 l 825 983 "
                    },
                    E: {
                        x_min: 55.5625,
                        x_max: 722.21875,
                        ha: 794,
                        o: "m 722 984 l 55 984 l 55 0 l 722 0 l 722 198 l 261 198 l 261 393 l 684 393 l 684 591 l 261 591 l 261 784 l 722 784 l 722 984 "
                    },
                    y: {
                        x_min: 35.984375,
                        x_max: 608.203125,
                        ha: 701,
                        o: "m 413 719 l 413 163 b 222 226 351 129 231 143 l 222 719 l 35 719 l 35 223 b 416 9 35 25 244 -48 b 158 -55 416 -125 233 -126 l 62 -154 b 608 26 223 -341 608 -280 l 608 719 l 413 719 "
                    },
                    '"': {
                        x_min: 36.109375,
                        x_max: 480.5625,
                        ha: 529,
                        o: "m 36 605 l 205 605 l 233 981 l 36 981 l 36 605 m 283 605 l 454 605 l 480 981 l 283 981 l 283 605 "
                    },
                    g: {
                        x_min: 26.03125,
                        x_max: 598.25,
                        ha: 696,
                        o: "m 52 -154 b 598 26 213 -341 598 -280 l 598 675 b 26 494 403 772 26 783 l 26 223 b 406 9 26 24 234 -48 b 148 -52 406 -125 223 -123 l 52 -154 m 403 163 b 212 226 341 128 221 142 l 212 498 b 403 575 214 585 337 608 l 403 163 "
                    },
                    "ƒ": {
                        x_min: -25.0625,
                        x_max: 626.171875,
                        ha: 704,
                        o: "m -25 -128 b 324 28 124 -217 295 -141 l 404 458 l 542 458 l 542 617 l 431 617 l 455 747 b 559 807 466 805 505 834 l 626 943 b 487 986 569 973 522 986 b 258 762 334 986 276 869 l 258 764 l 231 617 l 88 617 l 88 458 l 202 458 b 127 68 179 333 151 192 b 19 1 116 0 70 -20 l -25 -128 "
                    },
                    e: {
                        x_min: 25,
                        x_max: 598.609375,
                        ha: 686,
                        o: "m 416 419 l 219 419 l 219 483 b 416 484 216 584 416 584 l 416 419 m 440 211 b 219 241 391 130 219 141 l 219 276 l 598 276 l 598 476 b 315 730 598 650 455 730 b 25 476 170 730 25 650 l 25 241 b 315 -13 25 70 170 -13 b 566 122 400 -13 511 19 l 440 211 "
                    },
                    J: {
                        x_min: -9.71875,
                        x_max: 731.953125,
                        ha: 847,
                        o: "m 526 790 l 526 308 b 362 186 526 227 443 186 b 187 351 286 186 206 241 l -9 312 b 358 -13 18 90 194 -13 b 731 308 543 -13 731 94 l 731 983 l 294 983 l 294 790 l 526 790 "
                    },
                    "|": {
                        x_min: 48.609375,
                        x_max: 241.671875,
                        ha: 340,
                        o: "m 48 988 l 48 -202 l 241 -202 l 241 988 l 48 988 "
                    },
                    "^": {
                        x_min: -6.9375,
                        x_max: 769.453125,
                        ha: 824,
                        o: "m -6 549 l 216 549 l 375 749 l 537 549 l 769 549 l 436 964 l 318 964 l -6 549 "
                    },
                    q: {
                        x_min: 27.75,
                        x_max: 606.9375,
                        ha: 704,
                        o: "m 606 -263 l 606 681 b 326 735 519 714 416 735 b 27 486 175 735 41 672 l 27 238 b 412 18 25 38 255 -53 l 412 -263 l 606 -263 m 412 158 b 220 228 350 124 230 145 l 220 504 b 412 576 223 590 345 610 l 412 158 "
                    },
                    b: {
                        x_min: 37.5,
                        x_max: 616.703125,
                        ha: 701,
                        o: "m 37 982 l 37 38 b 318 -16 125 4 227 -16 b 616 232 469 -16 602 46 l 616 481 b 231 700 619 680 388 772 l 231 982 l 37 982 m 231 553 b 423 490 294 587 413 574 l 423 214 b 231 142 420 128 298 108 l 231 553 "
                    },
                    D: {
                        x_min: 58.328125,
                        x_max: 794.453125,
                        ha: 876,
                        o: "m 419 0 b 794 313 613 0 794 93 l 794 663 b 419 983 794 886 613 983 l 58 983 l 58 0 l 419 0 m 262 205 l 262 777 l 419 777 b 588 663 508 777 588 744 l 588 313 b 419 205 588 234 508 205 l 262 205 "
                    },
                    z: {
                        x_min: -15.21875,
                        x_max: 548.578125,
                        ha: 596,
                        o: "m 283 554 l -15 69 l 40 0 l 538 0 l 538 165 l 248 165 l 548 651 l 493 719 l 11 719 l 11 554 l 283 554 "
                    },
                    w: {
                        x_min: -31.9375,
                        x_max: 922.21875,
                        ha: 929,
                        o: "m 450 455 l 469 259 l 529 0 l 705 0 l 922 719 l 729 719 l 655 416 l 629 241 l 620 241 l 605 418 l 516 719 l 376 719 l 284 416 l 269 241 l 261 241 l 236 415 l 158 719 l -31 719 l 191 0 l 366 0 l 423 259 l 440 455 l 450 455 "
                    },
                    $: {
                        x_min: 17.78125,
                        x_max: 733.40625,
                        ha: 785,
                        o: "m 313 -97 l 445 -97 l 445 -5 b 733 271 591 21 719 115 b 445 589 741 484 601 554 l 445 796 b 549 712 485 782 520 755 l 717 825 b 445 994 648 929 551 980 l 445 1078 l 313 1078 l 313 993 b 27 715 165 969 37 875 b 313 407 24 509 167 434 l 313 193 b 171 291 256 208 203 240 l 17 173 b 313 -10 91 64 201 1 l 313 -97 m 527 284 b 445 191 524 236 491 205 l 445 380 b 527 284 495 364 530 337 m 235 707 l 235 708 b 313 794 238 753 269 780 l 313 618 b 235 707 269 633 235 657 "
                    },
                    "\\": {
                        x_min: -84.71875,
                        x_max: 523.609375,
                        ha: 522,
                        o: "m 100 1058 l -84 993 l 338 -79 l 523 -16 l 100 1058 "
                    },
                    "~": {
                        x_min: 15.40625,
                        x_max: 597.34375,
                        ha: 647,
                        o: "m 487 514 b 359 479 443 456 408 443 b 209 543 323 507 273 543 b 15 409 126 543 64 480 l 136 307 b 262 331 184 370 220 367 b 394 276 297 301 343 276 b 597 423 486 276 551 342 l 487 514 "
                    },
                    "-": {
                        x_min: 23.609375,
                        x_max: 433.328125,
                        ha: 489,
                        o: "m 23 308 l 433 308 l 433 504 l 23 504 l 23 308 "
                    },
                    Q: {
                        x_min: 40.625,
                        x_max: 862.84375,
                        ha: 939,
                        o: "m 743 -43 l 862 72 l 797 141 b 846 307 828 187 846 241 l 846 676 b 40 676 846 1112 40 1115 l 40 307 b 672 32 40 0 436 -90 l 743 -43 m 243 676 b 642 676 243 841 643 845 l 642 308 l 575 379 l 447 275 l 522 193 b 243 307 404 163 242 201 l 243 676 "
                    },
                    M: {
                        x_min: 61.265625,
                        x_max: 969.59375,
                        ha: 1088,
                        o: "m 790 581 l 765 391 l 765 0 l 969 0 l 969 983 l 755 983 l 514 418 l 275 983 l 61 983 l 61 0 l 265 0 l 265 390 l 243 580 l 257 580 l 304 445 l 440 129 l 593 129 l 727 444 l 775 581 l 790 581 "
                    },
                    C: {
                        x_min: 19.4375,
                        x_max: 755.5625,
                        ha: 811,
                        o: "m 579 294 b 222 316 495 133 222 165 l 222 667 b 583 693 222 819 498 854 l 747 782 b 405 993 680 926 536 993 b 19 667 211 993 19 882 l 19 316 b 401 -9 19 100 211 -9 b 755 196 531 -9 670 58 l 579 294 "
                    },
                    "[": {
                        x_min: 37.5,
                        x_max: 338.890625,
                        ha: 372,
                        o: "m 338 990 l 37 990 l 37 -151 l 338 -151 l 338 36 l 234 36 l 234 801 l 338 801 l 338 990 "
                    },
                    L: {
                        x_min: 55.5625,
                        x_max: 684.71875,
                        ha: 721,
                        o: "m 684 205 l 259 205 l 259 983 l 55 983 l 55 0 l 684 0 l 684 205 "
                    },
                    "!": {
                        x_min: 56.9375,
                        x_max: 295.828125,
                        ha: 403,
                        o: "m 273 986 l 77 986 l 77 265 l 273 265 l 273 986 m 56 104 b 175 -15 56 37 108 -15 b 295 104 243 -15 295 37 b 175 225 295 170 243 225 b 56 104 108 225 56 170 "
                    },
                    " ": {x_min: 0, x_max: 0, ha: 328},
                    "{": {
                        x_min: 16.328125,
                        x_max: 382.890625,
                        ha: 404,
                        o: "m 382 991 l 289 991 b 96 788 142 991 96 912 l 96 622 b 16 512 96 566 78 512 l 16 327 b 96 218 78 327 96 275 l 96 51 b 277 -150 96 -72 134 -150 l 382 -150 l 382 33 l 288 33 b 294 54 291 34 294 41 l 294 241 b 196 419 294 318 271 388 b 294 598 253 445 294 526 l 294 781 b 294 806 294 797 294 806 l 382 806 l 382 991 "
                    },
                    X: {
                        x_min: -48.65625,
                        x_max: 831.90625,
                        ha: 826,
                        o: "m 831 983 l 583 983 l 384 633 l 202 983 l -45 983 l 241 490 l -48 0 l 202 0 l 384 347 l 581 0 l 831 0 b 520 488 765 100 583 391 l 831 983 "
                    },
                    P: {
                        x_min: 59.71875,
                        x_max: 798.4375,
                        ha: 856,
                        o: "m 262 304 l 448 304 b 447 983 912 304 918 981 l 59 983 l 59 0 l 262 0 l 262 304 m 447 495 l 262 495 l 262 777 l 447 777 b 447 495 648 777 645 495 "
                    },
                    "%": {
                        x_min: 18.0625,
                        x_max: 962.46875,
                        ha: 1038,
                        o: "m 430 745 b 223 995 430 905 355 995 b 18 748 104 995 18 900 b 223 495 18 583 93 495 b 430 745 341 495 430 590 m 888 934 l 736 1034 l 56 -9 l 208 -104 l 888 934 m 286 745 b 220 641 286 675 262 641 b 154 747 181 641 154 670 b 220 851 154 819 181 851 b 286 745 261 851 286 819 m 962 244 b 755 494 962 404 887 494 b 549 247 636 494 549 398 b 755 -5 549 81 624 -5 b 962 244 873 -5 962 88 m 818 244 b 752 140 818 173 794 140 b 686 245 713 140 686 169 b 752 350 686 318 713 350 b 818 244 793 350 818 318 "
                    },
                    "#": {
                        x_min: 8.796875,
                        x_max: 950.6875,
                        ha: 988,
                        o: "m 724 506 l 897 506 l 950 694 l 782 694 l 856 936 l 661 936 l 590 694 l 490 694 l 561 936 l 370 936 b 299 694 349 863 322 769 l 94 694 l 54 506 l 243 506 b 222 440 233 472 231 462 l 44 440 l 8 255 l 168 255 l 93 0 l 285 0 l 358 255 l 458 255 l 386 0 l 577 0 b 650 255 588 40 610 118 l 857 255 l 896 440 l 706 440 l 724 506 m 553 519 l 528 427 l 395 427 l 418 519 l 553 519 "
                    },
                    _: {
                        x_min: -16.671875,
                        x_max: 681.953125,
                        ha: 756,
                        o: "m -16 -181 l 681 -181 l 681 11 l -16 11 l -16 -181 "
                    },
                    "+": {
                        x_min: 36.109375,
                        x_max: 747.21875,
                        ha: 838,
                        o: "m 36 355 l 300 355 l 300 97 l 494 97 l 494 355 l 747 355 l 747 551 l 494 551 l 494 806 l 300 806 l 300 551 l 36 551 l 36 355 "
                    },
                    ")": {
                        x_min: -48.609375,
                        x_max: 310.234375,
                        ha: 393,
                        o: "m -48 1006 b -45 -65 191 701 190 274 l 98 -164 b 91 1101 381 234 381 774 l -48 1006 "
                    },
                    "'": {
                        x_min: 33.328125,
                        x_max: 227.78125,
                        ha: 299,
                        o: "m 33 605 l 208 605 l 227 981 l 33 981 l 33 605 "
                    },
                    "}": {
                        x_min: -9.3125,
                        x_max: 344.859375,
                        ha: 393,
                        o: "m -9 806 l 62 806 b 67 781 67 806 67 797 l 67 598 b 167 420 65 526 111 455 b 67 241 94 390 65 315 l 67 54 b 60 33 67 40 65 33 l -9 33 l -9 -150 l 61 -150 b 262 51 226 -150 262 -72 l 262 218 b 344 327 262 275 279 327 l 344 512 b 262 622 279 512 262 566 l 262 788 b 64 991 262 912 243 991 l -9 991 l -9 806 "
                    },
                    a: {
                        x_min: 24.75,
                        x_max: 593.09375,
                        ha: 701,
                        o: "m 288 466 b 322 -16 -66 466 -70 -16 b 593 35 409 -16 508 3 l 593 481 b 50 605 593 757 198 811 l 144 518 b 405 444 220 603 405 612 b 288 466 370 462 326 466 m 400 141 b 319 131 373 134 347 131 b 312 317 172 131 162 313 b 400 305 345 319 379 313 l 400 141 "
                    },
                    T: {
                        x_min: -11.109375,
                        x_max: 758.328125,
                        ha: 783,
                        o: "m -11 984 l -11 779 l 270 779 l 270 0 l 476 0 l 476 779 l 758 779 l 758 984 l -11 984 "
                    },
                    "=": {
                        x_min: 47.21875,
                        x_max: 640.28125,
                        ha: 738,
                        o: "m 47 437 l 640 437 l 640 627 l 47 627 l 47 437 m 47 183 l 640 183 l 640 372 l 47 372 l 47 183 "
                    },
                    N: {
                        x_min: 59.71875,
                        x_max: 830.5625,
                        ha: 947,
                        o: "m 641 269 l 572 447 l 261 983 l 59 983 l 59 0 l 265 0 l 265 479 l 238 647 l 252 650 l 312 516 l 612 0 l 830 0 l 830 983 l 626 983 l 626 480 b 655 272 627 459 644 336 l 641 269 "
                    },
                    2: {
                        x_min: -13.671875,
                        x_max: 675.9375,
                        ha: 749,
                        o: "m 161 688 b 464 759 234 819 397 850 b 414 575 500 712 471 634 l -13 106 l 37 1 l 673 1 l 673 196 l 439 195 b 298 180 429 194 298 180 l 296 188 l 553 433 b 347 997 772 656 694 983 b 5 794 212 1001 83 926 l 161 688 "
                    },
                    j: {
                        x_min: -55.5625,
                        x_max: 252.78125,
                        ha: 332,
                        o: "m 20 883 b 136 767 20 819 72 767 b 252 883 201 767 252 819 b 136 999 252 949 201 999 b 20 883 72 999 20 949 m -55 -105 b 41 -12 31 -114 41 -52 l 41 720 l 234 720 l 234 -12 b -55 -254 234 -169 147 -294 l -55 -105 "
                    },
                    Z: {
                        x_min: -21.03125,
                        x_max: 755.296875,
                        ha: 776,
                        o: "m 469 794 l -21 93 l 27 0 l 735 0 l 735 183 l 265 183 l 755 890 l 698 983 l 5 983 l 5 794 l 469 794 "
                    },
                    u: {
                        x_min: 38.890625,
                        x_max: 613.890625,
                        ha: 710,
                        o: "m 613 720 l 422 720 l 422 154 b 231 251 334 124 236 164 l 231 720 l 38 720 l 38 253 b 613 42 38 -71 404 -34 l 613 720 "
                    },
                    1: {
                        x_min: -56.9375,
                        x_max: 355.5625,
                        ha: 451,
                        o: "m 194 986 l -56 720 l 70 612 l 163 693 l 163 0 l 355 0 l 355 986 l 194 986 "
                    },
                    k: {
                        x_min: 47.21875,
                        x_max: 675,
                        ha: 664,
                        o: "m 47 981 l 47 0 l 240 0 l 240 251 l 252 262 l 451 0 l 675 0 b 387 372 587 116 477 252 l 673 719 l 448 719 l 240 447 l 240 981 l 47 981 "
                    },
                    "€": {
                        x_min: -26.390625,
                        x_max: 798.609375,
                        ha: 824,
                        o: "m 1 647 l -26 509 l 62 509 l 62 456 l 1 456 l -26 320 l 62 320 l 62 317 b 444 -9 62 100 254 -9 b 798 196 575 -9 713 58 l 622 295 b 265 317 538 133 265 165 l 265 320 l 502 320 l 529 456 l 265 456 l 265 509 l 501 509 l 529 647 l 265 647 l 265 667 b 626 693 265 819 541 854 l 790 782 b 448 993 723 926 579 993 b 62 667 254 993 62 882 l 62 647 l 1 647 "
                    },
                    "<": {
                        x_min: 40.28125,
                        x_max: 531.9375,
                        ha: 608,
                        o: "m 531 788 l 40 473 l 40 345 l 531 34 l 531 259 l 258 409 l 531 565 l 531 788 "
                    },
                    t: {
                        x_min: 37.484375,
                        x_max: 377.78125,
                        ha: 424,
                        o: "m 377 150 b 229 254 284 132 229 172 l 229 526 l 356 526 l 356 720 l 229 720 l 229 983 l 37 983 l 37 253 b 377 10 36 29 186 -53 l 377 150 "
                    },
                    W: {
                        x_min: -40.015625,
                        x_max: 1229.4375,
                        ha: 1283,
                        o: "m 559 377 b 586 497 561 376 586 497 l 597 497 l 619 379 l 746 0 l 946 0 l 1229 983 l 1019 983 l 876 468 l 850 230 l 837 230 l 797 468 l 678 847 l 512 847 b 387 470 457 670 441 650 l 354 240 l 341 240 l 311 469 l 171 983 l -40 983 l 244 0 l 444 0 l 559 377 "
                    },
                    v: {
                        x_min: -51.390625,
                        x_max: 643.0625,
                        ha: 649,
                        o: "m 288 170 l 259 356 l 154 719 l -51 719 l 204 0 l 386 0 l 643 719 l 436 719 l 329 356 l 302 170 l 288 170 "
                    },
                    ">": {
                        x_min: 47.21875,
                        x_max: 538.890625,
                        ha: 615,
                        o: "m 47 565 l 320 409 l 47 259 l 47 34 l 538 345 l 538 473 l 47 788 l 47 565 "
                    },
                    s: {
                        x_min: -7.84375,
                        x_max: 509.875,
                        ha: 551,
                        o: "m -7 108 b 250 -13 60 18 150 -13 b 509 222 384 -13 509 65 b 302 433 509 358 394 410 b 207 507 272 439 202 464 b 388 521 215 601 345 562 l 484 653 b 255 728 411 712 320 729 b 245 276 -45 724 -94 335 b 315 185 311 267 333 226 b 83 233 290 126 168 153 l -7 108 "
                    },
                    B: {
                        x_min: 59.734375,
                        x_max: 799.53125,
                        ha: 861,
                        o: "m 263 598 l 263 784 l 448 784 b 448 598 604 784 587 598 l 263 598 m 448 423 b 448 198 643 423 640 198 l 263 198 l 263 423 l 448 423 m 757 695 b 448 984 757 886 618 984 l 59 984 l 59 0 l 455 0 b 795 250 682 0 777 118 b 664 523 809 348 786 463 b 757 695 730 561 757 640 "
                    },
                    "?": {
                        x_min: -11.109375,
                        x_max: 587.90625,
                        ha: 656,
                        o: "m 113 717 b 231 787 145 762 188 783 b 236 522 437 805 430 522 b 150 531 222 522 188 522 l 162 244 l 330 244 l 344 401 b 266 970 712 455 644 970 b -11 823 170 970 69 928 l 113 717 m 143 95 b 252 -14 143 34 191 -14 b 362 95 313 -14 362 34 b 252 205 362 159 313 205 b 143 95 191 205 143 159 "
                    },
                    H: {
                        x_min: 70.828125,
                        x_max: 841.671875,
                        ha: 953,
                        o: "m 637 0 l 841 0 l 841 983 l 637 983 l 637 593 l 275 593 l 275 983 l 70 983 l 70 0 l 275 0 l 275 388 l 637 388 l 637 0 "
                    },
                    c: {
                        x_min: 19.4375,
                        x_max: 588.890625,
                        ha: 628,
                        o: "m 419 243 b 212 247 379 126 212 149 l 212 473 b 415 482 212 569 383 589 l 580 533 b 308 728 543 680 411 728 b 19 472 165 728 19 643 l 19 246 b 308 -7 19 75 165 -7 b 588 188 411 -7 538 42 l 419 243 "
                    },
                    "&": {
                        x_min: 19,
                        x_max: 900.828125,
                        ha: 871,
                        o: "m 489 516 b 634 751 568 564 634 631 b 380 991 634 895 511 991 b 105 737 238 991 105 899 b 171 558 105 670 135 609 b 19 299 91 502 19 427 b 337 -5 19 112 159 -5 b 593 105 450 -5 524 31 l 663 20 l 900 20 l 707 256 l 806 371 l 682 491 l 598 389 l 489 516 m 455 239 b 212 299 363 133 212 180 b 300 414 212 348 255 384 l 455 239 m 374 816 b 443 748 414 816 443 788 b 350 633 443 702 399 658 b 298 741 321 667 298 709 b 374 816 298 784 331 816 "
                    },
                    I: {x_min: 43.0625, x_max: 247.21875, ha: 364, o: "m 43 0 l 247 0 l 247 983 l 43 983 l 43 0 "},
                    G: {
                        x_min: 28.25,
                        x_max: 797.703125,
                        ha: 910,
                        o: "m 757 789 b 411 997 682 943 544 997 b 28 674 219 997 28 889 l 28 317 b 797 317 28 -123 797 -120 l 797 561 l 374 561 l 374 363 l 597 363 l 597 317 b 231 317 597 143 231 142 l 231 674 b 592 701 231 836 522 864 l 757 789 "
                    },
                    "(": {
                        x_min: 32.796875,
                        x_max: 391.671875,
                        ha: 417,
                        o: "m 251 1101 b 244 -164 -38 774 -38 234 l 388 -65 b 391 1006 152 274 151 701 l 251 1101 "
                    },
                    "`": {
                        x_min: -91.671875,
                        x_max: 323.609375,
                        ha: 357,
                        o: "m 166 979 l -91 979 l 109 727 l 323 727 l 166 979 "
                    },
                    U: {
                        x_min: 61.109375,
                        x_max: 833.328125,
                        ha: 943,
                        o: "m 61 983 l 61 322 b 833 322 61 -127 831 -126 l 833 983 l 627 983 l 627 322 b 266 322 627 138 266 137 l 266 983 l 61 983 "
                    },
                    "◊": {
                        x_min: -13.984375,
                        x_max: 694.53125,
                        ha: 738,
                        o: "m 694 470 l 412 975 l 272 975 l -13 468 l 263 -36 l 408 -36 l 694 470 m 482 469 l 340 204 b 195 472 284 306 249 375 b 338 745 245 568 290 651 l 482 469 "
                    },
                    F: {
                        x_min: 55.5625,
                        x_max: 720.828125,
                        ha: 765,
                        o: "m 720 983 l 55 983 l 55 0 l 261 0 l 261 366 l 663 366 l 663 568 l 261 568 l 261 784 l 720 784 l 720 983 "
                    },
                    r: {
                        x_min: 34.71875,
                        x_max: 418.0625,
                        ha: 457,
                        o: "m 172 698 b 34 474 94 658 34 578 l 34 0 l 227 0 l 227 471 b 418 560 236 553 336 582 l 418 717 b 316 730 375 727 344 730 b 248 723 295 730 265 728 l 247 723 b 172 698 220 717 193 707 "
                    },
                    ":": {
                        x_min: 29.171875,
                        x_max: 268.0625,
                        ha: 338,
                        o: "m 29 561 b 148 440 29 494 81 440 b 268 561 215 440 268 494 b 148 679 268 627 215 679 b 29 561 81 679 29 627 m 29 129 b 148 9 29 62 81 9 b 268 129 215 9 268 62 b 148 248 268 198 215 248 b 29 129 81 248 29 198 "
                    },
                    x: {
                        x_min: -45.296875,
                        x_max: 657.515625,
                        ha: 657,
                        o: "m 428 719 b 332 555 383 645 351 586 l 307 487 l 299 487 l 272 555 l 172 719 l -45 719 b 188 359 117 481 147 420 l -45 0 l 172 0 b 265 147 217 68 242 109 l 297 223 l 307 223 l 335 150 l 428 0 l 657 0 b 415 361 589 95 488 258 l 654 719 l 428 719 "
                    },
                    "*": {
                        x_min: -1.234375,
                        x_max: 566.515625,
                        ha: 610,
                        o: "m 373 984 l 193 984 l 207 820 l 48 886 l -1 711 l 155 676 l 47 547 l 195 440 l 281 590 l 373 440 l 516 548 l 405 677 l 566 708 l 515 883 l 356 822 l 373 984 "
                    },
                    V: {
                        x_min: -56.9375,
                        x_max: 851.390625,
                        ha: 851,
                        o: "m 387 236 l 347 438 l 161 984 l -56 984 l 298 1 l 495 1 l 851 984 l 633 984 l 440 438 l 402 236 l 387 236 "
                    },
                    h: {
                        x_min: 45.828125,
                        x_max: 620.828125,
                        ha: 733,
                        o: "m 45 983 l 45 0 l 238 0 l 238 526 b 429 463 298 561 429 554 l 429 0 l 620 0 l 620 462 b 238 698 620 681 406 765 l 238 983 l 45 983 "
                    },
                    0: {
                        x_min: 41.671875,
                        x_max: 752.78125,
                        ha: 853,
                        o: "m 237 286 l 237 695 b 556 695 248 841 545 841 l 556 286 b 237 286 545 143 248 143 m 397 -11 b 752 286 565 -11 752 80 l 752 695 b 397 994 752 902 565 994 b 41 695 230 994 41 902 l 41 286 b 397 -11 41 80 230 -11 "
                    },
                    ".": {
                        x_min: 62.5,
                        x_max: 300,
                        ha: 379,
                        o: "m 62 112 b 180 -8 62 44 113 -8 b 300 112 247 -8 300 44 b 180 231 300 179 247 231 b 62 112 113 231 62 179 "
                    },
                    "@": {
                        x_min: 17.84375,
                        x_max: 1004.359375,
                        ha: 1064,
                        o: "m 721 315 l 795 719 l 686 745 l 656 710 b 319 238 376 957 89 447 b 578 208 386 177 500 151 b 868 243 665 140 801 183 b 961 759 1004 363 1043 599 b 676 976 907 863 806 944 b 19 477 289 1077 37 773 b 624 12 -4 111 311 -86 l 592 143 b 650 841 -20 -34 77 990 b 837 683 739 817 807 762 b 721 315 891 545 855 388 m 624 560 l 581 355 b 428 349 547 315 468 303 b 428 565 384 402 388 505 b 624 560 477 637 570 656 "
                    },
                    f: {
                        x_min: 30.5625,
                        x_max: 359.71875,
                        ha: 393,
                        o: "m 359 986 b 30 731 176 998 30 904 l 30 0 l 223 0 l 223 423 l 351 423 l 351 618 l 223 618 l 223 731 b 359 797 223 772 273 797 l 359 986 "
                    },
                    ";": {
                        x_min: -13.890625,
                        x_max: 276.390625,
                        ha: 349,
                        o: "m -13 -131 l 159 -131 l 276 190 l 63 190 l -13 -131 m 34 544 b 155 423 34 476 84 423 b 272 544 223 423 272 476 b 155 662 272 611 223 662 b 34 544 84 662 34 611 "
                    },
                    i: {
                        x_min: 30.5625,
                        x_max: 261.109375,
                        ha: 351,
                        o: "m 30 895 b 144 779 30 830 80 779 b 261 895 213 779 261 830 b 144 1011 261 961 213 1011 b 30 895 80 1011 30 961 m 244 720 l 244 0 l 51 0 l 51 720 l 244 720 "
                    },
                    6: {
                        x_min: 33.328125,
                        x_max: 755.5625,
                        ha: 847,
                        o: "m 734 791 b 397 991 654 935 530 991 b 33 692 213 992 33 892 l 33 289 b 397 -8 36 89 213 -10 b 755 289 580 -8 755 91 l 755 342 b 230 555 755 606 397 721 l 230 691 b 562 717 230 820 491 866 l 734 791 m 559 291 b 230 291 559 149 230 151 l 230 341 b 559 341 230 481 559 483 l 559 291 "
                    },
                    A: {
                        x_min: -19.0625,
                        x_max: 873.953125,
                        ha: 886,
                        o: "m -19 0 l 198 0 b 280 225 230 87 250 141 l 573 225 l 660 0 l 873 0 l 521 983 l 325 983 l -19 0 m 430 766 l 458 626 l 521 412 l 332 412 l 387 625 l 415 766 l 430 766 "
                    },
                    n: {
                        x_min: 47.21875,
                        x_max: 620.828125,
                        ha: 718,
                        o: "m 47 0 l 240 0 l 240 555 b 429 479 309 594 429 578 l 429 0 l 620 0 l 620 480 b 306 743 620 669 469 743 b 47 680 219 743 126 719 l 47 0 "
                    },
                    O: {
                        x_min: 37.5,
                        x_max: 843.0625,
                        ha: 947,
                        o: "m 37 676 l 37 306 b 843 306 37 -130 843 -129 l 843 676 b 37 676 843 1112 37 1115 m 240 676 b 638 676 240 841 640 845 l 638 306 b 240 306 638 143 238 141 l 240 676 "
                    },
                    3: {
                        x_min: -5.640625,
                        x_max: 711.359375,
                        ha: 782,
                        o: "m 151 712 b 342 794 209 784 287 794 b 466 698 406 794 466 758 b 363 598 466 640 420 598 l 226 598 l 226 425 l 363 425 b 340 188 561 413 558 188 b 145 306 270 188 191 230 l -5 195 b 336 -12 79 37 206 0 b 573 526 663 -44 858 327 b 645 809 680 612 687 723 b 30 819 523 1065 166 1031 l 151 712 "
                    },
                    "]": {
                        x_min: -33.328125,
                        x_max: 266.671875,
                        ha: 367,
                        o: "m -33 -150 l 266 -150 l 266 991 l -33 991 l -33 806 l 68 806 l 68 33 l -33 33 l -33 -150 "
                    },
                    m: {
                        x_min: 48.609375,
                        x_max: 952.78125,
                        ha: 1053,
                        o: "m 48 0 l 237 0 l 237 537 b 405 497 283 587 405 565 l 405 0 l 590 0 l 590 494 b 761 493 590 576 761 579 l 761 0 l 952 0 l 952 489 b 684 735 952 653 816 735 b 498 644 616 735 544 707 b 305 743 459 718 379 742 b 48 654 211 744 111 708 l 48 0 "
                    },
                    9: {
                        x_min: 27.6875,
                        x_max: 749.90625,
                        ha: 840,
                        o: "m 48 191 b 386 -8 129 47 252 -8 b 749 290 569 -9 749 90 l 749 693 b 386 991 747 893 569 993 b 27 693 202 991 27 891 l 27 640 b 552 427 27 376 381 263 l 552 291 b 220 265 552 162 291 116 l 48 191 m 223 691 b 552 691 223 833 552 832 l 552 641 b 223 641 552 501 223 500 l 223 691 "
                    },
                    l: {
                        x_min: 36.109375,
                        x_max: 344.4375,
                        ha: 375,
                        o: "m 344 168 b 229 266 265 168 229 212 l 229 983 l 36 983 l 36 266 b 344 2 36 109 133 -29 l 344 168 "
                    },
                    8: {
                        x_min: 14.3125,
                        x_max: 747.125,
                        ha: 818,
                        o: "m 369 176 b 208 300 296 176 208 219 b 369 429 208 394 284 429 l 390 429 b 551 300 475 429 551 394 b 390 176 551 219 463 176 l 369 176 m 390 -8 b 747 309 588 -8 742 105 b 617 527 747 391 713 480 b 708 687 680 565 708 636 b 390 962 708 881 551 962 l 369 962 b 75 805 246 962 128 909 b 139 523 36 729 36 588 b 14 309 46 462 14 376 b 369 -8 17 105 169 -8 l 390 -8 m 391 800 b 520 697 457 800 520 762 b 373 594 520 623 440 594 b 239 697 309 594 239 623 b 369 800 239 762 303 800 l 391 800 "
                    },
                    p: {
                        x_min: 31.9375,
                        x_max: 611.140625,
                        ha: 707,
                        o: "m 226 -263 l 226 18 b 611 238 383 -53 613 38 l 611 486 b 312 735 597 672 463 735 b 31 681 222 735 119 714 l 31 -263 l 226 -263 m 226 576 b 418 504 293 610 415 590 l 418 228 b 226 158 408 145 288 124 l 226 576 "
                    },
                    4: {
                        x_min: -8.375,
                        x_max: 708.46875,
                        ha: 767,
                        o: "m 641 983 l 466 983 l -8 356 l 84 219 l 445 219 l 445 1 l 641 1 l 641 219 l 708 219 l 708 398 l 641 398 l 641 983 m 476 729 b 454 591 472 702 454 591 l 450 384 l 229 384 l 425 654 l 468 730 l 476 729 "
                    },
                    R: {
                        x_min: 60.046875,
                        x_max: 868.390625,
                        ha: 867,
                        o: "m 575 373 b 798 669 717 401 798 488 b 447 983 793 893 644 983 l 60 983 l 60 0 l 265 0 l 265 359 l 337 359 l 617 0 l 868 0 l 575 373 m 265 545 l 265 777 l 447 777 b 594 668 533 780 594 751 b 447 545 594 581 537 545 l 265 545 "
                    },
                    o: {
                        x_min: 29.171875,
                        x_max: 605.5625,
                        ha: 694,
                        o: "m 318 548 b 412 477 362 548 412 523 l 412 240 b 318 162 412 194 362 162 b 222 240 272 162 222 194 l 222 477 b 318 548 222 523 272 548 m 29 477 l 29 244 b 318 -11 29 70 173 -9 b 605 244 461 -9 605 70 l 605 477 b 318 734 605 648 461 733 b 29 477 173 733 29 648 "
                    },
                    5: {
                        x_min: 37.5,
                        x_max: 727.984375,
                        ha: 817,
                        o: "m 37 191 b 356 -8 109 47 236 -2 b 554 643 751 -26 854 495 b 234 655 472 683 348 702 l 234 790 l 659 790 l 659 983 l 45 983 l 45 431 l 159 434 b 365 498 252 486 293 500 b 359 188 580 495 577 188 b 187 291 300 188 230 223 l 37 191 "
                    }
                },
                cssFontWeight: "normal",
                ascender: 1050,
                underlinePosition: -75,
                cssFontStyle: "normal",
                boundingBox: {yMin: -263.359375, xMin: -91.671875, yMax: 1101.171875, xMax: 1229.4375},
                resolution: 1e3,
                original_font_information: {
                    postscript_name: "Uni-Sans-Bold",
                    version_string: "Version 001.001",
                    vendor_url: "",
                    full_font_name: "Uni-Sans-Bold",
                    font_family_name: "Uni Sans Bold",
                    copyright: "Copyright (c) 2009 by © 2009 Designed by Svetoslav Simov © Fontfabric, Inc. All rights reserved.",
                    description: "Copyright (c) 2002 by © 2009 Designed by Svetoslav Simov © Fontfabric, Inc. All rights reserved.",
                    trademark: "Uni Sans Bold is a trademark of © 2009 Designed by Svetoslav Simov © Fontfabric, Inc.",
                    designer: "Svetoslav Simov",
                    designer_url: "http://fontfabric.com/",
                    unique_font_identifier: "2009DesignedbySvetoslavSimovFontfabric,Inc: Uni Sans Bold: 2009",
                    license_url: "",
                    license_description: "",
                    manufacturer_name: "© 2009 Designed by Svetoslav Simov © Fontfabric, Inc",
                    font_sub_family_name: "Regular"
                },
                descender: -339,
                familyName: "Uni Sans Bold",
                lineHeight: 1667,
                underlineThickness: 50
            }
        }, {}],
        7: [function (e, t, n) {
            var r = e("klasse"), i = e("vecmath").Vector3, s = e("vecmath").Matrix4, o = e("./triangulate"),
                u = e("./util"), a = new i, f = new r({
                    initialize: function (e, t, n, r, i, s) {
                        if (!t)throw new Error("must specify a valid character for this glyph");
                        if (!e)throw new Error("must specify a typeface 'font face' for a Glyph");
                        i = typeof i == "number" ? i : f.DEFAULT_SIMPLIFY, r = typeof r == "number" ? r : f.DEFAULT_STEPS, n = typeof n == "number" ? n : f.DEFAULT_SIZE, s = typeof s == "number" ? s : 1, this.character = t;
                        var o = u.getShapeList(e, n, t, r);
                        if (!o) {
                            o = u.getShapeList(e, n, f.DEFAULT_CHARACTER, r);
                            if (!o)throw new Error("could not find glyph '" + t + "' or the default '" + f.DEFAULT_CHARACTER + "'")
                        }
                        if (i > 0)for (var a = 0; a < o.length; a++)o[a] = o[a].simplify(i);
                        this.shapes = o, this.bounds = {
                            minX: 0,
                            maxX: 0,
                            minY: 0,
                            maxY: 0
                        }, this.points = [], this.triangulate(this.shapes);
                        if (!f.SAVE_CONTOUR) {
                            for (var a = 0; a < this.shapes.length; a++)this.shapes[a].length = 0;
                            this.shapes.length = 0, this.shapes = null
                        }
                    }, triangulate: function (e) {
                        this.shapes = e || this.shapes, this.points.length = 0;
                        var t = o(this.shapes) || [];
                        this.bounds.minX = 0, this.bounds.minY = 0, this.bounds.maxX = 0, this.bounds.maxY = 0;
                        if (t.length > 0) {
                            var n = Number.MAX_VALUE, r = Number.MAX_VALUE, s = -Number.MAX_VALUE, u = -Number.MAX_VALUE;
                            for (var a = 0; a < t.length; a++) {
                                var f = t[a];
                                for (var l = 0; l < f.points_.length; l++) {
                                    var c = new i(f.points_[l].x, f.points_[l].y, 0);
                                    n = Math.min(n, c.x), r = Math.min(r, c.y), s = Math.max(s, c.x), u = Math.max(u, c.y), this.points.push(c)
                                }
                            }
                            this.bounds.minX = n, this.bounds.minY = r, this.bounds.maxX = s, this.bounds.maxY = u
                        }
                    }, applyTransform: function (e) {
                        var t = this.points;
                        if (t.length === 0)return;
                        var n = Number.MAX_VALUE, r = Number.MAX_VALUE, i = -Number.MAX_VALUE, s = -Number.MAX_VALUE;
                        for (var o = 0; o < t.length; o++) {
                            var u = t[o];
                            u.transformMat4(e), n = Math.min(n, u.x), r = Math.min(r, u.y), i = Math.max(i, u.x), s = Math.max(s, u.y)
                        }
                        this.bounds.minX = n, this.bounds.minY = r, this.bounds.maxX = i, this.bounds.maxY = s
                    }, destroyContour: function () {
                        if (!this.shapes)return;
                        for (var e = 0; e < this.shapes.length; e++)this.shapes[e].length = 0;
                        this.shapes.length = 0, this.shapes = null
                    }, destroy: function () {
                        this.destroyContour(), this.points && (this.points.length = 0, this.points = null)
                    }
                });
            f.DEFAULT_SIZE = 12, f.DEFAULT_STEPS = 10, f.DEFAULT_SIMPLIFY = 3, f.DEFAULT_CHARACTER = "?", f.SAVE_CONTOUR = !1, t.exports = f
        }, {"./triangulate": 11, "./util": 13, klasse: 34, vecmath: 61}],
        8: [function (e, t, n) {
            var r = e("klasse"), i = e("vecmath").Vector2, s = e("vecmath").Vector3, o = e("vecmath").Matrix4,
                u = e("./triangulate"), a = e("./util"), f = e("./Glyph"), l = new s, c = new o, h = new r({
                    initialize: function (e, t, n, r, i, s, o, u, l) {
                        n = typeof n == "number" ? n : f.DEFAULT_SIZE, this.size = n, this.text = "", this.face = t, this.align = s || h.Align.LEFT, this.glyphs = [];
                        if (typeof o != "number") {
                            var c = a.getGlyphMetrics(t, n, "W");
                            this.spaceWidth = c ? c.xadvance : n / 2
                        } else this.spaceWidth = o;
                        this.letterSpacing = u || 0, this.lineHeight = a.getFaceHeight(t, n) + l, this.wordCount = 0, this.bounds = {
                            minX: 0,
                            minY: 0,
                            maxX: 0,
                            maxY: 0
                        }, this.setText(e, r, i)
                    }, setText: function (e, t, n) {
                        e = (e || "").toString().trim(), this.text = e, this.glyphs.length = 0;
                        var r = this.size, i = this.face;
                        this.bounds.minX = 0, this.bounds.minY = 0, this.bounds.maxX = 0, this.bounds.maxY = 0;
                        if (this.text.length === 0)return;
                        this.bounds.minX = Number.MAX_VALUE, this.bounds.minY = Number.MAX_VALUE, this.bounds.maxX = -Number.MAX_VALUE, this.bounds.maxY = -Number.MAX_VALUE;
                        var s = 0, o = [], u = [], p = 0, d = 0, v = 0, m = [0], g = 0, y = 0;
                        for (var b = 0; b < e.length; b++) {
                            var w = e.charAt(b);
                            if (w == "\r") {
                                o.push({xadvance: 0});
                                continue
                            }
                            if (w == "\n") {
                                o.push({xadvance: 0}), d += this.lineHeight, s = 0, v = 0, m.push(0), p++, y++;
                                continue
                            }
                            if (w == " " || w == "	") {
                                b > 0 && e.charAt(b - 1) === "." && (s -= h.PERIOD_KERNING), o.push({xadvance: this.spaceWidth});
                                continue
                            }
                            var E = new f(i, w, r, t, n);
                            E.word = y;
                            var S = a.getGlyphMetrics(i, r, w);
                            S || (S = {xadvance: 0}), b > 0 && (s += o[b - 1].xadvance + this.letterSpacing), v = Math.max(v, s + E.bounds.minX + (E.bounds.maxX - E.bounds.minX)), m[m.length - 1] = v, g = Math.max(g, v), u.push({
                                x: s,
                                y: d,
                                row: p
                            }), o.push(S), this.glyphs.push(E)
                        }
                        this.wordCount = this.glyphs.length === 0 ? 0 : y + 1;
                        for (var b = 0; b < this.glyphs.length; b++) {
                            var E = this.glyphs[b], s = u[b].x, d = u[b].y, x = u[b].row, T = m[x];
                            this.align === h.Align.CENTER ? s += (g - T) / 2 : this.align === h.Align.RIGHT && (s += g - T), c.idt(), c.translate(l.set(s, d, 0)), E.applyTransform(c), this.bounds.minX = Math.min(this.bounds.minX, s + E.bounds.minX), this.bounds.maxX = Math.max(this.bounds.maxX, E.bounds.minX + (E.bounds.maxX - E.bounds.minX)), this.bounds.minY = Math.min(this.bounds.minY, E.bounds.minY), this.bounds.maxY = Math.max(this.bounds.maxY, E.bounds.maxY)
                        }
                        this.bounds.minX = 0, this.bounds.maxX = g
                    }, _maxWidth: function (e) {
                    }, destroy: function () {
                        if (!this.glyphs)return;
                        for (var e = 0; e < this.glyphs.length; e++)this.glyphs[e].destroy()
                    }
                });
            h.Align = {CENTER: "CENTER", LEFT: "LEFT", RIGHT: "RIGHT"}, h.PERIOD_KERNING = 0, t.exports = h
        }, {"./Glyph": 7, "./triangulate": 11, "./util": 13, klasse: 34, vecmath: 61}],
        bRhrlU: [function (e, t, n) {
            t.exports = {triangulate: e("./triangulate"), util: e("./util"), Glyph: e("./Glyph"), Text3D: e("./Text3D")}
        }, {"./Glyph": 7, "./Text3D": 8, "./triangulate": 11, "./util": 13}],
        text3d: [function (e, t, n) {
            t.exports = e("bRhrlU")
        }, {}],
        11: [function (e, t, n) {
            function i(e, t) {
                var n = 0;
                for (var r = 0; r < t.length; ++r) {
                    var i = t[r], o;
                    r === t.length - 1 ? o = t[0] : o = t[r + 1], i.y <= e.y ? o.y > e.y && s(i, o, e) > 0 && ++n : o.y <= e.y && s(i, o, e) < 0 && --n
                }
                return n
            }

            function s(e, t, n) {
                return (t.x - e.x) * (n.y - e.y) - (n.x - e.x) * (t.y - e.y)
            }

            function o(e) {
                var t = 0;
                for (var n = 0; n < e.length; n++) {
                    var r = n === e.length - 1 ? e[0] : e[n + 1];
                    t += (r.x - e[n].x) * (r.y + e[n].y)
                }
                return t > 0
            }

            function u(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    if (r.x == e.x && r.y == e.y)return n
                }
                return -1
            }

            function a(e, t, n) {
                var r = (t.x - e.x) * (n.y - e.y) - (n.x - e.x) * (t.y - e.y), i = 1e-7;
                return Math.abs(r) < i
            }

            function f(e) {
                var t = [];
                for (var n = 0; n < e.length; n++) {
                    var i = e[n].x, s = e[n].y, o = new r.Point(i, s);
                    u(o, t) === -1 && (n === 0 || n === e.length - 1 || !a(e[n - 1], e[n], e[n + 1])) && t.push(o)
                }
                return t
            }

            function l(e, t) {
                var n = [];
                for (var r = 0; r < 10; r++);
            }

            var r = e("poly2tri");
            t.exports = function (e) {
                var t = !1, n = null, s = {holes: [], contour: []}, u = [];
                for (var a = 0; a < e.length; a++) {
                    var c = e[a].points, h = f(c);
                    if (a == 0) {
                        t = o(h);
                        var p = i(c[0], c)
                    }
                    try {
                        if (n !== null) {
                            var d = o(h), p = i(c[0], c);
                            t !== d ? (n.addHole(h), s.holes.push(c)) : (l(h, n), n.triangulate(), u = u.concat(n.getTriangles()), n = new r.SweepContext(h), s = {
                                holes: [],
                                contour: c
                            })
                        } else n = new r.SweepContext(h), s = {holes: [], contour: c}
                    } catch (v) {
                        return 0, null
                    }
                }
                if (n !== null)try {
                    l(h, n), n.triangulate(), u = u.concat(n.getTriangles())
                } catch (v) {
                    return 0, null
                }
                return u
            }
        }, {poly2tri: 39}],
        12: [function (e, t, n) {
            t.exports = e(5)
        }, {}],
        13: [function (e, t, n) {
            function u(e, t, n) {
                var r = null, i = null;
                for (var s in e) {
                    var o = e[s];
                    if (o) {
                        if (s === t)return o;
                        r === null && (r = o), n && i === null && s === n && (i = o)
                    }
                }
                return i !== null ? i : r
            }

            function a(e, t, n) {
                var r = e.points;
                for (var i = 0; i < r.length; i++)r[i].x = r[i].x * t.x + n.x, r[i].y = r[i].y * t.y + n.y
            }

            function f(e, t, n, u) {
                u = u || 10, o.fontSize = t;
                var f = e.glyphs[n];
                if (!f || !f.o)return null;
                var l = [], c = new i, h = !1, p = .5;
                c.approximateCurves = h, c.approximationFactor = p, c.steps = u;
                var d = s.pixelsFromPoints(e, o, 1), v = new r(d * o.fontStretchPercent, -d),
                    m = new r(0, e.ascender * d), g = f.o.split(" "), y = g.length;
                for (var b = 0; b < y;) {
                    var w = g[b++];
                    switch (w) {
                        case"m":
                            b !== 1 && (a(c, v, m), l.push(c), c = new i, c.approximateCurves = h, c.approximationFactor = p, c.steps = u), c.moveTo(g[b++], g[b++]);
                            break;
                        case"l":
                            c.lineTo(g[b++], g[b++]);
                            break;
                        case"q":
                            var E = g[b++], S = g[b++];
                            c.quadraticCurveTo(g[b++], g[b++], E, S);
                            break;
                        case"b":
                            var x = g[b++], T = g[b++];
                            c.bezierCurveTo(g[b++], g[b++], g[b++], g[b++], x, T)
                    }
                }
                return a(c, v, m), l.push(c), l
            }

            var r = e("vecmath").Vector2, i = e("shape2d"), s = e("./typeface-stripped.js"),
                o = {fontSize: 12, fontStretchPercent: 1, letterSpacing: 0};
            t.exports.getFaces = function () {
                return s.faces
            }, t.exports.getFace = function (e, t, n) {
                e = (e || "").toLowerCase();
                var r = null;
                if (s && s.faces) {
                    if (!(!e || e in s.faces))throw"No font with the name " + e;
                    var i = e ? s.faces[e] : u(s.faces, e);
                    if (!(!t || t in i))throw"No '" + e + "' weight with the value " + t;
                    var o = t ? i[t] : u(i, t, "normal");
                    if (!(!n || n in o))throw"No '" + e + "' style with the type " + n;
                    r = n ? o[n] : u(o, n, "normal")
                }
                return r
            }, t.exports.getFaceHeight = function (e, t) {
                return o.fontSize = t, Math.round(s.pixelsFromPoints(e, o, e.lineHeight))
            }, t.exports.getFaceAscent = function (e, t) {
                return o.fontSize = t, Math.round(s.pixelsFromPoints(e, o, e.ascender))
            }, t.exports.pixelsFromPoints = function (e, t, n) {
                return o.fontSize = t, s.pixelsFromPoints(e, o, typeof n == "number" ? n : 1)
            }, t.exports.pointsFromPixels = function (e, t, n) {
                return o.fontSize = t, s.pointsFromPixels(e, o, n)
            }, t.exports.getGlyphMetrics = function (e, n, r) {
                var i = e.glyphs[r];
                if (!i || !i.o)return null;
                var s = t.exports.pixelsFromPoints(e, n);
                return {
                    xadvance: i.ha ? i.ha * s : 0,
                    height: t.exports.getFaceHeight(e, n),
                    ascent: t.exports.getFaceAscent(e, n)
                }
            }, t.exports.getShapeList = f
        }, {"./typeface-stripped.js": 12, shape2d: 45, vecmath: 61}],
        14: [function (e, t, n) {
            var r = e("klasse"), i = e("./vecutil"), s = e("vecmath").Vector2, o = e("vecmath").Vector3,
                u = e("vecmath").Vector4, a = e("vecmath").Matrix4, f = new o, l = new u, c = new r({
                    initialize: function () {
                        this.direction = new o(0, 0, -1), this.up = new o(0, 1, 0), this.position = new o, this.projection = new a, this.view = new a, this.combined = new a, this.invProjectionView = new a, this.near = 1, this.far = 100, this.ray = {
                            origin: new o,
                            direction: new o
                        }, this.viewportWidth = 0, this.viewportHeight = 0
                    }, translate: function (e, t, n) {
                        typeof e == "object" ? (this.position.x += e.x || 0, this.position.y += e.y || 0, this.position.z += e.z || 0) : (this.position.x += e || 0, this.position.y += t || 0, this.position.z += n || 0)
                    }, lookAt: function (e, t, n) {
                        var r = this.direction, i = this.up;
                        typeof e == "object" ? r.copy(e) : r.set(e, t, n), r.sub(this.position).normalize(), f.copy(r).cross(i).normalize(), i.copy(f).cross(r).normalize()
                    }, rotate: function (e, t) {
                        i.rotate(this.direction, t, e), i.rotate(this.up, t, e)
                    }, rotateAround: function (e, t, n) {
                        tmpVec.copy(e).sub(this.position), this.translate(tmpVec), this.rotate(t, n), this.translate(tmpVec.negate())
                    }, project: function (e, t) {
                        t || (t = new u);
                        var n = this.viewportWidth, r = this.viewportHeight, i = c.NEAR_RANGE, s = c.FAR_RANGE;
                        l.set(e.x, e.y, e.z, 1), l.transformMat4(this.combined), l.x = l.x / l.w, l.y = l.y / l.w, l.z = l.z / l.w, t.x = n / 2 * l.x + (0 + n / 2), t.y = r / 2 * l.y + (0 + r / 2), t.z = (s - i) / 2 * l.z + (s + i) / 2;
                        if (t.w === 0 || t.w) t.w = 1 / l.w;
                        return t
                    }, unproject: function (e, t) {
                        t || (t = new o);
                        var n = l.set(0, 0, this.viewportWidth, this.viewportHeight);
                        return t.copy(e).unproject(n, this.invProjectionView)
                    }, getPickRay: function (e, t) {
                        var n = this.ray.origin.set(e, t, 0), r = this.ray.direction.set(e, t, 1),
                            i = l.set(0, 0, this.viewportWidth, this.viewportHeight), s = this.invProjectionView;
                        return n.unproject(i, s), r.unproject(i, s), r.sub(n).normalize(), this.ray
                    }, update: function () {
                    }
                });
            c.FAR_RANGE = 1, c.NEAR_RANGE = 0, t.exports = c
        }, {"./vecutil": 18, klasse: 34, vecmath: 61}],
        15: [function (e, t, n) {
            var r = e("klasse"), i = e("vecmath").Vector3, s = e("vecmath").Vector4, o = e("vecmath").Matrix4,
                u = e("./Camera"), a = new i, f = new r({
                    Extends: u, initialize: function (e, t) {
                        u.call(this), this.viewportWidth = e || 0, this.viewportHeight = t || 0, this.zoom = 1, this.near = 0, this.update()
                    }, setToOrtho: function (e, t, n) {
                        var r = this.zoom;
                        t = typeof t == "number" ? t : this.viewportWidth, n = typeof n == "number" ? n : this.viewportHeight, this.up.set(0, e ? -1 : 1, 0), this.direction.set(0, 0, e ? 1 : -1), this.position.set(r * t / 2, r * n / 2, 0), this.viewportWidth = t, this.viewportHeight = n, this.update()
                    }, update: function () {
                        var e = this.viewportWidth, t = this.viewportHeight, n = Math.abs(this.near),
                            r = Math.abs(this.far), i = this.zoom;
                        this.projection.ortho(i * -e / 2, i * e / 2, i * -t / 2, i * t / 2, n, r), a.copy(this.position).add(this.direction), this.view.lookAt(this.position, a, this.up), this.combined.copy(this.projection).mul(this.view), this.invProjectionView.copy(this.combined).invert()
                    }
                });
            t.exports = f
        }, {"./Camera": 14, klasse: 34, vecmath: 61}],
        16: [function (e, t, n) {
            var r = e("klasse"), i = e("vecmath").Matrix4, s = e("vecmath").Vector2, o = e("vecmath").Vector3,
                u = e("./Camera"), a = new o, f = null, l = null, c = null, h = new r({
                    Extends: u, initialize: function (e, t, n) {
                        u.call(this), this.viewportWidth = t, this.viewportHeight = n, this.billboardMatrixDirty = !0, this.fieldOfView = e, this.update()
                    }, setViewport: function (e, t) {
                        this.viewportWidth = e, this.viewportHeight = t
                    }, updateBillboardMatrix: function () {
                        f || (f = new o, l = new o, c = new i);
                        var e = f.set(this.direction).negate(), t = l.set(this.up).cross(e).normalize(),
                            n = a.set(e).cross(t).normalize(), r = c.val;
                        r[0] = t.x, r[1] = t.y, r[2] = t.z, r[3] = 0, r[4] = n.x, r[5] = n.y, r[6] = n.z, r[7] = 0, r[8] = e.x, r[9] = e.y, r[10] = e.z, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, this.billboardMatrixDirty = !1
                    }, getPointSize: function (e, t, n) {
                        n || (n = new s), this.billboardMatrixDirty && this.updateBillboardMatrix();
                        var r = a, i = t.x / 2, o = t.y / 2;
                        r.set(-i, -o, 0).transformMat4(c).add(e), this.project(r, r);
                        var u = r.x, f = r.y;
                        r.set(i, o, 0).transformMat4(c).add(e), this.project(r, r);
                        var l = r.x, h = r.y, p = Math.abs(l - u), d = Math.abs(h - f);
                        return n.set(p, d)
                    }, update: function () {
                        var e = this.viewportWidth / this.viewportHeight;
                        this.projection.perspective(this.fieldOfView, e, Math.abs(this.near), Math.abs(this.far)), a.copy(this.position).add(this.direction), this.view.lookAt(this.position, a, this.up), this.combined.copy(this.projection).mul(this.view), this.invProjectionView.copy(this.combined).invert(), this.billboardMatrixDirty = !0
                    }
                });
            t.exports = h
        }, {"./Camera": 14, klasse: 34, vecmath: 61}],
        17: [function (e, t, n) {
            t.exports = {
                vecutil: e("./vecutil"),
                Camera: e("./Camera"),
                PerspectiveCamera: e("./PerspectiveCamera"),
                OrthographicCamera: e("./OrthographicCamera")
            }
        }, {"./Camera": 14, "./OrthographicCamera": 15, "./PerspectiveCamera": 16, "./vecutil": 18}],
        18: [function (e, t, n) {
            var r = e("vecmath").Vector3, i = e("vecmath").Matrix4, s = e("vecmath").Quaternion, o = new i, u = new s,
                a = new r, f = {};
            f.rotate = function (e, t, n) {
                return u.setAxisAngle(t, n), o.fromRotationTranslation(u, a.set(0, 0, 0)), e.transformMat4(o)
            }, t.exports = f
        }, {vecmath: 61}],
        19: [function (e, t, n) {
            t.exports.lerp = function (e, t, n) {
                return e * (1 - n) + t * n
            }, t.exports.smoothstep = function (e, t, n) {
                return n = Math.max(0, Math.min(1, (n - e) / (t - e))), n * n * (3 - 2 * n)
            }
        }, {}],
        20: [function (e, t, n) {
            t.exports = {MeshRenderer: e("./lib/MeshRenderer")}
        }, {"./lib/MeshRenderer": 21}],
        21: [function (e, t, n) {
            var r = e("klasse"), i = e("kami").Mesh, s = e("kami").ShaderProgram, o = e("vecmath").Matrix4,
                u = e("number-util").colorToFloat, a = new r({
                    initialize: function (e, t) {
                        this.context = e;
                        if (!e)throw new Error("no WebGLContext specified to MeshRenderer");
                        t = t || {};
                        var n = typeof t.hasNormals != "undefined" ? t.hasNormals : !1,
                            r = typeof t.hasColors != "undefined" ? t.hasColors : !1;
                        this.numTexCoords = t.numTexCoords || 0, this.maxVertices = typeof t.maxVertices == "number" ? t.maxVertices : 500;
                        var s = this._createVertexAttributes(n, r);
                        this.mesh = new i(e, !1, this.maxVertices, 0, s), this.normalOffset = n ? 3 : 0, this.colorOffset = r ? this.normalOffset + 3 : 0, this.texCoordOffset = this.numTexCoords > 0 ? this.colorOffset + 1 : 0, this.numSetTexCoords = 0, this.vertices = this.mesh.vertices, this.vertexSize = this.mesh.vertexStride / 4, this.primitiveType = e.gl.TRIANGLES, this.premultiplied = !0, this.vertexIdx = 0, this.numVertices = 0, this.projModelView = new o, this._shader = a.createDefaultShader(e, n, r, this.numTexCoords), this.defaultShader = this._shader, this.ownsShader = !0
                    }, destroy: function () {
                        this.ownsShader && this.defaultShader && this.defaultShader.destroy(), this.mesh && this.mesh.destroy(), this.defaultShader = null, this._shader = null, this.mesh = null, this.context = null
                    }, shader: {
                        set: function (e) {
                            this._shader = e ? e : this.defaultShader, this.drawing && (this._shader.bind(), this.uploadMatrices())
                        }, get: function () {
                            return this._shader
                        }
                    }, _createVertexAttributes: function (e, t) {
                        var n = this.context.gl, r = [new i.Attrib(s.POSITION_ATTRIBUTE, 3)];
                        e && r.push(new i.Attrib(s.NORMAL_ATTRIBUTE, 3)), t && r.push(new i.Attrib(s.COLOR_ATTRIBUTE, 4, null, n.UNSIGNED_BYTE, !0, 1));
                        for (var o = 0; o < this.numTexCoords; o++)r.push(new i.Attrib(s.TEXCOORD_ATTRIBUTE + o, 2));
                        return r
                    }, begin: function (e, t) {
                        if (this.drawing)throw"batch.end() must be called before begin";
                        this.drawing = !0, e && this.projModelView.set(e), this.primitiveType = typeof t == "undefined" ? this.context.gl.TRIANGLES : t;
                        var n = this._shader;
                        n.bind(), this.uploadMatrices()
                    }, uploadMatrices: function () {
                        var e = this._shader;
                        e.setUniformMatrix4("u_projModelView", this.projModelView);
                        for (var t = 0; t < this.numTexCoords; t++)e.setUniformi("u_sampler" + t, t)
                    }, color: function (e, t, n, r) {
                        var i = typeof e == "number";
                        i && typeof t == "number" && typeof n == "number" ? r = r || r === 0 ? r : 1 : e = t = n = r = i ? e : 1, this.premultiplied && (e *= r, t *= r, n *= r);
                        var s = u(~~(e * 255), ~~(t * 255), ~~(n * 255), ~~(r * 255));
                        this.vertices[this.vertexIdx + this.colorOffset] = s
                    }, texCoord: function (e, t) {
                        var n = this.vertexIdx + this.texCoordOffset;
                        this.vertices[n + this.numSetTexCoords] = e || 0, this.vertices[n + this.numSetTexCoords + 1] = t || 0, this.numSetTexCoords += 2
                    }, normal: function (e, t, n) {
                        var r = this.vertexIdx + this.normalOffset;
                        this.vertices[r] = e || 0, this.vertices[r + 1] = t || 0, this.vertices[r + 2] = n || 0
                    }, vertex: function (e, t, n) {
                        var r = this.vertexIdx;
                        this.vertices[r] = e || 0, this.vertices[r + 1] = t || 0, this.vertices[r + 2] = n || 0, this.numSetTexCoords = 0, this.vertexIdx += this.vertexSize, this.numVertices++
                    }, end: function () {
                        if (!this.drawing)throw"renderer.begin() must be called before end";
                        this.drawing = !1;
                        if (this.numVertices === 0)return;
                        var e = this._shader, t = this.context.gl;
                        this.mesh.bind(e), this.mesh.verticesDirty = !0, this.mesh.draw(this.primitiveType, this.vertexIdx * 4 / this.mesh.vertexStride, 0, this.vertexIdx), this.mesh.unbind(e), this.numSetTexCoords = 0, this.vertexIdx = 0, this.numVertices = 0
                    }
                });
            a.createDefaultShader = function (e, t, n, r) {
                var i = a.createVertexShader(t, n, r), o = a.createFragmentShader(n, r);
                return new s(e, i, o)
            }, a.createVertexShader = function (e, t, n) {
                n = n || 0;
                var r = "";
                r += "attribute vec4 " + s.POSITION_ATTRIBUTE + ";\n" + (e ? "attribute vec3 " + s.NORMAL_ATTRIBUTE + ";\n" : "") + (t ? "attribute vec4 " + s.COLOR_ATTRIBUTE + ";\n" : "");
                var i;
                for (i = 0; i < n; i++)r += "attribute vec2 " + s.TEXCOORD_ATTRIBUTE + i + ";\n";
                r += "uniform mat4 u_projModelView;\n", r += t ? "varying vec4 v_col;\n" : "";
                for (i = 0; i < n; i++)r += "varying vec2 v_tex" + i + ";\n";
                r += "void main() {\n   gl_Position = u_projModelView * " + s.POSITION_ATTRIBUTE + ";\n" + (t ? "   v_col = " + s.COLOR_ATTRIBUTE + ";\n" : "");
                for (i = 0; i < n; i++)r += "   v_tex" + i + " = " + s.TEXCOORD_ATTRIBUTE + i + ";\n";
                return r += "   gl_PointSize = 1.0;\n", r += "}\n", r
            }, a.createFragmentShader = function (e, t) {
                t = t || 0;
                var n = "#ifdef GL_ES\nprecision mediump float;\n#endif\n";
                e && (n += "varying vec4 v_col;\n");
                var r;
                for (r = 0; r < t; r++)n += "varying vec2 v_tex" + r + ";\n", n += "uniform sampler2D u_sampler" + r + ";\n";
                n += "void main() {\n   gl_FragColor = " + (e ? "v_col" : "vec4(1, 1, 1, 1)"), t > 0 && (n += " * ");
                for (r = 0; r < t; r++)r == t - 1 ? n += " texture2D(u_sampler" + r + ",  v_tex" + r + ")" : n += " texture2D(u_sampler" + r + ",  v_tex" + r + ") *";
                return n += ";\n}", n
            }, t.exports = a
        }, {kami: 31, klasse: 34, "number-util": 22, vecmath: 61}],
        22: [function (e, t, n) {
            var r = new Int8Array(4), i = new Int32Array(r.buffer, 0, 1), s = new Float32Array(r.buffer, 0, 1),
                o = function () {
                };
            o.intBitsToFloat = function (e) {
                return i[0] = e, s[0]
            }, o.floatToIntBits = function (e) {
                return s[0] = e, i[0]
            }, o.intToFloatColor = function (e) {
                return o.intBitsToFloat(e & 4278190079)
            }, o.colorToFloat = function (e, t, n, r) {
                var i = r << 24 | n << 16 | t << 8 | e;
                return o.intToFloatColor(i)
            }, o.isPowerOfTwo = function (e) {
                return (e & e - 1) === 0
            }, o.nextPowerOfTwo = function (e) {
                return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, e + 1
            }, t.exports = o
        }, {}],
        23: [function (e, t, n) {
            var r = e("klasse"), i = e("./glutils/Mesh"), s = e("number-util").colorToFloat, o = new r({
                initialize: function (t, n) {
                    if (typeof t != "object")throw"GL context not specified to SpriteBatch";
                    this.context = t, this.size = n || 500;
                    if (this.size > 10922)throw"Can't have more than 10922 sprites per batch: " + this.size;
                    this._blendSrc = this.context.gl.ONE, this._blendDst = this.context.gl.ONE_MINUS_SRC_ALPHA, this._blendingEnabled = !0, this._shader = this._createShader(), this.defaultShader = this._shader, this.ownsShader = !0, this.idx = 0, this.drawing = !1, this.mesh = this._createMesh(this.size), this.color = s(255, 255, 255, 255), this.premultiplied = !0
                }, blendingEnabled: {
                    set: function (e) {
                        var t = this._blendingEnabled;
                        this.drawing && this.flush(), this._blendingEnabled = e;
                        if (this.drawing && t != e) {
                            var n = this.context.gl;
                            e ? n.enable(n.BLEND) : n.disable(n.BLEND)
                        }
                    }, get: function () {
                        return this._blendingEnabled
                    }
                }, blendSrc: {
                    set: function (e) {
                        this.drawing && this.flush(), this._blendSrc = e
                    }, get: function () {
                        return this._blendSrc
                    }
                }, blendDst: {
                    set: function (e) {
                        this.drawing && this.flush(), this._blendDst = e
                    }, get: function () {
                        return this._blendDst
                    }
                }, setBlendFunction: function (e, t) {
                    this.blendSrc = e, this.blendDst = t
                }, shader: {
                    set: function (e) {
                        var t = this.drawing;
                        t && this.end(), this._shader = e ? e : this.defaultShader, t && this.begin()
                    }, get: function () {
                        return this._shader
                    }
                }, setColor: function (e, t, n, r) {
                    var i = typeof e == "number";
                    i && typeof t == "number" && typeof n == "number" ? r = r || r === 0 ? r : 1 : e = t = n = r = i ? e : 1, this.premultiplied && (e *= r, t *= r, n *= r), this.color = s(~~(e * 255), ~~(t * 255), ~~(n * 255), ~~(r * 255))
                }, _createMesh: function (e) {
                    var t = e * 4 * this.getVertexSize(), n = e * 6, r = this.context.gl;
                    this.vertices = new Float32Array(t), this.indices = new Uint16Array(n);
                    for (var s = 0,
                             o = 0; s < n; s += 6, o += 4)this.indices[s + 0] = o + 0, this.indices[s + 1] = o + 1, this.indices[s + 2] = o + 2, this.indices[s + 3] = o + 0, this.indices[s + 4] = o + 2, this.indices[s + 5] = o + 3;
                    var u = new i(this.context, !1, t, n, this._createVertexAttributes());
                    return u.vertices = this.vertices, u.indices = this.indices, u.vertexUsage = r.DYNAMIC_DRAW, u.indexUsage = r.STATIC_DRAW, u.dirty = !0, u
                }, _createShader: function () {
                    throw"_createShader not implemented"
                }, _createVertexAttributes: function () {
                    throw"_createVertexAttributes not implemented"
                }, getVertexSize: function () {
                    throw"getVertexSize not implemented"
                }, begin: function () {
                    if (this.drawing)throw"batch.end() must be called before begin";
                    this.drawing = !0, this.shader.bind(), this.mesh.bind(this.shader);
                    if (this._blendingEnabled) {
                        var e = this.context.gl;
                        e.enable(e.BLEND)
                    }
                }, end: function () {
                    if (!this.drawing)throw"batch.begin() must be called before end";
                    this.idx > 0 && this.flush(), this.drawing = !1, this.mesh.unbind(this.shader);
                    if (this._blendingEnabled) {
                        var e = this.context.gl;
                        e.disable(e.BLEND)
                    }
                }, _preRender: function () {
                }, flush: function () {
                    if (this.idx === 0)return;
                    var e = this.context.gl;
                    this._blendingEnabled && this._blendSrc && this._blendDst && e.blendFunc(this._blendSrc, this._blendDst), this._preRender();
                    var t = this.getVertexSize(), n = this.idx / (t * 4);
                    this.mesh.verticesDirty = !0, this.mesh.draw(e.TRIANGLES, n * 6, 0, this.idx), this.idx = 0
                }, draw: function (e, t, n, r, i, s, o, u, a) {
                }, drawVertices: function (e, t, n) {
                }, drawRegion: function (e, t, n, r, i) {
                    this.draw(e.texture, t, n, r, i, e.u, e.v, e.u2, e.v2)
                }, destroy: function () {
                    this.vertices = null, this.indices = null, this.size = this.maxVertices = 0, this.ownsShader && this.defaultShader && this.defaultShader.destroy(), this.defaultShader = null, this._shader = null, this.mesh && this.mesh.destroy(), this.mesh = null
                }
            });
            t.exports = o
        }, {"./glutils/Mesh": 29, klasse: 34, "number-util": 32}],
        24: [function (e, t, n) {
            var r = e("klasse"), i = e("./BaseBatch"), s = e("./glutils/Mesh"), o = e("./glutils/ShaderProgram"),
                u = new r({
                    Mixins: i, initialize: function (t, n) {
                        i.call(this, t, n), this.projection = new Float32Array(2), this.projection[0] = this.context.width / 2, this.projection[1] = this.context.height / 2, this.texture = null
                    }, resize: function (e, t) {
                        this.setProjection(e / 2, t / 2)
                    }, getVertexSize: function () {
                        return u.VERTEX_SIZE
                    }, _createVertexAttributes: function () {
                        var e = this.context.gl;
                        return [new s.Attrib(o.POSITION_ATTRIBUTE, 2), new s.Attrib(o.COLOR_ATTRIBUTE, 4, null, e.UNSIGNED_BYTE, !0, 1), new s.Attrib(o.TEXCOORD_ATTRIBUTE + "0", 2)]
                    }, setProjection: function (e, t) {
                        var n = this.projection[0], r = this.projection[1];
                        this.projection[0] = e, this.projection[1] = t, this.drawing && (e != n || t != r) && (this.flush(), this._updateMatrices())
                    }, _createShader: function () {
                        var e = new o(this.context, u.DEFAULT_VERT_SHADER, u.DEFAULT_FRAG_SHADER);
                        return e.log && 0, e
                    }, updateMatrices: function () {
                        this.shader.setUniformfv("u_projection", this.projection)
                    }, _preRender: function () {
                        this.texture && this.texture.bind()
                    }, begin: function () {
                        var e = this.context.gl;
                        i.prototype.begin.call(this), this.updateMatrices(), this.shader.setUniformi("u_texture0", 0), e.depthMask(!1)
                    }, end: function () {
                        var e = this.context.gl;
                        i.prototype.end.call(this), e.depthMask(!0)
                    }, flush: function () {
                        if (!this.texture)return;
                        if (this.idx === 0)return;
                        i.prototype.flush.call(this), u.totalRenderCalls++
                    }, draw: function (e, t, n, r, i, s, o, u, a) {
                        if (!this.drawing)throw"Illegal State: trying to draw a batch before begin()";
                        if (!e)return;
                        this.texture === null || this.texture.id !== e.id ? (this.flush(), this.texture = e) : this.idx == this.vertices.length && this.flush(), r = r === 0 ? r : r || e.width, i = i === 0 ? i : i || e.height, t = t || 0, n = n || 0;
                        var f = t, l = t + r, c = n, h = n + i;
                        s = s || 0, u = u === 0 ? u : u || 1, o = o || 0, a = a === 0 ? a : a || 1;
                        var p = this.color;
                        this.vertices[this.idx++] = f, this.vertices[this.idx++] = c, this.vertices[this.idx++] = p, this.vertices[this.idx++] = s, this.vertices[this.idx++] = o, this.vertices[this.idx++] = l, this.vertices[this.idx++] = c, this.vertices[this.idx++] = p, this.vertices[this.idx++] = u, this.vertices[this.idx++] = o, this.vertices[this.idx++] = l, this.vertices[this.idx++] = h, this.vertices[this.idx++] = p, this.vertices[this.idx++] = u, this.vertices[this.idx++] = a, this.vertices[this.idx++] = f, this.vertices[this.idx++] = h, this.vertices[this.idx++] = p, this.vertices[this.idx++] = s, this.vertices[this.idx++] = a
                    }, drawVertices: function (e, t, n) {
                        if (!this.drawing)throw"Illegal State: trying to draw a batch before begin()";
                        if (!e)return;
                        this.texture != e ? (this.flush(), this.texture = e) : this.idx == this.vertices.length && this.flush(), n = n || 0, this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++], this.vertices[this.idx++] = t[n++]
                    }
                });
            u.VERTEX_SIZE = 5, u.totalRenderCalls = 0, u.DEFAULT_FRAG_SHADER = ["precision mediump float;", "varying vec2 vTexCoord0;", "varying vec4 vColor;", "uniform sampler2D u_texture0;", "void main(void) {", "   gl_FragColor = texture2D(u_texture0, vTexCoord0) * vColor;", "}"].join("\n"), u.DEFAULT_VERT_SHADER = ["attribute vec2 " + o.POSITION_ATTRIBUTE + ";", "attribute vec4 " + o.COLOR_ATTRIBUTE + ";", "attribute vec2 " + o.TEXCOORD_ATTRIBUTE + "0;", "uniform vec2 u_projection;", "varying vec2 vTexCoord0;", "varying vec4 vColor;", "void main(void) {", "   gl_Position = vec4( " + o.POSITION_ATTRIBUTE + ".x / u_projection.x - 1.0, " + o.POSITION_ATTRIBUTE + ".y / -u_projection.y + 1.0 , 0.0, 1.0);", "   vTexCoord0 = " + o.TEXCOORD_ATTRIBUTE + "0;", "   vColor = " + o.COLOR_ATTRIBUTE + ";", "}"].join("\n"), t.exports = u
        }, {"./BaseBatch": 23, "./glutils/Mesh": 29, "./glutils/ShaderProgram": 30, klasse: 34}],
        25: [function (e, t, n) {
            var r = e("klasse"), i = e("signals"), s = e("number-util").nextPowerOfTwo,
                o = e("number-util").isPowerOfTwo, u = new r({
                    initialize: function a(e, t, n, r, i, s, o) {
                        if (typeof e != "object")throw"GL context not specified to Texture";
                        this.context = e, this.id = null, this.target = e.gl.TEXTURE_2D, this.width = 0, this.height = 0, this.wrapS = a.DEFAULT_WRAP, this.wrapT = a.DEFAULT_WRAP, this.minFilter = a.DEFAULT_FILTER, this.magFilter = a.DEFAULT_FILTER, this.managedArgs = Array.prototype.slice.call(arguments, 1), this.context.addManagedObject(this), this.create()
                    }, setup: function (e, t, n, r, i, s) {
                        var o = this.gl;
                        if (typeof e == "string") {
                            var a = new Image, f = arguments[0],
                                l = typeof arguments[1] == "function" ? arguments[1] : null,
                                c = typeof arguments[2] == "function" ? arguments[2] : null;
                            s = !!arguments[3];
                            var h = this;
                            u.USE_DUMMY_1x1_DATA && (h.uploadData(1, 1), this.width = this.height = 0), a.onload = function () {
                                h.uploadImage(a, undefined, undefined, s), l && l()
                            }, a.onerror = function () {
                                s && o.generateMipmap(o.TEXTURE_2D), c && c()
                            }, a.onabort = function () {
                                s && o.generateMipmap(o.TEXTURE_2D), c && c()
                            }, a.src = f
                        } else this.uploadData(e, t, n, r, i, s)
                    }, create: function () {
                        this.gl = this.context.gl;
                        var e = this.gl;
                        this.id = e.createTexture(), this.width = this.height = 0, this.target = e.TEXTURE_2D, this.bind(), e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, u.UNPACK_PREMULTIPLY_ALPHA), e.pixelStorei(e.UNPACK_ALIGNMENT, u.UNPACK_ALIGNMENT), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, u.UNPACK_FLIP_Y);
                        var t = u.UNPACK_COLORSPACE_CONVERSION || e.BROWSER_DEFAULT_WEBGL;
                        e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL, t), this.setWrap(this.wrapS, this.wrapT, !1), this.setFilter(this.minFilter, this.magFilter, !1), this.managedArgs.length !== 0 && this.setup.apply(this, this.managedArgs)
                    }, destroy: function () {
                        this.id && this.gl && this.gl.deleteTexture(this.id), this.context && this.context.removeManagedObject(this), this.width = this.height = 0, this.id = null, this.managedArgs = null, this.context = null, this.gl = null
                    }, setWrap: function (e, t, n) {
                        e && t ? (this.wrapS = e, this.wrapT = t) : this.wrapS = this.wrapT = e, this._checkPOT(), n || this.bind();
                        var r = this.gl;
                        r.texParameteri(this.target, r.TEXTURE_WRAP_S, this.wrapS), r.texParameteri(this.target, r.TEXTURE_WRAP_T, this.wrapT)
                    }, setFilter: function (e, t, n) {
                        e && t ? (this.minFilter = e, this.magFilter = t) : this.minFilter = this.magFilter = e, this._checkPOT(), n || this.bind();
                        var r = this.gl;
                        r.texParameteri(this.target, r.TEXTURE_MIN_FILTER, this.minFilter), r.texParameteri(this.target, r.TEXTURE_MAG_FILTER, this.magFilter)
                    }, uploadData: function (e, t, n, r, i, s) {
                        var o = this.gl;
                        n = n || o.RGBA, r = r || o.UNSIGNED_BYTE, i = i || null, this.width = e || e == 0 ? e : this.width, this.height = t || t == 0 ? t : this.height, this._checkPOT(), this.bind(), o.texImage2D(this.target, 0, n, this.width, this.height, 0, n, r, i), s && o.generateMipmap(this.target)
                    }, uploadImage: function (e, t, n, r) {
                        var i = this.gl;
                        t = t || i.RGBA, n = n || i.UNSIGNED_BYTE, this.width = e.width, this.height = e.height, this._checkPOT(), this.bind(), i.texImage2D(this.target, 0, t, t, n, e), r && i.generateMipmap(this.target)
                    }, _checkPOT: function () {
                        if (!u.FORCE_POT) {
                            var e = this.minFilter !== u.Filter.LINEAR && this.minFilter !== u.Filter.NEAREST,
                                t = this.wrapS !== u.Wrap.CLAMP_TO_EDGE || this.wrapT !== u.Wrap.CLAMP_TO_EDGE;
                            if (e || t)if (!o(this.width) || !o(this.height))throw new Error(e ? "Non-power-of-two textures cannot use mipmapping as filter" : "Non-power-of-two textures must use CLAMP_TO_EDGE as wrap")
                        }
                    }, bind: function (e) {
                        var t = this.gl;
                        (e || e === 0) && t.activeTexture(t.TEXTURE0 + e), t.bindTexture(this.target, this.id)
                    }, toString: function () {
                        return this.id + ":" + this.width + "x" + this.height + ""
                    }
                });
            u.Filter = {
                NEAREST: 9728,
                NEAREST_MIPMAP_LINEAR: 9986,
                NEAREST_MIPMAP_NEAREST: 9984,
                LINEAR: 9729,
                LINEAR_MIPMAP_LINEAR: 9987,
                LINEAR_MIPMAP_NEAREST: 9985
            }, u.Wrap = {
                CLAMP_TO_EDGE: 33071,
                MIRRORED_REPEAT: 33648,
                REPEAT: 10497
            }, u.Format = {
                DEPTH_COMPONENT: 6402,
                ALPHA: 6406,
                RGBA: 6408,
                RGB: 6407,
                LUMINANCE: 6409,
                LUMINANCE_ALPHA: 6410
            }, u.DataType = {
                BYTE: 5120,
                SHORT: 5122,
                INT: 5124,
                FLOAT: 5126,
                UNSIGNED_BYTE: 5121,
                UNSIGNED_INT: 5125,
                UNSIGNED_SHORT: 5123,
                UNSIGNED_SHORT_4_4_4_4: 32819,
                UNSIGNED_SHORT_5_5_5_1: 32820,
                UNSIGNED_SHORT_5_6_5: 33635
            }, u.DEFAULT_WRAP = u.Wrap.CLAMP_TO_EDGE, u.DEFAULT_FILTER = u.Filter.NEAREST, u.FORCE_POT = !1, u.UNPACK_FLIP_Y = !1, u.UNPACK_ALIGNMENT = 1, u.UNPACK_PREMULTIPLY_ALPHA = !0, u.UNPACK_COLORSPACE_CONVERSION = undefined, u.USE_DUMMY_1x1_DATA = !0, u.getNumComponents = function (e) {
                switch (e) {
                    case u.Format.DEPTH_COMPONENT:
                    case u.Format.ALPHA:
                    case u.Format.LUMINANCE:
                        return 1;
                    case u.Format.LUMINANCE_ALPHA:
                        return 2;
                    case u.Format.RGB:
                        return 3;
                    case u.Format.RGBA:
                        return 4
                }
                return null
            }, t.exports = u
        }, {klasse: 34, "number-util": 32, signals: 33}],
        26: [function (e, t, n) {
            var r = e("klasse"), i = e("./Texture"), s = new r({
                initialize: function (t, n, r, i, s) {
                    this.texture = t, this.setRegion(n, r, i, s)
                }, setUVs: function (e, t, n, r) {
                    this.regionWidth = Math.round(Math.abs(n - e) * this.texture.width), this.regionHeight = Math.round(Math.abs(r - t) * this.texture.height);
                    if (this.regionWidth == 1 && this.regionHeight == 1) {
                        var i = .25 / this.texture.width;
                        e += i, n -= i;
                        var s = .25 / this.texture.height;
                        t += s, r -= s
                    }
                    this.u = e, this.v = t, this.u2 = n, this.v2 = r
                }, setRegion: function (e, t, n, r) {
                    e = e || 0, t = t || 0, n = n === 0 || n ? n : this.texture.width, r = r === 0 || r ? r : this.texture.height;
                    var i = 1 / this.texture.width, s = 1 / this.texture.height;
                    this.setUVs(e * i, t * s, (e + n) * i, (t + r) * s), this.regionWidth = Math.abs(n), this.regionHeight = Math.abs(r)
                }, setFromRegion: function (e, t, n, r, i) {
                    this.texture = e.texture, this.set(e.getRegionX() + t, e.getRegionY() + n, r, i)
                }, regionX: {
                    get: function () {
                        return Math.round(this.u * this.texture.width)
                    }
                }, regionY: {
                    get: function () {
                        return Math.round(this.v * this.texture.height)
                    }
                }, flip: function (e, t) {
                    var n;
                    e && (n = this.u, this.u = this.u2, this.u2 = n), t && (n = this.v, this.v = this.v2, this.v2 = n)
                }
            });
            t.exports = s
        }, {"./Texture": 25, klasse: 34}],
        27: [function (e, t, n) {
            var r = e("klasse"), i = e("signals"), s = new r({
                initialize: function (t, n, r, s) {
                    this.managedObjects = [], this.gl = null, r && typeof window.WebGLRenderingContext != "undefined" && r instanceof window.WebGLRenderingContext && (r = r.canvas, this.gl = r, this.valid = !0, s = undefined), this.view = r || document.createElement("canvas"), this.width = this.view.width = t || 300, this.height = this.view.height = n || 150, this.contextAttributes = s, this.valid = !1, this.lost = new i, this.restored = new i, this.view.addEventListener("webglcontextlost", function (e) {
                        e.preventDefault(), this._contextLost(e)
                    }.bind(this)), this.view.addEventListener("webglcontextrestored", function (e) {
                        e.preventDefault(), this._contextRestored(e)
                    }.bind(this)), this.valid || this._initContext(), this.resize(this.width, this.height)
                }, _initContext: function () {
                    var e = "";
                    this.valid = !1;
                    try {
                        this.gl = this.view.getContext("webgl", this.contextAttributes) || this.view.getContext("experimental-webgl", this.contextAttributes)
                    } catch (t) {
                        this.gl = null
                    }
                    if (!this.gl)throw"WebGL Context Not Supported -- try enabling it or using a different browser";
                    this.valid = !0
                }, resize: function (e, t) {
                    this.width = e, this.height = t, this.view.width = e, this.view.height = t;
                    var n = this.gl;
                    n.viewport(0, 0, this.width, this.height)
                }, addManagedObject: function (e) {
                    this.managedObjects.push(e)
                }, removeManagedObject: function (e) {
                    var t = this.managedObjects.indexOf(e);
                    return t > -1 ? (this.managedObjects.splice(t, 1), e) : null
                }, destroy: function () {
                    for (var e = 0; e < this.managedObjects.length; e++) {
                        var t = this.managedObjects[e];
                        t && typeof t.destroy == "function" && t.destroy()
                    }
                    this.managedObjects.length = 0, this.valid = !1, this.gl = null, this.view = null, this.width = this.height = 0
                }, _contextLost: function (e) {
                    this.valid = !1, this.lost.dispatch(this)
                }, _contextRestored: function (e) {
                    this._initContext();
                    for (var t = 0; t < this.managedObjects.length; t++)this.managedObjects[t].create();
                    this.resize(this.width, this.height), this.restored.dispatch(this)
                }
            });
            t.exports = s
        }, {klasse: 34, signals: 33}],
        28: [function (e, t, n) {
            var r = e("klasse"), i = e("../Texture"), s = new r({
                initialize: function (t, n, r, s) {
                    if (typeof t != "object")throw"GL context not specified to FrameBuffer";
                    this.id = null, this.context = t, this.texture = new i(t, n, r, s), this.context.addManagedObject(this), this.create()
                }, width: {
                    get: function () {
                        return this.texture.width
                    }
                }, height: {
                    get: function () {
                        return this.texture.height
                    }
                }, create: function () {
                    this.gl = this.context.gl;
                    var e = this.gl, t = this.texture;
                    t.bind(), this.id = e.createFramebuffer(), e.bindFramebuffer(e.FRAMEBUFFER, this.id), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, t.target, t.id, 0);
                    var n = e.checkFramebufferStatus(e.FRAMEBUFFER);
                    if (n != e.FRAMEBUFFER_COMPLETE) {
                        this.destroy();
                        var r = "Framebuffer not complete";
                        switch (n) {
                            case e.FRAMEBUFFER_UNSUPPORTED:
                                throw new Error(r + ": unsupported");
                            case e.INCOMPLETE_DIMENSIONS:
                                throw new Error(r + ": incomplete dimensions");
                            case e.INCOMPLETE_ATTACHMENT:
                                throw new Error(r + ": incomplete attachment");
                            case e.INCOMPLETE_MISSING_ATTACHMENT:
                                throw new Error(r + ": missing attachment");
                            default:
                                throw new Error(r)
                        }
                    }
                    e.bindFramebuffer(e.FRAMEBUFFER, null)
                }, destroy: function () {
                    var e = this.gl;
                    this.texture && this.texture.destroy(), this.id && this.gl && this.gl.deleteFramebuffer(this.id), this.context && this.context.removeManagedObject(this), this.id = null, this.gl = null, this.texture = null, this.context = null
                }, begin: function () {
                    var e = this.gl;
                    e.viewport(0, 0, this.texture.width, this.texture.height), e.bindFramebuffer(e.FRAMEBUFFER, this.id)
                }, end: function () {
                    var e = this.gl;
                    e.viewport(0, 0, this.context.width, this.context.height), e.bindFramebuffer(e.FRAMEBUFFER, null)
                }
            });
            t.exports = s
        }, {"../Texture": 25, klasse: 34}],
        29: [function (e, t, n) {
            var r = e("klasse"), i = new r({
                dirty: {
                    set: function (e) {
                        this.verticesDirty = e, this.indicesDirty = e
                    }
                }, initialize: function (t, n, r, i, s) {
                    if (typeof t != "object")throw"GL context not specified to Mesh";
                    if (!r)throw"numVerts not specified, must be > 0";
                    this.context = t, this.gl = t.gl, this.numVerts = null, this.numIndices = null, this.vertices = null, this.indices = null, this.vertexBuffer = null, this.indexBuffer = null, this.verticesDirty = !0, this.indicesDirty = !0, this.indexUsage = null, this.vertexUsage = null, this._vertexAttribs = null, this.vertexStride = null, this.numVerts = r, this.numIndices = i || 0, this.vertexUsage = n ? this.gl.STATIC_DRAW : this.gl.DYNAMIC_DRAW, this.indexUsage = n ? this.gl.STATIC_DRAW : this.gl.DYNAMIC_DRAW, this._vertexAttribs = s || [], this.indicesDirty = !0, this.verticesDirty = !0;
                    var o = 0;
                    for (var u = 0; u < this._vertexAttribs.length; u++)o += this._vertexAttribs[u].offsetCount;
                    this.vertexStride = o * 4, this.vertices = new Float32Array(this.numVerts), this.indices = new Uint16Array(this.numIndices), this.context.addManagedObject(this), this.create()
                }, create: function () {
                    this.gl = this.context.gl;
                    var e = this.gl;
                    this.vertexBuffer = e.createBuffer(), this.indexBuffer = this.numIndices > 0 ? e.createBuffer() : null, this.dirty = !0
                }, destroy: function () {
                    this.vertices = null, this.indices = null, this.vertexBuffer && this.gl && this.gl.deleteBuffer(this.vertexBuffer), this.indexBuffer && this.gl && this.gl.deleteBuffer(this.indexBuffer), this.vertexBuffer = null, this.indexBuffer = null, this.context && this.context.removeManagedObject(this), this.gl = null, this.context = null
                }, _updateBuffers: function (e, t) {
                    var n = this.gl;
                    this.numIndices > 0 && (e || n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, this.indexBuffer), this.indicesDirty && (n.bufferData(n.ELEMENT_ARRAY_BUFFER, this.indices, this.indexUsage), this.indicesDirty = !1)), e || n.bindBuffer(n.ARRAY_BUFFER, this.vertexBuffer);
                    if (this.verticesDirty) {
                        if (t) {
                            var r = this.vertices.subarray(0, t);
                            n.bufferSubData(n.ARRAY_BUFFER, 0, r)
                        } else n.bufferData(n.ARRAY_BUFFER, this.vertices, this.vertexUsage);
                        this.verticesDirty = !1
                    }
                }, draw: function (e, t, n, r) {
                    if (t === 0)return;
                    var i = this.gl;
                    n = n || 0, this._updateBuffers(!0, r), this.numIndices > 0 ? i.drawElements(e, t, i.UNSIGNED_SHORT, n * 2) : i.drawArrays(e, n, t)
                }, bind: function (e) {
                    var t = this.gl, n = 0, r = this.vertexStride;
                    this._updateBuffers();
                    for (var i = 0; i < this._vertexAttribs.length; i++) {
                        var s = this._vertexAttribs[i],
                            o = s.location === null ? e.getAttributeLocation(s.name) : s.location;
                        t.enableVertexAttribArray(o), t.vertexAttribPointer(o, s.numComponents, s.type || t.FLOAT, s.normalize, r, n), n += s.offsetCount * 4
                    }
                }, unbind: function (e) {
                    var t = this.gl;
                    for (var n = 0; n < this._vertexAttribs.length; n++) {
                        var r = this._vertexAttribs[n],
                            i = r.location === null ? e.getAttributeLocation(r.name) : r.location;
                        t.disableVertexAttribArray(i)
                    }
                }
            });
            i.Attrib = new r({
                name: null,
                numComponents: null,
                location: null,
                type: null,
                initialize: function (e, t, n, r, i, s) {
                    this.name = e, this.numComponents = t, this.location = typeof n == "number" ? n : null, this.type = r, this.normalize = Boolean(i), this.offsetCount = typeof s == "number" ? s : this.numComponents
                }
            }), t.exports = i
        }, {klasse: 34}],
        30: [function (e, t, n) {
            var r = e("klasse"), i = new r({
                initialize: function (t, n, r, i) {
                    if (!n || !r)throw"vertex and fragment shaders must be defined";
                    if (typeof t != "object")throw"GL context not specified to ShaderProgram";
                    this.context = t, this.vertShader = null, this.fragShader = null, this.program = null, this.log = "", this.uniformCache = null, this.attributeCache = null, this.attributeLocations = i, this.vertSource = n.trim(), this.fragSource = r.trim(), this.context.addManagedObject(this), this.create()
                }, create: function () {
                    this.gl = this.context.gl, this._compileShaders()
                }, _compileShaders: function () {
                    var e = this.gl;
                    this.log = "", this.vertShader = this._loadShader(e.VERTEX_SHADER, this.vertSource), this.fragShader = this._loadShader(e.FRAGMENT_SHADER, this.fragSource);
                    if (!this.vertShader || !this.fragShader)throw"Error returned when calling createShader";
                    this.program = e.createProgram(), e.attachShader(this.program, this.vertShader), e.attachShader(this.program, this.fragShader);
                    if (this.attributeLocations)for (var t in this.attributeLocations)this.attributeLocations.hasOwnProperty(t) && e.bindAttribLocation(this.program, Math.floor(this.attributeLocations[t]), t);
                    e.linkProgram(this.program), this.log += e.getProgramInfoLog(this.program) || "";
                    if (!e.getProgramParameter(this.program, e.LINK_STATUS))throw"Error linking the shader program:\n" + this.log;
                    this._fetchUniforms(), this._fetchAttributes()
                }, _fetchUniforms: function () {
                    var e = this.gl;
                    this.uniformCache = {};
                    var t = e.getProgramParameter(this.program, e.ACTIVE_UNIFORMS);
                    if (!t)return;
                    for (var n = 0; n < t; n++) {
                        var r = e.getActiveUniform(this.program, n);
                        if (r === null)continue;
                        var i = r.name, s = e.getUniformLocation(this.program, i);
                        this.uniformCache[i] = {size: r.size, type: r.type, location: s}
                    }
                }, _fetchAttributes: function () {
                    var e = this.gl;
                    this.attributeCache = {};
                    var t = e.getProgramParameter(this.program, e.ACTIVE_ATTRIBUTES);
                    if (!t)return;
                    for (var n = 0; n < t; n++) {
                        var r = e.getActiveAttrib(this.program, n);
                        if (r === null)continue;
                        var i = r.name, s = e.getAttribLocation(this.program, i);
                        this.attributeCache[i] = {size: r.size, type: r.type, location: s}
                    }
                }, _loadShader: function (e, t) {
                    var n = this.gl, r = n.createShader(e);
                    if (!r)return -1;
                    n.shaderSource(r, t), n.compileShader(r);
                    var i = n.getShaderInfoLog(r) || "";
                    if (i) {
                        var s = e === n.VERTEX_SHADER ? "vertex" : "fragment";
                        i = "Error compiling " + s + " shader:\n" + i
                    }
                    this.log += i;
                    if (!n.getShaderParameter(r, n.COMPILE_STATUS))throw this.log;
                    return r
                }, bind: function () {
                    this.gl.useProgram(this.program)
                }, destroy: function () {
                    this.context && this.context.removeManagedObject(this);
                    if (this.gl) {
                        var e = this.gl;
                        e.detachShader(this.vertShader), e.detachShader(this.fragShader), e.deleteShader(this.vertShader), e.deleteShader(this.fragShader), e.deleteProgram(this.program)
                    }
                    this.attributeCache = null, this.uniformCache = null, this.vertShader = null, this.fragShader = null, this.program = null, this.gl = null, this.context = null
                }, getUniformInfo: function (e) {
                    return this.uniformCache[e] || null
                }, getAttributeInfo: function (e) {
                    return this.attributeCache[e] || null
                }, getAttributeLocation: function (e) {
                    var t = this.getAttributeInfo(e);
                    return t ? t.location : null
                }, getUniformLocation: function (e) {
                    var t = this.getUniformInfo(e);
                    return t ? t.location : null
                }, hasUniform: function (e) {
                    return this.getUniformInfo(e) !== null
                }, hasAttribute: function (e) {
                    return this.getAttributeInfo(e) !== null
                }, getUniform: function (e) {
                    return this.gl.getUniform(this.program, this.getUniformLocation(e))
                }, getUniformAt: function (e) {
                    return this.gl.getUniform(this.program, e)
                }, setUniformi: function (e, t, n, r, i) {
                    var s = this.gl, o = this.getUniformLocation(e);
                    if (!o)return !1;
                    switch (arguments.length) {
                        case 2:
                            return s.uniform1i(o, t), !0;
                        case 3:
                            return s.uniform2i(o, t, n), !0;
                        case 4:
                            return s.uniform3i(o, t, n, r), !0;
                        case 5:
                            return s.uniform4i(o, t, n, r, i), !0;
                        default:
                            throw"invalid arguments to setUniformi"
                    }
                }, setUniformf: function (e, t, n, r, i) {
                    var s = this.gl, o = this.getUniformLocation(e);
                    if (!o)return !1;
                    switch (arguments.length) {
                        case 2:
                            return s.uniform1f(o, t), !0;
                        case 3:
                            return s.uniform2f(o, t, n), !0;
                        case 4:
                            return s.uniform3f(o, t, n, r), !0;
                        case 5:
                            return s.uniform4f(o, t, n, r, i), !0;
                        default:
                            throw"invalid arguments to setUniformf"
                    }
                }, setUniformfv: function (e, t, n) {
                    n = n || t.length;
                    var r = this.gl, i = this.getUniformLocation(e);
                    if (!i)return !1;
                    switch (n) {
                        case 1:
                            return r.uniform1fv(i, t), !0;
                        case 2:
                            return r.uniform2fv(i, t), !0;
                        case 3:
                            return r.uniform3fv(i, t), !0;
                        case 4:
                            return r.uniform4fv(i, t), !0;
                        default:
                            throw"invalid arguments to setUniformf"
                    }
                }, setUniformiv: function (e, t, n) {
                    n = n || t.length;
                    var r = this.gl, i = this.getUniformLocation(e);
                    if (!i)return !1;
                    switch (n) {
                        case 1:
                            return r.uniform1iv(i, t), !0;
                        case 2:
                            return r.uniform2iv(i, t), !0;
                        case 3:
                            return r.uniform3iv(i, t), !0;
                        case 4:
                            return r.uniform4iv(i, t), !0;
                        default:
                            throw"invalid arguments to setUniformf"
                    }
                }, setUniformMatrix3: function (e, t, n) {
                    var r = typeof t == "object" && t.val ? t.val : t;
                    n = !!n;
                    var i = this.gl, s = this.getUniformLocation(e);
                    if (!s)return !1;
                    i.uniformMatrix3fv(s, n, r)
                }, setUniformMatrix4: function (e, t, n) {
                    var r = typeof t == "object" && t.val ? t.val : t;
                    n = !!n;
                    var i = this.gl, s = this.getUniformLocation(e);
                    if (!s)return !1;
                    i.uniformMatrix4fv(s, n, r)
                }
            });
            i.POSITION_ATTRIBUTE = "Position", i.NORMAL_ATTRIBUTE = "Normal", i.COLOR_ATTRIBUTE = "Color", i.TEXCOORD_ATTRIBUTE = "TexCoord", t.exports = i
        }, {klasse: 34}],
        31: [function (e, t, n) {
            t.exports = {
                BaseBatch: e("./BaseBatch.js"),
                SpriteBatch: e("./SpriteBatch.js"),
                Texture: e("./Texture.js"),
                TextureRegion: e("./TextureRegion.js"),
                WebGLContext: e("./WebGLContext.js"),
                FrameBuffer: e("./glutils/FrameBuffer.js"),
                Mesh: e("./glutils/Mesh.js"),
                ShaderProgram: e("./glutils/ShaderProgram.js")
            }
        }, {
            "./BaseBatch.js": 23,
            "./SpriteBatch.js": 24,
            "./Texture.js": 25,
            "./TextureRegion.js": 26,
            "./WebGLContext.js": 27,
            "./glutils/FrameBuffer.js": 28,
            "./glutils/Mesh.js": 29,
            "./glutils/ShaderProgram.js": 30
        }],
        32: [function (e, t, n) {
            t.exports = e(22)
        }, {}],
        33: [function (t, n, r) {
            (function (t) {
                function r(e, t, n, r, i) {
                    this._listener = t, this._isOnce = n, this.context = r, this._signal = e, this._priority = i || 0
                }

                function i(e, t) {
                    if (typeof e != "function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", t))
                }

                function s() {
                    this._bindings = [], this._prevParams = null;
                    var e = this;
                    this.dispatch = function () {
                        s.prototype.dispatch.apply(e, arguments)
                    }
                }

                r.prototype = {
                    active: !0, params: null, execute: function (e) {
                        var t, n;
                        return this.active && !!this._listener && (n = this.params ? this.params.concat(e) : e, t = this._listener.apply(this.context, n), this._isOnce && this.detach()), t
                    }, detach: function () {
                        return this.isBound() ? this._signal.remove(this._listener, this.context) : null
                    }, isBound: function () {
                        return !!this._signal && !!this._listener
                    }, isOnce: function () {
                        return this._isOnce
                    }, getListener: function () {
                        return this._listener
                    }, getSignal: function () {
                        return this._signal
                    }, _destroy: function () {
                        delete this._signal, delete this._listener, delete this.context
                    }, toString: function () {
                        return "[SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
                    }
                }, s.prototype = {
                    VERSION: "1.0.0",
                    memorize: !1,
                    _shouldPropagate: !0,
                    active: !0,
                    _registerListener: function (e, t, n, i) {
                        var s = this._indexOfListener(e, n), o;
                        if (s !== -1) {
                            o = this._bindings[s];
                            if (o.isOnce() !== t)throw new Error("You cannot add" + (t ? "" : "Once") + "() then add" + (t ? "Once" : "") + "() the same listener without removing the relationship first.")
                        } else o = new r(this, e, t, n, i), this._addBinding(o);
                        return this.memorize && this._prevParams && o.execute(this._prevParams), o
                    },
                    _addBinding: function (e) {
                        var t = this._bindings.length;
                        do--t; while (this._bindings[t] && e._priority <= this._bindings[t]._priority);
                        this._bindings.splice(t + 1, 0, e)
                    },
                    _indexOfListener: function (e, t) {
                        var n = this._bindings.length, r;
                        while (n--) {
                            r = this._bindings[n];
                            if (r._listener === e && r.context === t)return n
                        }
                        return -1
                    },
                    has: function (e, t) {
                        return this._indexOfListener(e, t) !== -1
                    },
                    add: function (e, t, n) {
                        return i(e, "add"), this._registerListener(e, !1, t, n)
                    },
                    addOnce: function (e, t, n) {
                        return i(e, "addOnce"), this._registerListener(e, !0, t, n)
                    },
                    remove: function (e, t) {
                        i(e, "remove");
                        var n = this._indexOfListener(e, t);
                        return n !== -1 && (this._bindings[n]._destroy(), this._bindings.splice(n, 1)), e
                    },
                    removeAll: function () {
                        var e = this._bindings.length;
                        while (e--)this._bindings[e]._destroy();
                        this._bindings.length = 0
                    },
                    getNumListeners: function () {
                        return this._bindings.length
                    },
                    halt: function () {
                        this._shouldPropagate = !1
                    },
                    dispatch: function (e) {
                        if (!this.active)return;
                        var t = Array.prototype.slice.call(arguments), n = this._bindings.length, r;
                        this.memorize && (this._prevParams = t);
                        if (!n)return;
                        r = this._bindings.slice(), this._shouldPropagate = !0;
                        do n--; while (r[n] && this._shouldPropagate && r[n].execute(t) !== !1)
                    },
                    forget: function () {
                        this._prevParams = null
                    },
                    dispose: function () {
                        this.removeAll(), delete this._bindings, delete this._prevParams
                    },
                    toString: function () {
                        return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
                    }
                };
                var o = s;
                o.Signal = s, typeof e == "function" && e.amd ? e(function () {
                    return o
                }) : typeof n != "undefined" && n.exports ? n.exports = o : t.signals = o
            })(this)
        }, {}],
        34: [function (e, t, n) {
            function r(e) {
                return !!e.get && typeof e.get == "function" || !!e.set && typeof e.set == "function"
            }

            function i(e, t, n) {
                var i = n ? e[t] : Object.getOwnPropertyDescriptor(e, t);
                return !n && i.value && typeof i.value == "object" && (i = i.value), i && r(i) ? (typeof i.enumerable == "undefined" && (i.enumerable = !0), typeof i.configurable == "undefined" && (i.configurable = !0), i) : !1
            }

            function s(e, t) {
                var n = Object.getOwnPropertyDescriptor(e, t);
                return n ? (n.value && typeof n.value == "object" && (n = n.value), n.configurable === !1 ? !0 : !1) : !1
            }

            function o(e, t, n, r) {
                for (var o in t) {
                    if (!t.hasOwnProperty(o))continue;
                    var u = i(t, o, n);
                    if (u !== !1) {
                        var f = r || e;
                        if (s(f.prototype, o)) {
                            if (a.ignoreFinals)continue;
                            throw new Error("cannot override final property '" + o + "', set Class.ignoreFinals = true to skip")
                        }
                        Object.defineProperty(e.prototype, o, u)
                    } else e.prototype[o] = t[o]
                }
            }

            function u(e, t) {
                if (!t)return;
                Array.isArray(t) || (t = [t]);
                for (var n = 0; n < t.length; n++)o(e, t[n].prototype || t[n])
            }

            function a(e) {
                e || (e = {});
                var t, n;
                if (e.initialize) {
                    if (typeof e.initialize != "function")throw new Error("initialize must be a function");
                    t = e.initialize, delete e.initialize
                } else if (e.Extends) {
                    var r = e.Extends;
                    t = function () {
                        r.apply(this, arguments)
                    }
                } else t = function () {
                };
                e.Extends ? (t.prototype = Object.create(e.Extends.prototype), t.prototype.constructor = t, n = e.Extends, delete e.Extends) : t.prototype.constructor = t;
                var i = null;
                return e.Mixins && (i = e.Mixins, delete e.Mixins), u(t, i), o(t, e, !0, n), t
            }

            a.extend = o, a.mixin = u, a.ignoreFinals = !1, t.exports = a
        }, {}],
        35: [function (e, t, n) {
            t.exports = {version: "1.3.3"}
        }, {}],
        36: [function (e, t, n) {
            var r = function (e, t) {
                this.point = e, this.triangle = t || null, this.next = null, this.prev = null, this.value = e.x
            }, i = function (e, t) {
                this.head_ = e, this.tail_ = t, this.search_node_ = e
            };
            i.prototype.head = function () {
                return this.head_
            }, i.prototype.setHead = function (e) {
                this.head_ = e
            }, i.prototype.tail = function () {
                return this.tail_
            }, i.prototype.setTail = function (e) {
                this.tail_ = e
            }, i.prototype.search = function () {
                return this.search_node_
            }, i.prototype.setSearch = function (e) {
                this.search_node_ = e
            }, i.prototype.findSearchNode = function () {
                return this.search_node_
            }, i.prototype.locateNode = function (e) {
                var t = this.search_node_;
                if (e < t.value) {
                    while (t = t.prev)if (e >= t.value)return this.search_node_ = t, t
                } else while (t = t.next)if (e < t.value)return this.search_node_ = t.prev, t.prev;
                return null
            }, i.prototype.locatePoint = function (e) {
                var t = e.x, n = this.findSearchNode(t), r = n.point.x;
                if (t === r) {
                    if (e !== n.point)if (e === n.prev.point) n = n.prev; else {
                        if (e !== n.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");
                        n = n.next
                    }
                } else if (t < r) {
                    while (n = n.prev)if (e === n.point)break
                } else while (n = n.next)if (e === n.point)break;
                return n && (this.search_node_ = n), n
            }, t.exports = i, t.exports.Node = r
        }, {}],
        37: [function (e, t, n) {
            var r = e("./xy"), i = function (e, t) {
                this.x = +e || 0, this.y = +t || 0, this._p2t_edge_list = null
            };
            i.prototype.toString = function () {
                return r.toStringBase(this)
            }, i.prototype.clone = function () {
                return new i(this.x, this.y)
            }, i.prototype.set_zero = function () {
                return this.x = 0, this.y = 0, this
            }, i.prototype.set = function (e, t) {
                return this.x = +e || 0, this.y = +t || 0, this
            }, i.prototype.negate = function () {
                return this.x = -this.x, this.y = -this.y, this
            }, i.prototype.add = function (e) {
                return this.x += e.x, this.y += e.y, this
            }, i.prototype.sub = function (e) {
                return this.x -= e.x, this.y -= e.y, this
            }, i.prototype.mul = function (e) {
                return this.x *= e, this.y *= e, this
            }, i.prototype.length = function () {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            }, i.prototype.normalize = function () {
                var e = this.length();
                return this.x /= e, this.y /= e, e
            }, i.prototype.equals = function (e) {
                return this.x === e.x && this.y === e.y
            }, i.negate = function (e) {
                return new i(-e.x, -e.y)
            }, i.add = function (e, t) {
                return new i(e.x + t.x, e.y + t.y)
            }, i.sub = function (e, t) {
                return new i(e.x - t.x, e.y - t.y)
            }, i.mul = function (e, t) {
                return new i(e * t.x, e * t.y)
            }, i.cross = function (e, t) {
                return typeof e == "number" ? typeof t == "number" ? e * t : new i(-e * t.y, e * t.x) : typeof t == "number" ? new i(t * e.y, -t * e.x) : e.x * t.y - e.y * t.x
            }, i.toString = r.toString, i.compare = r.compare, i.cmp = r.compare, i.equals = r.equals, i.dot = function (e, t) {
                return e.x * t.x + e.y * t.y
            }, t.exports = i
        }, {"./xy": 44}],
        38: [function (e, t, n) {
            var r = e("./xy"), i = function (e, t) {
                this.name = "PointError", this.points = t = t || [], this.message = e || "Invalid Points!";
                for (var n = 0; n < t.length; n++)this.message += " " + r.toString(t[n])
            };
            i.prototype = new Error, i.prototype.constructor = i, t.exports = i
        }, {"./xy": 44}],
        39: [function (e, t, n) {
            (function (t) {
                var r = t.poly2tri;
                n.noConflict = function () {
                    return t.poly2tri = r, n
                }, n.VERSION = e("../dist/version.json").version, n.PointError = e("./pointerror"), n.Point = e("./point"), n.Triangle = e("./triangle"), n.SweepContext = e("./sweepcontext");
                var i = e("./sweep");
                n.triangulate = i.triangulate, n.sweep = {Triangulate: i.triangulate}
            }).call(this, typeof self != "undefined" ? self : typeof window != "undefined" ? window : {})
        }, {
            "../dist/version.json": 35,
            "./point": 37,
            "./pointerror": 38,
            "./sweep": 40,
            "./sweepcontext": 41,
            "./triangle": 42
        }],
        40: [function (e, t, n) {
            function p(e) {
                e.initTriangulation(), e.createAdvancingFront(), d(e), v(e)
            }

            function d(e) {
                var t, n = e.pointCount();
                for (t = 1; t < n; ++t) {
                    var r = e.getPoint(t), i = m(e, r), s = r._p2t_edge_list;
                    for (var o = 0; s && o < s.length; ++o)g(e, s[o], i)
                }
            }

            function v(e) {
                var t = e.front().head().next.triangle, n = e.front().head().next.point;
                while (!t.getConstrainedEdgeCW(n))t = t.neighborCCW(n);
                e.meshClean(t)
            }

            function m(e, t) {
                var n = e.locateNode(t), r = w(e, t, n);
                return t.x <= n.point.x + f && E(e, n), S(e, r), r
            }

            function g(e, t, n) {
                e.edge_event.constrained_edge = t, e.edge_event.right = t.p.x > t.q.x;
                if (b(n.triangle, t.p, t.q))return;
                M(e, t, n), y(e, t.p, t.q, n.triangle, t.q)
            }

            function y(e, t, n, i, s) {
                if (b(i, t, n))return;
                var o = i.pointCCW(s), u = c(n, o, t);
                if (u === l.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!", [n, o, t]);
                var a = i.pointCW(s), f = c(n, a, t);
                if (f === l.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!", [n, a, t]);
                u === f ? (u === l.CW ? i = i.neighborCCW(s) : i = i.neighborCW(s), y(e, t, n, i, s)) : q(e, t, n, i, s)
            }

            function b(e, t, n) {
                var r = e.edgeIndex(t, n);
                if (r !== -1) {
                    e.markConstrainedEdgeByIndex(r);
                    var i = e.getNeighbor(r);
                    return i && i.markConstrainedEdgeByPoints(t, n), !0
                }
                return !1
            }

            function w(e, t, n) {
                var r = new i(t, n.point, n.next.point);
                r.markNeighbor(n.triangle), e.addToMap(r);
                var o = new s(t);
                return o.next = n.next, o.prev = n, n.next.prev = o, n.next = o, N(e, r) || e.mapTriangleToNodes(r), o
            }

            function E(e, t) {
                var n = new i(t.prev.point, t.point, t.next.point);
                n.markNeighbor(t.prev.triangle), n.markNeighbor(t.triangle), e.addToMap(n), t.prev.next = t.next, t.next.prev = t.prev, N(e, n) || e.mapTriangleToNodes(n)
            }

            function S(e, t) {
                var n = t.next, r;
                while (n.next) {
                    r = T(n);
                    if (r > a || r < -a)break;
                    E(e, n), n = n.next
                }
                n = t.prev;
                while (n.prev) {
                    r = T(n);
                    if (r > a || r < -a)break;
                    E(e, n), n = n.prev
                }
                t.next && t.next.next && (r = x(t), r < u && L(e, t))
            }

            function x(e) {
                var t = e.point.x - e.next.next.point.x, n = e.point.y - e.next.next.point.y;
                return Math.atan2(n, t)
            }

            function T(e) {
                var t = e.next.point.x - e.point.x, n = e.next.point.y - e.point.y, r = e.prev.point.x - e.point.x,
                    i = e.prev.point.y - e.point.y;
                return Math.atan2(t * i - n * r, t * r + n * i)
            }

            function N(e, t) {
                for (var n = 0; n < 3; ++n) {
                    if (t.delaunay_edge[n])continue;
                    var r = t.getNeighbor(n);
                    if (r) {
                        var i = t.getPoint(n), s = r.oppositePoint(t, i), o = r.index(s);
                        if (r.constrained_edge[o] || r.delaunay_edge[o]) {
                            t.constrained_edge[n] = r.constrained_edge[o];
                            continue
                        }
                        var u = C(i, t.pointCCW(i), t.pointCW(i), s);
                        if (u) {
                            t.delaunay_edge[n] = !0, r.delaunay_edge[o] = !0, k(t, i, r, s);
                            var a = !N(e, t);
                            return a && e.mapTriangleToNodes(t), a = !N(e, r), a && e.mapTriangleToNodes(r), t.delaunay_edge[n] = !1, r.delaunay_edge[o] = !1, !0
                        }
                    }
                }
                return !1
            }

            function C(e, t, n, r) {
                var i = e.x - r.x, s = e.y - r.y, o = t.x - r.x, u = t.y - r.y, a = i * u, f = o * s, l = a - f;
                if (l <= 0)return !1;
                var c = n.x - r.x, h = n.y - r.y, p = c * s, d = i * h, v = p - d;
                if (v <= 0)return !1;
                var m = o * h, g = c * u, y = i * i + s * s, b = o * o + u * u, w = c * c + h * h,
                    E = y * (m - g) + b * v + w * l;
                return E > 0
            }

            function k(e, t, n, r) {
                var i, s, o, u;
                i = e.neighborCCW(t), s = e.neighborCW(t), o = n.neighborCCW(r), u = n.neighborCW(r);
                var a, f, l, c;
                a = e.getConstrainedEdgeCCW(t), f = e.getConstrainedEdgeCW(t), l = n.getConstrainedEdgeCCW(r), c = n.getConstrainedEdgeCW(r);
                var h, p, d, v;
                h = e.getDelaunayEdgeCCW(t), p = e.getDelaunayEdgeCW(t), d = n.getDelaunayEdgeCCW(r), v = n.getDelaunayEdgeCW(r), e.legalize(t, r), n.legalize(r, t), n.setDelaunayEdgeCCW(t, h), e.setDelaunayEdgeCW(t, p), e.setDelaunayEdgeCCW(r, d), n.setDelaunayEdgeCW(r, v), n.setConstrainedEdgeCCW(t, a), e.setConstrainedEdgeCW(t, f), e.setConstrainedEdgeCCW(r, l), n.setConstrainedEdgeCW(r, c), e.clearNeigbors(), n.clearNeigbors(), i && n.markNeighbor(i), s && e.markNeighbor(s), o && e.markNeighbor(o), u && n.markNeighbor(u), e.markNeighbor(n)
            }

            function L(e, t) {
                c(t.point, t.next.point, t.next.next.point) === l.CCW ? e.basin.left_node = t.next.next : e.basin.left_node = t.next, e.basin.bottom_node = e.basin.left_node;
                while (e.basin.bottom_node.next && e.basin.bottom_node.point.y >= e.basin.bottom_node.next.point.y)e.basin.bottom_node = e.basin.bottom_node.next;
                if (e.basin.bottom_node === e.basin.left_node)return;
                e.basin.right_node = e.basin.bottom_node;
                while (e.basin.right_node.next && e.basin.right_node.point.y < e.basin.right_node.next.point.y)e.basin.right_node = e.basin.right_node.next;
                if (e.basin.right_node === e.basin.bottom_node)return;
                e.basin.width = e.basin.right_node.point.x - e.basin.left_node.point.x, e.basin.left_highest = e.basin.left_node.point.y > e.basin.right_node.point.y, A(e, e.basin.bottom_node)
            }

            function A(e, t) {
                if (O(e, t))return;
                E(e, t);
                var n;
                if (t.prev === e.basin.left_node && t.next === e.basin.right_node)return;
                if (t.prev === e.basin.left_node) {
                    n = c(t.point, t.next.point, t.next.next.point);
                    if (n === l.CW)return;
                    t = t.next
                } else if (t.next === e.basin.right_node) {
                    n = c(t.point, t.prev.point, t.prev.prev.point);
                    if (n === l.CCW)return;
                    t = t.prev
                } else t.prev.point.y < t.next.point.y ? t = t.prev : t = t.next;
                A(e, t)
            }

            function O(e, t) {
                var n;
                return e.basin.left_highest ? n = e.basin.left_node.point.y - t.point.y : n = e.basin.right_node.point.y - t.point.y, e.basin.width > n ? !0 : !1
            }

            function M(e, t, n) {
                e.edge_event.right ? _(e, t, n) : B(e, t, n)
            }

            function _(e, t, n) {
                while (n.next.point.x < t.p.x)c(t.q, n.next.point, t.p) === l.CCW ? D(e, t, n) : n = n.next
            }

            function D(e, t, n) {
                n.point.x < t.p.x && (c(n.point, n.next.point, n.next.next.point) === l.CCW ? P(e, t, n) : (H(e, t, n), D(e, t, n)))
            }

            function P(e, t, n) {
                E(e, n.next), n.next.point !== t.p && c(t.q, n.next.point, t.p) === l.CCW && c(n.point, n.next.point, n.next.next.point) === l.CCW && P(e, t, n)
            }

            function H(e, t, n) {
                c(n.next.point, n.next.next.point, n.next.next.next.point) === l.CCW ? P(e, t, n.next) : c(t.q, n.next.next.point, t.p) === l.CCW && H(e, t, n.next)
            }

            function B(e, t, n) {
                while (n.prev.point.x > t.p.x)c(t.q, n.prev.point, t.p) === l.CW ? j(e, t, n) : n = n.prev
            }

            function j(e, t, n) {
                n.point.x > t.p.x && (c(n.point, n.prev.point, n.prev.prev.point) === l.CW ? I(e, t, n) : (F(e, t, n), j(e, t, n)))
            }

            function F(e, t, n) {
                c(n.prev.point, n.prev.prev.point, n.prev.prev.prev.point) === l.CW ? I(e, t, n.prev) : c(t.q, n.prev.prev.point, t.p) === l.CW && F(e, t, n.prev)
            }

            function I(e, t, n) {
                E(e, n.prev), n.prev.point !== t.p && c(t.q, n.prev.point, t.p) === l.CW && c(n.point, n.prev.point, n.prev.prev.point) === l.CW && I(e, t, n)
            }

            function q(e, t, n, i, s) {
                var o = i.neighborAcross(s);
                if (!o)throw new Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle!");
                var u = o.oppositePoint(i, s);
                if (i.getConstrainedEdgeAcross(s)) {
                    var a = i.index(s);
                    throw new r("poly2tri Intersecting Constraints", [s, u, i.getPoint((a + 1) % 3), i.getPoint((a + 2) % 3)])
                }
                if (h(s, i.pointCCW(s), i.pointCW(s), u)) {
                    k(i, s, o, u), e.mapTriangleToNodes(i), e.mapTriangleToNodes(o);
                    if (s === n && u === t) n === e.edge_event.constrained_edge.q && t === e.edge_event.constrained_edge.p && (i.markConstrainedEdgeByPoints(t, n), o.markConstrainedEdgeByPoints(t, n), N(e, i), N(e, o)); else {
                        var f = c(n, u, t);
                        i = R(e, f, i, o, s, u), q(e, t, n, i, s)
                    }
                } else {
                    var l = U(t, n, o, u);
                    z(e, t, n, i, o, l), y(e, t, n, i, s)
                }
            }

            function R(e, t, n, r, i, s) {
                var o;
                return t === l.CCW ? (o = r.edgeIndex(i, s), r.delaunay_edge[o] = !0, N(e, r), r.clearDelunayEdges(), n) : (o = n.edgeIndex(i, s), n.delaunay_edge[o] = !0, N(e, n), n.clearDelunayEdges(), r)
            }

            function U(e, t, n, i) {
                var s = c(t, i, e);
                if (s === l.CW)return n.pointCCW(i);
                if (s === l.CCW)return n.pointCW(i);
                throw new r("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!", [t, i, e])
            }

            function z(e, t, n, r, i, s) {
                var o = i.neighborAcross(s);
                if (!o)throw new Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle");
                var u = o.oppositePoint(i, s);
                if (h(n, r.pointCCW(n), r.pointCW(n), u)) q(e, n, u, o, u); else {
                    var a = U(t, n, o, u);
                    z(e, t, n, r, o, a)
                }
            }

            var r = e("./pointerror"), i = e("./triangle"), s = e("./advancingfront").Node, o = e("./utils"),
                u = 3 * Math.PI / 4, a = Math.PI / 2, f = o.EPSILON, l = o.Orientation, c = o.orient2d,
                h = o.inScanArea;
            n.triangulate = p
        }, {"./advancingfront": 36, "./pointerror": 38, "./triangle": 42, "./utils": 43}],
        41: [function (e, t, n) {
            var r = e("./pointerror"), i = e("./point"), s = e("./triangle"), o = e("./sweep"),
                u = e("./advancingfront"), a = u.Node, f = .3, l = function (e, t) {
                    this.p = e, this.q = t;
                    if (e.y > t.y) this.q = e, this.p = t; else if (e.y === t.y)if (e.x > t.x) this.q = e, this.p = t; else if (e.x === t.x)throw new r("poly2tri Invalid Edge constructor: repeated points!", [e]);
                    this.q._p2t_edge_list || (this.q._p2t_edge_list = []), this.q._p2t_edge_list.push(this)
                }, c = function () {
                    this.left_node = null, this.bottom_node = null, this.right_node = null, this.width = 0, this.left_highest = !1
                };
            c.prototype.clear = function () {
                this.left_node = null, this.bottom_node = null, this.right_node = null, this.width = 0, this.left_highest = !1
            };
            var h = function () {
                this.constrained_edge = null, this.right = !1
            }, p = function (e, t) {
                t = t || {}, this.triangles_ = [], this.map_ = [], this.points_ = t.cloneArrays ? e.slice(0) : e, this.edge_list = [], this.pmin_ = this.pmax_ = null, this.front_ = null, this.head_ = null, this.tail_ = null, this.af_head_ = null, this.af_middle_ = null, this.af_tail_ = null, this.basin = new c, this.edge_event = new h, this.initEdges(this.points_)
            };
            p.prototype.addHole = function (e) {
                this.initEdges(e);
                var t, n = e.length;
                for (t = 0; t < n; t++)this.points_.push(e[t]);
                return this
            }, p.prototype.AddHole = p.prototype.addHole, p.prototype.addPoint = function (e) {
                return this.points_.push(e), this
            }, p.prototype.AddPoint = p.prototype.addPoint, p.prototype.addPoints = function (e) {
                return this.points_ = this.points_.concat(e), this
            }, p.prototype.triangulate = function () {
                return o.triangulate(this), this
            }, p.prototype.getBoundingBox = function () {
                return {min: this.pmin_, max: this.pmax_}
            }, p.prototype.getTriangles = function () {
                return this.triangles_
            }, p.prototype.GetTriangles = p.prototype.getTriangles, p.prototype.front = function () {
                return this.front_
            }, p.prototype.pointCount = function () {
                return this.points_.length
            }, p.prototype.head = function () {
                return this.head_
            }, p.prototype.setHead = function (e) {
                this.head_ = e
            }, p.prototype.tail = function () {
                return this.tail_
            }, p.prototype.setTail = function (e) {
                this.tail_ = e
            }, p.prototype.getMap = function () {
                return this.map_
            }, p.prototype.initTriangulation = function () {
                var e = this.points_[0].x, t = this.points_[0].x, n = this.points_[0].y, r = this.points_[0].y, s,
                    o = this.points_.length;
                for (s = 1; s < o; s++) {
                    var u = this.points_[s];
                    u.x > e && (e = u.x), u.x < t && (t = u.x), u.y > n && (n = u.y), u.y < r && (r = u.y)
                }
                this.pmin_ = new i(t, r), this.pmax_ = new i(e, n);
                var a = f * (e - t), l = f * (n - r);
                this.head_ = new i(e + a, r - l), this.tail_ = new i(t - a, r - l), this.points_.sort(i.compare)
            }, p.prototype.initEdges = function (e) {
                var t, n = e.length;
                for (t = 0; t < n; ++t)this.edge_list.push(new l(e[t], e[(t + 1) % n]))
            }, p.prototype.getPoint = function (e) {
                return this.points_[e]
            }, p.prototype.addToMap = function (e) {
                this.map_.push(e)
            }, p.prototype.locateNode = function (e) {
                return this.front_.locateNode(e.x)
            }, p.prototype.createAdvancingFront = function () {
                var e, t, n, r = new s(this.points_[0], this.tail_, this.head_);
                this.map_.push(r), e = new a(r.getPoint(1), r), t = new a(r.getPoint(0), r), n = new a(r.getPoint(2)), this.front_ = new u(e, n), e.next = t, t.next = n, t.prev = e, n.prev = t
            }, p.prototype.removeNode = function (e) {
            }, p.prototype.mapTriangleToNodes = function (e) {
                for (var t = 0; t < 3; ++t)if (!e.getNeighbor(t)) {
                    var n = this.front_.locatePoint(e.pointCW(e.getPoint(t)));
                    n && (n.triangle = e)
                }
            }, p.prototype.removeFromMap = function (e) {
                var t, n = this.map_, r = n.length;
                for (t = 0; t < r; t++)if (n[t] === e) {
                    n.splice(t, 1);
                    break
                }
            }, p.prototype.meshClean = function (e) {
                var t = [e], n, r;
                while (n = t.pop())if (!n.isInterior()) {
                    n.setInterior(!0), this.triangles_.push(n);
                    for (r = 0; r < 3; r++)n.constrained_edge[r] || t.push(n.getNeighbor(r))
                }
            }, t.exports = p
        }, {"./advancingfront": 36, "./point": 37, "./pointerror": 38, "./sweep": 40, "./triangle": 42}],
        42: [function (e, t, n) {
            var r = e("./xy"), i = function (e, t, n) {
                this.points_ = [e, t, n], this.neighbors_ = [null, null, null], this.interior_ = !1, this.constrained_edge = [!1, !1, !1], this.delaunay_edge = [!1, !1, !1]
            }, s = r.toString;
            i.prototype.toString = function () {
                return "[" + s(this.points_[0]) + s(this.points_[1]) + s(this.points_[2]) + "]"
            }, i.prototype.getPoint = function (e) {
                return this.points_[e]
            }, i.prototype.GetPoint = i.prototype.getPoint, i.prototype.getPoints = function () {
                return this.points_
            }, i.prototype.getNeighbor = function (e) {
                return this.neighbors_[e]
            }, i.prototype.containsPoint = function (e) {
                var t = this.points_;
                return e === t[0] || e === t[1] || e === t[2]
            }, i.prototype.containsEdge = function (e) {
                return this.containsPoint(e.p) && this.containsPoint(e.q)
            }, i.prototype.containsPoints = function (e, t) {
                return this.containsPoint(e) && this.containsPoint(t)
            }, i.prototype.isInterior = function () {
                return this.interior_
            }, i.prototype.setInterior = function (e) {
                return this.interior_ = e, this
            }, i.prototype.markNeighborPointers = function (e, t, n) {
                var r = this.points_;
                if (e === r[2] && t === r[1] || e === r[1] && t === r[2]) this.neighbors_[0] = n; else if (e === r[0] && t === r[2] || e === r[2] && t === r[0]) this.neighbors_[1] = n; else {
                    if (!(e === r[0] && t === r[1] || e === r[1] && t === r[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");
                    this.neighbors_[2] = n
                }
            }, i.prototype.markNeighbor = function (e) {
                var t = this.points_;
                e.containsPoints(t[1], t[2]) ? (this.neighbors_[0] = e, e.markNeighborPointers(t[1], t[2], this)) : e.containsPoints(t[0], t[2]) ? (this.neighbors_[1] = e, e.markNeighborPointers(t[0], t[2], this)) : e.containsPoints(t[0], t[1]) && (this.neighbors_[2] = e, e.markNeighborPointers(t[0], t[1], this))
            }, i.prototype.clearNeigbors = function () {
                this.neighbors_[0] = null, this.neighbors_[1] = null, this.neighbors_[2] = null
            }, i.prototype.clearDelunayEdges = function () {
                this.delaunay_edge[0] = !1, this.delaunay_edge[1] = !1, this.delaunay_edge[2] = !1
            }, i.prototype.pointCW = function (e) {
                var t = this.points_;
                return e === t[0] ? t[2] : e === t[1] ? t[0] : e === t[2] ? t[1] : null
            }, i.prototype.pointCCW = function (e) {
                var t = this.points_;
                return e === t[0] ? t[1] : e === t[1] ? t[2] : e === t[2] ? t[0] : null
            }, i.prototype.neighborCW = function (e) {
                return e === this.points_[0] ? this.neighbors_[1] : e === this.points_[1] ? this.neighbors_[2] : this.neighbors_[0]
            }, i.prototype.neighborCCW = function (e) {
                return e === this.points_[0] ? this.neighbors_[2] : e === this.points_[1] ? this.neighbors_[0] : this.neighbors_[1]
            }, i.prototype.getConstrainedEdgeCW = function (e) {
                return e === this.points_[0] ? this.constrained_edge[1] : e === this.points_[1] ? this.constrained_edge[2] : this.constrained_edge[0]
            }, i.prototype.getConstrainedEdgeCCW = function (e) {
                return e === this.points_[0] ? this.constrained_edge[2] : e === this.points_[1] ? this.constrained_edge[0] : this.constrained_edge[1]
            }, i.prototype.getConstrainedEdgeAcross = function (e) {
                return e === this.points_[0] ? this.constrained_edge[0] : e === this.points_[1] ? this.constrained_edge[1] : this.constrained_edge[2]
            }, i.prototype.setConstrainedEdgeCW = function (e, t) {
                e === this.points_[0] ? this.constrained_edge[1] = t : e === this.points_[1] ? this.constrained_edge[2] = t : this.constrained_edge[0] = t
            }, i.prototype.setConstrainedEdgeCCW = function (e, t) {
                e === this.points_[0] ? this.constrained_edge[2] = t : e === this.points_[1] ? this.constrained_edge[0] = t : this.constrained_edge[1] = t
            }, i.prototype.getDelaunayEdgeCW = function (e) {
                return e === this.points_[0] ? this.delaunay_edge[1] : e === this.points_[1] ? this.delaunay_edge[2] : this.delaunay_edge[0]
            }, i.prototype.getDelaunayEdgeCCW = function (e) {
                return e === this.points_[0] ? this.delaunay_edge[2] : e === this.points_[1] ? this.delaunay_edge[0] : this.delaunay_edge[1]
            }, i.prototype.setDelaunayEdgeCW = function (e, t) {
                e === this.points_[0] ? this.delaunay_edge[1] = t : e === this.points_[1] ? this.delaunay_edge[2] = t : this.delaunay_edge[0] = t
            }, i.prototype.setDelaunayEdgeCCW = function (e, t) {
                e === this.points_[0] ? this.delaunay_edge[2] = t : e === this.points_[1] ? this.delaunay_edge[0] = t : this.delaunay_edge[1] = t
            }, i.prototype.neighborAcross = function (e) {
                return e === this.points_[0] ? this.neighbors_[0] : e === this.points_[1] ? this.neighbors_[1] : this.neighbors_[2]
            }, i.prototype.oppositePoint = function (e, t) {
                var n = e.pointCW(t);
                return this.pointCW(n)
            }, i.prototype.legalize = function (e, t) {
                var n = this.points_;
                if (e === n[0]) n[1] = n[0], n[0] = n[2], n[2] = t; else if (e === n[1]) n[2] = n[1], n[1] = n[0], n[0] = t; else {
                    if (e !== n[2])throw new Error("poly2tri Invalid Triangle.legalize() call");
                    n[0] = n[2], n[2] = n[1], n[1] = t
                }
            }, i.prototype.index = function (e) {
                var t = this.points_;
                if (e === t[0])return 0;
                if (e === t[1])return 1;
                if (e === t[2])return 2;
                throw new Error("poly2tri Invalid Triangle.index() call")
            }, i.prototype.edgeIndex = function (e, t) {
                var n = this.points_;
                if (e === n[0]) {
                    if (t === n[1])return 2;
                    if (t === n[2])return 1
                } else if (e === n[1]) {
                    if (t === n[2])return 0;
                    if (t === n[0])return 2
                } else if (e === n[2]) {
                    if (t === n[0])return 1;
                    if (t === n[1])return 0
                }
                return -1
            }, i.prototype.markConstrainedEdgeByIndex = function (e) {
                this.constrained_edge[e] = !0
            }, i.prototype.markConstrainedEdgeByEdge = function (e) {
                this.markConstrainedEdgeByPoints(e.p, e.q)
            }, i.prototype.markConstrainedEdgeByPoints = function (e, t) {
                var n = this.points_;
                if (t === n[0] && e === n[1] || t === n[1] && e === n[0]) this.constrained_edge[2] = !0; else if (t === n[0] && e === n[2] || t === n[2] && e === n[0]) this.constrained_edge[1] = !0; else if (t === n[1] && e === n[2] || t === n[2] && e === n[1]) this.constrained_edge[0] = !0
            }, t.exports = i
        }, {"./xy": 44}],
        43: [function (e, t, n) {
            function s(e, t, n) {
                var s = (e.x - n.x) * (t.y - n.y), o = (e.y - n.y) * (t.x - n.x), u = s - o;
                return u > -r && u < r ? i.COLLINEAR : u > 0 ? i.CCW : i.CW
            }

            function o(e, t, n, i) {
                var s = (e.x - t.x) * (i.y - t.y) - (i.x - t.x) * (e.y - t.y);
                if (s >= -r)return !1;
                var o = (e.x - n.x) * (i.y - n.y) - (i.x - n.x) * (e.y - n.y);
                return o <= r ? !1 : !0
            }

            var r = 1e-12, i = {CW: 1, CCW: -1, COLLINEAR: 0};
            t.exports = {EPSILON: r, Orientation: i, orient2d: s, inScanArea: o}
        }, {}],
        44: [function (e, t, n) {
            function r(e) {
                return "(" + e.x + ";" + e.y + ")"
            }

            function i(e) {
                var t = e.toString();
                return t === "[object Object]" ? r(e) : t
            }

            function s(e, t) {
                return e.y === t.y ? e.x - t.x : e.y - t.y
            }

            function o(e, t) {
                return e.x === t.x && e.y === t.y
            }

            t.exports = {toString: i, toStringBase: r, compare: s, equals: o}
        }, {}],
        45: [function (e, t, n) {
            function o(e, t, n, r) {
                var i = n - e, s = r - t;
                return Math.sqrt(i * i + s * s)
            }

            var r = e("vecmath").Vector2, i = e("klasse"), s = e("interpolation").lerp, u = new r, a = new r,
                f = new i({
                    initialize: function () {
                        this.steps = 1, this.points = [], this.approximateCurves = !0, this.approximationFactor = .5, this._move = new r, this._start = new r, this._hasMoved = !1, this._newPath = !0
                    }, reset: function () {
                        this.points.length = 0, this._newPath = !0, this._hasMoved = !1, this._move.x = this._move.y = 0, this._start.x = this._start.y = 0
                    }, beginPath: function () {
                        this.reset()
                    }, moveTo: function (e, t) {
                        this._newPath = !0, this._move.x = e, this._move.y = t, this._start.x = e, this._start.y = t, this._hasMoved = !0
                    }, __newPoint: function (e, t) {
                        this.points.push(new r(e, t)), this._newPath = !1
                    }, closePath: function (e) {
                        if (this.points.length === 0)return;
                        this.lineTo(this._start.x, this._start.y, e)
                    }, lineTo: function (e, t, n) {
                        if (!this._hasMoved) {
                            this.moveTo(e, t);
                            return
                        }
                        n = Math.max(1, n || this.steps);
                        for (var r = 0; r <= n; r++) {
                            if (!this._newPath && r == 0)continue;
                            var i = r / n, o = s(this._move.x, e, i), u = s(this._move.y, t, i);
                            this.__newPoint(o, u)
                        }
                        this._move.x = e, this._move.y = t
                    }, bezierCurveTo: function (e, t, n, r, i, s, u) {
                        if (!this._hasMoved) {
                            this.moveTo(w, E);
                            return
                        }
                        var a = this._move.x, f = this._move.y;
                        if (!u)if (this.approximateCurves) {
                            var l = o(a, f, e, t), c = o(e, t, n, r), h = o(n, r, i, s);
                            u = ~~((l + c + h) * this.approximationFactor)
                        } else u = Math.max(1, this.steps);
                        for (var p = 0; p < u; p++) {
                            var d = p / (u - 1), v = 1 - d, m = v * v, g = m * v, y = d * d, b = y * d,
                                w = g * a + 3 * m * d * e + 3 * v * y * n + b * i,
                                E = g * f + 3 * m * d * t + 3 * v * y * r + b * s;
                            this.__newPoint(w, E)
                        }
                        this._move.x = i, this._move.y = s
                    }, quadraticCurveTo: function (e, t, n, r, i) {
                        if (!this._hasMoved) {
                            this.moveTo(m, g);
                            return
                        }
                        var s = this._move.x, o = this._move.y;
                        if (!i)if (this.approximateCurves) {
                            var f = u.set(s, o).distance(a.set(e, t)), l = u.set(e, t).distance(a.set(n, r));
                            i = ~~((f + l) * this.approximationFactor)
                        } else i = Math.max(1, this.steps);
                        for (var c = 0; c < i; c++) {
                            var h = c / (i - 1), p = 1 - h, d = p * p, v = h * h, m = d * s + 2 * p * h * e + v * n,
                                g = d * o + 2 * p * h * t + v * r;
                            this.__newPoint(m, g)
                        }
                        this._move.x = n, this._move.y = r
                    }, calculateBoundingBox: function () {
                        var e = this.points, t = Number.MAX_VALUE, n = Number.MAX_VALUE, r = -Number.MAX_VALUE,
                            i = -Number.MAX_VALUE;
                        for (var s = 0; s < e.length; s++) {
                            var o = e[s];
                            t = Math.min(t, o.x), n = Math.min(n, o.y), r = Math.max(r, o.x), i = Math.max(i, o.y)
                        }
                        return {x: t, y: n, width: r - t, height: i - n}
                    }, contains: function (e, t) {
                        var n = e, r = t;
                        typeof e == "object" && (n = e.x, r = e.y);
                        var i = this.points, s = i.length, o, u, a = 0;
                        for (o = 0, u = s - 1; o < s; u = o++)i[o].y > r != i[u].y > r && n < (i[u].x - i[o].x) * (r - i[o].y) / (i[u].y - i[o].y) + i[o].x && (a = !a);
                        return a
                    }, simplify: function (e, t) {
                        var n = this.points, i = n.length, s = new r, o = e * e, u = new r(n[0]);
                        t || (t = new f);
                        var a = [];
                        a.push(u);
                        for (var l = 1; l < i; l++)s = n[l], s.distanceSq(u) > o && (a.push(new r(s)), u = s);
                        return (u.x !== s.x || u.y !== s.y) && a.push(new r(s)), t.points = a, t
                    }
                });
            t.exports = f
        }, {interpolation: 19, klasse: 34, vecmath: 53}],
        46: [function (e, t, n) {
            function i(e) {
                this.val = new r(9), e ? this.copy(e) : this.idt()
            }

            var r = typeof Float32Array != "undefined" ? Float32Array : Array, s = i.prototype;
            s.clone = function () {
                return new i(this)
            }, s.set = function (e) {
                return this.copy(e)
            }, s.copy = function (e) {
                var t = this.val, n = e.val;
                return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], this
            }, s.fromMat4 = function (e) {
                var t = e.val, n = this.val;
                return n[0] = t[0], n[1] = t[1], n[2] = t[2], n[3] = t[4], n[4] = t[5], n[5] = t[6], n[6] = t[8], n[7] = t[9], n[8] = t[10], this
            }, s.fromArray = function (e) {
                var t = this.val;
                return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], this
            }, s.identity = function () {
                var e = this.val;
                return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, this
            }, s.transpose = function () {
                var e = this.val, t = e[1], n = e[2], r = e[5];
                return e[1] = e[3], e[2] = e[6], e[3] = t, e[5] = e[7], e[6] = n, e[7] = r, this
            }, s.invert = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = f * s - o * a, c = -f * i + o * u, h = a * i - s * u, p = t * l + n * c + r * h;
                return p ? (p = 1 / p, e[0] = l * p, e[1] = (-f * n + r * a) * p, e[2] = (o * n - r * s) * p, e[3] = c * p, e[4] = (f * t - r * u) * p, e[5] = (-o * t + r * i) * p, e[6] = h * p, e[7] = (-a * t + n * u) * p, e[8] = (s * t - n * i) * p, this) : null
            }, s.adjoint = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8];
                return e[0] = s * f - o * a, e[1] = r * a - n * f, e[2] = n * o - r * s, e[3] = o * u - i * f, e[4] = t * f - r * u, e[5] = r * i - t * o, e[6] = i * a - s * u, e[7] = n * u - t * a, e[8] = t * s - n * i, this
            }, s.determinant = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8];
                return t * (f * s - o * a) + n * (-f * i + o * u) + r * (a * i - s * u)
            }, s.multiply = function (e) {
                var t = this.val, n = e.val, r = t[0], i = t[1], s = t[2], o = t[3], u = t[4], a = t[5], f = t[6],
                    l = t[7], c = t[8], h = n[0], p = n[1], d = n[2], v = n[3], m = n[4], g = n[5], y = n[6], b = n[7],
                    w = n[8];
                return t[0] = h * r + p * o + d * f, t[1] = h * i + p * u + d * l, t[2] = h * s + p * a + d * c, t[3] = v * r + m * o + g * f, t[4] = v * i + m * u + g * l, t[5] = v * s + m * a + g * c, t[6] = y * r + b * o + w * f, t[7] = y * i + b * u + w * l, t[8] = y * s + b * a + w * c, this
            }, s.translate = function (e) {
                var t = this.val, n = e.x, r = e.y;
                return t[6] = n * t[0] + r * t[3] + t[6], t[7] = n * t[1] + r * t[4] + t[7], t[8] = n * t[2] + r * t[5] + t[8], this
            }, s.rotate = function (e) {
                var t = this.val, n = t[0], r = t[1], i = t[2], s = t[3], o = t[4], u = t[5], a = Math.sin(e),
                    f = Math.cos(e);
                return t[0] = f * n + a * s, t[1] = f * r + a * o, t[2] = f * i + a * u, t[3] = f * s - a * n, t[4] = f * o - a * r, t[5] = f * u - a * i, this
            }, s.scale = function (e) {
                var t = this.val, n = e.x, r = e.y;
                return t[0] = n * t[0], t[1] = n * t[1], t[2] = n * t[2], t[3] = r * t[3], t[4] = r * t[4], t[5] = r * t[5], this
            }, s.fromQuat = function (e) {
                var t = e.x, n = e.y, r = e.z, i = e.w, s = t + t, o = n + n, u = r + r, a = t * s, f = t * o,
                    l = t * u, c = n * o, h = n * u, p = r * u, d = i * s, v = i * o, m = i * u, g = this.val;
                return g[0] = 1 - (c + p), g[3] = f + m, g[6] = l - v, g[1] = f - m, g[4] = 1 - (a + p), g[7] = h + d, g[2] = l + v, g[5] = h - d, g[8] = 1 - (a + c), this
            }, s.normalFromMat4 = function (e) {
                var t = e.val, n = this.val, r = t[0], i = t[1], s = t[2], o = t[3], u = t[4], a = t[5], f = t[6],
                    l = t[7], c = t[8], h = t[9], p = t[10], d = t[11], v = t[12], m = t[13], g = t[14], y = t[15],
                    b = r * a - i * u, w = r * f - s * u, E = r * l - o * u, S = i * f - s * a, x = i * l - o * a,
                    T = s * l - o * f, N = c * m - h * v, C = c * g - p * v, k = c * y - d * v, L = h * g - p * m,
                    A = h * y - d * m, O = p * y - d * g, M = b * O - w * A + E * L + S * k - x * C + T * N;
                return M ? (M = 1 / M, n[0] = (a * O - f * A + l * L) * M, n[1] = (f * k - u * O - l * C) * M, n[2] = (u * A - a * k + l * N) * M, n[3] = (s * A - i * O - o * L) * M, n[4] = (r * O - s * k + o * C) * M, n[5] = (i * k - r * A - o * N) * M, n[6] = (m * T - g * x + y * S) * M, n[7] = (g * E - v * T - y * w) * M, n[8] = (v * x - m * E + y * b) * M, this) : null
            }, s.mul = s.multiply, s.idt = s.identity, s.reset = s.idt, s.toString = function () {
                var e = this.val;
                return "Matrix3(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ", " + e[4] + ", " + e[5] + ", " + e[6] + ", " + e[7] + ", " + e[8] + ")"
            }, s.str = s.toString, t.exports = i
        }, {}],
        47: [function (e, t, n) {
            function s(e) {
                this.val = new r(16), e ? this.copy(e) : this.idt()
            }

            var r = typeof Float32Array != "undefined" ? Float32Array : Array, i = 1e-6, o = s.prototype;
            o.clone = function () {
                return new s(this)
            }, o.set = function (e) {
                return this.copy(e)
            }, o.copy = function (e) {
                var t = this.val, n = e.val;
                return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], t[9] = n[9], t[10] = n[10], t[11] = n[11], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15], this
            }, o.fromArray = function (e) {
                var t = this.val;
                return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], this
            }, o.identity = function () {
                var e = this.val;
                return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, this
            }, o.transpose = function () {
                var e = this.val, t = e[1], n = e[2], r = e[3], i = e[6], s = e[7], o = e[11];
                return e[1] = e[4], e[2] = e[8], e[3] = e[12], e[4] = t, e[6] = e[9], e[7] = e[13], e[8] = n, e[9] = i, e[11] = e[14], e[12] = r, e[13] = s, e[14] = o, this
            }, o.invert = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = e[9], c = e[10], h = e[11], p = e[12], d = e[13], v = e[14], m = e[15],
                    g = t * o - n * s, y = t * u - r * s, b = t * a - i * s, w = n * u - r * o, E = n * a - i * o,
                    S = r * a - i * u, x = f * d - l * p, T = f * v - c * p, N = f * m - h * p, C = l * v - c * d,
                    k = l * m - h * d, L = c * m - h * v, A = g * L - y * k + b * C + w * N - E * T + S * x;
                return A ? (A = 1 / A, e[0] = (o * L - u * k + a * C) * A, e[1] = (r * k - n * L - i * C) * A, e[2] = (d * S - v * E + m * w) * A, e[3] = (c * E - l * S - h * w) * A, e[4] = (u * N - s * L - a * T) * A, e[5] = (t * L - r * N + i * T) * A, e[6] = (v * b - p * S - m * y) * A, e[7] = (f * S - c * b + h * y) * A, e[8] = (s * k - o * N + a * x) * A, e[9] = (n * N - t * k - i * x) * A, e[10] = (p * E - d * b + m * g) * A, e[11] = (l * b - f * E - h * g) * A, e[12] = (o * T - s * C - u * x) * A, e[13] = (t * C - n * T + r * x) * A, e[14] = (d * y - p * w - v * g) * A, e[15] = (f * w - l * y + c * g) * A, this) : null
            }, o.adjoint = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = e[9], c = e[10], h = e[11], p = e[12], d = e[13], v = e[14], m = e[15];
                return e[0] = o * (c * m - h * v) - l * (u * m - a * v) + d * (u * h - a * c), e[1] = -(n * (c * m - h * v) - l * (r * m - i * v) + d * (r * h - i * c)), e[2] = n * (u * m - a * v) - o * (r * m - i * v) + d * (r * a - i * u), e[3] = -(n * (u * h - a * c) - o * (r * h - i * c) + l * (r * a - i * u)), e[4] = -(s * (c * m - h * v) - f * (u * m - a * v) + p * (u * h - a * c)), e[5] = t * (c * m - h * v) - f * (r * m - i * v) + p * (r * h - i * c), e[6] = -(t * (u * m - a * v) - s * (r * m - i * v) + p * (r * a - i * u)), e[7] = t * (u * h - a * c) - s * (r * h - i * c) + f * (r * a - i * u), e[8] = s * (l * m - h * d) - f * (o * m - a * d) + p * (o * h - a * l), e[9] = -(t * (l * m - h * d) - f * (n * m - i * d) + p * (n * h - i * l)), e[10] = t * (o * m - a * d) - s * (n * m - i * d) + p * (n * a - i * o), e[11] = -(t * (o * h - a * l) - s * (n * h - i * l) + f * (n * a - i * o)), e[12] = -(s * (l * v - c * d) - f * (o * v - u * d) + p * (o * c - u * l)), e[13] = t * (l * v - c * d) - f * (n * v - r * d) + p * (n * c - r * l), e[14] = -(t * (o * v - u * d) - s * (n * v - r * d) + p * (n * u - r * o)), e[15] = t * (o * c - u * l) - s * (n * c - r * l) + f * (n * u - r * o), this
            }, o.determinant = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = e[9], c = e[10], h = e[11], p = e[12], d = e[13], v = e[14], m = e[15],
                    g = t * o - n * s, y = t * u - r * s, b = t * a - i * s, w = n * u - r * o, E = n * a - i * o,
                    S = r * a - i * u, x = f * d - l * p, T = f * v - c * p, N = f * m - h * p, C = l * v - c * d,
                    k = l * m - h * d, L = c * m - h * v;
                return g * L - y * k + b * C + w * N - E * T + S * x
            }, o.multiply = function (e) {
                var t = this.val, n = e.val, r = t[0], i = t[1], s = t[2], o = t[3], u = t[4], a = t[5], f = t[6],
                    l = t[7], c = t[8], h = t[9], p = t[10], d = t[11], v = t[12], m = t[13], g = t[14], y = t[15],
                    b = n[0], w = n[1], E = n[2], S = n[3];
                return t[0] = b * r + w * u + E * c + S * v, t[1] = b * i + w * a + E * h + S * m, t[2] = b * s + w * f + E * p + S * g, t[3] = b * o + w * l + E * d + S * y, b = n[4], w = n[5], E = n[6], S = n[7], t[4] = b * r + w * u + E * c + S * v, t[5] = b * i + w * a + E * h + S * m, t[6] = b * s + w * f + E * p + S * g, t[7] = b * o + w * l + E * d + S * y, b = n[8], w = n[9], E = n[10], S = n[11], t[8] = b * r + w * u + E * c + S * v, t[9] = b * i + w * a + E * h + S * m, t[10] = b * s + w * f + E * p + S * g, t[11] = b * o + w * l + E * d + S * y, b = n[12], w = n[13], E = n[14], S = n[15], t[12] = b * r + w * u + E * c + S * v, t[13] = b * i + w * a + E * h + S * m, t[14] = b * s + w * f + E * p + S * g, t[15] = b * o + w * l + E * d + S * y, this
            }, o.translate = function (e) {
                var t = e.x, n = e.y, r = e.z, i = this.val;
                return i[12] = i[0] * t + i[4] * n + i[8] * r + i[12], i[13] = i[1] * t + i[5] * n + i[9] * r + i[13], i[14] = i[2] * t + i[6] * n + i[10] * r + i[14], i[15] = i[3] * t + i[7] * n + i[11] * r + i[15], this
            }, o.scale = function (e) {
                var t = e.x, n = e.y, r = e.z, i = this.val;
                return i[0] = i[0] * t, i[1] = i[1] * t, i[2] = i[2] * t, i[3] = i[3] * t, i[4] = i[4] * n, i[5] = i[5] * n, i[6] = i[6] * n, i[7] = i[7] * n, i[8] = i[8] * r, i[9] = i[9] * r, i[10] = i[10] * r, i[11] = i[11] * r, i[12] = i[12], i[13] = i[13], i[14] = i[14], i[15] = i[15], this
            }, o.rotate = function (e, t) {
                var n = this.val, r = t.x, s = t.y, o = t.z, u = Math.sqrt(r * r + s * s + o * o), a, f, l, c, h, p, d,
                    v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M;
                return Math.abs(u) < i ? null : (u = 1 / u, r *= u, s *= u, o *= u, a = Math.sin(e), f = Math.cos(e), l = 1 - f, c = n[0], h = n[1], p = n[2], d = n[3], v = n[4], m = n[5], g = n[6], y = n[7], b = n[8], w = n[9], E = n[10], S = n[11], x = r * r * l + f, T = s * r * l + o * a, N = o * r * l - s * a, C = r * s * l - o * a, k = s * s * l + f, L = o * s * l + r * a, A = r * o * l + s * a, O = s * o * l - r * a, M = o * o * l + f, n[0] = c * x + v * T + b * N, n[1] = h * x + m * T + w * N, n[2] = p * x + g * T + E * N, n[3] = d * x + y * T + S * N, n[4] = c * C + v * k + b * L, n[5] = h * C + m * k + w * L, n[6] = p * C + g * k + E * L, n[7] = d * C + y * k + S * L, n[8] = c * A + v * O + b * M, n[9] = h * A + m * O + w * M, n[10] = p * A + g * O + E * M, n[11] = d * A + y * O + S * M, this)
            }, o.rotateX = function (e) {
                var t = this.val, n = Math.sin(e), r = Math.cos(e), i = t[4], s = t[5], o = t[6], u = t[7], a = t[8],
                    f = t[9], l = t[10], c = t[11];
                return t[4] = i * r + a * n, t[5] = s * r + f * n, t[6] = o * r + l * n, t[7] = u * r + c * n, t[8] = a * r - i * n, t[9] = f * r - s * n, t[10] = l * r - o * n, t[11] = c * r - u * n, this
            }, o.rotateY = function (e) {
                var t = this.val, n = Math.sin(e), r = Math.cos(e), i = t[0], s = t[1], o = t[2], u = t[3], a = t[8],
                    f = t[9], l = t[10], c = t[11];
                return t[0] = i * r - a * n, t[1] = s * r - f * n, t[2] = o * r - l * n, t[3] = u * r - c * n, t[8] = i * n + a * r, t[9] = s * n + f * r, t[10] = o * n + l * r, t[11] = u * n + c * r, this
            }, o.rotateZ = function (e) {
                var t = this.val, n = Math.sin(e), r = Math.cos(e), i = t[0], s = t[1], o = t[2], u = t[3], a = t[4],
                    f = t[5], l = t[6], c = t[7];
                return t[0] = i * r + a * n, t[1] = s * r + f * n, t[2] = o * r + l * n, t[3] = u * r + c * n, t[4] = a * r - i * n, t[5] = f * r - s * n, t[6] = l * r - o * n, t[7] = c * r - u * n, this
            }, o.fromRotationTranslation = function (e, t) {
                var n = this.val, r = e.x, i = e.y, s = e.z, o = e.w, u = r + r, a = i + i, f = s + s, l = r * u,
                    c = r * a, h = r * f, p = i * a, d = i * f, v = s * f, m = o * u, g = o * a, y = o * f;
                return n[0] = 1 - (p + v), n[1] = c + y, n[2] = h - g, n[3] = 0, n[4] = c - y, n[5] = 1 - (l + v), n[6] = d + m, n[7] = 0, n[8] = h + g, n[9] = d - m, n[10] = 1 - (l + p), n[11] = 0, n[12] = t.x, n[13] = t.y, n[14] = t.z, n[15] = 1, this
            }, o.fromQuat = function (e) {
                var t = this.val, n = e.x, r = e.y, i = e.z, s = e.w, o = n + n, u = r + r, a = i + i, f = n * o,
                    l = n * u, c = n * a, h = r * u, p = r * a, d = i * a, v = s * o, m = s * u, g = s * a;
                return t[0] = 1 - (h + d), t[1] = l + g, t[2] = c - m, t[3] = 0, t[4] = l - g, t[5] = 1 - (f + d), t[6] = p + v, t[7] = 0, t[8] = c + m, t[9] = p - v, t[10] = 1 - (f + h), t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            }, o.frustum = function (e, t, n, r, i, s) {
                var o = this.val, u = 1 / (t - e), a = 1 / (r - n), f = 1 / (i - s);
                return o[0] = i * 2 * u, o[1] = 0, o[2] = 0, o[3] = 0, o[4] = 0, o[5] = i * 2 * a, o[6] = 0, o[7] = 0, o[8] = (t + e) * u, o[9] = (r + n) * a, o[10] = (s + i) * f, o[11] = -1, o[12] = 0, o[13] = 0, o[14] = s * i * 2 * f, o[15] = 0, this
            }, o.perspective = function (e, t, n, r) {
                var i = this.val, s = 1 / Math.tan(e / 2), o = 1 / (n - r);
                return i[0] = s / t, i[1] = 0, i[2] = 0, i[3] = 0, i[4] = 0, i[5] = s, i[6] = 0, i[7] = 0, i[8] = 0, i[9] = 0, i[10] = (r + n) * o, i[11] = -1, i[12] = 0, i[13] = 0, i[14] = 2 * r * n * o, i[15] = 0, this
            }, o.ortho = function (e, t, n, r, i, s, o) {
                var e = this.val, u = 1 / (t - n), a = 1 / (r - i), f = 1 / (s - o);
                return e[0] = -2 * u, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = -2 * a, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 2 * f, e[11] = 0, e[12] = (t + n) * u, e[13] = (i + r) * a, e[14] = (o + s) * f, e[15] = 1, this
            }, o.lookAt = function (e, t, n) {
                var r = this.val, s, o, u, a, f, l, c, h, p, d, v = e.x, m = e.y, g = e.z, y = n.x, b = n.y, w = n.z,
                    E = t.x, S = t.y, x = t.z;
                return Math.abs(v - E) < i && Math.abs(m - S) < i && Math.abs(g - x) < i ? this.identity() : (c = v - E, h = m - S, p = g - x, d = 1 / Math.sqrt(c * c + h * h + p * p), c *= d, h *= d, p *= d, s = b * p - w * h, o = w * c - y * p, u = y * h - b * c, d = Math.sqrt(s * s + o * o + u * u), d ? (d = 1 / d, s *= d, o *= d, u *= d) : (s = 0, o = 0, u = 0), a = h * u - p * o, f = p * s - c * u, l = c * o - h * s, d = Math.sqrt(a * a + f * f + l * l), d ? (d = 1 / d, a *= d, f *= d, l *= d) : (a = 0, f = 0, l = 0), r[0] = s, r[1] = a, r[2] = c, r[3] = 0, r[4] = o, r[5] = f, r[6] = h, r[7] = 0, r[8] = u, r[9] = l, r[10] = p, r[11] = 0, r[12] = -(s * v + o * m + u * g), r[13] = -(a * v + f * m + l * g), r[14] = -(c * v + h * m + p * g), r[15] = 1, this)
            }, o.mul = o.multiply, o.idt = o.identity, o.reset = o.idt, o.toString = function () {
                var e = this.val;
                return "Matrix4(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ", " + e[4] + ", " + e[5] + ", " + e[6] + ", " + e[7] + ", " + e[8] + ", " + e[9] + ", " + e[10] + ", " + e[11] + ", " + e[12] + ", " + e[13] + ", " + e[14] + ", " + e[15] + ")"
            }, o.str = o.toString, t.exports = s
        }, {}],
        48: [function (e, t, n) {
            function h(e, t, n, r) {
                typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0, this.w = e.w || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = r || 0)
            }

            var r = e("./Vector3"), i = e("./Matrix3"), s = e("./common"),
                o = typeof Int8Array != "undefined" ? new Int8Array([1, 2, 0]) : [1, 2, 0],
                u = typeof Float32Array != "undefined" ? new Float32Array([0, 0, 0]) : [0, 0, 0], a = new r(1, 0, 0),
                f = new r(0, 1, 0), l = new r, c = new i, p = h.prototype;
            for (var d in s)p[d] = s[d];
            p.rotationTo = function (e, t) {
                var n = e.x * t.x + e.y * t.y + e.z * t.z;
                return n < -0.999999 ? (l.copy(a).cross(e).len() < 1e-6 && l.copy(f).cross(e), l.normalize(), this.setAxisAngle(l, Math.PI)) : n > .999999 ? (this.x = 0, this.y = 0, this.z = 0, this.w = 1, this) : (l.copy(e).cross(t), this.x = l.x, this.y = l.y, this.z = l.z, this.w = 1 + n, this.normalize())
            }, p.setAxes = function (e, t, n) {
                var r = c.val;
                return r[0] = t.x, r[3] = t.y, r[6] = t.z, r[1] = uquat.x, r[4] = uquat.y, r[7] = uquat.z, r[2] = e.x, r[5] = e.y, r[8] = e.z, this.fromMat3(c).normalize()
            }, p.identity = function () {
                return this.x = this.y = this.z = 0, this.w = 1, this
            }, p.setAxisAngle = function (e, t) {
                t *= .5;
                var n = Math.sin(t);
                return this.x = n * e.x, this.y = n * e.y, this.z = n * e.z, this.w = Math.cos(t), this
            }, p.multiply = function (e) {
                var t = this.x, n = this.y, r = this.z, i = this.w, s = e.x, o = e.y, u = e.z, a = e.w;
                return this.x = t * a + i * s + n * u - r * o, this.y = n * a + i * o + r * s - t * u, this.z = r * a + i * u + t * o - n * s, this.w = i * a - t * s - n * o - r * u, this
            }, p.slerp = function (e, t) {
                var n = this.x, r = this.y, i = this.y, s = this.y, o = e.x, u = e.y, a = e.z, f = e.w, l, c, h, p, d;
                return c = n * o + r * u + i * a + s * f, c < 0 && (c = -c, o = -o, u = -u, a = -a, f = -f), 1 - c > 1e-6 ? (l = Math.acos(c), h = Math.sin(l), p = Math.sin((1 - t) * l) / h, d = Math.sin(t * l) / h) : (p = 1 - t, d = t), this.x = p * n + d * o, this.y = p * r + d * u, this.z = p * i + d * a, this.w = p * s + d * f, this
            }, p.invert = function () {
                var e = this.x, t = this.y, n = this.z, r = this.w, i = e * e + t * t + n * n + r * r,
                    s = i ? 1 / i : 0;
                return this.x = -e * s, this.y = -t * s, this.z = -n * s, this.w = r * s, this
            }, p.conjugate = function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            }, p.rotateX = function (e) {
                e *= .5;
                var t = this.x, n = this.y, r = this.z, i = this.w, s = Math.sin(e), o = Math.cos(e);
                return this.x = t * o + i * s, this.y = n * o + r * s, this.z = r * o - n * s, this.w = i * o - t * s, this
            }, p.rotateY = function (e) {
                e *= .5;
                var t = this.x, n = this.y, r = this.z, i = this.w, s = Math.sin(e), o = Math.cos(e);
                return this.x = t * o - r * s, this.y = n * o + i * s, this.z = r * o + t * s, this.w = i * o - n * s, this
            }, p.rotateZ = function (e) {
                e *= .5;
                var t = this.x, n = this.y, r = this.z, i = this.w, s = Math.sin(e), o = Math.cos(e);
                return this.x = t * o + n * s, this.y = n * o - t * s, this.z = r * o + i * s, this.w = i * o - r * s, this
            }, p.calculateW = function () {
                var e = this.x, t = this.y, n = this.z;
                return this.x = e, this.y = t, this.z = n, this.w = -Math.sqrt(Math.abs(1 - e * e - t * t - n * n)), this
            }, p.fromMat3 = function (e) {
                var t = e.val, n = t[0] + t[4] + t[8], r;
                if (n > 0) r = Math.sqrt(n + 1), this.w = .5 * r, r = .5 / r, this.x = (t[7] - t[5]) * r, this.y = (t[2] - t[6]) * r, this.z = (t[3] - t[1]) * r; else {
                    var i = 0;
                    t[4] > t[0] && (i = 1), t[8] > t[i * 3 + i] && (i = 2);
                    var s = o[i], a = o[s];
                    r = Math.sqrt(t[i * 3 + i] - t[s * 3 + s] - t[a * 3 + a] + 1), u[i] = .5 * r, r = .5 / r, u[s] = (t[s * 3 + i] + t[i * 3 + s]) * r, u[a] = (t[a * 3 + i] + t[i * 3 + a]) * r, this.x = u[0], this.y = u[1], this.z = u[2], this.w = (t[a * 3 + s] - t[s * 3 + a]) * r
                }
                return this
            }, p.idt = p.identity, p.sub = p.subtract, p.mul = p.multiply, p.len = p.length, p.lenSq = p.lengthSq, p.reset = p.idt, p.toString = function () {
                return "Quaternion(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")"
            }, p.str = p.toString, t.exports = h
        }, {"./Matrix3": 46, "./Vector3": 50, "./common": 52}],
        49: [function (e, t, n) {
            function r(e, t) {
                typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0) : (this.x = e || 0, this.y = t || 0)
            }

            var i = r.prototype;
            i.clone = function () {
                return new r(this.x, this.y)
            }, i.copy = function (e) {
                return this.x = e.x || 0, this.y = e.y || 0, this
            }, i.set = function (e, t) {
                return typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0) : (this.x = e || 0, this.y = t || 0), this
            }, i.add = function (e) {
                return this.x += e.x, this.y += e.y, this
            }, i.subtract = function (e) {
                return this.x -= e.x, this.y -= e.y, this
            }, i.multiply = function (e) {
                return this.x *= e.x, this.y *= e.y, this
            }, i.scale = function (e) {
                return this.x *= e, this.y *= e, this
            }, i.divide = function (e) {
                return this.x /= e.x, this.y /= e.y, this
            }, i.negate = function () {
                return this.x = -this.x, this.y = -this.y, this
            }, i.distance = function (e) {
                var t = e.x - this.x, n = e.y - this.y;
                return Math.sqrt(t * t + n * n)
            }, i.distanceSq = function (e) {
                var t = e.x - this.x, n = e.y - this.y;
                return t * t + n * n
            }, i.length = function () {
                var e = this.x, t = this.y;
                return Math.sqrt(e * e + t * t)
            }, i.lengthSq = function () {
                var e = this.x, t = this.y;
                return e * e + t * t
            }, i.normalize = function () {
                var e = this.x, t = this.y, n = e * e + t * t;
                return n > 0 && (n = 1 / Math.sqrt(n), this.x = e * n, this.y = t * n), this
            }, i.dot = function (e) {
                return this.x * e.x + this.y * e.y
            }, i.cross = function (e) {
                return this.x * e.y - this.y * e.x
            }, i.lerp = function (e, t) {
                var n = this.x, r = this.y;
                return t = t || 0, this.x = n + t * (e.x - n), this.y = r + t * (e.y - r), this
            }, i.transformMat3 = function (e) {
                var t = this.x, n = this.y, r = e.val;
                return this.x = r[0] * t + r[2] * n + r[4], this.y = r[1] * t + r[3] * n + r[5], this
            }, i.transformMat4 = function (e) {
                var t = this.x, n = this.y, r = e.val;
                return this.x = r[0] * t + r[4] * n + r[12], this.y = r[1] * t + r[5] * n + r[13], this
            }, i.reset = function () {
                return this.x = 0, this.y = 0, this
            }, i.sub = i.subtract, i.mul = i.multiply, i.div = i.divide, i.dist = i.distance, i.distSq = i.distanceSq, i.len = i.length, i.lenSq = i.lengthSq, i.toString = function () {
                return "Vector2(" + this.x + ", " + this.y + ")"
            }, i.random = function (e) {
                e = e || 1;
                var t = Math.random() * 2 * Math.PI;
                return this.x = Math.cos(t) * e, this.y = Math.sin(t) * e, this
            }, i.str = i.toString, t.exports = r
        }, {}],
        50: [function (e, t, n) {
            function r(e, t, n) {
                typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0)
            }

            var i = r.prototype;
            i.clone = function () {
                return new r(this.x, this.y, this.z)
            }, i.copy = function (e) {
                return this.x = e.x, this.y = e.y, this.z = e.z, this
            }, i.set = function (e, t, n) {
                return typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0), this
            }, i.add = function (e) {
                return this.x += e.x, this.y += e.y, this.z += e.z, this
            }, i.subtract = function (e) {
                return this.x -= e.x, this.y -= e.y, this.z -= e.z, this
            }, i.multiply = function (e) {
                return this.x *= e.x, this.y *= e.y, this.z *= e.z, this
            }, i.scale = function (e) {
                return this.x *= e, this.y *= e, this.z *= e, this
            }, i.divide = function (e) {
                return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
            }, i.negate = function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            }, i.distance = function (e) {
                var t = e.x - this.x, n = e.y - this.y, r = e.z - this.z;
                return Math.sqrt(t * t + n * n + r * r)
            }, i.distanceSq = function (e) {
                var t = e.x - this.x, n = e.y - this.y, r = e.z - this.z;
                return t * t + n * n + r * r
            }, i.length = function () {
                var e = this.x, t = this.y, n = this.z;
                return Math.sqrt(e * e + t * t + n * n)
            }, i.lengthSq = function () {
                var e = this.x, t = this.y, n = this.z;
                return e * e + t * t + n * n
            }, i.normalize = function () {
                var e = this.x, t = this.y, n = this.z, r = e * e + t * t + n * n;
                return r > 0 && (r = 1 / Math.sqrt(r), this.x = e * r, this.y = t * r, this.z = n * r), this
            }, i.dot = function (e) {
                return this.x * e.x + this.y * e.y + this.z * e.z
            }, i.cross = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.x, s = e.y, o = e.z;
                return this.x = n * o - r * s, this.y = r * i - t * o, this.z = t * s - n * i, this
            }, i.lerp = function (e, t) {
                var n = this.x, r = this.y, i = this.z;
                return t = t || 0, this.x = n + t * (e.x - n), this.y = r + t * (e.y - r), this.z = i + t * (e.z - i), this
            }, i.transformMat4 = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.val;
                return this.x = i[0] * t + i[4] * n + i[8] * r + i[12], this.y = i[1] * t + i[5] * n + i[9] * r + i[13], this.z = i[2] * t + i[6] * n + i[10] * r + i[14], this
            }, i.transformMat3 = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.val;
                return this.x = t * i[0] + n * i[3] + r * i[6], this.y = t * i[1] + n * i[4] + r * i[7], this.z = t * i[2] + n * i[5] + r * i[8], this
            }, i.transformQuat = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.x, s = e.y, o = e.z, u = e.w, a = u * t + s * r - o * n,
                    f = u * n + o * t - i * r, l = u * r + i * n - s * t, c = -i * t - s * n - o * r;
                return this.x = a * u + c * -i + f * -o - l * -s, this.y = f * u + c * -s + l * -i - a * -o, this.z = l * u + c * -o + a * -s - f * -i, this
            }, i.project = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.val, s = i[0], o = i[1], u = i[2], a = i[3], f = i[4],
                    l = i[5], c = i[6], h = i[7], p = i[8], d = i[9], v = i[10], m = i[11], g = i[12], y = i[13],
                    b = i[14], w = i[15], E = 1 / (t * a + n * h + r * m + w);
                return this.x = (t * s + n * f + r * p + g) * E, this.y = (t * o + n * l + r * d + y) * E, this.z = (t * u + n * c + r * v + b) * E, this
            }, i.unproject = function (e, t) {
                var n = e.x, r = e.y, i = e.z, s = e.w, o = this.x, u = this.y, a = this.z;
                return o -= n, u = s - u - 1, u -= r, this.x = 2 * o / i - 1, this.y = 2 * u / s - 1, this.z = 2 * a - 1, this.project(t)
            }, i.random = function (e) {
                e = e || 1;
                var t = Math.random() * 2 * Math.PI, n = Math.random() * 2 - 1, r = Math.sqrt(1 - n * n) * e;
                return this.x = Math.cos(t) * r, this.y = Math.sin(t) * r, this.z = n * e, this
            }, i.reset = function () {
                return this.x = 0, this.y = 0, this.z = 0, this
            }, i.sub = i.subtract, i.mul = i.multiply, i.div = i.divide, i.dist = i.distance, i.distSq = i.distanceSq, i.len = i.length, i.lenSq = i.lengthSq, i.toString = function () {
                return "Vector3(" + this.x + ", " + this.y + ", " + this.z + ")"
            }, i.str = i.toString, t.exports = r
        }, {}],
        51: [function (e, t, n) {
            function i(e, t, n, r) {
                typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0, this.w = e.w || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = r || 0)
            }

            var r = e("./common"), s = i.prototype;
            for (var o in r)s[o] = r[o];
            s.clone = function () {
                return new i(this.x, this.y, this.z, this.w)
            }, s.multiply = function (e) {
                return this.x *= e.x, this.y *= e.y, this.z *= e.z, this.w *= e.w, this
            }, s.divide = function (e) {
                return this.x /= e.x, this.y /= e.y, this.z /= e.z, this.w /= e.w, this
            }, s.distance = function (e) {
                var t = e.x - this.x, n = e.y - this.y, r = e.z - this.z, i = e.w - this.w;
                return Math.sqrt(t * t + n * n + r * r + i * i)
            }, s.distanceSq = function (e) {
                var t = e.x - this.x, n = e.y - this.y, r = e.z - this.z, i = e.w - this.w;
                return t * t + n * n + r * r + i * i
            }, s.negate = function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
            }, s.transformMat4 = function (e) {
                var t = e.val, n = this.x, r = this.y, i = this.z, s = this.w;
                return this.x = t[0] * n + t[4] * r + t[8] * i + t[12] * s, this.y = t[1] * n + t[5] * r + t[9] * i + t[13] * s, this.z = t[2] * n + t[6] * r + t[10] * i + t[14] * s, this.w = t[3] * n + t[7] * r + t[11] * i + t[15] * s, this
            }, s.transformQuat = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.x, s = e.y, o = e.z, u = e.w, a = u * t + s * r - o * n,
                    f = u * n + o * t - i * r, l = u * r + i * n - s * t, c = -i * t - s * n - o * r;
                return this.x = a * u + c * -i + f * -o - l * -s, this.y = f * u + c * -s + l * -i - a * -o, this.z = l * u + c * -o + a * -s - f * -i, out
            }, s.random = function (e) {
                return e = e || 1, this.x = (Math.random() * 2 - 1) * e, this.y = (Math.random() * 2 - 1) * e, this.z = (Math.random() * 2 - 1) * e, this.w = (Math.random() * 2 - 1) * e, this
            }, s.reset = function () {
                return this.x = 0, this.y = 0, this.z = 0, this.w = 0, this
            }, s.sub = s.subtract, s.mul = s.multiply, s.div = s.divide, s.dist = s.distance, s.distSq = s.distanceSq, s.len = s.length, s.lenSq = s.lengthSq, s.toString = function () {
                return "Vector4(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")"
            }, s.str = s.toString, t.exports = i
        }, {"./common": 52}],
        52: [function (e, t, n) {
            t.exports = {
                copy: function (e) {
                    return this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0, this.w = e.w || 0, this
                }, set: function (e, t, n, r) {
                    return typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0, this.w = e.w || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = r || 0), this
                }, add: function (e) {
                    return this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this
                }, subtract: function (e) {
                    return this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this
                }, scale: function (e) {
                    return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
                }, length: function () {
                    var e = this.x, t = this.y, n = this.z, r = this.w;
                    return Math.sqrt(e * e + t * t + n * n + r * r)
                }, lengthSq: function () {
                    var e = this.x, t = this.y, n = this.z, r = this.w;
                    return e * e + t * t + n * n + r * r
                }, normalize: function () {
                    var e = this.x, t = this.y, n = this.z, r = this.w, i = e * e + t * t + n * n + r * r;
                    return i > 0 && (i = 1 / Math.sqrt(i), this.x = e * i, this.y = t * i, this.z = n * i, this.w = r * i), this
                }, dot: function (e) {
                    return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
                }, lerp: function (e, t) {
                    var n = this.x, r = this.y, i = this.z, s = this.w;
                    return t = t || 0, this.x = n + t * (e.x - n), this.y = r + t * (e.y - r), this.z = i + t * (e.z - i), this.w = s + t * (e.w - s), this
                }
            }
        }, {}],
        53: [function (e, t, n) {
            t.exports = {
                Vector2: e("./Vector2"),
                Vector3: e("./Vector3"),
                Vector4: e("./Vector4"),
                Matrix3: e("./Matrix3"),
                Matrix4: e("./Matrix4"),
                Quaternion: e("./Quaternion")
            }
        }, {"./Matrix3": 46, "./Matrix4": 47, "./Quaternion": 48, "./Vector2": 49, "./Vector3": 50, "./Vector4": 51}],
        54: [function (e, t, n) {
            t.exports = e(46)
        }, {}],
        55: [function (e, t, n) {
            function s(e) {
                this.val = new r(16), e ? this.copy(e) : this.idt()
            }

            var r = typeof Float32Array != "undefined" ? Float32Array : Array, i = 1e-6, o = s.prototype;
            o.clone = function () {
                return new s(this)
            }, o.set = function (e) {
                return this.copy(e)
            }, o.copy = function (e) {
                var t = this.val, n = e.val;
                return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], t[9] = n[9], t[10] = n[10], t[11] = n[11], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15], this
            }, o.fromArray = function (e) {
                var t = this.val;
                return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], this
            }, o.identity = function () {
                var e = this.val;
                return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, this
            }, o.transpose = function () {
                var e = this.val, t = e[1], n = e[2], r = e[3], i = e[6], s = e[7], o = e[11];
                return e[1] = e[4], e[2] = e[8], e[3] = e[12], e[4] = t, e[6] = e[9], e[7] = e[13], e[8] = n, e[9] = i, e[11] = e[14], e[12] = r, e[13] = s, e[14] = o, this
            }, o.invert = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = e[9], c = e[10], h = e[11], p = e[12], d = e[13], v = e[14], m = e[15],
                    g = t * o - n * s, y = t * u - r * s, b = t * a - i * s, w = n * u - r * o, E = n * a - i * o,
                    S = r * a - i * u, x = f * d - l * p, T = f * v - c * p, N = f * m - h * p, C = l * v - c * d,
                    k = l * m - h * d, L = c * m - h * v, A = g * L - y * k + b * C + w * N - E * T + S * x;
                return A ? (A = 1 / A, e[0] = (o * L - u * k + a * C) * A, e[1] = (r * k - n * L - i * C) * A, e[2] = (d * S - v * E + m * w) * A, e[3] = (c * E - l * S - h * w) * A, e[4] = (u * N - s * L - a * T) * A, e[5] = (t * L - r * N + i * T) * A, e[6] = (v * b - p * S - m * y) * A, e[7] = (f * S - c * b + h * y) * A, e[8] = (s * k - o * N + a * x) * A, e[9] = (n * N - t * k - i * x) * A, e[10] = (p * E - d * b + m * g) * A, e[11] = (l * b - f * E - h * g) * A, e[12] = (o * T - s * C - u * x) * A, e[13] = (t * C - n * T + r * x) * A, e[14] = (d * y - p * w - v * g) * A, e[15] = (f * w - l * y + c * g) * A, this) : null
            }, o.adjoint = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = e[9], c = e[10], h = e[11], p = e[12], d = e[13], v = e[14], m = e[15];
                return e[0] = o * (c * m - h * v) - l * (u * m - a * v) + d * (u * h - a * c), e[1] = -(n * (c * m - h * v) - l * (r * m - i * v) + d * (r * h - i * c)), e[2] = n * (u * m - a * v) - o * (r * m - i * v) + d * (r * a - i * u), e[3] = -(n * (u * h - a * c) - o * (r * h - i * c) + l * (r * a - i * u)), e[4] = -(s * (c * m - h * v) - f * (u * m - a * v) + p * (u * h - a * c)), e[5] = t * (c * m - h * v) - f * (r * m - i * v) + p * (r * h - i * c), e[6] = -(t * (u * m - a * v) - s * (r * m - i * v) + p * (r * a - i * u)), e[7] = t * (u * h - a * c) - s * (r * h - i * c) + f * (r * a - i * u), e[8] = s * (l * m - h * d) - f * (o * m - a * d) + p * (o * h - a * l), e[9] = -(t * (l * m - h * d) - f * (n * m - i * d) + p * (n * h - i * l)), e[10] = t * (o * m - a * d) - s * (n * m - i * d) + p * (n * a - i * o), e[11] = -(t * (o * h - a * l) - s * (n * h - i * l) + f * (n * a - i * o)), e[12] = -(s * (l * v - c * d) - f * (o * v - u * d) + p * (o * c - u * l)), e[13] = t * (l * v - c * d) - f * (n * v - r * d) + p * (n * c - r * l), e[14] = -(t * (o * v - u * d) - s * (n * v - r * d) + p * (n * u - r * o)), e[15] = t * (o * c - u * l) - s * (n * c - r * l) + f * (n * u - r * o), this
            }, o.determinant = function () {
                var e = this.val, t = e[0], n = e[1], r = e[2], i = e[3], s = e[4], o = e[5], u = e[6], a = e[7],
                    f = e[8], l = e[9], c = e[10], h = e[11], p = e[12], d = e[13], v = e[14], m = e[15],
                    g = t * o - n * s, y = t * u - r * s, b = t * a - i * s, w = n * u - r * o, E = n * a - i * o,
                    S = r * a - i * u, x = f * d - l * p, T = f * v - c * p, N = f * m - h * p, C = l * v - c * d,
                    k = l * m - h * d, L = c * m - h * v;
                return g * L - y * k + b * C + w * N - E * T + S * x
            }, o.multiply = function (e) {
                var t = this.val, n = e.val, r = t[0], i = t[1], s = t[2], o = t[3], u = t[4], a = t[5], f = t[6],
                    l = t[7], c = t[8], h = t[9], p = t[10], d = t[11], v = t[12], m = t[13], g = t[14], y = t[15],
                    b = n[0], w = n[1], E = n[2], S = n[3];
                return t[0] = b * r + w * u + E * c + S * v, t[1] = b * i + w * a + E * h + S * m, t[2] = b * s + w * f + E * p + S * g, t[3] = b * o + w * l + E * d + S * y, b = n[4], w = n[5], E = n[6], S = n[7], t[4] = b * r + w * u + E * c + S * v, t[5] = b * i + w * a + E * h + S * m, t[6] = b * s + w * f + E * p + S * g, t[7] = b * o + w * l + E * d + S * y, b = n[8], w = n[9], E = n[10], S = n[11], t[8] = b * r + w * u + E * c + S * v, t[9] = b * i + w * a + E * h + S * m, t[10] = b * s + w * f + E * p + S * g, t[11] = b * o + w * l + E * d + S * y, b = n[12], w = n[13], E = n[14], S = n[15], t[12] = b * r + w * u + E * c + S * v, t[13] = b * i + w * a + E * h + S * m, t[14] = b * s + w * f + E * p + S * g, t[15] = b * o + w * l + E * d + S * y, this
            }, o.translate = function (e) {
                var t = e.x, n = e.y, r = e.z, i = this.val;
                return i[12] = i[0] * t + i[4] * n + i[8] * r + i[12], i[13] = i[1] * t + i[5] * n + i[9] * r + i[13], i[14] = i[2] * t + i[6] * n + i[10] * r + i[14], i[15] = i[3] * t + i[7] * n + i[11] * r + i[15], this
            }, o.scale = function (e) {
                var t = e.x, n = e.y, r = e.z, i = this.val;
                return i[0] = i[0] * t, i[1] = i[1] * t, i[2] = i[2] * t, i[3] = i[3] * t, i[4] = i[4] * n, i[5] = i[5] * n, i[6] = i[6] * n, i[7] = i[7] * n, i[8] = i[8] * r, i[9] = i[9] * r, i[10] = i[10] * r, i[11] = i[11] * r, i[12] = i[12], i[13] = i[13], i[14] = i[14], i[15] = i[15], this
            }, o.rotate = function (e, t) {
                var n = this.val, r = t.x, s = t.y, o = t.z, u = Math.sqrt(r * r + s * s + o * o), a, f, l, c, h, p, d,
                    v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M;
                return Math.abs(u) < i ? null : (u = 1 / u, r *= u, s *= u, o *= u, a = Math.sin(e), f = Math.cos(e), l = 1 - f, c = n[0], h = n[1], p = n[2], d = n[3], v = n[4], m = n[5], g = n[6], y = n[7], b = n[8], w = n[9], E = n[10], S = n[11], x = r * r * l + f, T = s * r * l + o * a, N = o * r * l - s * a, C = r * s * l - o * a, k = s * s * l + f, L = o * s * l + r * a, A = r * o * l + s * a, O = s * o * l - r * a, M = o * o * l + f, n[0] = c * x + v * T + b * N, n[1] = h * x + m * T + w * N, n[2] = p * x + g * T + E * N, n[3] = d * x + y * T + S * N, n[4] = c * C + v * k + b * L, n[5] = h * C + m * k + w * L, n[6] = p * C + g * k + E * L, n[7] = d * C + y * k + S * L, n[8] = c * A + v * O + b * M, n[9] = h * A + m * O + w * M, n[10] = p * A + g * O + E * M, n[11] = d * A + y * O + S * M, this)
            }, o.rotateX = function (e) {
                var t = this.val, n = Math.sin(e), r = Math.cos(e), i = t[4], s = t[5], o = t[6], u = t[7], a = t[8],
                    f = t[9], l = t[10], c = t[11];
                return t[4] = i * r + a * n, t[5] = s * r + f * n, t[6] = o * r + l * n, t[7] = u * r + c * n, t[8] = a * r - i * n, t[9] = f * r - s * n, t[10] = l * r - o * n, t[11] = c * r - u * n, this
            }, o.rotateY = function (e) {
                var t = this.val, n = Math.sin(e), r = Math.cos(e), i = t[0], s = t[1], o = t[2], u = t[3], a = t[8],
                    f = t[9], l = t[10], c = t[11];
                return t[0] = i * r - a * n, t[1] = s * r - f * n, t[2] = o * r - l * n, t[3] = u * r - c * n, t[8] = i * n + a * r, t[9] = s * n + f * r, t[10] = o * n + l * r, t[11] = u * n + c * r, this
            }, o.rotateZ = function (e) {
                var t = this.val, n = Math.sin(e), r = Math.cos(e), i = t[0], s = t[1], o = t[2], u = t[3], a = t[4],
                    f = t[5], l = t[6], c = t[7];
                return t[0] = i * r + a * n, t[1] = s * r + f * n, t[2] = o * r + l * n, t[3] = u * r + c * n, t[4] = a * r - i * n, t[5] = f * r - s * n, t[6] = l * r - o * n, t[7] = c * r - u * n, this
            }, o.fromRotationTranslation = function (e, t) {
                var n = this.val, r = e.x, i = e.y, s = e.z, o = e.w, u = r + r, a = i + i, f = s + s, l = r * u,
                    c = r * a, h = r * f, p = i * a, d = i * f, v = s * f, m = o * u, g = o * a, y = o * f;
                return n[0] = 1 - (p + v), n[1] = c + y, n[2] = h - g, n[3] = 0, n[4] = c - y, n[5] = 1 - (l + v), n[6] = d + m, n[7] = 0, n[8] = h + g, n[9] = d - m, n[10] = 1 - (l + p), n[11] = 0, n[12] = t.x, n[13] = t.y, n[14] = t.z, n[15] = 1, this
            }, o.fromQuat = function (e) {
                var t = this.val, n = e.x, r = e.y, i = e.z, s = e.w, o = n + n, u = r + r, a = i + i, f = n * o,
                    l = n * u, c = n * a, h = r * u, p = r * a, d = i * a, v = s * o, m = s * u, g = s * a;
                return t[0] = 1 - (h + d), t[1] = l + g, t[2] = c - m, t[3] = 0, t[4] = l - g, t[5] = 1 - (f + d), t[6] = p + v, t[7] = 0, t[8] = c + m, t[9] = p - v, t[10] = 1 - (f + h), t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            }, o.frustum = function (e, t, n, r, i, s) {
                var o = this.val, u = 1 / (t - e), a = 1 / (r - n), f = 1 / (i - s);
                return o[0] = i * 2 * u, o[1] = 0, o[2] = 0, o[3] = 0, o[4] = 0, o[5] = i * 2 * a, o[6] = 0, o[7] = 0, o[8] = (t + e) * u, o[9] = (r + n) * a, o[10] = (s + i) * f, o[11] = -1, o[12] = 0, o[13] = 0, o[14] = s * i * 2 * f, o[15] = 0, this
            }, o.perspective = function (e, t, n, r) {
                var i = this.val, s = 1 / Math.tan(e / 2), o = 1 / (n - r);
                return i[0] = s / t, i[1] = 0, i[2] = 0, i[3] = 0, i[4] = 0, i[5] = s, i[6] = 0, i[7] = 0, i[8] = 0, i[9] = 0, i[10] = (r + n) * o, i[11] = -1, i[12] = 0, i[13] = 0, i[14] = 2 * r * n * o, i[15] = 0, this
            }, o.ortho = function (e, t, n, r, i, s) {
                var o = this.val, u = 1 / (e - t), a = 1 / (n - r), f = 1 / (i - s);
                return o[0] = -2 * u, o[1] = 0, o[2] = 0, o[3] = 0, o[4] = 0, o[5] = -2 * a, o[6] = 0, o[7] = 0, o[8] = 0, o[9] = 0, o[10] = 2 * f, o[11] = 0, o[12] = (e + t) * u, o[13] = (r + n) * a, o[14] = (s + i) * f, o[15] = 1, this
            }, o.lookAt = function (e, t, n) {
                var r = this.val, s, o, u, a, f, l, c, h, p, d, v = e.x, m = e.y, g = e.z, y = n.x, b = n.y, w = n.z,
                    E = t.x, S = t.y, x = t.z;
                return Math.abs(v - E) < i && Math.abs(m - S) < i && Math.abs(g - x) < i ? this.identity() : (c = v - E, h = m - S, p = g - x, d = 1 / Math.sqrt(c * c + h * h + p * p), c *= d, h *= d, p *= d, s = b * p - w * h, o = w * c - y * p, u = y * h - b * c, d = Math.sqrt(s * s + o * o + u * u), d ? (d = 1 / d, s *= d, o *= d, u *= d) : (s = 0, o = 0, u = 0), a = h * u - p * o, f = p * s - c * u, l = c * o - h * s, d = Math.sqrt(a * a + f * f + l * l), d ? (d = 1 / d, a *= d, f *= d, l *= d) : (a = 0, f = 0, l = 0), r[0] = s, r[1] = a, r[2] = c, r[3] = 0, r[4] = o, r[5] = f, r[6] = h, r[7] = 0, r[8] = u, r[9] = l, r[10] = p, r[11] = 0, r[12] = -(s * v + o * m + u * g), r[13] = -(a * v + f * m + l * g), r[14] = -(c * v + h * m + p * g), r[15] = 1, this)
            }, o.mul = o.multiply, o.idt = o.identity, o.reset = o.idt, o.toString = function () {
                var e = this.val;
                return "Matrix4(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ", " + e[4] + ", " + e[5] + ", " + e[6] + ", " + e[7] + ", " + e[8] + ", " + e[9] + ", " + e[10] + ", " + e[11] + ", " + e[12] + ", " + e[13] + ", " + e[14] + ", " + e[15] + ")"
            }, o.str = o.toString, t.exports = s
        }, {}],
        56: [function (e, t, n) {
            function h(e, t, n, r) {
                typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0, this.w = e.w || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = r || 0)
            }

            var r = e("./Vector3"), i = e("./Matrix3"), s = e("./common"),
                o = typeof Int8Array != "undefined" ? new Int8Array([1, 2, 0]) : [1, 2, 0],
                u = typeof Float32Array != "undefined" ? new Float32Array([0, 0, 0]) : [0, 0, 0], a = new r(1, 0, 0),
                f = new r(0, 1, 0), l = new r, c = new i, p = h.prototype;
            for (var d in s)p[d] = s[d];
            p.rotationTo = function (e, t) {
                var n = e.x * t.x + e.y * t.y + e.z * t.z;
                return n < -0.999999 ? (l.copy(a).cross(e).len() < 1e-6 && l.copy(f).cross(e), l.normalize(), this.setAxisAngle(l, Math.PI)) : n > .999999 ? (this.x = 0, this.y = 0, this.z = 0, this.w = 1, this) : (l.copy(e).cross(t), this.x = l.x, this.y = l.y, this.z = l.z, this.w = 1 + n, this.normalize())
            }, p.setAxes = function (e, t, n) {
                var r = c.val;
                return r[0] = t.x, r[3] = t.y, r[6] = t.z, r[1] = n.x, r[4] = n.y, r[7] = n.z, r[2] = -e.x, r[5] = -e.y, r[8] = -e.z, this.fromMat3(c).normalize()
            }, p.identity = function () {
                return this.x = this.y = this.z = 0, this.w = 1, this
            }, p.setAxisAngle = function (e, t) {
                t *= .5;
                var n = Math.sin(t);
                return this.x = n * e.x, this.y = n * e.y, this.z = n * e.z, this.w = Math.cos(t), this
            }, p.multiply = function (e) {
                var t = this.x, n = this.y, r = this.z, i = this.w, s = e.x, o = e.y, u = e.z, a = e.w;
                return this.x = t * a + i * s + n * u - r * o, this.y = n * a + i * o + r * s - t * u, this.z = r * a + i * u + t * o - n * s, this.w = i * a - t * s - n * o - r * u, this
            }, p.slerp = function (e, t) {
                var n = this.x, r = this.y, i = this.y, s = this.y, o = e.x, u = e.y, a = e.z, f = e.w, l, c, h, p, d;
                return c = n * o + r * u + i * a + s * f, c < 0 && (c = -c, o = -o, u = -u, a = -a, f = -f), 1 - c > 1e-6 ? (l = Math.acos(c), h = Math.sin(l), p = Math.sin((1 - t) * l) / h, d = Math.sin(t * l) / h) : (p = 1 - t, d = t), this.x = p * n + d * o, this.y = p * r + d * u, this.z = p * i + d * a, this.w = p * s + d * f, this
            }, p.invert = function () {
                var e = this.x, t = this.y, n = this.z, r = this.w, i = e * e + t * t + n * n + r * r,
                    s = i ? 1 / i : 0;
                return this.x = -e * s, this.y = -t * s, this.z = -n * s, this.w = r * s, this
            }, p.conjugate = function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            }, p.rotateX = function (e) {
                e *= .5;
                var t = this.x, n = this.y, r = this.z, i = this.w, s = Math.sin(e), o = Math.cos(e);
                return this.x = t * o + i * s, this.y = n * o + r * s, this.z = r * o - n * s, this.w = i * o - t * s, this
            }, p.rotateY = function (e) {
                e *= .5;
                var t = this.x, n = this.y, r = this.z, i = this.w, s = Math.sin(e), o = Math.cos(e);
                return this.x = t * o - r * s, this.y = n * o + i * s, this.z = r * o + t * s, this.w = i * o - n * s, this
            }, p.rotateZ = function (e) {
                e *= .5;
                var t = this.x, n = this.y, r = this.z, i = this.w, s = Math.sin(e), o = Math.cos(e);
                return this.x = t * o + n * s, this.y = n * o - t * s, this.z = r * o + i * s, this.w = i * o - r * s, this
            }, p.calculateW = function () {
                var e = this.x, t = this.y, n = this.z;
                return this.x = e, this.y = t, this.z = n, this.w = -Math.sqrt(Math.abs(1 - e * e - t * t - n * n)), this
            }, p.fromMat3 = function (e) {
                var t = e.val, n = t[0] + t[4] + t[8], r;
                if (n > 0) r = Math.sqrt(n + 1), this.w = .5 * r, r = .5 / r, this.x = (t[7] - t[5]) * r, this.y = (t[2] - t[6]) * r, this.z = (t[3] - t[1]) * r; else {
                    var i = 0;
                    t[4] > t[0] && (i = 1), t[8] > t[i * 3 + i] && (i = 2);
                    var s = o[i], a = o[s];
                    r = Math.sqrt(t[i * 3 + i] - t[s * 3 + s] - t[a * 3 + a] + 1), u[i] = .5 * r, r = .5 / r, u[s] = (t[s * 3 + i] + t[i * 3 + s]) * r, u[a] = (t[a * 3 + i] + t[i * 3 + a]) * r, this.x = u[0], this.y = u[1], this.z = u[2], this.w = (t[a * 3 + s] - t[s * 3 + a]) * r
                }
                return this
            }, p.idt = p.identity, p.sub = p.subtract, p.mul = p.multiply, p.len = p.length, p.lenSq = p.lengthSq, p.reset = p.idt, p.toString = function () {
                return "Quaternion(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")"
            }, p.str = p.toString, t.exports = h
        }, {"./Matrix3": 54, "./Vector3": 58, "./common": 60}],
        57: [function (e, t, n) {
            t.exports = e(49)
        }, {}],
        58: [function (e, t, n) {
            t.exports = e(50)
        }, {}],
        59: [function (e, t, n) {
            function i(e, t, n, r) {
                typeof e == "object" ? (this.x = e.x || 0, this.y = e.y || 0, this.z = e.z || 0, this.w = e.w || 0) : (this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = r || 0)
            }

            var r = e("./common"), s = i.prototype;
            for (var o in r)s[o] = r[o];
            s.clone = function () {
                return new i(this.x, this.y, this.z, this.w)
            }, s.multiply = function (e) {
                return this.x *= e.x, this.y *= e.y, this.z *= e.z, this.w *= e.w, this
            }, s.divide = function (e) {
                return this.x /= e.x, this.y /= e.y, this.z /= e.z, this.w /= e.w, this
            }, s.distance = function (e) {
                var t = e.x - this.x, n = e.y - this.y, r = e.z - this.z, i = e.w - this.w;
                return Math.sqrt(t * t + n * n + r * r + i * i)
            }, s.distanceSq = function (e) {
                var t = e.x - this.x, n = e.y - this.y, r = e.z - this.z, i = e.w - this.w;
                return t * t + n * n + r * r + i * i
            }, s.negate = function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
            }, s.transformMat4 = function (e) {
                var t = e.val, n = this.x, r = this.y, i = this.z, s = this.w;
                return this.x = t[0] * n + t[4] * r + t[8] * i + t[12] * s, this.y = t[1] * n + t[5] * r + t[9] * i + t[13] * s, this.z = t[2] * n + t[6] * r + t[10] * i + t[14] * s, this.w = t[3] * n + t[7] * r + t[11] * i + t[15] * s, this
            }, s.transformQuat = function (e) {
                var t = this.x, n = this.y, r = this.z, i = e.x, s = e.y, o = e.z, u = e.w, a = u * t + s * r - o * n,
                    f = u * n + o * t - i * r, l = u * r + i * n - s * t, c = -i * t - s * n - o * r;
                return this.x = a * u + c * -i + f * -o - l * -s, this.y = f * u + c * -s + l * -i - a * -o, this.z = l * u + c * -o + a * -s - f * -i, this
            }, s.random = function (e) {
                return e = e || 1, this.x = (Math.random() * 2 - 1) * e, this.y = (Math.random() * 2 - 1) * e, this.z = (Math.random() * 2 - 1) * e, this.w = (Math.random() * 2 - 1) * e, this
            }, s.reset = function () {
                return this.x = 0, this.y = 0, this.z = 0, this.w = 0, this
            }, s.sub = s.subtract, s.mul = s.multiply, s.div = s.divide, s.dist = s.distance, s.distSq = s.distanceSq, s.len = s.length, s.lenSq = s.lengthSq, s.toString = function () {
                return "Vector4(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")"
            }, s.str = s.toString, t.exports = i
        }, {"./common": 60}],
        60: [function (e, t, n) {
            t.exports = e(52)
        }, {}],
        61: [function (e, t, n) {
            arguments[4][53][0].apply(n, arguments)
        }, {"./Matrix3": 54, "./Matrix4": 55, "./Quaternion": 56, "./Vector2": 57, "./Vector3": 58, "./Vector4": 59}],
        62: [function (e, t, n) {
        }, {}]
    }, {}, [2])(2)
}), define("utils/URLParamUtils", ["Class"], function (e) {
    var t = new e({});
    return t.urlParam = function (e) {
        var t = (new RegExp("[\\?&]" + e + "=([^&#]*)")).exec(window.location.href);
        return t == null ? undefined : t[1] == "true" ? !0 : t[1] == "false" ? !1 : isNaN(t[1]) ? t[1] || !1 : parseInt(t[1])
    }, t
}), define("lib/LibJS/signals/Signal", [], function () {
    function e() {
        this._signalID = "signal" + e.nextSignalID, this._addOnceList = {}, this._listeners = [], e.nextSignalID++, arguments.length === 0 && (this.onListenerAdded = new e(!1), this.onListenerRemoved = new e(!1))
    }

    return e.nextSignalID = 0, e.nextListenerID = 0, e.prototype.countListeners = 0, e.prototype._signalID = 0, e.prototype._addOnceList = null, e.prototype._listeners = null, e.prototype._dispatchStopped = !1, e.prototype.onListenerAdded = null, e.prototype.onListenerRemoved = null, e.prototype.addOnce = function (e, t) {
        this.add(e, t), this._addOnceList[e.listenerIDX[this._signalID]] = !0
    }, e.prototype.add = function (t, n) {
        t.listenerIDX === undefined && (t.listenerID = e.nextListenerID++, t.listenerIDX = {}, t.targets = {}), t.listenerIDX[this._signalID] === undefined && (t.listenerIDX[this._signalID] = this._listeners.length, t.targets[this._signalID] = n, this._listeners[this._listeners.length] = t, this.countListeners++, this.onListenerAdded !== null && this.onListenerAdded.dispatch())
    }, e.prototype.remove = function (e) {
        if (typeof e != "undefined" && this._checkHasId(e)) {
            var t = e.listenerIDX[this._signalID];
            this._listeners.splice(t, 1);
            for (var n = t; n < this._listeners.length; n++)this._listeners[n].listenerIDX[this._signalID] = n;
            this.countListeners--, this.onListenerRemoved !== null && this.onListenerRemoved.dispatch(), delete e.listenerIDX[this._signalID], delete e.targets[this._signalID]
        }
    }, e.prototype.dispatch = function () {
        var e = this._listeners.concat();
        for (var t = 0; !this._dispatchStopped && t < e.length; t++)e[t].apply(e[t].targets[this._signalID], arguments), this._addOnceList[t] !== undefined && (this.remove(this._listeners[t]), delete this._addOnceList[t]);
        this._dispatchStopped = !1
    }, e.prototype.stopDispatch = function () {
        this._dispatchStopped = !0
    }, e.prototype._checkHasId = function (e) {
        return e.listenerIDX !== undefined && e.listenerIDX[this._signalID] !== undefined
    }, e
}), define("managers/RenderManager", ["jquery", "Class", "core/BaseObject", "three", "Global", "stats", "RendererStats", "detector", "managers/SceneManager", "performance/PerformanceTweaker", "performance/FPS", "TextManager", "utils/URLParamUtils", "lib/LibJS/signals/Signal"], function (e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
    var d = new t({
        Extends: n,
        renderer: undefined,
        rendererWebGL: undefined,
        rendererCanvas: undefined,
        antialias: !0,
        camera: undefined,
        scene: undefined,
        stats: undefined,
        rendererStats: undefined,
        bgColor: "#ffffff",
        showStats: !1,
        forceCanvas: !1,
        clearAlpha: 1,
        alpha: !1,
        performanceScale: 1,
        performanceTweaker: undefined,
        warmupCounter: 5,
        initialize: function (e) {
            if (d.instance)throw"Singleton enforcer!";
            d.instance = this, new l, this.parent(e), i.setSize(), i.startTime = Date.now() * .001, this.camera = a.instance.camera, this.scene = a.instance.scene, this._canvasContext = null, u.webgl && !this.forceCanvas ? (this.rendererWebGL = new r.WebGLRenderer({
                antialias: this.antialias,
                preserveDrawingBuffer: !0,
                alpha: this.alpha,
                clearColor: this.bgColor
            }), this.renderer = this.rendererWebGL, i.rendererType = "webGL", this.showStats && (this.rendererStats = new THREEx.RendererStats, this.rendererStats.domElement.style.position = "absolute", this.rendererStats.domElement.style.left = "0px", this.rendererStats.domElement.style.bottom = "0px", document.body.appendChild(this.rendererStats.domElement))) : (this.warmupCounter = 25, this.rendererCanvas = new r.CanvasRenderer({
                alpha: this.clearAlpha,
                clearColor: this.bgColor
            }), this.renderer = this.rendererCanvas, this._canvasContext = this.rendererCanvas.domElement.getContext("2d"), i.rendererType = "canvas"), this.renderer.setClearColor(this.bgColor, this.clearAlpha);
            var t = document.getElementById("particles");
            t.appendChild(this.renderer.domElement), this.showStats && (this.stats = new s, this.stats.domElement.style.position = "absolute", this.stats.domElement.style.top = "0px", t.appendChild(this.stats.domElement)), window.addEventListener("resize", this.onWindowResize.bind(this), !1), this.performanceTweaker = new f({
                degradeWhen: e.qualityDegradeWhenFPSBelow,
                upgradeWhen: e.qualityUpgradeWhenFPSAbove
            }), this.performanceTweaker.onChange.add(this.adjustPerformance.bind(this)), this.hasRenderedOnce = !1, this.initText()
        },
        setParams: function (e) {
            e.bgColor || (e.bgColor = this.bgColor), this.parent(e), this.renderer && (this.renderer.setClearColor(this.bgColor.value, this.clearAlpha), this.bgColor.onChangedSignal.add(function (e) {
                this.renderer.setClearColor(e, this.clearAlpha)
            }.bind(this)))
        },
        adjustPerformance: function (t) {
            t = 1;
            if (t === this.performanceScale)return;
            this.performanceScale = t;
            var n = ~~(i.width * this.performanceScale), r = ~~(i.height * this.performanceScale);
            this.renderer.setSize(n, r), e(this.renderer.domElement).css("width", i.width + "px").css("height", i.height + "px"), this.resizeText(i.width, i.height)
        },
        onWindowResize: function () {
            i.setSize();
            var t = ~~(i.width * this.performanceScale), n = ~~(i.height * this.performanceScale);
            this.renderer.setSize(t, n), e(this.renderer.domElement).css("width", i.width + "px").css("height", i.height + "px"), this.camera.aspect = i.aspectRatio, this.camera.updateProjectionMatrix(), this.camera.far = i.cameraDistanceFar, this.resizeText(i.width, i.height)
        },
        render: function (e) {
            this.performanceTweaker.update();
            if (this.warmupCounter > 0) {
                this.warmupCounter--, this.renderer.clear();
                return
            }
            this._canvasContext && (this._canvasContext.clearRect(0, 0, i.width, i.height), this.renderer.clear()), this.renderer.render(this.scene, this.camera), this._canvasContext, this.renderText(), this.showStats && (this.stats.update(), i.rendererType == "webGL" && this.rendererStats.update(this.renderer)), this.hasRenderedOnce || (this.hasRenderedOnce = !0, this.animateInText())
        },
        screenshot: function (e, t) {
            this.renderer.setSize(e, t), this.camera.aspect = e / t, this.camera.updateProjectionMatrix(), this.camera.far = i.cameraDistanceFar, this.renderer.render(this.scene, this.camera)
        },
        screenshotCleanup: function () {
            var e = i.width, t = i.height;
            this.renderer.setSize(~~(e * this.performanceScale), ~~(t * this.performanceScale)), this.camera.aspect = e / t, this.camera.updateProjectionMatrix(), this.camera.far = i.cameraDistanceFar
        },
        toggleCanvas: function () {
            if (!this.rendererCanvas) {
                this.rendererCanvas = new r.CanvasRenderer;
                var t = document.getElementById("particles");
                t.appendChild(this.rendererCanvas.domElement), this.rendererCanvas.setClearColor(this.bgColor.value, this.clearAlpha), e(this.rendererCanvas.domElement).css("position", "absolute").css("top", "0px").css("left", "0px").css("z-index", "-10"), this.rendererCanvas.setSize(i.width, i.height)
            }
            this.renderer == this.rendererWebGL ? (i.rendererType = "canvas", e(this.rendererWebGL.domElement).css("visibility", "hidden"), e(this.rendererCanvas.domElement).css("visibility", "visible"), this.renderer = this.rendererCanvas) : (i.rendererType = "webGL", e(this.rendererWebGL.domElement).css("visibility", "visible"), e(this.rendererCanvas.domElement).css("visibility", "hidden"), this.renderer = this.rendererWebGL)
        },
        setClearAlpha: function (e) {
            this.clearAlpha = e, this.renderer.alpha = e != 1, this.renderer.setClearColor(this.bgColor.value, this.clearAlpha)
        },
        initText: function () {
            this.forceTextAntialiasing = !0, this.renderer.devicePixelRatio > 1 && (this.forceTextAntialiasing = !1);
            var t = h.urlParam("textUI"), n = t === "true" || t, r = !this.rendererWebGL;
            this.textManager = new c(i.renderText, {
                fontSize: 50,
                snap: .999,
                text: i.renderText
            }, TweenLite, null, r), this.textManager.style = parseInt(h.urlParam("textEffect") || "0", 10) || 0;
            var s = ~~(i.width * this.performanceScale), o = ~~(i.height * this.performanceScale);
            if (this.rendererWebGL) {
                var u = this.rendererWebGL.domElement;
                this.textManager.resize(i.width, i.height), this.textManager.initWebGL(u, this.forceTextAntialiasing)
            }
            this.resizeText(i.width, i.height),
			e(window).on("mousemove.textfx", function (t) {
                var n = 1;
                if (this.forceTextAntialiasing || this._canvasContext) n = this.renderer.devicePixelRatio * this.performanceScale;
                var r = e(this.renderer.domElement).offset();
                this.textManager.onTouchMove(t.pageX * n - r.left, t.pageY * n - r.top)
            }.bind(this)),
			e(window).on("touchmove", function (t) {
                var n = 1;
                if (this.forceTextAntialiasing || this._canvasContext) n = this.renderer.devicePixelRatio * this.performanceScale;
                var r = e(this.renderer.domElement).offset();
                this.textManager.onTouchMove(t.originalEvent.targetTouches[0].pageX * n - r.left, t.originalEvent.targetTouches[0].pageY * n - r.top);
            }.bind(this)),
			e(window).on("touchstart", function (t) {
                var n = 1;
                if (this.forceTextAntialiasing || this._canvasContext) n = this.renderer.devicePixelRatio * this.performanceScale;
                var r = e(this.renderer.domElement).offset();
                this.textManager.onTouchMove(t.originalEvent.targetTouches[0].pageX * n - r.left, t.originalEvent.targetTouches[0].pageY * n - r.top);
            }.bind(this)),
			e(window).on("keydown.textfx", function (e) {
                e.which === 32 && this.textManager.resetAll()
            }.bind(this)), this.textManager.color.a = 0
        },
        setTextAlpha: function (e) {
            this.textManager.color.a = e
        },
        animateInText: function () {
            this.textManager.animateIn({
                onStart: this.setTextAlpha.bind(this, 1),
                delay: 1,
                delayIncrement: .2,
                duration: .8,
                yOff: 30,
                ease: Expo.easeOut,
                onComplete: i.introTextAnimatedIn.dispatch.bind(i.introTextAnimatedIn)
            }, {ease: Linear.easeNone, duration: .3, delay: 1})
        },
        destroyText: function () {
            e(window).off("mousemove.textfx");
            e(window).off("touchmove")
        },
        resizeText: function (e, t) {
            if (!this.textManager)return;
            if (this.forceTextAntialiasing || this._canvasContext) e *= this.renderer.devicePixelRatio * this.performanceScale, t *= this.renderer.devicePixelRatio * this.performanceScale;
            var n = 1024, r = 768, s = e / n;
            s = Math.max(.75, Math.min(2.2, s)), this._canvasContext && (s *= this.performanceScale);
            var o = this.textManager;
            o.resize(e, t);
            var u = o.height * s + 155 * this.performanceScale, a = (t - o.height * s) / 2;
            o.scale = s, o.setPosition((e - o.width * s) / 2, a), o.updateCamera(), i.introTextWidth = this.getTextWidth(), i.introTextHeight = this.getTextHeight(), i.introTextResized.dispatch(i.introTextWidth, i.introTextHeight)
        },
        getTextHeight: function () {
            return Math.round(this.textManager.scale * this.textManager.height * 1 / this.performanceScale)
        },
        getTextWidth: function () {
            return Math.round(this.textManager.scale * this.textManager.width * 1 / this.performanceScale)
        },
        renderText: function () {
            this.textManager.update(Math.min(.3, i.timeSinceLastFrame * 10)),
			this.rendererWebGL ? (this.textManager.renderWebGL(),
			this.renderer.setClearColor(this.bgColor.value, this.clearAlpha)) : this._canvasContext && (this._canvasContext.fillStyle = "#dd3a20",
			this._canvasContext.strokeStyle = "#dd3a20",
			this._canvasContext.globalCompositeOperation = "source-over",
			this.textManager.renderCanvas(this._canvasContext),
			this._canvasContext.fillStyle = "#dd3a20",
			this._canvasContext.strokeStyle = "#dd3a20")
        }
    });
    return d
}), define("managers/ModelManager", ["Class", "three", "core/BaseObject", "jquery", "GUI", "Signal", "utils/ModelUtils", "utils/ColorUtils", "Global", "managers/SceneManager", "managers/LayerManager", "managers/LensOverlayManager", "managers/VectorFieldManager", "managers/LightManager", "managers/RenderManager", "objects/MeshParticles", "objects/ShardParticles"], function (e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m) {
    var g = new e({
        Extends: n,
        fileControls: undefined,
        onLoadCallback: undefined,
        godMode: !1,
        quickNav: !1,
        gui: undefined,
        choices: undefined,
        templates: undefined,
        presetName: "Default",
        preset: "Default",
        archive: "Default",
        modelData: undefined,
        toolParams: undefined,
        firstTime: !0,
        tween: !0,
        guiRebuildTimeoutID: undefined,
        onLoadCompleteSignal: undefined,
        onTransitionCompleteSignal: undefined,
        initialize: function (e) {
            if (g.instance)throw"Singleton enforcer!";
            g.instance = this, this.worldManager = e.worldManager, this.parent(e), this.onLoadCompleteSignal = new s, this.onTransitionCompleteSignal = new s;
            if (this.godMode) {
                this.quickNav = !1, this.gui = new datCustom.GUI, this.fileControls = this.gui.addFolder("File");
                var t = this.fileControls.add(this, "presetName");
                t.listen();
                var n = this.fileControls.add(this, "loadButtonFunc");
                n.name("LOAD");
                var r = this.fileControls.add(this, "saveToDB");
                r.name("SAVE");
                var i = this.fileControls.add(this, "export");
                i.name("EXPORT");
                var o = this.fileControls.add(e.worldManager, "pause");
                o.name("PAUSE");
                var u = this.fileControls.add(e.worldManager, "unpause");
                u.name("UNPAUSE");
                var f = this.fileControls.add(this, "archive");
                f.name("ARCHIVE");
                var d = this.fileControls.add(this, "unarchive");
                d.name("UNARCHIVE");
                var v = this.fileControls.add(this, "canvasify");
                v.name("CANVASIFY");
                var m = this.fileControls.add(this, "captureBG");
                m.name("Capture BG"), this.choices = {}, this.choices.test = ["eeny", "meeny", "miny", "moe"], this.loadListFromDB()
            } else this.quickNav && (this.gui = new datCustom.GUI, this.loadListFromDB());
            this.toolParams = {
                path: a.assetsPath + "images/tool/icons/",
                lights: {
                    manager: p.instance,
                    types: {
                        ambient: {icon: "lightAmbient.png"},
                        directional: {icon: "lightDirectional.png"},
                        point: {icon: "lightPoint.png"}
                    }
                },
                layers: {
                    manager: l.instance,
                    types: {
                        meshObject: {icon: "meshObject.png"},
                        meshParticles: {icon: "meshParticles.png"},
                        shardParticles: {icon: "shardParticles.png"},
                        spriteParticles: {icon: "spriteParticles.png"},
                        canvasParticles: {icon: "canvasParticles.png"}
                    }
                },
                vectorFields: {manager: h.instance, types: {vectorField: {icon: "vectorField.png"}}},
                lensOverlays: {manager: c.instance, types: {lensOverlay: {icon: "lensOverlay.png"}}}
            }
        },
        loadChoices: function (e) {
            this.choicesLoaded = !1, r.getJSON(e, this.onLoadChoicesComplete.bind(this))
        },
        loadTemplates: function (e) {
            this.templatesLoaded = !1, r.getJSON(e, this.onLoadTemplatesComplete.bind(this))
        },
        loadButtonFunc: function () {
            this.currentPreset = undefined, this.smartLoad(this.presetName)
        },
        smartLoad: function (e) {
            var t, n = e.lastIndexOf(".json");
            n != -1 && n == e.length - 5 ? (a.rendererType != "webGL" && e.lastIndexOf("CANVAS") != e.length - 11 && (e = e.replace(".json", "CANVAS.json")), t = !1) : (a.rendererType != "webGL" && e.lastIndexOf("CANVAS") != e.length - 6 && (e += "CANVAS"), t = !0);
            if (!e || this.currentPreset == e) {
                this.onLoadCompleteSignal.dispatch(), this.onTransitionCompleteSignal.dispatch();
                return
            }
            t ? this.loadFromDB(e) : this.load(e)
        },
        load: function (e) {
            e && (this.presetName = e), !this.choicesLoaded && this.godMode ? this.defferedURL = e : (this.currentPreset = e, r.getJSON(a.assetsPath + "presets/" + e, this.onLoadComplete.bind(this)))
        },
        loadFromDB: function (e) {
            e && (this.presetName = e), this.currentPreset = e, this.historyOffset = 0, r.ajax({
                type: "GET",
                url: a.particleDBLoadPath + "/" + this.presetName,
                dataType: "json",
                success: this.onLoadComplete.bind(this),
                error: function () {
                    this.onLoadCompleteSignal.dispatch(), this.onTransitionCompleteSignal.dispatch()
                }.bind(this)
            })
        },
        loadListFromDB: function () {
            r.ajax({
                type: "GET",
                url: a.particleDBLoadPath,
                dataType: "json",
                success: this.onLoadListComplete.bind(this),
                xhrFields: {withCredentials: !0},
                error: function () {
                }
            })
        },
        validateName: function (e) {
            var t = " !@#$%^&*(){}[]|\\/.,<>;:`~";
            for (var n = t.length - 1; n >= 0; n--)if (e.indexOf(t[n]) != -1)return !1;
            return !0
        },
        saveToDB: function (e, t) {
            e || (e = this.presetName);
            if (!this.validateName(e)) {
                window.alert("No spaces or commas in a name, please.");
                return
            }
            if (!t) {
                var n = r.extend(!0, {}, this.modelData);
                this.deactivate(n), t = JSON.stringify(n, null)
            }
            r.ajax({
                type: "POST",
                url: a.particleDBSavePath + "/add",
                data: {name: e, json: t},
                dataType: "json",
                success: function (e) {
                },
                xhrFields: {withCredentials: !0},
                statusCode: {
                    401: function (e) {
                        window.alert("Please go to /_ah/login to log in.")
                    }
                }
            })
        },
        "export": function (e) {
            var t = r.extend(!0, {}, this.modelData);
            return this.deactivate(t, !e), jsonString = JSON.stringify(t, null, "	"), 0, jsonString
        },
        archive: function () {
            r.ajax({
                type: "POST",
                url: a.particleDBSavePath + "/" + this.presetName + "/archive",
                data: {},
                dataType: "json",
                success: function (e) {
                },
                error: function () {
                }
            })
        },
        unarchive: function () {
            r.ajax({
                type: "POST",
                url: a.particleDBSavePath + "/" + this.presetName + "/unarchive",
                data: {},
                dataType: "json",
                success: function (e) {
                },
                error: function () {
                }
            })
        },
        copyToClipboard: function (e) {
            window.prompt("Copy to clipboard: Ctrl+C, Enter", e)
        },
        onLoadListComplete: function (e) {
            e.names.sort(), this.pruneList(e.names), this.pruneList(e.archived), this.list = e.names, e.archived.sort(), this.archivedList = e.archived, this.list.indexOf(this.presetName) != -1 && (this.preset = this.presetName);
            var t = (this.quickNav ? this.gui : this.fileControls).add(this, "preset", this.list);
            t.onChange(function (e) {
                this.presetName = e, this.quickNav && this.loadFromDB()
            }.bind(this));
            if (this.archivedList && !this.quickNav) {
                this.archivedList.indexOf(this.presetName) != -1 && (this.presetArchived = this.presetName);
                var n = this.fileControls.add(this, "archive", this.archivedList);
                n.onChange(function (e) {
                    this.presetName = e
                }.bind(this))
            }
        },
        pruneList: function (e) {
            for (var t = e.length - 1; t >= 0; t--) {
                var n = e[t].lastIndexOf("CANVAS") == e[t].length - 6;
                a.rendererType == "webGL" ? n && e.splice(t, 1) : n || e.splice(t, 1)
            }
        },
        onLoadChoicesComplete: function (e) {
            this.choices = e, this.choicesLoaded = !0, this.defferedURL && (this.load(this.defferedURL), delete this.defferedURL)
        },
        onLoadTemplatesComplete: function (e) {
            this.templates = e, this.templatesLoaded = !0
        },
        onLoadComplete: function (e) {
            if (d.instance._canvasContext && this.worldManager.degradeAmount && e.layers)for (var n in e.layers) {
                var r = e.layers[n];
                r && r.total && (r.total.value /= this.worldManager.degradeAmount)
            }
            this.patchData(e), o.recursiveEncapsulateAndActivate(e);
            var i = 0;
            if (this.modelData) {
                var s = 0, u = 2;
                i = o.recursiveCopy(this.modelData, e, this.tween, s, u, 0) + u + .1, this.tween || (i = .1);
                for (var a in e)if (this.toolParams.hasOwnProperty(a)) {
                    var f = this.toolParams[a], l = e[a], c = this.modelData[a];
                    for (var h in l)c.hasOwnProperty(h) || (o.recursiveEncapsulateAndActivate(l[h]), c.collectionSignals.add.dispatch(h, l[h]));
                    for (var h in c)h != "collectionSignals" && (l.hasOwnProperty(h) || c.collectionSignals.remove.dispatch(h))
                }
                if (this.godMode && this.guiRebuildTimeoutID === undefined) {
                    for (h in this.modelData)this.gui.removeFolder(h);
                    this.gui.addFolder("TWEENING. PLEASE WAIT.")
                }
            } else {
                this.modelData = e;
                for (var a in e)this.injectCollectionSignals(a, e[a])
            }
            this.onLoadCallback && (this.onLoadCallback(this.modelData), this.onLoadCallback = undefined), this.godMode && (this.guiRebuildTimeoutID !== undefined && clearTimeout(this.guiRebuildTimeoutID), this.guiRebuildTimeoutID = setTimeout(function () {
                var e = new t.Color;
                e.setHSL(0, .75, .05), this.gui.removeFolder("TWEENING. PLEASE WAIT.", !0), this.activate(this.modelData, this.gui, e, 2, .05, .05), this.guiRebuildTimeoutID !== undefined && (this.guiRebuildTimeoutID = undefined)
            }.bind(this), i * 1e3)), setTimeout(function () {
                this.onTransitionCompleteSignal.dispatch()
            }.bind(this), i * 1e3), this.onLoadCompleteSignal.dispatch()
        },
        activate: function (e, t, n, i, s, o) {
            t.color = {hex: "#" + n.getHexString(), dH: i, dS: s, dL: o};
            var a = r(t.__ul.children[0]);
            a.css("background-color", t.color.hex), a.css("position", "relative"), t.data = e, this.injectTools(t), u.incrementL(n, o), i *= .25;
            for (key in e) {
                var f = e[key];
                if (!(f instanceof Array) && f instanceof Object && !this.addValueObject(f, key, t)) {
                    var l;
                    this.godMode && (u.incrementH(n, i), l = t.addFolder(key), l.parentFolder = t), this.activate(f, l, n.clone(), i, s, o)
                }
            }
            this.injectHelpers(t)
        },
        injectCollectionSignals: function (e, t) {
            this.toolParams.hasOwnProperty(e) && (t.hasOwnProperty("collectionSignals") || (t.collectionSignals = {
                doNotGUI: !0,
                doNotEncapsulate: !0,
                doNotExport: !0,
                add: new s,
                remove: new s
            }))
        },
        injectTools: function (e) {
            if (this.toolParams.hasOwnProperty(e.name)) {
                var n = this.toolParams[e.name].types;
                e.manager = this.toolParams[e.name].manager, e.collection = this.modelData[e.name];
                var i = [];
                for (var s in n) {
                    var u = n[s], a = r(document.createElement("div"));
                    a.css("display", "block").css("width", "20px").css("height", "20px").css("background-image", "url(" + this.toolParams.path + u.icon + ")").css("position", "relative").css("right", i.length * 23 + 3 + "px").css("top", "3px").css("position", "absolute"), a.data = "test", a.bind("click", {type: s}, function (n) {
                        var i = window.prompt("Name your new object.", "thing");
                        if (i)if (e.collection.hasOwnProperty(i)) window.alert("Already exists. Try another name."); else {
                            var s = r.extend(!0, {}, this.templates[e.name][n.data.type]);
                            o.recursiveEncapsulateAndActivate(s);
                            var u = e.addFolder(i);
                            u.parentFolder = e, this.activate(s, u, new t.Color(e.color.hex), e.color.dH, e.color.sH, e.color.lH), e.collection.collectionSignals.add.dispatch(i, s)
                        }
                        n.stopPropagation(), n.preventDefault()
                    }.bind(this)), i.push(a)
                }
                var f = r(e.__ul.children[0]);
                f.append(i)
            } else if (e.hasOwnProperty("parentFolder") && this.toolParams.hasOwnProperty(e.parentFolder.name)) {
                var a = r(document.createElement("div"));
                a.css("display", "block").css("width", "20px").css("height", "20px").css("background-image", "url(" + this.toolParams.path + "delete.png" + ")").css("position", "relative").css("right", "3px").css("top", "3px").css("position", "absolute"), a.bind("click", function (t) {
                    t.stopPropagation(), t.preventDefault(), window.confirm("Are you sure you want to delete this?") && (e.parentFolder.data.collectionSignals.remove.dispatch(e.name), e.parentFolder.removeFolder(e.name))
                });
                var f = r(e.__ul.children[0]);
                f.append(a)
            }
        },
        injectHelpers: function (e) {
            if (e.name == "blendMode") {
                var t, n, r;
                for (var i = e.__controllers.length - 1; i >= 0; i--) {
                    var s = e.__controllers[i];
                    s.listen();
                    switch (s.object.choicesSource) {
                        case"blendSrc":
                            t = s;
                            break;
                        case"blendDst":
                            n = s;
                            break;
                        case"blendEquation":
                            r = s
                    }
                }
                var o = {
                    jumpToCombo: .5,
                    max: 215,
                    controllerSrc: t,
                    controllerDst: n,
                    controllerEquation: r,
                    onChange: function (e) {
                        t.object.value = this.choices.blendSrc[~~e % 9], n.object.value = this.choices.blendDst[~~(e / 9) % 8], r.object.value = this.choices.blendEquation[~~(e / 72) % 3]
                    }
                }, u = new Array;
                for (var i = o.max; i >= 0; i--)u.push(i);
                var a = [11, 29, 47, 56, 155, 191, 200], f = e.add(o, "jumpToCombo", 0, o.max, .25);
                f.onChange(o.onChange.bind(this)), f.name("jump");
                var f = e.add(o, "jumpToCombo", u);
                f.onChange(o.onChange.bind(this)), f.name("jump");
                var f = e.add(o, "jumpToCombo", a);
                f.onChange(o.onChange.bind(this)), f.name("jump (tween support)")
            }
        },
        addValueObject: function (e, t, n) {
            var i = !1, s = "default";
            if (e.hasOwnProperty("doNotGUI"))return !0;
            if (e.hasOwnProperty("value")) {
                i = !0, e.value !== "" && !isNaN(e.value) && e.value !== !0 && e.value !== !1 ? (e.value = parseFloat(e.value), e.hasOwnProperty("min") && e.hasOwnProperty("max") && e.hasOwnProperty("step") ? (e.min = parseFloat(e.min), e.max = parseFloat(e.max), e.step = parseFloat(e.step), s = "numberWithRestrictions") : s = "number") : e.hasOwnProperty("choicesSource") ? s = "dropdown" : e.value.length == 7 && e.value[0] == "#" ? s = "color" : e.value == "true" ? (s = "boolean", e.value = !0) : e.value == "false" && (s = "boolean", e.value = !1);
                if (this.godMode) {
                    var o;
                    if (i) {
                        switch (s) {
                            case"number":
                                o = n.add(e, "value");
                                break;
                            case"numberWithRestrictions":
                                o = n.add(e, "value").min(e.min).max(e.max).step(e.step);
                                break;
                            case"dropdown":
                                o = n.add(e, "value", this.choices[e.choicesSource]);
                                break;
                            case"color":
                                o = n.addColor(e, "value");
                                break;
                            default:
                                o = n.add(e, "value")
                        }
                        o.name(t), r(o.__li).css("background-color", n.color.hex)
                    }
                }
                return t == "total" && o.listen(), !0
            }
            return !1
        },
        deactivate: function (e, t) {
            o.recursiveDeactivateAndDecapsulate(e, t)
        },
        screenshot: function (e, t, n) {
            t === undefined && n === undefined ? t = n = 1024 : (n = n !== undefined ? n : t, t = t !== undefined ? t : n), d.instance.screenshot(t, n), e = e.replace(".jpg", ".jpeg");
            var r = e.substring(e.lastIndexOf(".") + 1, e.length);
            if (r != "png" && r != "jpeg")throw"Unknown image format";
            var i = "image/" + r, s = d.instance.renderer.domElement.toDataURL(i, 1);
            this.upload(e, s), setTimeout(function () {
            }, 500), d.instance.screenshotCleanup()
        },
        upload: function (e, t) {
            var n = e.substring(e.indexOf(".") + 1, e.length), i = e.substring(0, e.lastIndexOf("/") + 1),
                s = e.substring(e.lastIndexOf("/") + 1, e.lastIndexOf("."));
            r.ajax({
                type: "POST",
                url: "static/upload.php",
                data: {uploadPath: a.phpUploadPath, filePath: i, fileName: s, fileFormat: n, fileData: t}
            }).done(function () {
            })
        },
        canvasify: function () {
            c.instance.preventRotation(), a.setSize(1024, 1024), c.instance.onWindowResize(), l.instance.hideAll();
            var e = a.assetsAutoGeneratedSubPath, t = e + this.presetName + "/bg.jpeg";
            this.screenshot(t, 1024, 1024), c.instance.allowRotation(), c.instance.hideAll();
            var n = r.extend(!0, {}, this.modelData);
            this.deactivate(n), n.lights = {}, n.layers = {}, n.lensOverlays = {}, d.instance.setClearAlpha(0);
            var i = l.instance.collection, s = f.instance.camera.fov, o = f.instance.camera;
            for (var u in i) {
                var h = i[u], p = 0, g = 1, y = 1, b = h.total.value;
                h instanceof v ? (p = 6, y = 1.5, g = .5) : h instanceof m && (p = 8, y = 4, g = .125), o.fov = s / y, o.updateProjectionMatrix(), o.far = a.cameraDistanceFar;
                var w = 0;
                for (var E = 1; E <= p; E++) {
                    var S = ~~(E / p * b * g);
                    h.showOne();
                    var x = e + this.presetName + "/" + u + "_" + E + ".png";
                    this.screenshot(x), h.hide();
                    var T = r.extend(!0, {}, this.templates.layers.canvasParticles);
                    T.image = x, T.physics.vectorField = h.physics.vectorField.value, T.physics.drag.value = h.physics.drag.value, T.physics.responsiveness.value = h.physics.responsiveness.value, T.total.value = S - w, T.scale.max.value = T.scale.min.value = .15 / y, n.layers[u + E] = T, w = S
                }
                h.hide()
            }
            var N = r.extend(!0, {}, this.templates.lensOverlays.lensOverlay);
            N.z.value = -2999, N.image = t, N.fitToScreenKeepAspect = !0, n.lensOverlays.bg = N, this.upload(e + this.presetName + "/presetCANVAS.json", JSON.stringify(n, null, "	")), this.saveToDB(this.presetName + "CANVAS", JSON.stringify(n, null)), d.instance.setClearAlpha(1), c.instance.showAll(), l.instance.showAll(), a.setSize(), o.fov = s, o.updateProjectionMatrix(), o.far = a.cameraDistanceFar, c.instance.onWindowResize()
        },
        captureBG: function () {
            this.screenshot(this.presetName + "-BG.png", 1920, 1080)
        },
        getOverrideLayer: function (e) {
            return this.templates.overrides.layers[a.rendererType][e]
        },
        patchData: function (e) {
            e.tiltSettings || (e.tiltSettings = {
                speed: {value: .1, min: 0, max: 1, step: .001},
                panRange: {value: 1.2, min: 0, max: 5, step: .001},
                angleRange: {value: 2, min: 0, max: 5, step: .001},
                rangeScaleX: {value: 1, min: 0, max: 1, step: .001},
                rangeScaleY: {value: .5, min: 0, max: 1, step: .001}
            })
        }
    });
    return g
}), define("utils/ArrayUtils", ["Class"], function (e) {
    var t = new e({});
    return t.findIncrementalValue = function (e, t, n) {
        var r = t.indexOf(e);
        return r += n, r += t.length, r %= t.length, t[r]
    }, t
}), define("utils/BlendModeExplorer", ["Class", "three", "core/BaseObject", "Global", "utils/ArrayUtils"], function (e, t, n, r, i) {
    var s = new e({
        Extends: n, target: undefined, initialize: function (e) {
            this.parent(e), window.addEventListener("mousewheel", this.onMouseWheelHandler.bind(this), !1), window.addEventListener("DOMMouseScroll", this.onMouseWheelHandler.bind(this), !1), window.addEventListener("keypress", this.onKeyboardPressHandler.bind(this), !1)
        }, update: function () {
            this.target
        }, onMouseWheelHandler: function (e) {
            var e = window.event || e, t = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));
            t > 0 ? t = 1 : t < 0 && (t = -1);
            var n = this.target.material, o;
            r.keyboard.pressed("shift") && r.keyboard.pressed("alt") ? n.blendEquation = i.findIncrementalValue(n.blendEquation, s.equations, t) : r.keyboard.pressed("shift") ? n.blendSrc = i.findIncrementalValue(n.blendSrc, s.srcs, t) : r.keyboard.pressed("alt") && (n.blendDst = i.findIncrementalValue(n.blendDst, s.dsts, t))
        }, onKeyboardPressHandler: function (e) {
            var t = this.target.material;
            switch (e.keyCode) {
                case 112:
                    0, 0, 0
            }
        }
    });
    return s.equations = [t.AddEquation, t.SubtractEquation, t.ReverseSubtractEquation], s.srcs = [t.ZeroFactor, t.OneFactor, t.SrcAlphaFactor, t.OneMinusSrcAlphaFactor, t.DstAlphaFactor, t.OneMinusDstAlphaFactor, t.DstColorFactor, t.OneMinusDstColorFactor, t.SrcAlphaSaturateFactor], s.dsts = [t.ZeroFactor, t.OneFactor, t.SrcColorFactor, t.OneMinusSrcColorFactor, t.SrcAlphaFactor, t.OneMinusSrcAlphaFactor, t.DstAlphaFactor, t.OneMinusDstAlphaFactor], s.equationLabels = ["AddEquation", "SubtractEquation", "ReverseSubtractEquation"], s.srcLabels = ["ZeroFactor", "OneFactor", "SrcAlphaFactor", "OneMinusSrcAlphaFactor", "DstAlphaFactor", "OneMinusDstAlphaFactor", "DstColorFactor", "OneMinusDstColorFactor", "SrcAlphaSaturateFactor"], s.dstLabels = ["ZeroFactor", "OneFactor", "SrcColorFactor", "OneMinusSrcColorFactor", "SrcAlphaFactor", "OneMinusSrcAlphaFactor", "DstAlphaFactor", "OneMinusDstAlphaFactor"], s
});
var THREEx = THREEx || {};
THREEx.KeyboardState = function () {
    this.keyCodes = {}, this.modifiers = {};
    var e = this;
    this._onKeyDown = function (t) {
        e._onKeyChange(t, !0)
    }, this._onKeyUp = function (t) {
        e._onKeyChange(t, !1)
    }, document.addEventListener("keydown", this._onKeyDown, !1), document.addEventListener("keyup", this._onKeyUp, !1)
}, THREEx.KeyboardState.prototype.destroy = function () {
    document.removeEventListener("keydown", this._onKeyDown, !1), document.removeEventListener("keyup", this._onKeyUp, !1)
}, THREEx.KeyboardState.MODIFIERS = ["shift", "ctrl", "alt", "meta"], THREEx.KeyboardState.ALIAS = {
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    space: 32,
    pageup: 33,
    pagedown: 34,
    tab: 9
}, THREEx.KeyboardState.prototype._onKeyChange = function (e, t) {
    var n = e.keyCode;
    this.keyCodes[n] = t, this.modifiers.shift = e.shiftKey, this.modifiers.ctrl = e.ctrlKey, this.modifiers.alt = e.altKey, this.modifiers.meta = e.metaKey
}, THREEx.KeyboardState.prototype.pressed = function (e) {
    var t = e.split("+");
    for (var n = 0; n < t.length; n++) {
        var r = t[n], i;
        THREEx.KeyboardState.MODIFIERS.indexOf(r) !== -1 ? i = this.modifiers[r] : Object.keys(THREEx.KeyboardState.ALIAS).indexOf(r) != -1 ? i = this.keyCodes[THREEx.KeyboardState.ALIAS[r]] : i = this.keyCodes[r.toUpperCase().charCodeAt(0)];
        if (!i)return !1
    }
    return !0
}, define("KeyboardState", function () {
}), define("managers/WorldManager", ["Class", "three", "core/BaseObject", "Global", "jquery", "managers/ModelManager", "managers/SceneManager", "managers/LayerManager", "managers/LensOverlayManager", "managers/VectorFieldManager", "managers/ColliderManager", "managers/LightManager", "managers/RenderManager", "managers/TiltManager", "utils/BlendModeExplorer", "detector", "KeyboardState", "utils/ModelUtils", "utils/URLParamUtils"], function (e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y) {
    var b = new e({
        Extends: n,
        godMode: !1,
        quickNav: !1,
        showStats: !1,
        defaultPreset: "galaxy",
        forceCanvas: !1,
        lastMoto: "galaxy",
        doNotEncapsulate: !0,
        doNotGUI: !0,
        waitBeforeMasterControl: 10,
        delayParticlesFrames: 100,
        animationActive: !1,
        _mcDesiredPreset: "galaxy",
        _currentPage: "",
        initialize: function (e) {
            this.particlesPaused = !1, e.alpha = y.urlParam("alpha") || e.alpha, e.godMode = y.urlParam("godMode") || e.godMode, e.quickNav = y.urlParam("quickNav") || e.quickNav, e.forceCanvas = y.urlParam("forceCanvas") || e.forceCanvas, e.showStats = y.urlParam("showStats") || e.showStats, e.defaultPreset = y.urlParam("preset") || e.defaultPreset, e.qualityDegradeWhenFPSBelow = y.urlParam("fpsLow") || e.qualityDegradeWhenFPSBelow, e.qualityUpgradeWhenFPSAbove = y.urlParam("fpsHigh") || e.qualityUpgradeWhenFPSAbove, this.degradeAmount = e.degradeAmount;
            if (b.instance)throw"Singleton enforcer!";
            b.instance = this, this.parent(e), t.ImageUtils.crossOrigin = "", r.assetsPath = e.assetsPath || r.assetsPath, r.assetsAutoGeneratedPath = e.assetsAutoGeneratedPath || r.assetsAutoGeneratedPath, r.startTime = Date.now() * .001, r.keyboard = new THREEx.KeyboardState, r.width = i(document).width(), r.height = i(document).height(), r.widthHalf = r.width * .5, r.heightHalf = r.height * .5, r.aspectRatio = r.width / r.height, r.worldManager = this;
            var n = new p({}), l = new o({
                cameraFOV: 37,
                distanceNear: 1,
                distanceFar: 3e3,
                camDefaultRotation: {x: 0, y: 0, z: 0},
                camDefaultPosition: {x: 0, y: 0, z: 400}
            }), d = new f, v = new h({
                showStats: this.showStats,
                forceCanvas: this.forceCanvas,
                qualityDegradeWhenFPSBelow: e.qualityDegradeWhenFPSBelow,
                qualityUpgradeWhenFPSAbove: e.qualityUpgradeWhenFPSAbove,
                alpha: e.alpha,
                bgColor: e.bgColor,
                warmupCounter: e.warmupCounter
            }), m = new a({camera: o.instance.camera}), g = new u({scene: o.instance.scene}), w = new c({});
            w.onLightResetSignal.add(function () {
                g.onLightReset()
            });
            var E = new s({
                onLoadCallback: this.loadActivePreset.bind(this),
                godMode: this.godMode,
                quickNav: this.quickNav,
                tween: e.tween,
                worldManager: this
            });
            this.godMode && (s.instance.loadChoices(r.assetsPath + "presets/choices.json"), s.instance.loadTemplates(r.assetsPath + "presets/templates.json")), s.instance.smartLoad(this.defaultPreset), h.instance.onWindowResize(), a.instance.onWindowResize(), this.animateBound = this.animate.bind(this), requestAnimationFrame(this.animateBound)
        },
        loadActivePreset: function (e) {
            this.data = e, o.instance.setParams(e.sceneProperties), p.instance.setParams(e.tiltSettings), h.instance.setParams(e.sceneProperties), f.instance.addMany(e.vectorFields), c.instance.addMany(e.lights), a.instance.addMany(e.lensOverlays), u.instance.addMany(e.layers)
        },
        animate: function (e, t) {
            var n = Date.now() * .001 - r.startTime;
            r.timeSinceLastFrame = n - r.now, r.now = n, this.delayParticlesFrames > 0 ? this.delayParticlesFrames-- : this.animationActive = !0, this.paused || (this.animationActive && p.instance.update(), o.instance.update(), this.blendModeExplorer && this.blendModeExplorer.update(), a.instance.update(), this.animationActive && f.instance.update(), h.instance.render(this.particlesPaused)), t || requestAnimationFrame(this.animateBound)
        },
        pause: function () {
            this.paused = !0
        },
        unpause: function () {
            this.paused = !1
        },
        renderOnce: function () {
            var e = this.paused, t = this.particlesPaused;
            this.paused = !1, this.particlesPaused = !1, this.animate(0, !0), this.paused = e, this.particlesPaused = t
        }
    });
    return b
}), define("ui/BorderButtons", ["Class", "jquery", "TweenLite", "TimelineLite"], function (e, t, n, r) {
    var i = new e({
        width: null,
        height: null,
        paddingX: null,
        paddingY: null,
        direction: null,
        txt: null,
        img: null,
        offset: 3,
        topMask: null,
        rightMask: null,
        bottomMask: null,
        leftMask: null,
        button: null,
        buttonTimeline: null,
        initialize: function (e, t, n, r, i, s, o, u) {
            return this.width = e, this.height = t, this.button = n, this.direction = r, this.txt = i, this.paddingX = s ? s : 0, this.paddingY = o ? o : 0, this.img = u, this.init(), this.animate(), this.button
        },
        init: function () {
            this.txt, this.topMask = t("<div>").addClass("btnBorder").appendTo(this.button), this.rightMask = t("<div>").addClass("btnBorder").appendTo(this.button), this.bottomMask = t("<div>").addClass("btnBorder").appendTo(this.button), this.leftMask = t("<div>").addClass("btnBorder").appendTo(this.button), t(this.button).css({padding: this.paddingY + "px " + this.paddingX + "px"}), this.button.width(this.width), this.button.height(this.height), this.width -= this.offset, this.height -= this.offset, this.img && (this.bg = t("<img>").attr("src", this.img).appendTo(this.button))
        },
        animate: function () {
            var e = .1, t = this.width + this.paddingX * 2;
            this.height = this.height + this.paddingY * 2, this.buttonTimeline = new r({paused: !0}), this.buttonTimeline.add(n.fromTo(this.button, .2, {opacity: 0}, {
                opacity: 100,
                delay: .35
            }));
            switch (this.direction) {
                case"right":
                    this.buttonTimeline.add(n.fromTo(this.topMask, e, {
                        width: t + 4 * this.offset,
                        right: -this.offset,
                        top: -this.offset
                    }, {
                        width: 0,
                        delay: -0.2
                    })), this.buttonTimeline.add(n.fromTo(this.rightMask, e / 2, {
                        height: this.height + 2 * this.offset,
                        left: t + this.offset,
                        bottom: -this.offset
                    }, {height: 0})), this.buttonTimeline.add(n.fromTo(this.bottomMask, e / 1.2, {
                        width: t + this.offset,
                        left: 0,
                        top: this.height + this.offset
                    }, {width: 0})), this.buttonTimeline.add(n.fromTo(this.leftMask, e / 3, {
                        height: this.height + 2 * this.offset,
                        left: -this.offset,
                        top: 0
                    }, {height: 0}));
                    break;
                case"left":
                    this.buttonTimeline.add(n.fromTo(this.topMask, e, {
                        width: t + 4 * this.offset,
                        left: -this.offset,
                        top: -this.offset
                    }, {
                        width: 0,
                        delay: -0.2
                    })), this.buttonTimeline.add(n.fromTo(this.leftMask, e / 2, {
                        height: this.height + 2 * this.offset,
                        left: -this.offset,
                        bottom: -this.offset
                    }, {height: 0})), this.buttonTimeline.add(n.fromTo(this.bottomMask, e / 1.2, {
                        width: t + this.offset,
                        right: 0,
                        top: this.height + this.offset
                    }, {width: 0})), this.buttonTimeline.add(n.fromTo(this.rightMask, e / 3, {
                        height: this.height + 2 * this.offset,
                        left: t + this.offset,
                        top: 0
                    }, {height: 0}));
                    break;
                case"up":
                    this.buttonTimeline.add(n.fromTo(this.rightMask, e / 1.2, {
                        height: this.height + 2 * this.offset,
                        left: t + this.offset,
                        top: 0
                    }, {
                        height: 0,
                        delay: -0.2
                    })), this.buttonTimeline.add(n.fromTo(this.topMask, e, {
                        width: t + 3 * this.offset,
                        left: -this.offset,
                        top: -this.offset
                    }, {
                        width: 0,
                        delay: -0.05
                    })), this.buttonTimeline.add(n.fromTo(this.leftMask, e / 2, {
                        height: this.height + 2 * this.offset,
                        left: -this.offset,
                        bottom: -this.offset
                    }, {height: 0})), this.buttonTimeline.add(n.fromTo(this.bottomMask, e / 1.2, {
                        width: t + 2 * this.offset,
                        right: 0,
                        top: this.height + this.offset
                    }, {width: 0}));
                    break;
                case"down":
                    this.buttonTimeline.add(n.fromTo(this.leftMask, e / 1.2, {
                        height: this.height + 2 * this.offset,
                        left: -this.offset,
                        bottom: 0
                    }, {
                        height: 0,
                        delay: -0.2
                    })), this.buttonTimeline.add(n.fromTo(this.bottomMask, e, {
                        width: t + 2 * this.offset,
                        right: 0,
                        top: this.height + this.offset
                    }, {width: 0})), this.buttonTimeline.add(n.fromTo(this.rightMask, e / 2, {
                        height: this.height + 2 * this.offset,
                        left: t + this.offset,
                        top: 0
                    }, {height: 0})), this.buttonTimeline.add(n.fromTo(this.topMask, e / 1.2, {
                        width: t + 2 * this.offset,
                        left: 0,
                        top: -this.offset
                    }, {width: 0}));
                    break;
                default:
            }
            this.img && this.buttonTimeline.add(n.fromTo(this.bg, .8, {opacity: 0}, {
                opacity: 1,
                delay: -0.1
            })), this.buttonTimeline.play()
        }
    });
    return i
}), define("utils/GA", ["Class", "Global"], function (e, t) {
    "use strict";
    var n, r = new e({
        pageID: null, initialize: function () {
            n = this
        }, init: function () {

        }, setPageID: function (e) {
            this.pageID = e
        }, trackEvent: function () {
            try {
                __gaTracker && __gaTracker("send", {
                    hitType: "event",
                    eventCategory: arguments[0],
                    eventAction: arguments[1],
                    eventLabel: arguments[2]
                })
            } catch (e) {
                0
            }
        }, trackWorkItem: function (e) {
            this.trackEvent("Work", "WorkClick", e.toLowerCase())
        }
    });
    return new r
}), define("utils/FullscreenController", ["Class", "lib/LibJS/signals/Signal", "Global"], function (e, t, n) {
    var r = new e({
        newSpec: !1,
        available: !0,
        target: null,
        prefix: "",
        active: !1,
        onChange: null,
        initialize: function (e) {
            this.target = e, this.findPrefix(), this.onChange = new t, document.addEventListener(this.prefix + "fullscreenchange", this._onChange.bind(this))
        },
        findPrefix: function () {
            if (typeof document["exitFullscreen"] != "undefined") this.newSpec = !0; else {
                var e = ["webkit", "moz", "ms", "o"];
                for (var t = 0; t < e.length; t++)if (typeof document[e[t] + "CancelFullScreen"] != "undefined") {
                    this.prefix = e[t];
                    return
                }
                typeof document["cancelFullScreen"] == "undefined" && (this.available = !1)
            }
        },
        _onChange: function () {
            this.newSpec ? document["fullscreenElement"] == null && this.onChange.dispatch() : document[this.prefix != "" ? this.prefix + "FullScreenElement" : "fullScreenElement"] == null && this.onChange.dispatch()
        },
        start: function (e) {
            n.videoInFullScreen = !0;
            var t = e != null ? e : this.target;
            this.newSpec ? t.requestFullscreen() : t[this.prefix != "" ? this.prefix + "RequestFullScreen" : "requestFullScreen"](), n.onVideoFullScreenChange.dispatch()
        },
        stop: function () {
            n.videoInFullScreen = !1, this.newSpec ? document.exitFullscreen() : document[this.prefix != "" ? this.prefix + "CancelFullScreen" : "cancelFullScreen"](), n.onVideoFullScreenChange.dispatch()
        },
        active: function () {
            return this.newSpec ? document["fullscreenElement"] != null : this.prefix == "" ? document.fullScreen : typeof document[this.prefix + "IsFullScreen"] != "undefined" ? document[this.prefix + "IsFullScreen"] : document[this.prefix + "FullScreen"]
        }
    });
    return r
}), define("libjs/utils/Util", [], function () {
    var e = function () {
        var t = {
            PRODUCTION: "production",
            DEV: "dev",
            env: "production",
            support: {isHandheld: !1, isIPhone: !1, isRetina: !1, prefix: null}
        };
        /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) && (t.support.isHandheld = !0, t.support.isIPhone = /iPhone/.test(navigator.userAgent), t.support.isAndroid = /Android/.test(navigator.userAgent), t.support.isWebOS = /webOS/.test(navigator.userAgent), t.support.isIPad = /iPad/.test(navigator.userAgent), t.support.isIPod = /iPod/.test(navigator.userAgent), t.support.isBlackberry = /BlackBerry/.test(navigator.userAgent)), window.devicePixelRatio > 1 && (t.support.isRetina = !0);
        var n = window.getComputedStyle(document.documentElement, ""),
            r = (Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/) || n.OLink === "" && ["", "o"])[1],
            i = "WebKit|Moz|MS|O".match(new RegExp("(" + r + ")", "i"))[1];
        return t.support.prefix = {
            dom: i,
            lowercase: r,
            css: "-" + r + "-",
            js: r[0].toUpperCase() + r.substr(1)
        }, t.truncate = function (e, t, n) {
            var r = e.substring(0, t);
            return e.length > t && n !== !1 && (r += "&#8230;"), r
        }, t.defer = function (e) {
            var t = Array.prototype.slice.call(arguments, 1);
            return setTimeout(function () {
                e.apply(null, t)
            }, 0)
        }, t.getImageURL = function (t) {
            return e.support.isRetina && t && t.length ? t.replace(/(\.\w+$)/, "@2x$1") : t
        }, t.format = function () {
            var e = arguments;
            return e.length == 0 ? "" : e.length == 1 ? e[0] : e[0].replace(/{(\d+)}/g, function (t, n) {
                return typeof e[+n + 1] != "undefined" ? e[+n + 1] : t
            })
        }, t.shuffle = function (e) {
            var t = e.length, n, r;
            while (t--)r = Math.random() * t | 0, n = e[t], e[t] = e[r], e[r] = n;
            return e
        }, t
    }();
    return e
}), define("ui/VideoControls", ["Class", "jquery", "utils/FullscreenController", "Global", "libjs/utils/Util", "utils/GA"], function (e, t, n, r, i, s) {
    return false;
}), (window._gsQueue || (window._gsQueue = [])).push(function () {
    "use strict";
    var e = /(\d|\.)+/g, t = {
        aqua: [0, 255, 255],
        lime: [0, 255, 0],
        silver: [192, 192, 192],
        black: [0, 0, 0],
        maroon: [128, 0, 0],
        teal: [0, 128, 128],
        blue: [0, 0, 255],
        navy: [0, 0, 128],
        white: [255, 255, 255],
        fuchsia: [255, 0, 255],
        olive: [128, 128, 0],
        yellow: [255, 255, 0],
        orange: [255, 165, 0],
        gray: [128, 128, 128],
        purple: [128, 0, 128],
        green: [0, 128, 0],
        red: [255, 0, 0],
        pink: [255, 192, 203],
        cyan: [0, 255, 255],
        transparent: [255, 255, 255, 0]
    }, n = function (e, t, n) {
        return e = e < 0 ? e + 1 : e > 1 ? e - 1 : e, (e * 6 < 1 ? t + (n - t) * e * 6 : e < .5 ? n : e * 3 < 2 ? t + (n - t) * (2 / 3 - e) * 6 : t) * 255 + .5 | 0
    }, r = function (r) {
        var i = {};
        i.format = "whoCares";
        if (r === "" || r == null || r === "none")return i.color = t.transparent, i;
        if (t[r])return i.color = t[r], i;
        if (typeof r == "number")return i.color = [r >> 16, r >> 8 & 255, r & 255], i;
        if (r.charAt(0) === "#")return i.format = "hex", r.length === 4 && (r = "#" + r.charAt(1) + r.charAt(1) + r.charAt(2) + r.charAt(2) + r.charAt(3) + r.charAt(3)), r = parseInt(r.substr(1), 16), i.color = [r >> 16, r >> 8 & 255, r & 255], i;
        if (r.substr(0, 3) === "hsl") {
            r = r.match(e);
            var s = Number(r[0]) % 360 / 360, o = Number(r[1]) / 100, u = Number(r[2]) / 100,
                a = u <= .5 ? u * (o + 1) : u + o - u * o, f = u * 2 - a;
            return r.length > 3 && (r[3] = Number(r[3])), r[0] = n(s + 1 / 3, f, a), r[1] = n(s, f, a), r[2] = n(s - 1 / 3, f, a), i.color = r, i
        }
        return i.color = r.match(e) || t.transparent, i
    };
    window._gsDefine.plugin({
        propName: "colorProps", priority: -1, API: 2, init: function (e, t, n) {
            this._target = e;
            var i, s, o, u;
            for (i in t) {
                var a = r(t[i]);
                o = a.color, this._firstPT = u = {
                    _next: this._firstPT,
                    p: i,
                    f: typeof e[i] == "function",
                    n: i,
                    r: !1
                }, this._format = a.format, s = r(u.f ? e[i.indexOf("set") || typeof e["get" + i.substr(3)] != "function" ? i : "get" + i.substr(3)]() : e[i]).color, u.s = Number(s[0]), u.c = Number(o[0]) - u.s, u.gs = Number(s[1]), u.gc = Number(o[1]) - u.gs, u.bs = Number(s[2]), u.bc = Number(o[2]) - u.bs;
                if (u.rgba = s.length > 3 || o.length > 3) u.as = s.length < 4 ? 1 : Number(s[3]), u.ac = (o.length < 4 ? 1 : Number(o[3])) - u.as;
                u._next && (u._next._prev = u)
            }
            return !0
        }, set: function (e) {
            var t = this._firstPT, n;
            while (t) {
                if (this._format == "hex") {
                    n = (t.s + e * t.c << 16 | t.gs + e * t.gc << 8 | t.bs + e * t.bc).toString(16);
                    while (n.length < 6)n = "0" + n;
                    n = "#" + n
                } else n = (t.rgba ? "rgba(" : "rgb(") + (t.s + e * t.c >> 0) + ", " + (t.gs + e * t.gc >> 0) + ", " + (t.bs + e * t.bc >> 0) + (t.rgba ? ", " + (t.as + e * t.ac) : "") + ")";
                t.f ? this._target[t.p](n) : this._target[t.p] = n, t = t._next
            }
        }
    })
}), window._gsDefine && window._gsQueue.pop()(), define("ColorPropsPlugin", ["TweenLite"], function (e) {
    return function () {
        var t, n;
        return t || e.ColorPropsPlugin
    }
}(this)), require(["jquery", "Global", "managers/WorldManager", "ui/BorderButtons", "TweenLite", "utils/GA", "underscore", "ui/VideoControls", "ColorPropsPlugin"], function (e, t, n, r, i, s, o, u) {
    function f(e) {
        var t = (new RegExp("[\\?&]" + e + "=([^&#]*)")).exec(window.location.href);
        return t == null ? undefined : t[1] == "true" ? !0 : t[1] == "false" ? !1 : isNaN(t[1]) ? t[1] || !1 : parseInt(t[1])
    }

    function l() {
        e(".front-page").attr("id", "particles"), e(".front-page").empty();
        var r = e(".homeVideoPlayer"), i;
        r.length > 0 && (i = new u(r.last()));
        var f = function () {
            var e = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;
            e || (r.css({display: "none"}), i.video.pause(), i.video.currentTime = 0, a.unpause())
        };
        t.introTextResized.add(function (t, n) {
            0;
            var r = 38;
            TweenLite.to(e(".homeButtons"), .3, {
                paddingTop: n + r,
                width: t,
                marginLeft: -(t * .5),
                marginTop: -(n * .5)
            })
        }), TweenLite.set(e(".homeButtons #work-btn"), {
            x: 40,
            opacity: 0
        }), TweenLite.set(e(".homeButtons #reel-btn"), {
            x: -40,
            opacity: 0
        }), TweenLite.set(e(".homeButtons .divider"), {scaleX: 0}), e(".homeButtons").on("mouseover", function () {
            e("#work-btn").addClass("btn-hover")
        }), a = new n({
            defaultPreset: "garcia_6",
            bgColor: 16777215,
            delayParticlesFrames: 100,
            degradeAmount: 4
        }), a.particlesPaused = !0;
        var l = o.throttle(a.renderOnce.bind(a), 100, {leading: !0, trailing: !0});
        t.onResize.add(function () {
            t.menuOpen && l()
        }), t.introTextAnimatedIn.add(function () {
            a.particlesPaused = !1, TweenLite.to(e(".homeButtons .divider"), .5, {
                scaleX: 1,
                ease: Expo.easeOut
            }), TweenLite.to(e(".homeButtons #work-btn"), .75, {
                delay: .5,
                x: 0,
                opacity: 1,
                ease: Expo.easeOut
            }), TweenLite.to(e(".homeButtons #reel-btn"), .75, {delay: .7, x: 0, opacity: 1, ease: Expo.easeOut})
        }), t.navOpened.add(function () {
            e(".homeButtons")[0].style.pointerEvents = "none", a.pause()
        }), t.navClosed.add(function () {
            e(".homeButtons")[0].style.pointerEvents = "visible", a.unpause()
        }), e(".homeButtons").on("click", function (t) {
            s.trackEvent("Navigation", "IntroClick", "View Work"), a.pause(), TweenLite.to(e("main.front-page"), .3, {
                autoAlpha: 0,
                ease: Expo.easeOut
            })
        }), r.on("fullscreenchange", f), r.on("webkitfullscreenchange", f), r.on("mozfullscreenchange", f), r.on("MSFullscreenChange", f), e("#reel-btn").click(function (e) {
            return e.stopPropagation(), a.pause(), r.css({display: "block"}), i.toggleFullscreen(), i.play(), !1
        })
    }

    var a;
    l()
}), define("particle", function () {
});
